var om = Object.defineProperty;
var sm = (o) => {
  throw TypeError(o);
};
var ab = (o, t, i) => t in o ? om(o, t, { enumerable: !0, configurable: !0, writable: !0, value: i }) : o[t] = i;
var c = (o, t) => om(o, "name", { value: t, configurable: !0 });
var sp = (o, t, i) => ab(o, typeof t != "symbol" ? t + "" : t, i), ap = (o, t, i) => t.has(o) || sm("Cannot " + i);
var u = (o, t, i) => (ap(o, t, "read from private field"), i ? i.call(o) : t.get(o)), T = (o, t, i) => t.has(o) ? sm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), E = (o, t, i, r) => (ap(o, t, "write to private field"), r ? r.call(o, i) : t.set(o, i), i), P = (o, t, i) => (ap(o, t, "access private method"), i);
var Xc = (o, t, i, r) => ({
  set _(n) {
    E(o, t, n, i);
  },
  get _() {
    return u(o, t, r);
  }
});
import { h as K, configureLocalization as cb, e as lb, r as Pt, u as db, f as hb, i as vt, ke as y, S as ub, si as pb, D as L, R as bd, Oe as am, msg as C, localized as st, str as bt, Q as yb } from "./es/locales/sv-SE.js";
import { __webpack_exports__getDocument as wb, __webpack_exports__GlobalWorkerOptions as fb, __webpack_exports__AnnotationEditorType as mb, __webpack_exports__InvalidPDFException as vb, __webpack_exports__MissingPDFException as gb, __webpack_exports__UnexpectedResponseException as bb, __webpack_exports__version as xb, __webpack_exports__build as Cb } from "./es/pdfjs-dist/build/pdf.mjs.js";
import { getDefaultExportFromCjs as kb, commonjsGlobal as Id } from "./es/react.js";
var Mt = /* @__PURE__ */ ((o) => (o.ChatRoom = "edb400ac-839b-45a7-b2a8-6a01820d1c44", o.PrivateChat = "7e14f418-8f15-46f4-b182-f619b671e470", o.BotChat = "2352a1c6-abc6-420e-8b85-ca7d5aed8779", o))(Mt || {}), og = /* @__PURE__ */ ((o) => (o.ChatRoom = "chat_room", o.PrivateChat = "private_chat", o.BotChat = "bot_chat", o))(og || {}), Mr = /* @__PURE__ */ ((o) => (o.None = "none", o.Read = "read", o.Write = "write", o.Admin = "admin", o))(Mr || {}), an = /* @__PURE__ */ ((o) => (o.List = "list", o.Read = "read", o.Create = "create", o.Update = "update", o.Delete = "delete", o.Admin = "admin", o))(an || {}), gi = /* @__PURE__ */ ((o) => (o.Unknown = "unknown", o.Chat = "chat", o.Comments = "comments", o.Files = "files", o.Posts = "posts", o))(gi || {}), sg = /* @__PURE__ */ ((o) => (o.Chat = "d65dd4bc-418e-403c-9f56-f9cf4da931ed", o.Comments = "88f96a08-c6c1-4eac-a0bd-5bf8fba1a3fd", o.Files = "523edd88-4bbf-4547-b60f-2859a6d2ddc1", o.Posts = "5ebfa152-de85-48da-82dd-30a1b560c313", o))(sg || {}), lr = /* @__PURE__ */ ((o) => (o.App = "app", o.File = "file", o.Message = "message", o.User = "user", o.Comment = "comment", o.Post = "post", o))(lr || {});
function eh(o) {
  return Object.prototype.toString.call(o) === "[object Object]";
}
c(eh, "isObject$1");
function ih(o) {
  if (eh(o) === !1) return !1;
  const t = o.constructor;
  if (t === void 0) return !0;
  const i = t.prototype;
  return !(eh(i) === !1 || Object.prototype.hasOwnProperty.call(i, "isPrototypeOf") === !1);
}
c(ih, "isPlainObject$1");
function Ep(o, t, i = !1) {
  o = o || {}, t = t || {};
  const r = {};
  for (const n in o)
    Object.prototype.hasOwnProperty.call(o, n) && (r[n] = o[n]);
  for (const n in t)
    Object.prototype.hasOwnProperty.call(t, n) && (i && r[n] && ih(r[n]) && ih(t[n]) ? r[n] = Ep(r[n], t[n], i) : r[n] = t[n]);
  return r;
}
c(Ep, "assign");
function ll(o, t, i = !1, r = !1) {
  if (!r && (!ih(o) || !ih(t)) || r && (!eh(o) || !eh(t)))
    return !1;
  const n = Object.getOwnPropertyNames(o), s = Object.getOwnPropertyNames(t);
  if (!i && n.length !== s.length)
    return !1;
  for (let a = 0; a < n.length; a++) {
    const l = n[a], d = o[l], h = t[l];
    if (d !== h && !ll(d, h, i))
      return !1;
  }
  return !0;
}
c(ll, "eqObjects");
function $b(o) {
  return Object.fromEntries(
    Object.entries(o).map(([t, i]) => [i, t])
  );
}
c($b, "reversedProperties");
function ag(o) {
  return { ...o, ...$b(o) };
}
c(ag, "includeReversedProperties");
function cg(o) {
  return o.charAt(0).toUpperCase() + o.substring(1).toLowerCase();
}
c(cg, "toUpperCaseFirst");
const Eb = '\\s,.:;"', _b = new RegExp(`^|[${Eb}]|$`, "g");
function lg(o) {
  return o.length > 0 ? o.replace(/([a-z\d])([A-Z]+)/g, "$1-$2").replace(/_|\s+/g, "-").toLowerCase() : o;
}
c(lg, "toKebabCase");
function Pb(o, t = 2) {
  if (!o)
    return null;
  let i = "";
  const r = o.split(_b).filter((n) => n);
  return r.length == 1 ? i = r[0] : r.forEach((n) => {
    i += n.charAt(0);
  }), i.substring(0, t).toUpperCase();
}
c(Pb, "getInitials");
const Sb = {
  //mode: 'cors', // no-cors, *cors, same-origin
  // cache: 'default' means the server is in control of the caching which is preferred instead of using 'reload'
  //cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
  credentials: "omit",
  // include, *same-origin, omit
  headers: {
    // https://stackoverflow.com/questions/8163703/cross-domain-ajax-doesnt-send-x-requested-with-header
    "X-Requested-With": "XMLHttpRequest"
  },
  redirect: "manual"
  // manual, *follow, error
  //referrerPolicy: 'no-referrer-when-downgrade', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
};
function rh() {
  return ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
}
c(rh, "S4");
function Lb(o) {
  if (o && o.ok && o.body) {
    const t = o.body.getReader();
    return new ReadableStream({
      start(i) {
        const r = /* @__PURE__ */ c(() => t.read().then(({ done: n, value: s }) => {
          if (n) {
            i.close();
            return;
          }
          return i.enqueue(s), r();
        }), "pump");
        return r();
      }
    });
  } else
    throw new Error("Could not parse text stream");
}
c(Lb, "getTextStreamFromResponse");
function Mb(o) {
  let t;
  try {
    if (t = window[o], t) {
      const i = "__storage_test__";
      t.setItem(i, i), t.removeItem(i);
    }
  } catch (i) {
    i instanceof DOMException && i.name === "QuotaExceededError" && // acknowledge QuotaExceededError only if there's something already stored
    t && t.length !== 0 && console.error("Storage not available:", o);
  }
  return t;
}
c(Mb, "getStorage");
var Xo;
let dg = (Xo = class extends Event {
  constructor(t, i, r) {
    super("context-request", { bubbles: !0, composed: !0 }), this.context = t, this.callback = i, this.subscribe = r ?? !1;
  }
}, c(Xo, "s"), Xo);
var Jo;
let cn = (Jo = class {
  constructor(t, i, r, n) {
    if (this.subscribe = !1, this.provided = !1, this.value = void 0, this.t = (s, a) => {
      this.unsubscribe && (this.unsubscribe !== a && (this.provided = !1, this.unsubscribe()), this.subscribe || this.unsubscribe()), this.value = s, this.host.requestUpdate(), this.provided && !this.subscribe || (this.provided = !0, this.callback && this.callback(s, a)), this.unsubscribe = a;
    }, this.host = t, i.context !== void 0) {
      const s = i;
      this.context = s.context, this.callback = s.callback, this.subscribe = s.subscribe ?? !1;
    } else this.context = i, this.callback = r, this.subscribe = n ?? !1;
    this.host.addController(this);
  }
  hostConnected() {
    this.dispatchRequest();
  }
  hostDisconnected() {
    this.unsubscribe && (this.unsubscribe(), this.unsubscribe = void 0);
  }
  dispatchRequest() {
    this.host.dispatchEvent(new dg(this.context, this.t, this.subscribe));
  }
}, c(Jo, "s"), Jo);
const Zw = class Zw {
  get value() {
    return this.o;
  }
  set value(t) {
    this.setValue(t);
  }
  setValue(t, i = !1) {
    const r = i || !Object.is(t, this.o);
    this.o = t, r && this.updateObservers();
  }
  constructor(t) {
    this.subscriptions = /* @__PURE__ */ new Map(), this.updateObservers = () => {
      for (const [i, { disposer: r }] of this.subscriptions) i(this.o, r);
    }, t !== void 0 && (this.value = t);
  }
  addCallback(t, i, r) {
    if (!r) return void t(this.value);
    this.subscriptions.has(t) || this.subscriptions.set(t, { disposer: /* @__PURE__ */ c(() => {
      this.subscriptions.delete(t);
    }, "disposer"), consumerHost: i });
    const { disposer: n } = this.subscriptions.get(t);
    t(this.value, n);
  }
  clearCallbacks() {
    this.subscriptions.clear();
  }
};
c(Zw, "s");
let _p = Zw;
var ts;
let Tb = (ts = class extends Event {
  constructor(t) {
    super("context-provider", { bubbles: !0, composed: !0 }), this.context = t;
  }
}, c(ts, "e"), ts);
var es;
let Pp = (es = class extends _p {
  constructor(t, i, r) {
    var n, s;
    super(i.context !== void 0 ? i.initialValue : r), this.onContextRequest = (a) => {
      const l = a.composedPath()[0];
      a.context === this.context && l !== this.host && (a.stopPropagation(), this.addCallback(a.callback, l, a.subscribe));
    }, this.onProviderRequest = (a) => {
      const l = a.composedPath()[0];
      if (a.context !== this.context || l === this.host) return;
      const d = /* @__PURE__ */ new Set();
      for (const [h, { consumerHost: w }] of this.subscriptions) d.has(h) || (d.add(h), w.dispatchEvent(new dg(this.context, h, !0)));
      a.stopPropagation();
    }, this.host = t, i.context !== void 0 ? this.context = i.context : this.context = i, this.attachListeners(), (s = (n = this.host).addController) == null || s.call(n, this);
  }
  attachListeners() {
    this.host.addEventListener("context-request", this.onContextRequest), this.host.addEventListener("context-provider", this.onProviderRequest);
  }
  hostConnected() {
    this.host.dispatchEvent(new Tb(this.context));
  }
}, c(es, "i"), es);
function kn({ context: o }) {
  return (t, i) => {
    const r = /* @__PURE__ */ new WeakMap();
    if (typeof i == "object") return i.addInitializer(function() {
      r.set(this, new Pp(this, { context: o }));
    }), { get() {
      return t.get.call(this);
    }, set(n) {
      var s;
      return (s = r.get(this)) == null || s.setValue(n), t.set.call(this, n);
    }, init(n) {
      var s;
      return (s = r.get(this)) == null || s.setValue(n), n;
    } };
    {
      t.constructor.addInitializer((a) => {
        r.set(a, new Pp(a, { context: o }));
      });
      const n = Object.getOwnPropertyDescriptor(t, i);
      let s;
      if (n === void 0) {
        const a = /* @__PURE__ */ new WeakMap();
        s = { get() {
          return a.get(this);
        }, set(l) {
          r.get(this).setValue(l), a.set(this, l);
        }, configurable: !0, enumerable: !0 };
      } else {
        const a = n.set;
        s = { ...n, set(l) {
          r.get(this).setValue(l), a == null || a.call(this, l);
        } };
      }
      return void Object.defineProperty(t, i, s);
    }
  };
}
c(kn, "e$3");
function Kt({ context: o, subscribe: t }) {
  return (i, r) => {
    typeof r == "object" ? r.addInitializer(function() {
      new cn(this, { context: o, callback: /* @__PURE__ */ c((n) => {
        i.set.call(this, n);
      }, "callback"), subscribe: t });
    }) : i.constructor.addInitializer((n) => {
      new cn(n, { context: o, callback: /* @__PURE__ */ c((s) => {
        n[r] = s;
      }, "callback"), subscribe: t });
    });
  };
}
c(Kt, "c");
const Yw = class Yw extends Event {
  /**
   *
   * @param context the context which this provider can provide
   */
  constructor(t) {
    super("context-provider", { bubbles: !0, composed: !0 }), this.context = t;
  }
};
c(Yw, "ContextProviderEvent");
let Sp = Yw;
const Xw = class Xw extends Pp {
  constructor(t, i, r) {
    i.context !== void 0 ? super(t, i) : super(t, i, r), i.context !== void 0 ? this._context = i.context : this._context = i, this.isAttached = !0, this.host instanceof K || this.dispatchWhenConnected();
  }
  dispatchWhenConnected() {
    this.isAttached && (this.host.isConnected ? this.host.dispatchEvent(new Sp(this._context)) : requestAnimationFrame(this.dispatchWhenConnected));
  }
  detachListeners() {
    this.isAttached = !1, this.host.removeEventListener("context-request", this.onContextRequest), this.host.removeEventListener("context-provider", this.onProviderRequest);
  }
};
c(Xw, "WyContextProvider");
let nh = Xw;
const ne = Symbol.for("weavy-context");
function Ab(o, t) {
  return new nh(o, { context: ne, initialValue: t });
}
c(Ab, "createWeavyContextProvider");
const cm = Ab(document.documentElement), Fe = window.navigator.userAgent, hg = Fe.includes("iPad") || Fe.includes("Android") && !Fe.includes("Mobi") || !1, zb = Fe.includes("Mobi") || hg || !1, Rb = !zb && !hg, lm = Fe.includes("Windows") ? "Windows" : Fe.includes("Macintosh") ? "Mac" : Fe.includes("iPad") || Fe.includes("iPhone") || Fe.includes("iPod") ? "iOS" : Fe.includes("Android") ? "Android" : void 0;
lm === "Android" && Fe.includes("; wv") || lm === "iOS" && Fe.includes("Safari");
const Ib = /Chrome\/[0-9]/.test(Fe) && !/Chromium\/[0-9]/.test(Fe) && !/Edg.*\/[0-9]/.test(Fe), Jw = class Jw extends Error {
  constructor() {
    super("Instance destroyed"), this.name = "DestroyError";
  }
};
c(Jw, "DestroyError");
let Bt = Jw;
const ug = "en", Ob = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    constructor() {
      super(...arguments), this._locales = /* @__PURE__ */ new Map([
        ["sv-SE", () => import(
          /* webpackIgnore: true */
          /* @vite-ignore */
          new URL("./es/locales/sv-SE.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
        ).then((r) => r.svSE)]
      ]), this._locale = t.sourceLocale;
    }
    /**
     * The locale used in the Weavy source.
     */
    static get sourceLocale() {
      try {
        return ug;
      } catch {
        return "";
      }
    }
    get locales() {
      return Array.from(this._locales.entries());
    }
    set locales(r) {
      if (this.isDestroyed)
        throw new Bt();
      if (this.localization)
        throw new Error("Locales may only be configured once");
      if (!Array.isArray(r))
        throw new TypeError("Provided locales have invalid format.");
      r.forEach((n) => {
        if (!Array.isArray(n) || n.length !== 2 || typeof n[0] != "string")
          throw new TypeError("Invalid locale provided: " + n[0]);
        this._locales.set(...n);
      }), this.configureLocalization();
    }
    /**
     * Selected locale. The locale must be pre configured in `.locales`.
     */
    get locale() {
      return this._locale;
    }
    set locale(r) {
      if (this.isDestroyed)
        throw new Bt();
      !this.locale && !r || (r || (r = t.sourceLocale), this._locale = r, this.localization ? this.localization.setLocale(this.locale) : queueMicrotask(() => {
        this.localization ? this.localization.setLocale(this.locale) : this.locale !== t.sourceLocale && (this._locales.has(this.locale) && this.configureLocalization(), this.localization ? this.localization.setLocale(this.locale) : console.error(
          this.weavyId,
          `You need to configure additional languages in config to use '${r}'.`
        ));
      }));
    }
    async loadLocale(r) {
      var n;
      if (this.isDestroyed)
        throw new Bt();
      if ((n = this._locales) != null && n.has(r)) {
        const s = this._locales.get(r);
        return console.log(
          this.weavyId,
          typeof s == "function" ? "loading locale" : "preloaded locale",
          r
        ), await (typeof s == "function" ? s() : s);
      } else
        throw new Error("The requested locale is not configured");
    }
    configureLocalization() {
      var r;
      if (this.isDestroyed)
        throw new Bt();
      if ((r = this._locales) != null && r.size && !this.localization) {
        const n = this._locales.keys();
        console.log(this.weavyId, "Configuring locales", n);
        const { getLocale: s, setLocale: a } = cb({
          sourceLocale: t.sourceLocale,
          targetLocales: n,
          loadLocale: /* @__PURE__ */ c((l) => this.loadLocale(l), "loadLocale")
        });
        this.localization = {
          getLocale: s,
          setLocale: a
        };
      }
    }
  }, c(t, "WeavyLocalization"), t;
}, "WeavyLocalizationMixin"), Db = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), this._networkEvents = /* @__PURE__ */ new Set(), this._connectionState = "connecting", this._serverState = "ok", this._networkState = window.navigator.onLine ? "online" : "offline", this._networkStateIsPending = !1, window.addEventListener("online", () => {
        this.networkState = "online";
      }), window.addEventListener("offline", () => {
        this.networkState = "offline", this.networkStateIsPending = !1;
      });
    }
    get networkState() {
      return this._networkState;
    }
    set networkState(r) {
      this._networkState = r, this.triggerNetworkChange();
    }
    get serverState() {
      return this._serverState;
    }
    set serverState(r) {
      this._serverState = r, this.triggerNetworkChange();
    }
    get connectionState() {
      return this._connectionState;
    }
    set connectionState(r) {
      this._connectionState = r, this.triggerNetworkChange();
    }
    get networkStateIsPending() {
      return this._networkStateIsPending;
    }
    set networkStateIsPending(r) {
      this._networkStateIsPending = r, this.triggerNetworkChange();
    }
    get network() {
      return {
        state: this._networkState === "online" ? this._connectionState === "connected" || this._serverState === "ok" ? "online" : "unreachable" : "offline",
        isPending: this._networkStateIsPending
      };
    }
    triggerNetworkChange() {
      const r = this.network;
      this._networkEvents.forEach((n) => {
        n(r);
      });
    }
    addNetworkListener(r) {
      this._networkEvents.add(r);
    }
    removeNetworkListener(r) {
      this._networkEvents.delete(r);
    }
  }, c(t, "WeavyNetwork"), t;
}, "WeavyNetworkMixin"), Fb = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // AUTHENTICATION
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), this._whenUrlAndTokenFactory = new Promise((n) => {
        this._resolveUrlAndTokenFactory = n;
      }), this._whenTokenIsValid = new Promise((n) => {
        this._resolveTokenIsValid = n;
      }), this._tokenPromise = null, this._token = "", this._validTokenFromFactory = async (n = !1) => {
        var l, d;
        const s = [this.whenUrlAndTokenFactory()];
        this.tokenFactoryRetryDelay !== 1 / 0 && s.push(new Promise((h) => setTimeout(h, this.tokenFactoryRetryDelay))), await Promise.race(s);
        const a = await ((l = this.tokenFactory) == null ? void 0 : l.call(this, n));
        if (!this._validateToken(a) && (this._whenUrlAndTokenFactory = new Promise((h) => {
          this._resolveUrlAndTokenFactory = h;
        }), !n))
          return await this._validTokenFromFactory(!1);
        if (!a)
          throw new TypeError("Could not get a valid token from tokenFactory.");
        return (d = this._resolveUrlAndTokenFactory) == null || d.call(this, !0), a;
      }, this.whenUrl().then(() => {
        var n;
        this.url && this.tokenFactory && ((n = this._resolveUrlAndTokenFactory) == null || n.call(this, !0));
      });
    }
    async whenUrlAndTokenFactory() {
      await this._whenUrlAndTokenFactory;
    }
    async whenTokenIsValid() {
      await this._whenTokenIsValid;
    }
    /**
     * Async function returning an `access_token` string for _your_ authenticated user. A boolean `refresh` parameter is provided to let you now if a fresh token is needed from Weavy.
     */
    get tokenFactory() {
      return this._tokenFactory;
    }
    set tokenFactory(r) {
      var n;
      if (this.isDestroyed)
        throw new Bt();
      this._tokenFactory && this._tokenFactory !== r && this.whenUrlAndTokenFactory().then(() => {
        this.queryClient.refetchQueries({ stale: !0 });
      }), this._tokenFactory = r, this.url && this._tokenFactory && ((n = this._resolveUrlAndTokenFactory) == null || n.call(this, !0));
    }
    /**
     * An URL to an endpoint returning an JSON data containing an `access_token` string property for _your_ authenticated user. A boolean `refresh=true` query parameter is provided in the request to let you now if when a fresh token is needed from Weavy.
     */
    get tokenUrl() {
      return this._tokenUrl;
    }
    set tokenUrl(r) {
      if (this.isDestroyed)
        throw new Bt();
      try {
        if (typeof r == "string")
          r && (this._tokenUrl = new URL(r, window.location.toString()));
        else if (r instanceof URL)
          this._tokenUrl = r;
        else if (r !== void 0)
          throw -1;
      } catch (n) {
        throw new Error("Invalid url", n);
      }
      this._tokenUrl && !this.tokenFactory && (this.tokenFactory = async (n) => {
        if (!this.tokenUrl)
          throw new Error("tokenURL property is not valid");
        const s = new URL(this.tokenUrl);
        n ? s.searchParams.set("refresh", "true") : s.searchParams.delete("refresh");
        const a = await fetch(s);
        if (a.ok) {
          const l = await a.json();
          if (l.access_token === void 0)
            throw new Error("Token response does not contain required property: access_token");
          return l.access_token;
        } else
          throw new Error("Could not get access token from server!");
      });
    }
    _validateToken(r) {
      var n;
      if (!r)
        return !1;
      if (typeof r != "string")
        throw new TypeError(`You have provided an invalid string access token of type ${typeof r}.`);
      if (typeof r == "string" && !r.startsWith("wyu_"))
        throw r.startsWith("wys_") ? new TypeError("You have provided an API key for authentication. Provide a user access token instead.") : new TypeError("You have provided an invalid string as access token.");
      return (n = this._resolveTokenIsValid) == null || n.call(this, r), !0;
    }
    async getToken(r = !1) {
      if (this.isDestroyed)
        throw new Bt();
      if (this._token && !r)
        return this._token;
      if (await this.whenUrlAndTokenFactory(), this._tokenPromise)
        return await this._tokenPromise;
      this._tokenPromise = new Promise((n, s) => {
        this._validTokenFromFactory(r).then(n).catch(s), this.tokenFactoryTimeout !== 1 / 0 && setTimeout(() => s(new Error("Token factory timeout.")), this.tokenFactoryTimeout), window.addEventListener("offline", () => s(new Error("Network changed.")), { once: !0 }), window.addEventListener("online", () => s(new Error("Network changed.")), { once: !0 });
      });
      try {
        const n = await this._tokenPromise;
        return this._tokenPromise = null, this._token = n, this._token;
      } catch (n) {
        throw this._tokenPromise = null, console.error(n), n;
      }
    }
  }, c(t, "WeavyAuthentication"), t;
}, "WeavyAuthenticationMixin");
function cp(o) {
  throw new Error('Could not dynamically require "' + o + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
c(cp, "commonjsRequire");
var pg = { exports: {} };
(function(o, t) {
  var i;
  i = /* @__PURE__ */ c(() => (() => {
    var r = { d: /* @__PURE__ */ c((q, p) => {
      for (var x in p) r.o(p, x) && !r.o(q, x) && Object.defineProperty(q, x, { enumerable: !0, get: p[x] });
    }, "d") };
    r.g = function() {
      if (typeof globalThis == "object") return globalThis;
      try {
        return this || new Function("return this")();
      } catch {
        if (typeof window == "object") return window;
      }
    }(), r.o = (q, p) => Object.prototype.hasOwnProperty.call(q, p), r.r = (q) => {
      typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(q, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(q, "t", { value: !0 });
    };
    var n, s = {};
    r.r(s), r.d(s, { AbortError: /* @__PURE__ */ c(() => d, "AbortError"), DefaultHttpClient: /* @__PURE__ */ c(() => Ot, "DefaultHttpClient"), HttpClient: /* @__PURE__ */ c(() => $, "HttpClient"), HttpError: /* @__PURE__ */ c(() => a, "HttpError"), HttpResponse: /* @__PURE__ */ c(() => g, "HttpResponse"), HttpTransportType: /* @__PURE__ */ c(() => At, "HttpTransportType"), HubConnection: /* @__PURE__ */ c(() => Pi, "HubConnection"), HubConnectionBuilder: /* @__PURE__ */ c(() => Pu, "HubConnectionBuilder"), HubConnectionState: /* @__PURE__ */ c(() => xt, "HubConnectionState"), JsonHubProtocol: /* @__PURE__ */ c(() => Ad, "JsonHubProtocol"), LogLevel: /* @__PURE__ */ c(() => n, "LogLevel"), MessageType: /* @__PURE__ */ c(() => nt, "MessageType"), NullLogger: /* @__PURE__ */ c(() => O, "NullLogger"), Subject: /* @__PURE__ */ c(() => ui, "Subject"), TimeoutError: /* @__PURE__ */ c(() => l, "TimeoutError"), TransferFormat: /* @__PURE__ */ c(() => zt, "TransferFormat"), VERSION: /* @__PURE__ */ c(() => k, "VERSION") });
    const Su = class Su extends Error {
      constructor(p, x) {
        const M = new.target.prototype;
        super(`${p}: Status code '${x}'`), this.statusCode = x, this.__proto__ = M;
      }
    };
    c(Su, "i");
    let a = Su;
    const Lu = class Lu extends Error {
      constructor(p = "A timeout occurred.") {
        const x = new.target.prototype;
        super(p), this.__proto__ = x;
      }
    };
    c(Lu, "n");
    let l = Lu;
    const Mu = class Mu extends Error {
      constructor(p = "An abort occurred.") {
        const x = new.target.prototype;
        super(p), this.__proto__ = x;
      }
    };
    c(Mu, "r");
    let d = Mu;
    const Tu = class Tu extends Error {
      constructor(p, x) {
        const M = new.target.prototype;
        super(p), this.transport = x, this.errorType = "UnsupportedTransportError", this.__proto__ = M;
      }
    };
    c(Tu, "o");
    let h = Tu;
    const Au = class Au extends Error {
      constructor(p, x) {
        const M = new.target.prototype;
        super(p), this.transport = x, this.errorType = "DisabledTransportError", this.__proto__ = M;
      }
    };
    c(Au, "h");
    let w = Au;
    const zu = class zu extends Error {
      constructor(p, x) {
        const M = new.target.prototype;
        super(p), this.transport = x, this.errorType = "FailedToStartTransportError", this.__proto__ = M;
      }
    };
    c(zu, "c");
    let m = zu;
    const Ru = class Ru extends Error {
      constructor(p) {
        const x = new.target.prototype;
        super(p), this.errorType = "FailedToNegotiateWithServerError", this.__proto__ = x;
      }
    };
    c(Ru, "a");
    let f = Ru;
    const Iu = class Iu extends Error {
      constructor(p, x) {
        const M = new.target.prototype;
        super(p), this.innerErrors = x, this.__proto__ = M;
      }
    };
    c(Iu, "l");
    let b = Iu;
    const Ou = class Ou {
      constructor(p, x, M) {
        this.statusCode = p, this.statusText = x, this.content = M;
      }
    };
    c(Ou, "u");
    let g = Ou;
    const Du = class Du {
      get(p, x) {
        return this.send({ ...x, method: "GET", url: p });
      }
      post(p, x) {
        return this.send({ ...x, method: "POST", url: p });
      }
      delete(p, x) {
        return this.send({ ...x, method: "DELETE", url: p });
      }
      getCookieString(p) {
        return "";
      }
    };
    c(Du, "d");
    let $ = Du;
    (function(q) {
      q[q.Trace = 0] = "Trace", q[q.Debug = 1] = "Debug", q[q.Information = 2] = "Information", q[q.Warning = 3] = "Warning", q[q.Error = 4] = "Error", q[q.Critical = 5] = "Critical", q[q.None = 6] = "None";
    })(n || (n = {}));
    const Fu = class Fu {
      constructor() {
      }
      log(p, x) {
      }
    };
    c(Fu, "f");
    let O = Fu;
    O.instance = new O();
    const k = "8.0.7", Nu = class Nu {
      static isRequired(p, x) {
        if (p == null) throw new Error(`The '${x}' argument is required.`);
      }
      static isNotEmpty(p, x) {
        if (!p || p.match(/^\s*$/)) throw new Error(`The '${x}' argument should not be empty.`);
      }
      static isIn(p, x, M) {
        if (!(p in x)) throw new Error(`Unknown ${M} value: ${p}.`);
      }
    };
    c(Nu, "w");
    let S = Nu;
    const _o = class _o {
      static get isBrowser() {
        return !_o.isNode && typeof window == "object" && typeof window.document == "object";
      }
      static get isWebWorker() {
        return !_o.isNode && typeof self == "object" && "importScripts" in self;
      }
      static get isReactNative() {
        return !_o.isNode && typeof window == "object" && window.document === void 0;
      }
      static get isNode() {
        return typeof process < "u" && process.release && process.release.name === "node";
      }
    };
    c(_o, "g");
    let _ = _o;
    function V(q, p) {
      let x = "";
      return I(q) ? (x = `Binary data of length ${q.byteLength}`, p && (x += `. Content: '${function(M) {
        const R = new Uint8Array(M);
        let H = "";
        return R.forEach((U) => {
          H += `0x${U < 16 ? "0" : ""}${U.toString(16)} `;
        }), H.substr(0, H.length - 1);
      }(q)}'`)) : typeof q == "string" && (x = `String data of length ${q.length}`, p && (x += `. Content: '${q}'`)), x;
    }
    c(V, "m");
    function I(q) {
      return q && typeof ArrayBuffer < "u" && (q instanceof ArrayBuffer || q.constructor && q.constructor.name === "ArrayBuffer");
    }
    c(I, "y");
    async function D(q, p, x, M, R, H) {
      const U = {}, [Y, tt] = A();
      U[Y] = tt, q.log(n.Trace, `(${p} transport) sending data. ${V(R, H.logMessageContent)}.`);
      const pt = I(R) ? "arraybuffer" : "text", St = await x.post(M, { content: R, headers: { ...U, ...H.headers }, responseType: pt, timeout: H.timeout, withCredentials: H.withCredentials });
      q.log(n.Trace, `(${p} transport) request complete. Response status: ${St.statusCode}.`);
    }
    c(D, "b");
    const Vu = class Vu {
      constructor(p, x) {
        this.i = p, this.h = x;
      }
      dispose() {
        const p = this.i.observers.indexOf(this.h);
        p > -1 && this.i.observers.splice(p, 1), this.i.observers.length === 0 && this.i.cancelCallback && this.i.cancelCallback().catch((x) => {
        });
      }
    };
    c(Vu, "v");
    let z = Vu;
    const Hu = class Hu {
      constructor(p) {
        this.l = p, this.out = console;
      }
      log(p, x) {
        if (p >= this.l) {
          const M = `[${(/* @__PURE__ */ new Date()).toISOString()}] ${n[p]}: ${x}`;
          switch (p) {
            case n.Critical:
            case n.Error:
              this.out.error(M);
              break;
            case n.Warning:
              this.out.warn(M);
              break;
            case n.Information:
              this.out.info(M);
              break;
            default:
              this.out.log(M);
          }
        }
      }
    };
    c(Hu, "E");
    let F = Hu;
    function A() {
      let q = "X-SignalR-User-Agent";
      return _.isNode && (q = "User-Agent"), [q, N(k, G(), _.isNode ? "NodeJS" : "Browser", et())];
    }
    c(A, "$");
    function N(q, p, x, M) {
      let R = "Microsoft SignalR/";
      const H = q.split(".");
      return R += `${H[0]}.${H[1]}`, R += ` (${q}; `, R += p && p !== "" ? `${p}; ` : "Unknown OS; ", R += `${x}`, R += M ? `; ${M}` : "; Unknown Runtime Version", R += ")", R;
    }
    c(N, "C");
    function G() {
      if (!_.isNode) return "";
      switch (process.platform) {
        case "win32":
          return "Windows NT";
        case "darwin":
          return "macOS";
        case "linux":
          return "Linux";
        default:
          return process.platform;
      }
    }
    c(G, "S");
    function et() {
      if (_.isNode) return process.versions.node;
    }
    c(et, "k");
    function lt(q) {
      return q.stack ? q.stack : q.message ? q.message : `${q}`;
    }
    c(lt, "P");
    const Bu = class Bu extends $ {
      constructor(p) {
        if (super(), this.u = p, typeof fetch > "u" || _.isNode) {
          const x = cp;
          this.p = new (x("tough-cookie")).CookieJar(), typeof fetch > "u" ? this.m = x("node-fetch") : this.m = fetch, this.m = x("fetch-cookie")(this.m, this.p);
        } else this.m = fetch.bind(function() {
          if (typeof globalThis < "u") return globalThis;
          if (typeof self < "u") return self;
          if (typeof window < "u") return window;
          if (r.g !== void 0) return r.g;
          throw new Error("could not find global");
        }());
        if (typeof AbortController > "u") {
          const x = cp;
          this.v = x("abort-controller");
        } else this.v = AbortController;
      }
      async send(p) {
        if (p.abortSignal && p.abortSignal.aborted) throw new d();
        if (!p.method) throw new Error("No method defined.");
        if (!p.url) throw new Error("No url defined.");
        const x = new this.v();
        let M;
        p.abortSignal && (p.abortSignal.onabort = () => {
          x.abort(), M = new d();
        });
        let R, H = null;
        if (p.timeout) {
          const tt = p.timeout;
          H = setTimeout(() => {
            x.abort(), this.u.log(n.Warning, "Timeout from HTTP request."), M = new l();
          }, tt);
        }
        p.content === "" && (p.content = void 0), p.content && (p.headers = p.headers || {}, I(p.content) ? p.headers["Content-Type"] = "application/octet-stream" : p.headers["Content-Type"] = "text/plain;charset=UTF-8");
        try {
          R = await this.m(p.url, { body: p.content, cache: "no-cache", credentials: p.withCredentials === !0 ? "include" : "same-origin", headers: { "X-Requested-With": "XMLHttpRequest", ...p.headers }, method: p.method, mode: "cors", redirect: "follow", signal: x.signal });
        } catch (tt) {
          throw M || (this.u.log(n.Warning, `Error from HTTP request. ${tt}.`), tt);
        } finally {
          H && clearTimeout(H), p.abortSignal && (p.abortSignal.onabort = null);
        }
        if (!R.ok) {
          const tt = await Ae(R, "text");
          throw new a(tt || R.statusText, R.status);
        }
        const U = Ae(R, p.responseType), Y = await U;
        return new g(R.status, R.statusText, Y);
      }
      getCookieString(p) {
        let x = "";
        return _.isNode && this.p && this.p.getCookies(p, (M, R) => x = R.join("; ")), x;
      }
    };
    c(Bu, "T");
    let at = Bu;
    function Ae(q, p) {
      let x;
      switch (p) {
        case "arraybuffer":
          x = q.arrayBuffer();
          break;
        case "text":
        default:
          x = q.text();
          break;
        case "blob":
        case "document":
        case "json":
          throw new Error(`${p} is not supported.`);
      }
      return x;
    }
    c(Ae, "I");
    const Uu = class Uu extends $ {
      constructor(p) {
        super(), this.u = p;
      }
      send(p) {
        return p.abortSignal && p.abortSignal.aborted ? Promise.reject(new d()) : p.method ? p.url ? new Promise((x, M) => {
          const R = new XMLHttpRequest();
          R.open(p.method, p.url, !0), R.withCredentials = p.withCredentials === void 0 || p.withCredentials, R.setRequestHeader("X-Requested-With", "XMLHttpRequest"), p.content === "" && (p.content = void 0), p.content && (I(p.content) ? R.setRequestHeader("Content-Type", "application/octet-stream") : R.setRequestHeader("Content-Type", "text/plain;charset=UTF-8"));
          const H = p.headers;
          H && Object.keys(H).forEach((U) => {
            R.setRequestHeader(U, H[U]);
          }), p.responseType && (R.responseType = p.responseType), p.abortSignal && (p.abortSignal.onabort = () => {
            R.abort(), M(new d());
          }), p.timeout && (R.timeout = p.timeout), R.onload = () => {
            p.abortSignal && (p.abortSignal.onabort = null), R.status >= 200 && R.status < 300 ? x(new g(R.status, R.statusText, R.response || R.responseText)) : M(new a(R.response || R.responseText || R.statusText, R.status));
          }, R.onerror = () => {
            this.u.log(n.Warning, `Error from HTTP request. ${R.status}: ${R.statusText}.`), M(new a(R.statusText, R.status));
          }, R.ontimeout = () => {
            this.u.log(n.Warning, "Timeout from HTTP request."), M(new l());
          }, R.send(p.content);
        }) : Promise.reject(new Error("No url defined.")) : Promise.reject(new Error("No method defined."));
      }
    };
    c(Uu, "_");
    let ve = Uu;
    const ju = class ju extends $ {
      constructor(p) {
        if (super(), typeof fetch < "u" || _.isNode) this.$ = new at(p);
        else {
          if (typeof XMLHttpRequest > "u") throw new Error("No usable HttpClient found.");
          this.$ = new ve(p);
        }
      }
      send(p) {
        return p.abortSignal && p.abortSignal.aborted ? Promise.reject(new d()) : p.method ? p.url ? this.$.send(p) : Promise.reject(new Error("No url defined.")) : Promise.reject(new Error("No method defined."));
      }
      getCookieString(p) {
        return this.$.getCookieString(p);
      }
    };
    c(ju, "H");
    let Ot = ju;
    const Po = class Po {
      static write(p) {
        return `${p}${Po.RecordSeparator}`;
      }
      static parse(p) {
        if (p[p.length - 1] !== Po.RecordSeparator) throw new Error("Message is incomplete.");
        const x = p.split(Po.RecordSeparator);
        return x.pop(), x;
      }
    };
    c(Po, "D");
    let Et = Po;
    Et.RecordSeparatorCode = 30, Et.RecordSeparator = String.fromCharCode(Et.RecordSeparatorCode);
    const Wu = class Wu {
      writeHandshakeRequest(p) {
        return Et.write(JSON.stringify(p));
      }
      parseHandshakeResponse(p) {
        let x, M;
        if (I(p)) {
          const U = new Uint8Array(p), Y = U.indexOf(Et.RecordSeparatorCode);
          if (Y === -1) throw new Error("Message is incomplete.");
          const tt = Y + 1;
          x = String.fromCharCode.apply(null, Array.prototype.slice.call(U.slice(0, tt))), M = U.byteLength > tt ? U.slice(tt).buffer : null;
        } else {
          const U = p, Y = U.indexOf(Et.RecordSeparator);
          if (Y === -1) throw new Error("Message is incomplete.");
          const tt = Y + 1;
          x = U.substring(0, tt), M = U.length > tt ? U.substring(tt) : null;
        }
        const R = Et.parse(x), H = JSON.parse(R[0]);
        if (H.type) throw new Error("Expected a handshake response from the server.");
        return [M, H];
      }
    };
    c(Wu, "R");
    let oe = Wu;
    var nt, xt;
    (function(q) {
      q[q.Invocation = 1] = "Invocation", q[q.StreamItem = 2] = "StreamItem", q[q.Completion = 3] = "Completion", q[q.StreamInvocation = 4] = "StreamInvocation", q[q.CancelInvocation = 5] = "CancelInvocation", q[q.Ping = 6] = "Ping", q[q.Close = 7] = "Close", q[q.Ack = 8] = "Ack", q[q.Sequence = 9] = "Sequence";
    })(nt || (nt = {}));
    const qu = class qu {
      constructor() {
        this.observers = [];
      }
      next(p) {
        for (const x of this.observers) x.next(p);
      }
      error(p) {
        for (const x of this.observers) x.error && x.error(p);
      }
      complete() {
        for (const p of this.observers) p.complete && p.complete();
      }
      subscribe(p) {
        return this.observers.push(p), new z(this, p);
      }
    };
    c(qu, "U");
    let ui = qu;
    const Qu = class Qu {
      constructor(p, x, M) {
        this.C = 1e5, this.S = [], this.k = 0, this.P = !1, this.T = 1, this.I = 0, this._ = 0, this.H = !1, this.D = p, this.R = x, this.C = M;
      }
      async A(p) {
        const x = this.D.writeMessage(p);
        let M = Promise.resolve();
        if (this.U(p)) {
          this.k++;
          let R = /* @__PURE__ */ c(() => {
          }, "t"), H = /* @__PURE__ */ c(() => {
          }, "i");
          I(x) ? this._ += x.byteLength : this._ += x.length, this._ >= this.C && (M = new Promise((U, Y) => {
            R = U, H = Y;
          })), this.S.push(new Ki(x, this.k, R, H));
        }
        try {
          this.H || await this.R.send(x);
        } catch {
          this.L();
        }
        await M;
      }
      N(p) {
        let x = -1;
        for (let M = 0; M < this.S.length; M++) {
          const R = this.S[M];
          if (R.q <= p.sequenceId) x = M, I(R.M) ? this._ -= R.M.byteLength : this._ -= R.M.length, R.j();
          else {
            if (!(this._ < this.C)) break;
            R.j();
          }
        }
        x !== -1 && (this.S = this.S.slice(x + 1));
      }
      W(p) {
        if (this.P) return p.type === nt.Sequence && (this.P = !1, !0);
        if (!this.U(p)) return !0;
        const x = this.T;
        return this.T++, x <= this.I ? (x === this.I && this.O(), !1) : (this.I = x, this.O(), !0);
      }
      F(p) {
        p.sequenceId > this.T ? this.R.stop(new Error("Sequence ID greater than amount of messages we've received.")) : this.T = p.sequenceId;
      }
      L() {
        this.H = !0, this.P = !0;
      }
      async B() {
        const p = this.S.length !== 0 ? this.S[0].q : this.k + 1;
        await this.R.send(this.D.writeMessage({ type: nt.Sequence, sequenceId: p }));
        const x = this.S;
        for (const M of x) await this.R.send(M.M);
        this.H = !1;
      }
      X(p) {
        p != null || (p = new Error("Unable to reconnect to server."));
        for (const x of this.S) x.J(p);
      }
      U(p) {
        switch (p.type) {
          case nt.Invocation:
          case nt.StreamItem:
          case nt.Completion:
          case nt.StreamInvocation:
          case nt.CancelInvocation:
            return !0;
          case nt.Close:
          case nt.Sequence:
          case nt.Ping:
          case nt.Ack:
            return !1;
        }
      }
      O() {
        this.V === void 0 && (this.V = setTimeout(async () => {
          try {
            this.H || await this.R.send(this.D.writeMessage({ type: nt.Ack, sequenceId: this.I }));
          } catch {
          }
          clearTimeout(this.V), this.V = void 0;
        }, 1e3));
      }
    };
    c(Qu, "L");
    let pi = Qu;
    const Ku = class Ku {
      constructor(p, x, M, R) {
        this.M = p, this.q = x, this.j = M, this.J = R;
      }
    };
    c(Ku, "N");
    let Ki = Ku;
    (function(q) {
      q.Disconnected = "Disconnected", q.Connecting = "Connecting", q.Connected = "Connected", q.Disconnecting = "Disconnecting", q.Reconnecting = "Reconnecting";
    })(xt || (xt = {}));
    const zd = class zd {
      static create(p, x, M, R, H, U, Y) {
        return new zd(p, x, M, R, H, U, Y);
      }
      constructor(p, x, M, R, H, U, Y) {
        this.K = 0, this.G = () => {
          this.u.log(n.Warning, "The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep");
        }, S.isRequired(p, "connection"), S.isRequired(x, "logger"), S.isRequired(M, "protocol"), this.serverTimeoutInMilliseconds = H ?? 3e4, this.keepAliveIntervalInMilliseconds = U ?? 15e3, this.Y = Y ?? 1e5, this.u = x, this.D = M, this.connection = p, this.Z = R, this.tt = new oe(), this.connection.onreceive = (tt) => this.et(tt), this.connection.onclose = (tt) => this.st(tt), this.it = {}, this.nt = {}, this.rt = [], this.ot = [], this.ht = [], this.ct = 0, this.lt = !1, this.ut = xt.Disconnected, this.dt = !1, this.ft = this.D.writeMessage({ type: nt.Ping });
      }
      get state() {
        return this.ut;
      }
      get connectionId() {
        return this.connection && this.connection.connectionId || null;
      }
      get baseUrl() {
        return this.connection.baseUrl || "";
      }
      set baseUrl(p) {
        if (this.ut !== xt.Disconnected && this.ut !== xt.Reconnecting) throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");
        if (!p) throw new Error("The HubConnection url must be a valid url.");
        this.connection.baseUrl = p;
      }
      start() {
        return this.wt = this.gt(), this.wt;
      }
      async gt() {
        if (this.ut !== xt.Disconnected) return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));
        this.ut = xt.Connecting, this.u.log(n.Debug, "Starting HubConnection.");
        try {
          await this.yt(), _.isBrowser && window.document.addEventListener("freeze", this.G), this.ut = xt.Connected, this.dt = !0, this.u.log(n.Debug, "HubConnection connected successfully.");
        } catch (p) {
          return this.ut = xt.Disconnected, this.u.log(n.Debug, `HubConnection failed to start successfully because of error '${p}'.`), Promise.reject(p);
        }
      }
      async yt() {
        this.bt = void 0, this.lt = !1;
        const p = new Promise((x, M) => {
          this.vt = x, this.Et = M;
        });
        await this.connection.start(this.D.transferFormat);
        try {
          let x = this.D.version;
          this.connection.features.reconnect || (x = 1);
          const M = { protocol: this.D.name, version: x };
          if (this.u.log(n.Debug, "Sending handshake request."), await this.$t(this.tt.writeHandshakeRequest(M)), this.u.log(n.Information, `Using HubProtocol '${this.D.name}'.`), this.Ct(), this.St(), this.kt(), await p, this.bt) throw this.bt;
          this.connection.features.reconnect && (this.Pt = new pi(this.D, this.connection, this.Y), this.connection.features.disconnected = this.Pt.L.bind(this.Pt), this.connection.features.resend = () => {
            if (this.Pt) return this.Pt.B();
          }), this.connection.features.inherentKeepAlive || await this.$t(this.ft);
        } catch (x) {
          throw this.u.log(n.Debug, `Hub handshake failed with error '${x}' during start(). Stopping HubConnection.`), this.Ct(), this.Tt(), await this.connection.stop(x), x;
        }
      }
      async stop() {
        const p = this.wt;
        this.connection.features.reconnect = !1, this.It = this._t(), await this.It;
        try {
          await p;
        } catch {
        }
      }
      _t(p) {
        if (this.ut === xt.Disconnected) return this.u.log(n.Debug, `Call to HubConnection.stop(${p}) ignored because it is already in the disconnected state.`), Promise.resolve();
        if (this.ut === xt.Disconnecting) return this.u.log(n.Debug, `Call to HttpConnection.stop(${p}) ignored because the connection is already in the disconnecting state.`), this.It;
        const x = this.ut;
        return this.ut = xt.Disconnecting, this.u.log(n.Debug, "Stopping HubConnection."), this.Ht ? (this.u.log(n.Debug, "Connection stopped during reconnect delay. Done reconnecting."), clearTimeout(this.Ht), this.Ht = void 0, this.Dt(), Promise.resolve()) : (x === xt.Connected && this.Rt(), this.Ct(), this.Tt(), this.bt = p || new d("The connection was stopped before the hub handshake could complete."), this.connection.stop(p));
      }
      async Rt() {
        try {
          await this.xt(this.At());
        } catch {
        }
      }
      stream(p, ...x) {
        const [M, R] = this.Ut(x), H = this.Lt(p, x, R);
        let U;
        const Y = new ui();
        return Y.cancelCallback = () => {
          const tt = this.Nt(H.invocationId);
          return delete this.it[H.invocationId], U.then(() => this.xt(tt));
        }, this.it[H.invocationId] = (tt, pt) => {
          pt ? Y.error(pt) : tt && (tt.type === nt.Completion ? tt.error ? Y.error(new Error(tt.error)) : Y.complete() : Y.next(tt.item));
        }, U = this.xt(H).catch((tt) => {
          Y.error(tt), delete this.it[H.invocationId];
        }), this.qt(M, U), Y;
      }
      $t(p) {
        return this.kt(), this.connection.send(p);
      }
      xt(p) {
        return this.Pt ? this.Pt.A(p) : this.$t(this.D.writeMessage(p));
      }
      send(p, ...x) {
        const [M, R] = this.Ut(x), H = this.xt(this.Mt(p, x, !0, R));
        return this.qt(M, H), H;
      }
      invoke(p, ...x) {
        const [M, R] = this.Ut(x), H = this.Mt(p, x, !1, R);
        return new Promise((U, Y) => {
          this.it[H.invocationId] = (pt, St) => {
            St ? Y(St) : pt && (pt.type === nt.Completion ? pt.error ? Y(new Error(pt.error)) : U(pt.result) : Y(new Error(`Unexpected message type: ${pt.type}`)));
          };
          const tt = this.xt(H).catch((pt) => {
            Y(pt), delete this.it[H.invocationId];
          });
          this.qt(M, tt);
        });
      }
      on(p, x) {
        p && x && (p = p.toLowerCase(), this.nt[p] || (this.nt[p] = []), this.nt[p].indexOf(x) === -1 && this.nt[p].push(x));
      }
      off(p, x) {
        if (!p) return;
        p = p.toLowerCase();
        const M = this.nt[p];
        if (M) if (x) {
          const R = M.indexOf(x);
          R !== -1 && (M.splice(R, 1), M.length === 0 && delete this.nt[p]);
        } else delete this.nt[p];
      }
      onclose(p) {
        p && this.rt.push(p);
      }
      onreconnecting(p) {
        p && this.ot.push(p);
      }
      onreconnected(p) {
        p && this.ht.push(p);
      }
      et(p) {
        if (this.Ct(), this.lt || (p = this.jt(p), this.lt = !0), p) {
          const x = this.D.parseMessages(p, this.u);
          for (const M of x) if (!this.Pt || this.Pt.W(M)) switch (M.type) {
            case nt.Invocation:
              this.Wt(M).catch((R) => {
                this.u.log(n.Error, `Invoke client method threw error: ${lt(R)}`);
              });
              break;
            case nt.StreamItem:
            case nt.Completion: {
              const R = this.it[M.invocationId];
              if (R) {
                M.type === nt.Completion && delete this.it[M.invocationId];
                try {
                  R(M);
                } catch (H) {
                  this.u.log(n.Error, `Stream callback threw error: ${lt(H)}`);
                }
              }
              break;
            }
            case nt.Ping:
              break;
            case nt.Close: {
              this.u.log(n.Information, "Close message received from server.");
              const R = M.error ? new Error("Server returned an error on close: " + M.error) : void 0;
              M.allowReconnect === !0 ? this.connection.stop(R) : this.It = this._t(R);
              break;
            }
            case nt.Ack:
              this.Pt && this.Pt.N(M);
              break;
            case nt.Sequence:
              this.Pt && this.Pt.F(M);
              break;
            default:
              this.u.log(n.Warning, `Invalid message type: ${M.type}.`);
          }
        }
        this.St();
      }
      jt(p) {
        let x, M;
        try {
          [M, x] = this.tt.parseHandshakeResponse(p);
        } catch (R) {
          const H = "Error parsing handshake response: " + R;
          this.u.log(n.Error, H);
          const U = new Error(H);
          throw this.Et(U), U;
        }
        if (x.error) {
          const R = "Server returned handshake error: " + x.error;
          this.u.log(n.Error, R);
          const H = new Error(R);
          throw this.Et(H), H;
        }
        return this.u.log(n.Debug, "Server handshake complete."), this.vt(), M;
      }
      kt() {
        this.connection.features.inherentKeepAlive || (this.K = (/* @__PURE__ */ new Date()).getTime() + this.keepAliveIntervalInMilliseconds, this.Tt());
      }
      St() {
        if (!(this.connection.features && this.connection.features.inherentKeepAlive || (this.Ot = setTimeout(() => this.serverTimeout(), this.serverTimeoutInMilliseconds), this.Ft !== void 0))) {
          let p = this.K - (/* @__PURE__ */ new Date()).getTime();
          p < 0 && (p = 0), this.Ft = setTimeout(async () => {
            if (this.ut === xt.Connected) try {
              await this.$t(this.ft);
            } catch {
              this.Tt();
            }
          }, p);
        }
      }
      serverTimeout() {
        this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."));
      }
      async Wt(p) {
        const x = p.target.toLowerCase(), M = this.nt[x];
        if (!M) return this.u.log(n.Warning, `No client method with the name '${x}' found.`), void (p.invocationId && (this.u.log(n.Warning, `No result given for '${x}' method and invocation ID '${p.invocationId}'.`), await this.xt(this.Bt(p.invocationId, "Client didn't provide a result.", null))));
        const R = M.slice(), H = !!p.invocationId;
        let U, Y, tt;
        for (const pt of R) try {
          const St = U;
          U = await pt.apply(this, p.arguments), H && U && St && (this.u.log(n.Error, `Multiple results provided for '${x}'. Sending error to server.`), tt = this.Bt(p.invocationId, "Client provided multiple results.", null)), Y = void 0;
        } catch (St) {
          Y = St, this.u.log(n.Error, `A callback for the method '${x}' threw error '${St}'.`);
        }
        tt ? await this.xt(tt) : H ? (Y ? tt = this.Bt(p.invocationId, `${Y}`, null) : U !== void 0 ? tt = this.Bt(p.invocationId, null, U) : (this.u.log(n.Warning, `No result given for '${x}' method and invocation ID '${p.invocationId}'.`), tt = this.Bt(p.invocationId, "Client didn't provide a result.", null)), await this.xt(tt)) : U && this.u.log(n.Error, `Result given for '${x}' method but server is not expecting a result.`);
      }
      st(p) {
        this.u.log(n.Debug, `HubConnection.connectionClosed(${p}) called while in state ${this.ut}.`), this.bt = this.bt || p || new d("The underlying connection was closed before the hub handshake could complete."), this.vt && this.vt(), this.Xt(p || new Error("Invocation canceled due to the underlying connection being closed.")), this.Ct(), this.Tt(), this.ut === xt.Disconnecting ? this.Dt(p) : this.ut === xt.Connected && this.Z ? this.Jt(p) : this.ut === xt.Connected && this.Dt(p);
      }
      Dt(p) {
        if (this.dt) {
          this.ut = xt.Disconnected, this.dt = !1, this.Pt && (this.Pt.X(p ?? new Error("Connection closed.")), this.Pt = void 0), _.isBrowser && window.document.removeEventListener("freeze", this.G);
          try {
            this.rt.forEach((x) => x.apply(this, [p]));
          } catch (x) {
            this.u.log(n.Error, `An onclose callback called with error '${p}' threw error '${x}'.`);
          }
        }
      }
      async Jt(p) {
        const x = Date.now();
        let M = 0, R = p !== void 0 ? p : new Error("Attempting to reconnect due to a unknown error."), H = this.zt(M++, 0, R);
        if (H === null) return this.u.log(n.Debug, "Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."), void this.Dt(p);
        if (this.ut = xt.Reconnecting, p ? this.u.log(n.Information, `Connection reconnecting because of error '${p}'.`) : this.u.log(n.Information, "Connection reconnecting."), this.ot.length !== 0) {
          try {
            this.ot.forEach((U) => U.apply(this, [p]));
          } catch (U) {
            this.u.log(n.Error, `An onreconnecting callback called with error '${p}' threw error '${U}'.`);
          }
          if (this.ut !== xt.Reconnecting) return void this.u.log(n.Debug, "Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");
        }
        for (; H !== null; ) {
          if (this.u.log(n.Information, `Reconnect attempt number ${M} will start in ${H} ms.`), await new Promise((U) => {
            this.Ht = setTimeout(U, H);
          }), this.Ht = void 0, this.ut !== xt.Reconnecting) return void this.u.log(n.Debug, "Connection left the reconnecting state during reconnect delay. Done reconnecting.");
          try {
            if (await this.yt(), this.ut = xt.Connected, this.u.log(n.Information, "HubConnection reconnected successfully."), this.ht.length !== 0) try {
              this.ht.forEach((U) => U.apply(this, [this.connection.connectionId]));
            } catch (U) {
              this.u.log(n.Error, `An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${U}'.`);
            }
            return;
          } catch (U) {
            if (this.u.log(n.Information, `Reconnect attempt failed because of error '${U}'.`), this.ut !== xt.Reconnecting) return this.u.log(n.Debug, `Connection moved to the '${this.ut}' from the reconnecting state during reconnect attempt. Done reconnecting.`), void (this.ut === xt.Disconnecting && this.Dt());
            R = U instanceof Error ? U : new Error(U.toString()), H = this.zt(M++, Date.now() - x, R);
          }
        }
        this.u.log(n.Information, `Reconnect retries have been exhausted after ${Date.now() - x} ms and ${M} failed attempts. Connection disconnecting.`), this.Dt();
      }
      zt(p, x, M) {
        try {
          return this.Z.nextRetryDelayInMilliseconds({ elapsedMilliseconds: x, previousRetryCount: p, retryReason: M });
        } catch (R) {
          return this.u.log(n.Error, `IRetryPolicy.nextRetryDelayInMilliseconds(${p}, ${x}) threw error '${R}'.`), null;
        }
      }
      Xt(p) {
        const x = this.it;
        this.it = {}, Object.keys(x).forEach((M) => {
          const R = x[M];
          try {
            R(null, p);
          } catch (H) {
            this.u.log(n.Error, `Stream 'error' callback called with '${p}' threw error: ${lt(H)}`);
          }
        });
      }
      Tt() {
        this.Ft && (clearTimeout(this.Ft), this.Ft = void 0);
      }
      Ct() {
        this.Ot && clearTimeout(this.Ot);
      }
      Mt(p, x, M, R) {
        if (M) return R.length !== 0 ? { arguments: x, streamIds: R, target: p, type: nt.Invocation } : { arguments: x, target: p, type: nt.Invocation };
        {
          const H = this.ct;
          return this.ct++, R.length !== 0 ? { arguments: x, invocationId: H.toString(), streamIds: R, target: p, type: nt.Invocation } : { arguments: x, invocationId: H.toString(), target: p, type: nt.Invocation };
        }
      }
      qt(p, x) {
        if (p.length !== 0) {
          x || (x = Promise.resolve());
          for (const M in p) p[M].subscribe({ complete: /* @__PURE__ */ c(() => {
            x = x.then(() => this.xt(this.Bt(M)));
          }, "complete"), error: /* @__PURE__ */ c((R) => {
            let H;
            H = R instanceof Error ? R.message : R && R.toString ? R.toString() : "Unknown error", x = x.then(() => this.xt(this.Bt(M, H)));
          }, "error"), next: /* @__PURE__ */ c((R) => {
            x = x.then(() => this.xt(this.Vt(M, R)));
          }, "next") });
        }
      }
      Ut(p) {
        const x = [], M = [];
        for (let R = 0; R < p.length; R++) {
          const H = p[R];
          if (this.Kt(H)) {
            const U = this.ct;
            this.ct++, x[U] = H, M.push(U.toString()), p.splice(R, 1);
          }
        }
        return [x, M];
      }
      Kt(p) {
        return p && p.subscribe && typeof p.subscribe == "function";
      }
      Lt(p, x, M) {
        const R = this.ct;
        return this.ct++, M.length !== 0 ? { arguments: x, invocationId: R.toString(), streamIds: M, target: p, type: nt.StreamInvocation } : { arguments: x, invocationId: R.toString(), target: p, type: nt.StreamInvocation };
      }
      Nt(p) {
        return { invocationId: p, type: nt.CancelInvocation };
      }
      Vt(p, x) {
        return { invocationId: p, item: x, type: nt.StreamItem };
      }
      Bt(p, x, M) {
        return x ? { error: x, invocationId: p, type: nt.Completion } : { invocationId: p, result: M, type: nt.Completion };
      }
      At() {
        return { type: nt.Close };
      }
    };
    c(zd, "q");
    let Pi = zd;
    const xo = [0, 2e3, 1e4, 3e4, null], Gu = class Gu {
      constructor(p) {
        this.Gt = p !== void 0 ? [...p, null] : xo;
      }
      nextRetryDelayInMilliseconds(p) {
        return this.Gt[p.previousRetryCount];
      }
    };
    c(Gu, "j");
    let Gi = Gu;
    const Zu = class Zu {
    };
    c(Zu, "W");
    let ze = Zu;
    ze.Authorization = "Authorization", ze.Cookie = "Cookie";
    const Yu = class Yu extends $ {
      constructor(p, x) {
        super(), this.Qt = p, this.Yt = x;
      }
      async send(p) {
        let x = !0;
        this.Yt && (!this.Zt || p.url && p.url.indexOf("/negotiate?") > 0) && (x = !1, this.Zt = await this.Yt()), this.te(p);
        const M = await this.Qt.send(p);
        return x && M.statusCode === 401 && this.Yt ? (this.Zt = await this.Yt(), this.te(p), await this.Qt.send(p)) : M;
      }
      te(p) {
        p.headers || (p.headers = {}), this.Zt ? p.headers[ze.Authorization] = `Bearer ${this.Zt}` : this.Yt && p.headers[ze.Authorization] && delete p.headers[ze.Authorization];
      }
      getCookieString(p) {
        return this.Qt.getCookieString(p);
      }
    };
    c(Yu, "O");
    let $r = Yu;
    var At, zt;
    (function(q) {
      q[q.None = 0] = "None", q[q.WebSockets = 1] = "WebSockets", q[q.ServerSentEvents = 2] = "ServerSentEvents", q[q.LongPolling = 4] = "LongPolling";
    })(At || (At = {})), function(q) {
      q[q.Text = 1] = "Text", q[q.Binary = 2] = "Binary";
    }(zt || (zt = {}));
    const Xu = class Xu {
      constructor() {
        this.ee = !1, this.onabort = null;
      }
      abort() {
        this.ee || (this.ee = !0, this.onabort && this.onabort());
      }
      get signal() {
        return this;
      }
      get aborted() {
        return this.ee;
      }
    };
    c(Xu, "X");
    let Co = Xu;
    const Ju = class Ju {
      get pollAborted() {
        return this.se.aborted;
      }
      constructor(p, x, M) {
        this.$ = p, this.u = x, this.se = new Co(), this.ie = M, this.ne = !1, this.onreceive = null, this.onclose = null;
      }
      async connect(p, x) {
        if (S.isRequired(p, "url"), S.isRequired(x, "transferFormat"), S.isIn(x, zt, "transferFormat"), this.re = p, this.u.log(n.Trace, "(LongPolling transport) Connecting."), x === zt.Binary && typeof XMLHttpRequest < "u" && typeof new XMLHttpRequest().responseType != "string") throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");
        const [M, R] = A(), H = { [M]: R, ...this.ie.headers }, U = { abortSignal: this.se.signal, headers: H, timeout: 1e5, withCredentials: this.ie.withCredentials };
        x === zt.Binary && (U.responseType = "arraybuffer");
        const Y = `${p}&_=${Date.now()}`;
        this.u.log(n.Trace, `(LongPolling transport) polling: ${Y}.`);
        const tt = await this.$.get(Y, U);
        tt.statusCode !== 200 ? (this.u.log(n.Error, `(LongPolling transport) Unexpected response code: ${tt.statusCode}.`), this.oe = new a(tt.statusText || "", tt.statusCode), this.ne = !1) : this.ne = !0, this.he = this.ce(this.re, U);
      }
      async ce(p, x) {
        try {
          for (; this.ne; ) try {
            const M = `${p}&_=${Date.now()}`;
            this.u.log(n.Trace, `(LongPolling transport) polling: ${M}.`);
            const R = await this.$.get(M, x);
            R.statusCode === 204 ? (this.u.log(n.Information, "(LongPolling transport) Poll terminated by server."), this.ne = !1) : R.statusCode !== 200 ? (this.u.log(n.Error, `(LongPolling transport) Unexpected response code: ${R.statusCode}.`), this.oe = new a(R.statusText || "", R.statusCode), this.ne = !1) : R.content ? (this.u.log(n.Trace, `(LongPolling transport) data received. ${V(R.content, this.ie.logMessageContent)}.`), this.onreceive && this.onreceive(R.content)) : this.u.log(n.Trace, "(LongPolling transport) Poll timed out, reissuing.");
          } catch (M) {
            this.ne ? M instanceof l ? this.u.log(n.Trace, "(LongPolling transport) Poll timed out, reissuing.") : (this.oe = M, this.ne = !1) : this.u.log(n.Trace, `(LongPolling transport) Poll errored after shutdown: ${M.message}`);
          }
        } finally {
          this.u.log(n.Trace, "(LongPolling transport) Polling complete."), this.pollAborted || this.ae();
        }
      }
      async send(p) {
        return this.ne ? D(this.u, "LongPolling", this.$, this.re, p, this.ie) : Promise.reject(new Error("Cannot send until the transport is connected"));
      }
      async stop() {
        this.u.log(n.Trace, "(LongPolling transport) Stopping polling."), this.ne = !1, this.se.abort();
        try {
          await this.he, this.u.log(n.Trace, `(LongPolling transport) sending DELETE request to ${this.re}.`);
          const p = {}, [x, M] = A();
          p[x] = M;
          const R = { headers: { ...p, ...this.ie.headers }, timeout: this.ie.timeout, withCredentials: this.ie.withCredentials };
          let H;
          try {
            await this.$.delete(this.re, R);
          } catch (U) {
            H = U;
          }
          H ? H instanceof a && (H.statusCode === 404 ? this.u.log(n.Trace, "(LongPolling transport) A 404 response was returned from sending a DELETE request.") : this.u.log(n.Trace, `(LongPolling transport) Error sending a DELETE request: ${H}`)) : this.u.log(n.Trace, "(LongPolling transport) DELETE request accepted.");
        } finally {
          this.u.log(n.Trace, "(LongPolling transport) Stop finished."), this.ae();
        }
      }
      ae() {
        if (this.onclose) {
          let p = "(LongPolling transport) Firing onclose event.";
          this.oe && (p += " Error: " + this.oe), this.u.log(n.Trace, p), this.onclose(this.oe);
        }
      }
    };
    c(Ju, "J");
    let ko = Ju;
    const tp = class tp {
      constructor(p, x, M, R) {
        this.$ = p, this.Zt = x, this.u = M, this.ie = R, this.onreceive = null, this.onclose = null;
      }
      async connect(p, x) {
        return S.isRequired(p, "url"), S.isRequired(x, "transferFormat"), S.isIn(x, zt, "transferFormat"), this.u.log(n.Trace, "(SSE transport) Connecting."), this.re = p, this.Zt && (p += (p.indexOf("?") < 0 ? "?" : "&") + `access_token=${encodeURIComponent(this.Zt)}`), new Promise((M, R) => {
          let H, U = !1;
          if (x === zt.Text) {
            if (_.isBrowser || _.isWebWorker) H = new this.ie.EventSource(p, { withCredentials: this.ie.withCredentials });
            else {
              const Y = this.$.getCookieString(p), tt = {};
              tt.Cookie = Y;
              const [pt, St] = A();
              tt[pt] = St, H = new this.ie.EventSource(p, { withCredentials: this.ie.withCredentials, headers: { ...tt, ...this.ie.headers } });
            }
            try {
              H.onmessage = (Y) => {
                if (this.onreceive) try {
                  this.u.log(n.Trace, `(SSE transport) data received. ${V(Y.data, this.ie.logMessageContent)}.`), this.onreceive(Y.data);
                } catch (tt) {
                  return void this.le(tt);
                }
              }, H.onerror = (Y) => {
                U ? this.le() : R(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."));
              }, H.onopen = () => {
                this.u.log(n.Information, `SSE connected to ${this.re}`), this.ue = H, U = !0, M();
              };
            } catch (Y) {
              return void R(Y);
            }
          } else R(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));
        });
      }
      async send(p) {
        return this.ue ? D(this.u, "SSE", this.$, this.re, p, this.ie) : Promise.reject(new Error("Cannot send until the transport is connected"));
      }
      stop() {
        return this.le(), Promise.resolve();
      }
      le(p) {
        this.ue && (this.ue.close(), this.ue = void 0, this.onclose && this.onclose(p));
      }
    };
    c(tp, "z");
    let $o = tp;
    const ep = class ep {
      constructor(p, x, M, R, H, U) {
        this.u = M, this.Yt = x, this.de = R, this.fe = H, this.$ = p, this.onreceive = null, this.onclose = null, this.pe = U;
      }
      async connect(p, x) {
        let M;
        return S.isRequired(p, "url"), S.isRequired(x, "transferFormat"), S.isIn(x, zt, "transferFormat"), this.u.log(n.Trace, "(WebSockets transport) Connecting."), this.Yt && (M = await this.Yt()), new Promise((R, H) => {
          let U;
          p = p.replace(/^http/, "ws");
          const Y = this.$.getCookieString(p);
          let tt = !1;
          if (_.isNode || _.isReactNative) {
            const pt = {}, [St, So] = A();
            pt[St] = So, M && (pt[ze.Authorization] = `Bearer ${M}`), Y && (pt[ze.Cookie] = Y), U = new this.fe(p, void 0, { headers: { ...pt, ...this.pe } });
          } else M && (p += (p.indexOf("?") < 0 ? "?" : "&") + `access_token=${encodeURIComponent(M)}`);
          U || (U = new this.fe(p)), x === zt.Binary && (U.binaryType = "arraybuffer"), U.onopen = (pt) => {
            this.u.log(n.Information, `WebSocket connected to ${p}.`), this.we = U, tt = !0, R();
          }, U.onerror = (pt) => {
            let St = null;
            St = typeof ErrorEvent < "u" && pt instanceof ErrorEvent ? pt.error : "There was an error with the transport", this.u.log(n.Information, `(WebSockets transport) ${St}.`);
          }, U.onmessage = (pt) => {
            if (this.u.log(n.Trace, `(WebSockets transport) data received. ${V(pt.data, this.de)}.`), this.onreceive) try {
              this.onreceive(pt.data);
            } catch (St) {
              return void this.le(St);
            }
          }, U.onclose = (pt) => {
            if (tt) this.le(pt);
            else {
              let St = null;
              St = typeof ErrorEvent < "u" && pt instanceof ErrorEvent ? pt.error : "WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.", H(new Error(St));
            }
          };
        });
      }
      send(p) {
        return this.we && this.we.readyState === this.fe.OPEN ? (this.u.log(n.Trace, `(WebSockets transport) sending data. ${V(p, this.de)}.`), this.we.send(p), Promise.resolve()) : Promise.reject("WebSocket is not in the OPEN state");
      }
      stop() {
        return this.we && this.le(void 0), Promise.resolve();
      }
      le(p) {
        this.we && (this.we.onclose = () => {
        }, this.we.onmessage = () => {
        }, this.we.onerror = () => {
        }, this.we.close(), this.we = void 0), this.u.log(n.Trace, "(WebSockets transport) socket closed."), this.onclose && (!this.ge(p) || p.wasClean !== !1 && p.code === 1e3 ? p instanceof Error ? this.onclose(p) : this.onclose() : this.onclose(new Error(`WebSocket closed with status code: ${p.code} (${p.reason || "no reason given"}).`)));
      }
      ge(p) {
        return p && typeof p.wasClean == "boolean" && typeof p.code == "number";
      }
    };
    c(ep, "V");
    let Yc = ep;
    const ip = class ip {
      constructor(p, x = {}) {
        var M;
        if (this.me = () => {
        }, this.features = {}, this.ye = 1, S.isRequired(p, "url"), this.u = (M = x.logger) === void 0 ? new F(n.Information) : M === null ? O.instance : M.log !== void 0 ? M : new F(M), this.baseUrl = this.be(p), (x = x || {}).logMessageContent = x.logMessageContent !== void 0 && x.logMessageContent, typeof x.withCredentials != "boolean" && x.withCredentials !== void 0) throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");
        x.withCredentials = x.withCredentials === void 0 || x.withCredentials, x.timeout = x.timeout === void 0 ? 1e5 : x.timeout;
        let R = null, H = null;
        if (_.isNode) {
          const U = cp;
          R = U("ws"), H = U("eventsource");
        }
        _.isNode || typeof WebSocket > "u" || x.WebSocket ? _.isNode && !x.WebSocket && R && (x.WebSocket = R) : x.WebSocket = WebSocket, _.isNode || typeof EventSource > "u" || x.EventSource ? _.isNode && !x.EventSource && H !== void 0 && (x.EventSource = H) : x.EventSource = EventSource, this.$ = new $r(x.httpClient || new Ot(this.u), x.accessTokenFactory), this.ut = "Disconnected", this.dt = !1, this.ie = x, this.onreceive = null, this.onclose = null;
      }
      async start(p) {
        if (p = p || zt.Binary, S.isIn(p, zt, "transferFormat"), this.u.log(n.Debug, `Starting connection with transfer format '${zt[p]}'.`), this.ut !== "Disconnected") return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));
        if (this.ut = "Connecting", this.ve = this.yt(p), await this.ve, this.ut === "Disconnecting") {
          const x = "Failed to start the HttpConnection before stop() was called.";
          return this.u.log(n.Error, x), await this.It, Promise.reject(new d(x));
        }
        if (this.ut !== "Connected") {
          const x = "HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";
          return this.u.log(n.Error, x), Promise.reject(new d(x));
        }
        this.dt = !0;
      }
      send(p) {
        return this.ut !== "Connected" ? Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")) : (this.Ee || (this.Ee = new _u(this.transport)), this.Ee.send(p));
      }
      async stop(p) {
        return this.ut === "Disconnected" ? (this.u.log(n.Debug, `Call to HttpConnection.stop(${p}) ignored because the connection is already in the disconnected state.`), Promise.resolve()) : this.ut === "Disconnecting" ? (this.u.log(n.Debug, `Call to HttpConnection.stop(${p}) ignored because the connection is already in the disconnecting state.`), this.It) : (this.ut = "Disconnecting", this.It = new Promise((x) => {
          this.me = x;
        }), await this._t(p), void await this.It);
      }
      async _t(p) {
        this.$e = p;
        try {
          await this.ve;
        } catch {
        }
        if (this.transport) {
          try {
            await this.transport.stop();
          } catch (x) {
            this.u.log(n.Error, `HttpConnection.transport.stop() threw error '${x}'.`), this.Ce();
          }
          this.transport = void 0;
        } else this.u.log(n.Debug, "HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.");
      }
      async yt(p) {
        let x = this.baseUrl;
        this.Yt = this.ie.accessTokenFactory, this.$.Yt = this.Yt;
        try {
          if (this.ie.skipNegotiation) {
            if (this.ie.transport !== At.WebSockets) throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");
            this.transport = this.Se(At.WebSockets), await this.ke(x, p);
          } else {
            let M = null, R = 0;
            do {
              if (M = await this.Pe(x), this.ut === "Disconnecting" || this.ut === "Disconnected") throw new d("The connection was stopped during negotiation.");
              if (M.error) throw new Error(M.error);
              if (M.ProtocolVersion) throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");
              if (M.url && (x = M.url), M.accessToken) {
                const H = M.accessToken;
                this.Yt = () => H, this.$.Zt = H, this.$.Yt = void 0;
              }
              R++;
            } while (M.url && R < 100);
            if (R === 100 && M.url) throw new Error("Negotiate redirection limit exceeded.");
            await this.Te(x, this.ie.transport, M, p);
          }
          this.transport instanceof ko && (this.features.inherentKeepAlive = !0), this.ut === "Connecting" && (this.u.log(n.Debug, "The HttpConnection connected successfully."), this.ut = "Connected");
        } catch (M) {
          return this.u.log(n.Error, "Failed to start the connection: " + M), this.ut = "Disconnected", this.transport = void 0, this.me(), Promise.reject(M);
        }
      }
      async Pe(p) {
        const x = {}, [M, R] = A();
        x[M] = R;
        const H = this.Ie(p);
        this.u.log(n.Debug, `Sending negotiation request: ${H}.`);
        try {
          const U = await this.$.post(H, { content: "", headers: { ...x, ...this.ie.headers }, timeout: this.ie.timeout, withCredentials: this.ie.withCredentials });
          if (U.statusCode !== 200) return Promise.reject(new Error(`Unexpected status code returned from negotiate '${U.statusCode}'`));
          const Y = JSON.parse(U.content);
          return (!Y.negotiateVersion || Y.negotiateVersion < 1) && (Y.connectionToken = Y.connectionId), Y.useStatefulReconnect && this.ie._e !== !0 ? Promise.reject(new f("Client didn't negotiate Stateful Reconnect but the server did.")) : Y;
        } catch (U) {
          let Y = "Failed to complete negotiation with the server: " + U;
          return U instanceof a && U.statusCode === 404 && (Y += " Either this is not a SignalR endpoint or there is a proxy blocking the connection."), this.u.log(n.Error, Y), Promise.reject(new f(Y));
        }
      }
      He(p, x) {
        return x ? p + (p.indexOf("?") === -1 ? "?" : "&") + `id=${x}` : p;
      }
      async Te(p, x, M, R) {
        let H = this.He(p, M.connectionToken);
        if (this.De(x)) return this.u.log(n.Debug, "Connection was provided an instance of ITransport, using that directly."), this.transport = x, await this.ke(H, R), void (this.connectionId = M.connectionId);
        const U = [], Y = M.availableTransports || [];
        let tt = M;
        for (const pt of Y) {
          const St = this.Re(pt, x, R, (tt == null ? void 0 : tt.useStatefulReconnect) === !0);
          if (St instanceof Error) U.push(`${pt.transport} failed:`), U.push(St);
          else if (this.De(St)) {
            if (this.transport = St, !tt) {
              try {
                tt = await this.Pe(p);
              } catch (So) {
                return Promise.reject(So);
              }
              H = this.He(p, tt.connectionToken);
            }
            try {
              return await this.ke(H, R), void (this.connectionId = tt.connectionId);
            } catch (So) {
              if (this.u.log(n.Error, `Failed to start the transport '${pt.transport}': ${So}`), tt = void 0, U.push(new m(`${pt.transport} failed: ${So}`, At[pt.transport])), this.ut !== "Connecting") {
                const nm = "Failed to select transport before stop() was called.";
                return this.u.log(n.Debug, nm), Promise.reject(new d(nm));
              }
            }
          }
        }
        return U.length > 0 ? Promise.reject(new b(`Unable to connect to the server with any of the available transports. ${U.join(" ")}`, U)) : Promise.reject(new Error("None of the transports supported by the client are supported by the server."));
      }
      Se(p) {
        switch (p) {
          case At.WebSockets:
            if (!this.ie.WebSocket) throw new Error("'WebSocket' is not supported in your environment.");
            return new Yc(this.$, this.Yt, this.u, this.ie.logMessageContent, this.ie.WebSocket, this.ie.headers || {});
          case At.ServerSentEvents:
            if (!this.ie.EventSource) throw new Error("'EventSource' is not supported in your environment.");
            return new $o(this.$, this.$.Zt, this.u, this.ie);
          case At.LongPolling:
            return new ko(this.$, this.u, this.ie);
          default:
            throw new Error(`Unknown transport: ${p}.`);
        }
      }
      ke(p, x) {
        return this.transport.onreceive = this.onreceive, this.features.reconnect ? this.transport.onclose = async (M) => {
          let R = !1;
          if (this.features.reconnect) {
            try {
              this.features.disconnected(), await this.transport.connect(p, x), await this.features.resend();
            } catch {
              R = !0;
            }
            R && this.Ce(M);
          } else this.Ce(M);
        } : this.transport.onclose = (M) => this.Ce(M), this.transport.connect(p, x);
      }
      Re(p, x, M, R) {
        const H = At[p.transport];
        if (H == null) return this.u.log(n.Debug, `Skipping transport '${p.transport}' because it is not supported by this client.`), new Error(`Skipping transport '${p.transport}' because it is not supported by this client.`);
        if (!function(U, Y) {
          return !U || (Y & U) != 0;
        }(x, H)) return this.u.log(n.Debug, `Skipping transport '${At[H]}' because it was disabled by the client.`), new w(`'${At[H]}' is disabled by the client.`, H);
        if (!(p.transferFormats.map((U) => zt[U]).indexOf(M) >= 0)) return this.u.log(n.Debug, `Skipping transport '${At[H]}' because it does not support the requested transfer format '${zt[M]}'.`), new Error(`'${At[H]}' does not support ${zt[M]}.`);
        if (H === At.WebSockets && !this.ie.WebSocket || H === At.ServerSentEvents && !this.ie.EventSource) return this.u.log(n.Debug, `Skipping transport '${At[H]}' because it is not supported in your environment.'`), new h(`'${At[H]}' is not supported in your environment.`, H);
        this.u.log(n.Debug, `Selecting transport '${At[H]}'.`);
        try {
          return this.features.reconnect = H === At.WebSockets ? R : void 0, this.Se(H);
        } catch (U) {
          return U;
        }
      }
      De(p) {
        return p && typeof p == "object" && "connect" in p;
      }
      Ce(p) {
        if (this.u.log(n.Debug, `HttpConnection.stopConnection(${p}) called while in state ${this.ut}.`), this.transport = void 0, p = this.$e || p, this.$e = void 0, this.ut !== "Disconnected") {
          if (this.ut === "Connecting") throw this.u.log(n.Warning, `Call to HttpConnection.stopConnection(${p}) was ignored because the connection is still in the connecting state.`), new Error(`HttpConnection.stopConnection(${p}) was called while the connection is still in the connecting state.`);
          if (this.ut === "Disconnecting" && this.me(), p ? this.u.log(n.Error, `Connection disconnected with error '${p}'.`) : this.u.log(n.Information, "Connection disconnected."), this.Ee && (this.Ee.stop().catch((x) => {
            this.u.log(n.Error, `TransportSendQueue.stop() threw error '${x}'.`);
          }), this.Ee = void 0), this.connectionId = void 0, this.ut = "Disconnected", this.dt) {
            this.dt = !1;
            try {
              this.onclose && this.onclose(p);
            } catch (x) {
              this.u.log(n.Error, `HttpConnection.onclose(${p}) threw error '${x}'.`);
            }
          }
        } else this.u.log(n.Debug, `Call to HttpConnection.stopConnection(${p}) was ignored because the connection is already in the disconnected state.`);
      }
      be(p) {
        if (p.lastIndexOf("https://", 0) === 0 || p.lastIndexOf("http://", 0) === 0) return p;
        if (!_.isBrowser) throw new Error(`Cannot resolve '${p}'.`);
        const x = window.document.createElement("a");
        return x.href = p, this.u.log(n.Information, `Normalizing '${p}' to '${x.href}'.`), x.href;
      }
      Ie(p) {
        const x = new URL(p);
        x.pathname.endsWith("/") ? x.pathname += "negotiate" : x.pathname += "/negotiate";
        const M = new URLSearchParams(x.searchParams);
        return M.has("negotiateVersion") || M.append("negotiateVersion", this.ye.toString()), M.has("useStatefulReconnect") ? M.get("useStatefulReconnect") === "true" && (this.ie._e = !0) : this.ie._e === !0 && M.append("useStatefulReconnect", "true"), x.search = M.toString(), x.toString();
      }
    };
    c(ip, "K");
    let Eu = ip;
    const Rd = class Rd {
      constructor(p) {
        this.xe = p, this.Ae = [], this.Ue = !0, this.Le = new Eo(), this.Ne = new Eo(), this.qe = this.Me();
      }
      send(p) {
        return this.je(p), this.Ne || (this.Ne = new Eo()), this.Ne.promise;
      }
      stop() {
        return this.Ue = !1, this.Le.resolve(), this.qe;
      }
      je(p) {
        if (this.Ae.length && typeof this.Ae[0] != typeof p) throw new Error(`Expected data to be of type ${typeof this.Ae} but was of type ${typeof p}`);
        this.Ae.push(p), this.Le.resolve();
      }
      async Me() {
        for (; ; ) {
          if (await this.Le.promise, !this.Ue) {
            this.Ne && this.Ne.reject("Connection stopped.");
            break;
          }
          this.Le = new Eo();
          const p = this.Ne;
          this.Ne = void 0;
          const x = typeof this.Ae[0] == "string" ? this.Ae.join("") : Rd.We(this.Ae);
          this.Ae.length = 0;
          try {
            await this.xe.send(x), p.resolve();
          } catch (M) {
            p.reject(M);
          }
        }
      }
      static We(p) {
        const x = p.map((H) => H.byteLength).reduce((H, U) => H + U), M = new Uint8Array(x);
        let R = 0;
        for (const H of p) M.set(new Uint8Array(H), R), R += H.byteLength;
        return M.buffer;
      }
    };
    c(Rd, "G");
    let _u = Rd;
    const rp = class rp {
      constructor() {
        this.promise = new Promise((p, x) => [this.j, this.Oe] = [p, x]);
      }
      resolve() {
        this.j();
      }
      reject(p) {
        this.Oe(p);
      }
    };
    c(rp, "Q");
    let Eo = rp;
    const np = class np {
      constructor() {
        this.name = "json", this.version = 2, this.transferFormat = zt.Text;
      }
      parseMessages(p, x) {
        if (typeof p != "string") throw new Error("Invalid input for JSON hub protocol. Expected a string.");
        if (!p) return [];
        x === null && (x = O.instance);
        const M = Et.parse(p), R = [];
        for (const H of M) {
          const U = JSON.parse(H);
          if (typeof U.type != "number") throw new Error("Invalid payload.");
          switch (U.type) {
            case nt.Invocation:
              this.U(U);
              break;
            case nt.StreamItem:
              this.Fe(U);
              break;
            case nt.Completion:
              this.Be(U);
              break;
            case nt.Ping:
            case nt.Close:
              break;
            case nt.Ack:
              this.Xe(U);
              break;
            case nt.Sequence:
              this.Je(U);
              break;
            default:
              x.log(n.Information, "Unknown message type '" + U.type + "' ignored.");
              continue;
          }
          R.push(U);
        }
        return R;
      }
      writeMessage(p) {
        return Et.write(JSON.stringify(p));
      }
      U(p) {
        this.ze(p.target, "Invalid payload for Invocation message."), p.invocationId !== void 0 && this.ze(p.invocationId, "Invalid payload for Invocation message.");
      }
      Fe(p) {
        if (this.ze(p.invocationId, "Invalid payload for StreamItem message."), p.item === void 0) throw new Error("Invalid payload for StreamItem message.");
      }
      Be(p) {
        if (p.result && p.error) throw new Error("Invalid payload for Completion message.");
        !p.result && p.error && this.ze(p.error, "Invalid payload for Completion message."), this.ze(p.invocationId, "Invalid payload for Completion message.");
      }
      Xe(p) {
        if (typeof p.sequenceId != "number") throw new Error("Invalid SequenceId for Ack message.");
      }
      Je(p) {
        if (typeof p.sequenceId != "number") throw new Error("Invalid SequenceId for Sequence message.");
      }
      ze(p, x) {
        if (typeof p != "string" || p === "") throw new Error(x);
      }
    };
    c(np, "Y");
    let Ad = np;
    const sb = { trace: n.Trace, debug: n.Debug, info: n.Information, information: n.Information, warn: n.Warning, warning: n.Warning, error: n.Error, critical: n.Critical, none: n.None }, op = class op {
      configureLogging(p) {
        if (S.isRequired(p, "logging"), p.log !== void 0) this.logger = p;
        else if (typeof p == "string") {
          const x = function(M) {
            const R = sb[M.toLowerCase()];
            if (R !== void 0) return R;
            throw new Error(`Unknown log level: ${M}`);
          }(p);
          this.logger = new F(x);
        } else this.logger = new F(p);
        return this;
      }
      withUrl(p, x) {
        return S.isRequired(p, "url"), S.isNotEmpty(p, "url"), this.url = p, this.httpConnectionOptions = typeof x == "object" ? { ...this.httpConnectionOptions, ...x } : { ...this.httpConnectionOptions, transport: x }, this;
      }
      withHubProtocol(p) {
        return S.isRequired(p, "protocol"), this.protocol = p, this;
      }
      withAutomaticReconnect(p) {
        if (this.reconnectPolicy) throw new Error("A reconnectPolicy has already been set.");
        return p ? Array.isArray(p) ? this.reconnectPolicy = new Gi(p) : this.reconnectPolicy = p : this.reconnectPolicy = new Gi(), this;
      }
      withServerTimeout(p) {
        return S.isRequired(p, "milliseconds"), this.Ve = p, this;
      }
      withKeepAliveInterval(p) {
        return S.isRequired(p, "milliseconds"), this.Ke = p, this;
      }
      withStatefulReconnect(p) {
        return this.httpConnectionOptions === void 0 && (this.httpConnectionOptions = {}), this.httpConnectionOptions._e = !0, this.Y = p == null ? void 0 : p.bufferSize, this;
      }
      build() {
        const p = this.httpConnectionOptions || {};
        if (p.logger === void 0 && (p.logger = this.logger), !this.url) throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");
        const x = new Eu(this.url, p);
        return Pi.create(x, this.logger || O.instance, this.protocol || new Ad(), this.reconnectPolicy, this.Ve, this.Ke, this.Y);
      }
    };
    c(op, "tt");
    let Pu = op;
    return Uint8Array.prototype.indexOf || Object.defineProperty(Uint8Array.prototype, "indexOf", { value: Array.prototype.indexOf, writable: !0 }), Uint8Array.prototype.slice || Object.defineProperty(Uint8Array.prototype, "slice", { value: /* @__PURE__ */ c(function(q, p) {
      return new Uint8Array(Array.prototype.slice.call(this, q, p));
    }, "value"), writable: !0 }), Uint8Array.prototype.forEach || Object.defineProperty(Uint8Array.prototype, "forEach", { value: Array.prototype.forEach, writable: !0 }), s;
  })(), "e"), o.exports = i();
})(pg);
var dm = pg.exports;
const Nb = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), this._whenConnectionRequested = new Promise((n) => {
        this._resolveConnectionRequested = n;
      }), this._connectionEventListeners = [], this.signalRAccessTokenRefresh = !1, this._whenConnectionStarted = new Promise((n, s) => {
        this._whenConnectionStartedResolve = n, this._whenConnectionStartedReject = s;
      }), this.whenConnectionRequested().then(() => {
        this.isDestroyed || this.createConnection();
      });
    }
    async whenConnectionRequested() {
      await this._whenConnectionRequested;
    }
    get rtmConnection() {
      return this._connection;
    }
    async whenConnectionStarted() {
      await this._whenConnectionStarted;
    }
    async createConnection() {
      if (this.isDestroyed)
        throw new Bt();
      if (this.networkStateIsPending = !0, await this.whenUrlAndTokenFactory(), this._connection) {
        const r = new URL("/hubs/rtm", this.url);
        this._connection.baseUrl !== r.toString() && (this.connectionState = "reconnecting", console.log(
          this.weavyId,
          "Reconnecting due to changed url.",
          this._connection.baseUrl,
          "=>",
          r.toString()
        ), await this.disconnect(), this._connection.baseUrl = r.toString(), this.connect());
      } else {
        this.connectionState = "connecting";
        const r = new URL("/hubs/rtm", this.url);
        this._connection = new dm.HubConnectionBuilder().configureLogging(dm.LogLevel.None).withUrl(r.toString(), {
          accessTokenFactory: /* @__PURE__ */ c(async () => {
            try {
              if (this.signalRAccessTokenRefresh) {
                const n = await this.getToken(!0);
                return this.signalRAccessTokenRefresh = !1, n;
              } else
                return await this.getToken();
            } catch (n) {
              throw console.error(n), n;
            }
          }, "accessTokenFactory")
        }).withAutomaticReconnect({
          nextRetryDelayInMilliseconds: /* @__PURE__ */ c((n) => !this.isDestroyed && window.navigator.onLine && (document == null ? void 0 : document.visibilityState) !== "hidden" && n.elapsedMilliseconds < 6e4 ? [0, 2e3, 1e4][n.previousRetryCount] || 1e4 : null, "nextRetryDelayInMilliseconds")
        }).build(), this._connection.onclose(async () => {
          console.info(this.weavyId, "SignalR closed."), this.connectionState = "disconnected", !this.isDestroyed && (this.networkStateIsPending = !0, this._whenConnectionStarted = new Promise((n, s) => {
            this._whenConnectionStartedResolve = n, this._whenConnectionStartedReject = s;
          }), this.connect());
        }), this._connection.onreconnecting(() => {
          console.log(this.weavyId, "SignalR reconnecting..."), this.connectionState = "reconnecting";
        }), this._connection.onreconnected(() => {
          var n;
          console.info(this.weavyId, "SignalR reconnected."), this.connectionState = "connected", this.networkStateIsPending = !1;
          for (let s = 0; s < this._connectionEventListeners.length; s++)
            (n = this._connection) == null || n.invoke("Subscribe", this._connectionEventListeners[s].name);
        }), this.connect();
      }
    }
    async disconnect() {
      this._connection && (await this._connection.stop(), this.connectionState = "disconnected");
    }
    async connect() {
      var r;
      if (this.isDestroyed)
        throw new Bt();
      if (this._connection) {
        console.log(this.weavyId, "Connecting SignalR...");
        try {
          if (!window.navigator.onLine)
            throw new Error();
          await Promise.race([this._connection.start(), this.whenConnectionStarted()]), this.signalRAccessTokenRefresh = !1, this.networkStateIsPending = !1, this.connectionState = "connected", (r = this._whenConnectionStartedResolve) == null || r.call(this, void 0), console.info(this.weavyId, "SignalR connected.");
        } catch (n) {
          if (n instanceof Bt) {
            console.warn(this.weavyId, "SignalR connection aborted.");
            return;
          }
          window.navigator.onLine ? !this.signalRAccessTokenRefresh && window.document.visibilityState !== "hidden" && n.toString().includes("Unauthorized") ? (console.log(this.weavyId, "Retrying SignalR connect with fresh token."), this.signalRAccessTokenRefresh = !0) : (console.log(
            this.weavyId,
            "Server is probably down, retrying SignalR connect after a delay or when window regains focus."
          ), this.connectionState = "reconnecting", await new Promise((s) => {
            setTimeout(s, 5e3), window.addEventListener("visibilitychange", s, { once: !0 }), window.addEventListener("offline", s, { once: !0 }), window.addEventListener("online", s, { once: !0 });
          })) : (this.networkStateIsPending = !1, console.log(this.weavyId, "Offline, reconnecting SignalR when online."), await new Promise((s) => {
            window.addEventListener("online", s, { once: !0 });
          })), window.navigator.onLine && (document == null ? void 0 : document.visibilityState) !== "hidden" && await new Promise((s) => setTimeout(s, 1e3)), this.checkVersion(), this.networkStateIsPending = !0, await this.connect();
        }
      }
    }
    async subscribe(r, n, s) {
      var a;
      if (this.isDestroyed)
        throw new Bt();
      (a = this._resolveConnectionRequested) == null || a.call(this, !0);
      try {
        const l = r ? r + ":" + n : n;
        if (this._connectionEventListeners.some((d) => d.name === l && d.callback === s))
          throw new Error("Duplicate subscribe: " + l);
        if (this._connectionEventListeners.push({ name: l, callback: s }), await this.whenConnectionStarted(), !this._connection)
          throw new Error("Connection not created");
        this._connection.on(l, s), await this._connection.invoke("Subscribe", l);
      } catch (l) {
        l instanceof Bt || console.error(this.weavyId, "Error in Subscribe:", l);
      }
    }
    async unsubscribe(r, n, s) {
      var a;
      if (this.isDestroyed)
        throw new Bt();
      try {
        const l = r ? r + ":" + n : n, d = this._connectionEventListeners.findIndex((h) => h.name === l && h.callback === s);
        if (d !== -1) {
          if (this._connectionEventListeners.splice(d, 1), await this.whenConnectionStarted(), !this._connection)
            throw new Error("Connection not created");
          (a = this._connection) == null || a.off(l, s), this._connectionEventListeners.some((h) => h.name === l) || await this._connection.invoke("Unsubscribe", l);
        }
      } catch (l) {
        l instanceof Bt || console.error(this.weavyId, "Error in Unsubscribe:", l);
      }
    }
    destroy() {
      super.destroy(), this.disconnect(), this._whenConnectionStartedReject && (this._whenConnectionStarted.catch(() => {
      }), this._whenConnectionStartedReject(new Bt()));
    }
  }, c(t, "WeavyConnection"), t;
}, "WeavyConnectionMixin");
var is, Dc = (is = class {
  constructor() {
    this.listeners = /* @__PURE__ */ new Set(), this.subscribe = this.subscribe.bind(this);
  }
  subscribe(t) {
    return this.listeners.add(t), this.onSubscribe(), () => {
      this.listeners.delete(t), this.onUnsubscribe();
    };
  }
  hasListeners() {
    return this.listeners.size > 0;
  }
  onSubscribe() {
  }
  onUnsubscribe() {
  }
}, c(is, "Subscribable"), is), gc = typeof window > "u" || "Deno" in globalThis;
function si() {
}
c(si, "noop$1");
function Vb(o, t) {
  return typeof o == "function" ? o(t) : o;
}
c(Vb, "functionalUpdate");
function Lp(o) {
  return typeof o == "number" && o >= 0 && o !== 1 / 0;
}
c(Lp, "isValidTimeout");
function yg(o, t) {
  return Math.max(o + (t || 0) - Date.now(), 0);
}
c(yg, "timeUntilStale");
function Qo(o, t) {
  return typeof o == "function" ? o(t) : o;
}
c(Qo, "resolveStaleTime");
function mi(o, t) {
  return typeof o == "function" ? o(t) : o;
}
c(mi, "resolveEnabled");
function hm(o, t) {
  const {
    type: i = "all",
    exact: r,
    fetchStatus: n,
    predicate: s,
    queryKey: a,
    stale: l
  } = o;
  if (a) {
    if (r) {
      if (t.queryHash !== fw(a, t.options))
        return !1;
    } else if (!fl(t.queryKey, a))
      return !1;
  }
  if (i !== "all") {
    const d = t.isActive();
    if (i === "active" && !d || i === "inactive" && d)
      return !1;
  }
  return !(typeof l == "boolean" && t.isStale() !== l || n && n !== t.state.fetchStatus || s && !s(t));
}
c(hm, "matchQuery");
function um(o, t) {
  const { exact: i, status: r, predicate: n, mutationKey: s } = o;
  if (s) {
    if (!t.options.mutationKey)
      return !1;
    if (i) {
      if (io(t.options.mutationKey) !== io(s))
        return !1;
    } else if (!fl(t.options.mutationKey, s))
      return !1;
  }
  return !(r && t.state.status !== r || n && !n(t));
}
c(um, "matchMutation");
function fw(o, t) {
  return ((t == null ? void 0 : t.queryKeyHashFn) || io)(o);
}
c(fw, "hashQueryKeyByOptions");
function io(o) {
  return JSON.stringify(
    o,
    (t, i) => Mp(i) ? Object.keys(i).sort().reduce((r, n) => (r[n] = i[n], r), {}) : i
  );
}
c(io, "hashKey");
function fl(o, t) {
  return o === t ? !0 : typeof o != typeof t ? !1 : o && t && typeof o == "object" && typeof t == "object" ? !Object.keys(t).some((i) => !fl(o[i], t[i])) : !1;
}
c(fl, "partialMatchKey");
function xd(o, t) {
  if (o === t)
    return o;
  const i = pm(o) && pm(t);
  if (i || Mp(o) && Mp(t)) {
    const r = i ? o : Object.keys(o), n = r.length, s = i ? t : Object.keys(t), a = s.length, l = i ? [] : {};
    let d = 0;
    for (let h = 0; h < a; h++) {
      const w = i ? h : s[h];
      (!i && r.includes(w) || i) && o[w] === void 0 && t[w] === void 0 ? (l[w] = void 0, d++) : (l[w] = xd(o[w], t[w]), l[w] === o[w] && o[w] !== void 0 && d++);
    }
    return n === a && d === n ? o : l;
  }
  return t;
}
c(xd, "replaceEqualDeep");
function oh(o, t) {
  if (!t || Object.keys(o).length !== Object.keys(t).length)
    return !1;
  for (const i in o)
    if (o[i] !== t[i])
      return !1;
  return !0;
}
c(oh, "shallowEqualObjects");
function pm(o) {
  return Array.isArray(o) && o.length === Object.keys(o).length;
}
c(pm, "isPlainArray");
function Mp(o) {
  if (!ym(o))
    return !1;
  const t = o.constructor;
  if (t === void 0)
    return !0;
  const i = t.prototype;
  return !(!ym(i) || !i.hasOwnProperty("isPrototypeOf") || Object.getPrototypeOf(o) !== Object.prototype);
}
c(Mp, "isPlainObject");
function ym(o) {
  return Object.prototype.toString.call(o) === "[object Object]";
}
c(ym, "hasObjectPrototype");
function Hb(o) {
  return new Promise((t) => {
    setTimeout(t, o);
  });
}
c(Hb, "sleep");
function Tp(o, t, i) {
  return typeof i.structuralSharing == "function" ? i.structuralSharing(o, t) : i.structuralSharing !== !1 ? xd(o, t) : t;
}
c(Tp, "replaceData");
function Bb(o, t, i = 0) {
  const r = [...o, t];
  return i && r.length > i ? r.slice(1) : r;
}
c(Bb, "addToEnd");
function Ub(o, t, i = 0) {
  const r = [t, ...o];
  return i && r.length > i ? r.slice(0, -1) : r;
}
c(Ub, "addToStart");
var wg = Symbol();
function fg(o, t) {
  return !o.queryFn && (t != null && t.initialPromise) ? () => t.initialPromise : !o.queryFn || o.queryFn === wg ? () => Promise.reject(new Error(`Missing queryFn: '${o.queryHash}'`)) : o.queryFn;
}
c(fg, "ensureQueryFn");
var Mn, zr, rs, ns, jb = (ns = class extends Dc {
  constructor() {
    super();
    T(this, Mn);
    T(this, zr);
    T(this, rs);
    E(this, rs, (i) => {
      if (!gc && window.addEventListener) {
        const r = /* @__PURE__ */ c(() => i(), "listener");
        return window.addEventListener("visibilitychange", r, !1), () => {
          window.removeEventListener("visibilitychange", r);
        };
      }
    });
  }
  onSubscribe() {
    u(this, zr) || this.setEventListener(u(this, rs));
  }
  onUnsubscribe() {
    var i;
    this.hasListeners() || ((i = u(this, zr)) == null || i.call(this), E(this, zr, void 0));
  }
  setEventListener(i) {
    var r;
    E(this, rs, i), (r = u(this, zr)) == null || r.call(this), E(this, zr, i((n) => {
      typeof n == "boolean" ? this.setFocused(n) : this.onFocus();
    }));
  }
  setFocused(i) {
    u(this, Mn) !== i && (E(this, Mn, i), this.onFocus());
  }
  onFocus() {
    const i = this.isFocused();
    this.listeners.forEach((r) => {
      r(i);
    });
  }
  isFocused() {
    var i;
    return typeof u(this, Mn) == "boolean" ? u(this, Mn) : ((i = globalThis.document) == null ? void 0 : i.visibilityState) !== "hidden";
  }
}, Mn = new WeakMap(), zr = new WeakMap(), rs = new WeakMap(), c(ns, "FocusManager"), ns), mw = new jb(), os, Rr, ss, as, Wb = (as = class extends Dc {
  constructor() {
    super();
    T(this, os, !0);
    T(this, Rr);
    T(this, ss);
    E(this, ss, (i) => {
      if (!gc && window.addEventListener) {
        const r = /* @__PURE__ */ c(() => i(!0), "onlineListener"), n = /* @__PURE__ */ c(() => i(!1), "offlineListener");
        return window.addEventListener("online", r, !1), window.addEventListener("offline", n, !1), () => {
          window.removeEventListener("online", r), window.removeEventListener("offline", n);
        };
      }
    });
  }
  onSubscribe() {
    u(this, Rr) || this.setEventListener(u(this, ss));
  }
  onUnsubscribe() {
    var i;
    this.hasListeners() || ((i = u(this, Rr)) == null || i.call(this), E(this, Rr, void 0));
  }
  setEventListener(i) {
    var r;
    E(this, ss, i), (r = u(this, Rr)) == null || r.call(this), E(this, Rr, i(this.setOnline.bind(this)));
  }
  setOnline(i) {
    u(this, os) !== i && (E(this, os, i), this.listeners.forEach((n) => {
      n(i);
    }));
  }
  isOnline() {
    return u(this, os);
  }
}, os = new WeakMap(), Rr = new WeakMap(), ss = new WeakMap(), c(as, "OnlineManager"), as), sh = new Wb();
function qb(o) {
  return Math.min(1e3 * 2 ** o, 3e4);
}
c(qb, "defaultRetryDelay");
function mg(o) {
  return (o ?? "online") === "online" ? sh.isOnline() : !0;
}
c(mg, "canFetch");
var cs, vg = (cs = class extends Error {
  constructor(t) {
    super("CancelledError"), this.revert = t == null ? void 0 : t.revert, this.silent = t == null ? void 0 : t.silent;
  }
}, c(cs, "CancelledError"), cs);
function lp(o) {
  return o instanceof vg;
}
c(lp, "isCancelledError");
function gg(o) {
  let t = !1, i = 0, r = !1, n, s, a;
  const l = new Promise((k, S) => {
    s = k, a = S;
  }), d = /* @__PURE__ */ c((k) => {
    var S;
    r || (g(new vg(k)), (S = o.abort) == null || S.call(o));
  }, "cancel"), h = /* @__PURE__ */ c(() => {
    t = !0;
  }, "cancelRetry"), w = /* @__PURE__ */ c(() => {
    t = !1;
  }, "continueRetry"), m = /* @__PURE__ */ c(() => mw.isFocused() && (o.networkMode === "always" || sh.isOnline()) && o.canRun(), "canContinue"), f = /* @__PURE__ */ c(() => mg(o.networkMode) && o.canRun(), "canStart"), b = /* @__PURE__ */ c((k) => {
    var S;
    r || (r = !0, (S = o.onSuccess) == null || S.call(o, k), n == null || n(), s(k));
  }, "resolve"), g = /* @__PURE__ */ c((k) => {
    var S;
    r || (r = !0, (S = o.onError) == null || S.call(o, k), n == null || n(), a(k));
  }, "reject"), $ = /* @__PURE__ */ c(() => new Promise((k) => {
    var S;
    n = /* @__PURE__ */ c((_) => {
      (r || m()) && k(_);
    }, "continueFn"), (S = o.onPause) == null || S.call(o);
  }).then(() => {
    var k;
    n = void 0, r || (k = o.onContinue) == null || k.call(o);
  }), "pause"), O = /* @__PURE__ */ c(() => {
    if (r)
      return;
    let k;
    const S = i === 0 ? o.initialPromise : void 0;
    try {
      k = S ?? o.fn();
    } catch (_) {
      k = Promise.reject(_);
    }
    Promise.resolve(k).then(b).catch((_) => {
      var F;
      if (r)
        return;
      const V = o.retry ?? (gc ? 0 : 3), I = o.retryDelay ?? qb, D = typeof I == "function" ? I(i, _) : I, z = V === !0 || typeof V == "number" && i < V || typeof V == "function" && V(i, _);
      if (t || !z) {
        g(_);
        return;
      }
      i++, (F = o.onFail) == null || F.call(o, i, _), Hb(D).then(() => m() ? void 0 : $()).then(() => {
        t ? g(_) : O();
      });
    });
  }, "run");
  return {
    promise: l,
    cancel: d,
    continue: /* @__PURE__ */ c(() => (n == null || n(), l), "continue"),
    cancelRetry: h,
    continueRetry: w,
    canStart: f,
    start: /* @__PURE__ */ c(() => (f() ? O() : $().then(O), l), "start")
  };
}
c(gg, "createRetryer");
function Qb() {
  let o = [], t = 0, i = /* @__PURE__ */ c((f) => {
    f();
  }, "notifyFn"), r = /* @__PURE__ */ c((f) => {
    f();
  }, "batchNotifyFn"), n = /* @__PURE__ */ c((f) => setTimeout(f, 0), "scheduleFn");
  const s = /* @__PURE__ */ c((f) => {
    n = f;
  }, "setScheduler"), a = /* @__PURE__ */ c((f) => {
    let b;
    t++;
    try {
      b = f();
    } finally {
      t--, t || h();
    }
    return b;
  }, "batch"), l = /* @__PURE__ */ c((f) => {
    t ? o.push(f) : n(() => {
      i(f);
    });
  }, "schedule"), d = /* @__PURE__ */ c((f) => (...b) => {
    l(() => {
      f(...b);
    });
  }, "batchCalls"), h = /* @__PURE__ */ c(() => {
    const f = o;
    o = [], f.length && n(() => {
      r(() => {
        f.forEach((b) => {
          i(b);
        });
      });
    });
  }, "flush");
  return {
    batch: a,
    batchCalls: d,
    schedule: l,
    setNotifyFunction: /* @__PURE__ */ c((f) => {
      i = f;
    }, "setNotifyFunction"),
    setBatchNotifyFunction: /* @__PURE__ */ c((f) => {
      r = f;
    }, "setBatchNotifyFunction"),
    setScheduler: s
  };
}
c(Qb, "createNotifyManager");
var be = Qb(), Tn, ls, bg = (ls = class {
  constructor() {
    T(this, Tn);
  }
  destroy() {
    this.clearGcTimeout();
  }
  scheduleGc() {
    this.clearGcTimeout(), Lp(this.gcTime) && E(this, Tn, setTimeout(() => {
      this.optionalRemove();
    }, this.gcTime));
  }
  updateGcTime(t) {
    this.gcTime = Math.max(
      this.gcTime || 0,
      t ?? (gc ? 1 / 0 : 5 * 60 * 1e3)
    );
  }
  clearGcTimeout() {
    u(this, Tn) && (clearTimeout(u(this, Tn)), E(this, Tn, void 0));
  }
}, Tn = new WeakMap(), c(ls, "Removable"), ls), ds, hs, ei, Ee, Vl, An, fi, Yi, us, Kb = (us = class extends bg {
  constructor(i) {
    super();
    T(this, fi);
    T(this, ds);
    T(this, hs);
    T(this, ei);
    T(this, Ee);
    T(this, Vl);
    T(this, An);
    E(this, An, !1), E(this, Vl, i.defaultOptions), this.setOptions(i.options), this.observers = [], E(this, ei, i.cache), this.queryKey = i.queryKey, this.queryHash = i.queryHash, E(this, ds, Gb(this.options)), this.state = i.state ?? u(this, ds), this.scheduleGc();
  }
  get meta() {
    return this.options.meta;
  }
  get promise() {
    var i;
    return (i = u(this, Ee)) == null ? void 0 : i.promise;
  }
  setOptions(i) {
    this.options = { ...u(this, Vl), ...i }, this.updateGcTime(this.options.gcTime);
  }
  optionalRemove() {
    !this.observers.length && this.state.fetchStatus === "idle" && u(this, ei).remove(this);
  }
  setData(i, r) {
    const n = Tp(this.state.data, i, this.options);
    return P(this, fi, Yi).call(this, {
      data: n,
      type: "success",
      dataUpdatedAt: r == null ? void 0 : r.updatedAt,
      manual: r == null ? void 0 : r.manual
    }), n;
  }
  setState(i, r) {
    P(this, fi, Yi).call(this, { type: "setState", state: i, setStateOptions: r });
  }
  cancel(i) {
    var n, s;
    const r = (n = u(this, Ee)) == null ? void 0 : n.promise;
    return (s = u(this, Ee)) == null || s.cancel(i), r ? r.then(si).catch(si) : Promise.resolve();
  }
  destroy() {
    super.destroy(), this.cancel({ silent: !0 });
  }
  reset() {
    this.destroy(), this.setState(u(this, ds));
  }
  isActive() {
    return this.observers.some(
      (i) => mi(i.options.enabled, this) !== !1
    );
  }
  isDisabled() {
    return this.getObserversCount() > 0 && !this.isActive();
  }
  isStale() {
    return this.state.isInvalidated ? !0 : this.getObserversCount() > 0 ? this.observers.some(
      (i) => i.getCurrentResult().isStale
    ) : this.state.data === void 0;
  }
  isStaleByTime(i = 0) {
    return this.state.isInvalidated || this.state.data === void 0 || !yg(this.state.dataUpdatedAt, i);
  }
  onFocus() {
    var r;
    const i = this.observers.find((n) => n.shouldFetchOnWindowFocus());
    i == null || i.refetch({ cancelRefetch: !1 }), (r = u(this, Ee)) == null || r.continue();
  }
  onOnline() {
    var r;
    const i = this.observers.find((n) => n.shouldFetchOnReconnect());
    i == null || i.refetch({ cancelRefetch: !1 }), (r = u(this, Ee)) == null || r.continue();
  }
  addObserver(i) {
    this.observers.includes(i) || (this.observers.push(i), this.clearGcTimeout(), u(this, ei).notify({ type: "observerAdded", query: this, observer: i }));
  }
  removeObserver(i) {
    this.observers.includes(i) && (this.observers = this.observers.filter((r) => r !== i), this.observers.length || (u(this, Ee) && (u(this, An) ? u(this, Ee).cancel({ revert: !0 }) : u(this, Ee).cancelRetry()), this.scheduleGc()), u(this, ei).notify({ type: "observerRemoved", query: this, observer: i }));
  }
  getObserversCount() {
    return this.observers.length;
  }
  invalidate() {
    this.state.isInvalidated || P(this, fi, Yi).call(this, { type: "invalidate" });
  }
  fetch(i, r) {
    var h, w, m;
    if (this.state.fetchStatus !== "idle") {
      if (this.state.data !== void 0 && (r != null && r.cancelRefetch))
        this.cancel({ silent: !0 });
      else if (u(this, Ee))
        return u(this, Ee).continueRetry(), u(this, Ee).promise;
    }
    if (i && this.setOptions(i), !this.options.queryFn) {
      const f = this.observers.find((b) => b.options.queryFn);
      f && this.setOptions(f.options);
    }
    const n = new AbortController(), s = /* @__PURE__ */ c((f) => {
      Object.defineProperty(f, "signal", {
        enumerable: !0,
        get: /* @__PURE__ */ c(() => (E(this, An, !0), n.signal), "get")
      });
    }, "addSignalProperty"), a = /* @__PURE__ */ c(() => {
      const f = fg(this.options, r), b = {
        queryKey: this.queryKey,
        meta: this.meta
      };
      return s(b), E(this, An, !1), this.options.persister ? this.options.persister(
        f,
        b,
        this
      ) : f(b);
    }, "fetchFn"), l = {
      fetchOptions: r,
      options: this.options,
      queryKey: this.queryKey,
      state: this.state,
      fetchFn: a
    };
    s(l), (h = this.options.behavior) == null || h.onFetch(
      l,
      this
    ), E(this, hs, this.state), (this.state.fetchStatus === "idle" || this.state.fetchMeta !== ((w = l.fetchOptions) == null ? void 0 : w.meta)) && P(this, fi, Yi).call(this, { type: "fetch", meta: (m = l.fetchOptions) == null ? void 0 : m.meta });
    const d = /* @__PURE__ */ c((f) => {
      var b, g, $, O;
      lp(f) && f.silent || P(this, fi, Yi).call(this, {
        type: "error",
        error: f
      }), lp(f) || ((g = (b = u(this, ei).config).onError) == null || g.call(
        b,
        f,
        this
      ), (O = ($ = u(this, ei).config).onSettled) == null || O.call(
        $,
        this.state.data,
        f,
        this
      )), this.isFetchingOptimistic || this.scheduleGc(), this.isFetchingOptimistic = !1;
    }, "onError");
    return E(this, Ee, gg({
      initialPromise: r == null ? void 0 : r.initialPromise,
      fn: l.fetchFn,
      abort: n.abort.bind(n),
      onSuccess: /* @__PURE__ */ c((f) => {
        var b, g, $, O;
        if (f === void 0) {
          d(new Error(`${this.queryHash} data is undefined`));
          return;
        }
        this.setData(f), (g = (b = u(this, ei).config).onSuccess) == null || g.call(b, f, this), (O = ($ = u(this, ei).config).onSettled) == null || O.call(
          $,
          f,
          this.state.error,
          this
        ), this.isFetchingOptimistic || this.scheduleGc(), this.isFetchingOptimistic = !1;
      }, "onSuccess"),
      onError: d,
      onFail: /* @__PURE__ */ c((f, b) => {
        P(this, fi, Yi).call(this, { type: "failed", failureCount: f, error: b });
      }, "onFail"),
      onPause: /* @__PURE__ */ c(() => {
        P(this, fi, Yi).call(this, { type: "pause" });
      }, "onPause"),
      onContinue: /* @__PURE__ */ c(() => {
        P(this, fi, Yi).call(this, { type: "continue" });
      }, "onContinue"),
      retry: l.options.retry,
      retryDelay: l.options.retryDelay,
      networkMode: l.options.networkMode,
      canRun: /* @__PURE__ */ c(() => !0, "canRun")
    })), u(this, Ee).start();
  }
}, ds = new WeakMap(), hs = new WeakMap(), ei = new WeakMap(), Ee = new WeakMap(), Vl = new WeakMap(), An = new WeakMap(), fi = new WeakSet(), Yi = /* @__PURE__ */ c(function(i) {
  const r = /* @__PURE__ */ c((n) => {
    switch (i.type) {
      case "failed":
        return {
          ...n,
          fetchFailureCount: i.failureCount,
          fetchFailureReason: i.error
        };
      case "pause":
        return {
          ...n,
          fetchStatus: "paused"
        };
      case "continue":
        return {
          ...n,
          fetchStatus: "fetching"
        };
      case "fetch":
        return {
          ...n,
          ...xg(n.data, this.options),
          fetchMeta: i.meta ?? null
        };
      case "success":
        return {
          ...n,
          data: i.data,
          dataUpdateCount: n.dataUpdateCount + 1,
          dataUpdatedAt: i.dataUpdatedAt ?? Date.now(),
          error: null,
          isInvalidated: !1,
          status: "success",
          ...!i.manual && {
            fetchStatus: "idle",
            fetchFailureCount: 0,
            fetchFailureReason: null
          }
        };
      case "error":
        const s = i.error;
        return lp(s) && s.revert && u(this, hs) ? { ...u(this, hs), fetchStatus: "idle" } : {
          ...n,
          error: s,
          errorUpdateCount: n.errorUpdateCount + 1,
          errorUpdatedAt: Date.now(),
          fetchFailureCount: n.fetchFailureCount + 1,
          fetchFailureReason: s,
          fetchStatus: "idle",
          status: "error"
        };
      case "invalidate":
        return {
          ...n,
          isInvalidated: !0
        };
      case "setState":
        return {
          ...n,
          ...i.state
        };
    }
  }, "reducer");
  this.state = r(this.state), be.batch(() => {
    this.observers.forEach((n) => {
      n.onQueryUpdate();
    }), u(this, ei).notify({ query: this, type: "updated", action: i });
  });
}, "#dispatch"), c(us, "Query"), us);
function xg(o, t) {
  return {
    fetchFailureCount: 0,
    fetchFailureReason: null,
    fetchStatus: mg(t.networkMode) ? "fetching" : "paused",
    ...o === void 0 && {
      error: null,
      status: "pending"
    }
  };
}
c(xg, "fetchState");
function Gb(o) {
  const t = typeof o.initialData == "function" ? o.initialData() : o.initialData, i = t !== void 0, r = i ? typeof o.initialDataUpdatedAt == "function" ? o.initialDataUpdatedAt() : o.initialDataUpdatedAt : 0;
  return {
    data: t,
    dataUpdateCount: 0,
    dataUpdatedAt: i ? r ?? Date.now() : 0,
    error: null,
    errorUpdateCount: 0,
    errorUpdatedAt: 0,
    fetchFailureCount: 0,
    fetchFailureReason: null,
    fetchMeta: null,
    isInvalidated: !1,
    status: i ? "success" : "pending",
    fetchStatus: "idle"
  };
}
c(Gb, "getDefaultState$1");
var Li, ps, Zb = (ps = class extends Dc {
  constructor(i = {}) {
    super();
    T(this, Li);
    this.config = i, E(this, Li, /* @__PURE__ */ new Map());
  }
  build(i, r, n) {
    const s = r.queryKey, a = r.queryHash ?? fw(s, r);
    let l = this.get(a);
    return l || (l = new Kb({
      cache: this,
      queryKey: s,
      queryHash: a,
      options: i.defaultQueryOptions(r),
      state: n,
      defaultOptions: i.getQueryDefaults(s)
    }), this.add(l)), l;
  }
  add(i) {
    u(this, Li).has(i.queryHash) || (u(this, Li).set(i.queryHash, i), this.notify({
      type: "added",
      query: i
    }));
  }
  remove(i) {
    const r = u(this, Li).get(i.queryHash);
    r && (i.destroy(), r === i && u(this, Li).delete(i.queryHash), this.notify({ type: "removed", query: i }));
  }
  clear() {
    be.batch(() => {
      this.getAll().forEach((i) => {
        this.remove(i);
      });
    });
  }
  get(i) {
    return u(this, Li).get(i);
  }
  getAll() {
    return [...u(this, Li).values()];
  }
  find(i) {
    const r = { exact: !0, ...i };
    return this.getAll().find(
      (n) => hm(r, n)
    );
  }
  findAll(i = {}) {
    const r = this.getAll();
    return Object.keys(i).length > 0 ? r.filter((n) => hm(i, n)) : r;
  }
  notify(i) {
    be.batch(() => {
      this.listeners.forEach((r) => {
        r(i);
      });
    });
  }
  onFocus() {
    be.batch(() => {
      this.getAll().forEach((i) => {
        i.onFocus();
      });
    });
  }
  onOnline() {
    be.batch(() => {
      this.getAll().forEach((i) => {
        i.onOnline();
      });
    });
  }
}, Li = new WeakMap(), c(ps, "QueryCache"), ps), Mi, Ie, zn, Ti, Pr, ys, Yb = (ys = class extends bg {
  constructor(i) {
    super();
    T(this, Ti);
    T(this, Mi);
    T(this, Ie);
    T(this, zn);
    this.mutationId = i.mutationId, E(this, Ie, i.mutationCache), E(this, Mi, []), this.state = i.state || Cg(), this.setOptions(i.options), this.scheduleGc();
  }
  setOptions(i) {
    this.options = i, this.updateGcTime(this.options.gcTime);
  }
  get meta() {
    return this.options.meta;
  }
  addObserver(i) {
    u(this, Mi).includes(i) || (u(this, Mi).push(i), this.clearGcTimeout(), u(this, Ie).notify({
      type: "observerAdded",
      mutation: this,
      observer: i
    }));
  }
  removeObserver(i) {
    E(this, Mi, u(this, Mi).filter((r) => r !== i)), this.scheduleGc(), u(this, Ie).notify({
      type: "observerRemoved",
      mutation: this,
      observer: i
    });
  }
  optionalRemove() {
    u(this, Mi).length || (this.state.status === "pending" ? this.scheduleGc() : u(this, Ie).remove(this));
  }
  continue() {
    var i;
    return ((i = u(this, zn)) == null ? void 0 : i.continue()) ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before
    this.execute(this.state.variables);
  }
  async execute(i) {
    var s, a, l, d, h, w, m, f, b, g, $, O, k, S, _, V, I, D, z, F;
    E(this, zn, gg({
      fn: /* @__PURE__ */ c(() => this.options.mutationFn ? this.options.mutationFn(i) : Promise.reject(new Error("No mutationFn found")), "fn"),
      onFail: /* @__PURE__ */ c((A, N) => {
        P(this, Ti, Pr).call(this, { type: "failed", failureCount: A, error: N });
      }, "onFail"),
      onPause: /* @__PURE__ */ c(() => {
        P(this, Ti, Pr).call(this, { type: "pause" });
      }, "onPause"),
      onContinue: /* @__PURE__ */ c(() => {
        P(this, Ti, Pr).call(this, { type: "continue" });
      }, "onContinue"),
      retry: this.options.retry ?? 0,
      retryDelay: this.options.retryDelay,
      networkMode: this.options.networkMode,
      canRun: /* @__PURE__ */ c(() => u(this, Ie).canRun(this), "canRun")
    }));
    const r = this.state.status === "pending", n = !u(this, zn).canStart();
    try {
      if (!r) {
        P(this, Ti, Pr).call(this, { type: "pending", variables: i, isPaused: n }), await ((a = (s = u(this, Ie).config).onMutate) == null ? void 0 : a.call(
          s,
          i,
          this
        ));
        const N = await ((d = (l = this.options).onMutate) == null ? void 0 : d.call(l, i));
        N !== this.state.context && P(this, Ti, Pr).call(this, {
          type: "pending",
          context: N,
          variables: i,
          isPaused: n
        });
      }
      const A = await u(this, zn).start();
      return await ((w = (h = u(this, Ie).config).onSuccess) == null ? void 0 : w.call(
        h,
        A,
        i,
        this.state.context,
        this
      )), await ((f = (m = this.options).onSuccess) == null ? void 0 : f.call(m, A, i, this.state.context)), await ((g = (b = u(this, Ie).config).onSettled) == null ? void 0 : g.call(
        b,
        A,
        null,
        this.state.variables,
        this.state.context,
        this
      )), await ((O = ($ = this.options).onSettled) == null ? void 0 : O.call($, A, null, i, this.state.context)), P(this, Ti, Pr).call(this, { type: "success", data: A }), A;
    } catch (A) {
      try {
        throw await ((S = (k = u(this, Ie).config).onError) == null ? void 0 : S.call(
          k,
          A,
          i,
          this.state.context,
          this
        )), await ((V = (_ = this.options).onError) == null ? void 0 : V.call(
          _,
          A,
          i,
          this.state.context
        )), await ((D = (I = u(this, Ie).config).onSettled) == null ? void 0 : D.call(
          I,
          void 0,
          A,
          this.state.variables,
          this.state.context,
          this
        )), await ((F = (z = this.options).onSettled) == null ? void 0 : F.call(
          z,
          void 0,
          A,
          i,
          this.state.context
        )), A;
      } finally {
        P(this, Ti, Pr).call(this, { type: "error", error: A });
      }
    } finally {
      u(this, Ie).runNext(this);
    }
  }
}, Mi = new WeakMap(), Ie = new WeakMap(), zn = new WeakMap(), Ti = new WeakSet(), Pr = /* @__PURE__ */ c(function(i) {
  const r = /* @__PURE__ */ c((n) => {
    switch (i.type) {
      case "failed":
        return {
          ...n,
          failureCount: i.failureCount,
          failureReason: i.error
        };
      case "pause":
        return {
          ...n,
          isPaused: !0
        };
      case "continue":
        return {
          ...n,
          isPaused: !1
        };
      case "pending":
        return {
          ...n,
          context: i.context,
          data: void 0,
          failureCount: 0,
          failureReason: null,
          error: null,
          isPaused: i.isPaused,
          status: "pending",
          variables: i.variables,
          submittedAt: Date.now()
        };
      case "success":
        return {
          ...n,
          data: i.data,
          failureCount: 0,
          failureReason: null,
          error: null,
          status: "success",
          isPaused: !1
        };
      case "error":
        return {
          ...n,
          data: void 0,
          error: i.error,
          failureCount: n.failureCount + 1,
          failureReason: i.error,
          isPaused: !1,
          status: "error"
        };
    }
  }, "reducer");
  this.state = r(this.state), be.batch(() => {
    u(this, Mi).forEach((n) => {
      n.onMutationUpdate(i);
    }), u(this, Ie).notify({
      mutation: this,
      type: "updated",
      action: i
    });
  });
}, "#dispatch"), c(ys, "Mutation"), ys);
function Cg() {
  return {
    context: void 0,
    data: void 0,
    error: null,
    failureCount: 0,
    failureReason: null,
    isPaused: !1,
    status: "idle",
    variables: void 0,
    submittedAt: 0
  };
}
c(Cg, "getDefaultState");
var Qe, Hl, ws, Xb = (ws = class extends Dc {
  constructor(i = {}) {
    super();
    T(this, Qe);
    T(this, Hl);
    this.config = i, E(this, Qe, /* @__PURE__ */ new Map()), E(this, Hl, Date.now());
  }
  build(i, r, n) {
    const s = new Yb({
      mutationCache: this,
      mutationId: ++Xc(this, Hl)._,
      options: i.defaultMutationOptions(r),
      state: n
    });
    return this.add(s), s;
  }
  add(i) {
    const r = Od(i), n = u(this, Qe).get(r) ?? [];
    n.push(i), u(this, Qe).set(r, n), this.notify({ type: "added", mutation: i });
  }
  remove(i) {
    var n;
    const r = Od(i);
    if (u(this, Qe).has(r)) {
      const s = (n = u(this, Qe).get(r)) == null ? void 0 : n.filter((a) => a !== i);
      s && (s.length === 0 ? u(this, Qe).delete(r) : u(this, Qe).set(r, s));
    }
    this.notify({ type: "removed", mutation: i });
  }
  canRun(i) {
    var n;
    const r = (n = u(this, Qe).get(Od(i))) == null ? void 0 : n.find((s) => s.state.status === "pending");
    return !r || r === i;
  }
  runNext(i) {
    var n;
    const r = (n = u(this, Qe).get(Od(i))) == null ? void 0 : n.find((s) => s !== i && s.state.isPaused);
    return (r == null ? void 0 : r.continue()) ?? Promise.resolve();
  }
  clear() {
    be.batch(() => {
      this.getAll().forEach((i) => {
        this.remove(i);
      });
    });
  }
  getAll() {
    return [...u(this, Qe).values()].flat();
  }
  find(i) {
    const r = { exact: !0, ...i };
    return this.getAll().find(
      (n) => um(r, n)
    );
  }
  findAll(i = {}) {
    return this.getAll().filter((r) => um(i, r));
  }
  notify(i) {
    be.batch(() => {
      this.listeners.forEach((r) => {
        r(i);
      });
    });
  }
  resumePausedMutations() {
    const i = this.getAll().filter((r) => r.state.isPaused);
    return be.batch(
      () => Promise.all(
        i.map((r) => r.continue().catch(si))
      )
    );
  }
}, Qe = new WeakMap(), Hl = new WeakMap(), c(ws, "MutationCache"), ws);
function Od(o) {
  var t;
  return ((t = o.options.scope) == null ? void 0 : t.id) ?? String(o.mutationId);
}
c(Od, "scopeFor");
function Ap(o) {
  return {
    onFetch: /* @__PURE__ */ c((t, i) => {
      const r = /* @__PURE__ */ c(async () => {
        var g, $, O, k, S;
        const n = t.options, s = (O = ($ = (g = t.fetchOptions) == null ? void 0 : g.meta) == null ? void 0 : $.fetchMore) == null ? void 0 : O.direction, a = ((k = t.state.data) == null ? void 0 : k.pages) || [], l = ((S = t.state.data) == null ? void 0 : S.pageParams) || [], d = { pages: [], pageParams: [] };
        let h = !1;
        const w = /* @__PURE__ */ c((_) => {
          Object.defineProperty(_, "signal", {
            enumerable: !0,
            get: /* @__PURE__ */ c(() => (t.signal.aborted ? h = !0 : t.signal.addEventListener("abort", () => {
              h = !0;
            }), t.signal), "get")
          });
        }, "addSignalProperty"), m = fg(t.options, t.fetchOptions), f = /* @__PURE__ */ c(async (_, V, I) => {
          if (h)
            return Promise.reject();
          if (V == null && _.pages.length)
            return Promise.resolve(_);
          const D = {
            queryKey: t.queryKey,
            pageParam: V,
            direction: I ? "backward" : "forward",
            meta: t.options.meta
          };
          w(D);
          const z = await m(
            D
          ), { maxPages: F } = t.options, A = I ? Ub : Bb;
          return {
            pages: A(_.pages, z, F),
            pageParams: A(_.pageParams, V, F)
          };
        }, "fetchPage");
        let b;
        if (s && a.length) {
          const _ = s === "backward", V = _ ? kg : zp, I = {
            pages: a,
            pageParams: l
          }, D = V(n, I);
          b = await f(I, D, _);
        } else {
          b = await f(
            d,
            l[0] ?? n.initialPageParam
          );
          const _ = o ?? a.length;
          for (let V = 1; V < _; V++) {
            const I = zp(n, b);
            if (I == null)
              break;
            b = await f(b, I);
          }
        }
        return b;
      }, "fetchFn");
      t.options.persister ? t.fetchFn = () => {
        var n, s;
        return (s = (n = t.options).persister) == null ? void 0 : s.call(
          n,
          r,
          {
            queryKey: t.queryKey,
            meta: t.options.meta,
            signal: t.signal
          },
          i
        );
      } : t.fetchFn = r;
    }, "onFetch")
  };
}
c(Ap, "infiniteQueryBehavior");
function zp(o, { pages: t, pageParams: i }) {
  const r = t.length - 1;
  return t.length > 0 ? o.getNextPageParam(
    t[r],
    t,
    i[r],
    i
  ) : void 0;
}
c(zp, "getNextPageParam");
function kg(o, { pages: t, pageParams: i }) {
  var r;
  return t.length > 0 ? (r = o.getPreviousPageParam) == null ? void 0 : r.call(o, t[0], t, i[0], i) : void 0;
}
c(kg, "getPreviousPageParam");
function Jb(o, t) {
  return t ? zp(o, t) != null : !1;
}
c(Jb, "hasNextPage");
function t2(o, t) {
  return !t || !o.getPreviousPageParam ? !1 : kg(o, t) != null;
}
c(t2, "hasPreviousPage");
var Vt, Ir, Or, fs, ms, Dr, vs, gs, bs, e2 = (bs = class {
  constructor(t = {}) {
    T(this, Vt);
    T(this, Ir);
    T(this, Or);
    T(this, fs);
    T(this, ms);
    T(this, Dr);
    T(this, vs);
    T(this, gs);
    E(this, Vt, t.queryCache || new Zb()), E(this, Ir, t.mutationCache || new Xb()), E(this, Or, t.defaultOptions || {}), E(this, fs, /* @__PURE__ */ new Map()), E(this, ms, /* @__PURE__ */ new Map()), E(this, Dr, 0);
  }
  mount() {
    Xc(this, Dr)._++, u(this, Dr) === 1 && (E(this, vs, mw.subscribe(async (t) => {
      t && (await this.resumePausedMutations(), u(this, Vt).onFocus());
    })), E(this, gs, sh.subscribe(async (t) => {
      t && (await this.resumePausedMutations(), u(this, Vt).onOnline());
    })));
  }
  unmount() {
    var t, i;
    Xc(this, Dr)._--, u(this, Dr) === 0 && ((t = u(this, vs)) == null || t.call(this), E(this, vs, void 0), (i = u(this, gs)) == null || i.call(this), E(this, gs, void 0));
  }
  isFetching(t) {
    return u(this, Vt).findAll({ ...t, fetchStatus: "fetching" }).length;
  }
  isMutating(t) {
    return u(this, Ir).findAll({ ...t, status: "pending" }).length;
  }
  getQueryData(t) {
    var r;
    const i = this.defaultQueryOptions({ queryKey: t });
    return (r = u(this, Vt).get(i.queryHash)) == null ? void 0 : r.state.data;
  }
  ensureQueryData(t) {
    const i = this.getQueryData(t.queryKey);
    if (i === void 0)
      return this.fetchQuery(t);
    {
      const r = this.defaultQueryOptions(t), n = u(this, Vt).build(this, r);
      return t.revalidateIfStale && n.isStaleByTime(Qo(r.staleTime, n)) && this.prefetchQuery(r), Promise.resolve(i);
    }
  }
  getQueriesData(t) {
    return u(this, Vt).findAll(t).map(({ queryKey: i, state: r }) => {
      const n = r.data;
      return [i, n];
    });
  }
  setQueryData(t, i, r) {
    const n = this.defaultQueryOptions({ queryKey: t }), s = u(this, Vt).get(
      n.queryHash
    ), a = s == null ? void 0 : s.state.data, l = Vb(i, a);
    if (l !== void 0)
      return u(this, Vt).build(this, n).setData(l, { ...r, manual: !0 });
  }
  setQueriesData(t, i, r) {
    return be.batch(
      () => u(this, Vt).findAll(t).map(({ queryKey: n }) => [
        n,
        this.setQueryData(n, i, r)
      ])
    );
  }
  getQueryState(t) {
    var r;
    const i = this.defaultQueryOptions({ queryKey: t });
    return (r = u(this, Vt).get(i.queryHash)) == null ? void 0 : r.state;
  }
  removeQueries(t) {
    const i = u(this, Vt);
    be.batch(() => {
      i.findAll(t).forEach((r) => {
        i.remove(r);
      });
    });
  }
  resetQueries(t, i) {
    const r = u(this, Vt), n = {
      type: "active",
      ...t
    };
    return be.batch(() => (r.findAll(t).forEach((s) => {
      s.reset();
    }), this.refetchQueries(n, i)));
  }
  cancelQueries(t = {}, i = {}) {
    const r = { revert: !0, ...i }, n = be.batch(
      () => u(this, Vt).findAll(t).map((s) => s.cancel(r))
    );
    return Promise.all(n).then(si).catch(si);
  }
  invalidateQueries(t = {}, i = {}) {
    return be.batch(() => {
      if (u(this, Vt).findAll(t).forEach((n) => {
        n.invalidate();
      }), t.refetchType === "none")
        return Promise.resolve();
      const r = {
        ...t,
        type: t.refetchType ?? t.type ?? "active"
      };
      return this.refetchQueries(r, i);
    });
  }
  refetchQueries(t = {}, i) {
    const r = {
      ...i,
      cancelRefetch: (i == null ? void 0 : i.cancelRefetch) ?? !0
    }, n = be.batch(
      () => u(this, Vt).findAll(t).filter((s) => !s.isDisabled()).map((s) => {
        let a = s.fetch(void 0, r);
        return r.throwOnError || (a = a.catch(si)), s.state.fetchStatus === "paused" ? Promise.resolve() : a;
      })
    );
    return Promise.all(n).then(si);
  }
  fetchQuery(t) {
    const i = this.defaultQueryOptions(t);
    i.retry === void 0 && (i.retry = !1);
    const r = u(this, Vt).build(this, i);
    return r.isStaleByTime(
      Qo(i.staleTime, r)
    ) ? r.fetch(i) : Promise.resolve(r.state.data);
  }
  prefetchQuery(t) {
    return this.fetchQuery(t).then(si).catch(si);
  }
  fetchInfiniteQuery(t) {
    return t.behavior = Ap(t.pages), this.fetchQuery(t);
  }
  prefetchInfiniteQuery(t) {
    return this.fetchInfiniteQuery(t).then(si).catch(si);
  }
  resumePausedMutations() {
    return sh.isOnline() ? u(this, Ir).resumePausedMutations() : Promise.resolve();
  }
  getQueryCache() {
    return u(this, Vt);
  }
  getMutationCache() {
    return u(this, Ir);
  }
  getDefaultOptions() {
    return u(this, Or);
  }
  setDefaultOptions(t) {
    E(this, Or, t);
  }
  setQueryDefaults(t, i) {
    u(this, fs).set(io(t), {
      queryKey: t,
      defaultOptions: i
    });
  }
  getQueryDefaults(t) {
    const i = [...u(this, fs).values()];
    let r = {};
    return i.forEach((n) => {
      fl(t, n.queryKey) && (r = { ...r, ...n.defaultOptions });
    }), r;
  }
  setMutationDefaults(t, i) {
    u(this, ms).set(io(t), {
      mutationKey: t,
      defaultOptions: i
    });
  }
  getMutationDefaults(t) {
    const i = [...u(this, ms).values()];
    let r = {};
    return i.forEach((n) => {
      fl(t, n.mutationKey) && (r = { ...r, ...n.defaultOptions });
    }), r;
  }
  defaultQueryOptions(t) {
    if (t._defaulted)
      return t;
    const i = {
      ...u(this, Or).queries,
      ...this.getQueryDefaults(t.queryKey),
      ...t,
      _defaulted: !0
    };
    return i.queryHash || (i.queryHash = fw(
      i.queryKey,
      i
    )), i.refetchOnReconnect === void 0 && (i.refetchOnReconnect = i.networkMode !== "always"), i.throwOnError === void 0 && (i.throwOnError = !!i.suspense), !i.networkMode && i.persister && (i.networkMode = "offlineFirst"), i.enabled !== !0 && i.queryFn === wg && (i.enabled = !1), i;
  }
  defaultMutationOptions(t) {
    return t != null && t._defaulted ? t : {
      ...u(this, Or).mutations,
      ...(t == null ? void 0 : t.mutationKey) && this.getMutationDefaults(t.mutationKey),
      ...t,
      _defaulted: !0
    };
  }
  clear() {
    u(this, Vt).clear(), u(this, Ir).clear();
  }
}, Vt = new WeakMap(), Ir = new WeakMap(), Or = new WeakMap(), fs = new WeakMap(), ms = new WeakMap(), Dr = new WeakMap(), vs = new WeakMap(), gs = new WeakMap(), c(bs, "QueryClient"), bs), je, mt, Bl, Oe, Rn, xs, Ai, Ul, Cs, ks, In, On, Fr, $s, $t, el, Rp, Ip, Op, Dp, Fp, Np, Vp, Eg, Es, $g = (Es = class extends Dc {
  constructor(i, r) {
    super();
    T(this, $t);
    T(this, je);
    T(this, mt);
    T(this, Bl);
    T(this, Oe);
    T(this, Rn);
    T(this, xs);
    T(this, Ai);
    T(this, Ul);
    T(this, Cs);
    // This property keeps track of the last query with defined data.
    // It will be used to pass the previous data and query to the placeholder function between renders.
    T(this, ks);
    T(this, In);
    T(this, On);
    T(this, Fr);
    T(this, $s, /* @__PURE__ */ new Set());
    this.options = r, E(this, je, i), E(this, Ai, null), this.bindMethods(), this.setOptions(r);
  }
  bindMethods() {
    this.refetch = this.refetch.bind(this);
  }
  onSubscribe() {
    this.listeners.size === 1 && (u(this, mt).addObserver(this), wm(u(this, mt), this.options) ? P(this, $t, el).call(this) : this.updateResult(), P(this, $t, Dp).call(this));
  }
  onUnsubscribe() {
    this.hasListeners() || this.destroy();
  }
  shouldFetchOnReconnect() {
    return Hp(
      u(this, mt),
      this.options,
      this.options.refetchOnReconnect
    );
  }
  shouldFetchOnWindowFocus() {
    return Hp(
      u(this, mt),
      this.options,
      this.options.refetchOnWindowFocus
    );
  }
  destroy() {
    this.listeners = /* @__PURE__ */ new Set(), P(this, $t, Fp).call(this), P(this, $t, Np).call(this), u(this, mt).removeObserver(this);
  }
  setOptions(i, r) {
    const n = this.options, s = u(this, mt);
    if (this.options = u(this, je).defaultQueryOptions(i), this.options.enabled !== void 0 && typeof this.options.enabled != "boolean" && typeof this.options.enabled != "function" && typeof mi(this.options.enabled, u(this, mt)) != "boolean")
      throw new Error(
        "Expected enabled to be a boolean or a callback that returns a boolean"
      );
    P(this, $t, Vp).call(this), u(this, mt).setOptions(this.options), n._defaulted && !oh(this.options, n) && u(this, je).getQueryCache().notify({
      type: "observerOptionsUpdated",
      query: u(this, mt),
      observer: this
    });
    const a = this.hasListeners();
    a && fm(
      u(this, mt),
      s,
      this.options,
      n
    ) && P(this, $t, el).call(this), this.updateResult(r), a && (u(this, mt) !== s || mi(this.options.enabled, u(this, mt)) !== mi(n.enabled, u(this, mt)) || Qo(this.options.staleTime, u(this, mt)) !== Qo(n.staleTime, u(this, mt))) && P(this, $t, Rp).call(this);
    const l = P(this, $t, Ip).call(this);
    a && (u(this, mt) !== s || mi(this.options.enabled, u(this, mt)) !== mi(n.enabled, u(this, mt)) || l !== u(this, Fr)) && P(this, $t, Op).call(this, l);
  }
  getOptimisticResult(i) {
    const r = u(this, je).getQueryCache().build(u(this, je), i), n = this.createResult(r, i);
    return r2(this, n) && (E(this, Oe, n), E(this, xs, this.options), E(this, Rn, u(this, mt).state)), n;
  }
  getCurrentResult() {
    return u(this, Oe);
  }
  trackResult(i, r) {
    const n = {};
    return Object.keys(i).forEach((s) => {
      Object.defineProperty(n, s, {
        configurable: !1,
        enumerable: !0,
        get: /* @__PURE__ */ c(() => (this.trackProp(s), r == null || r(s), i[s]), "get")
      });
    }), n;
  }
  trackProp(i) {
    u(this, $s).add(i);
  }
  getCurrentQuery() {
    return u(this, mt);
  }
  refetch({ ...i } = {}) {
    return this.fetch({
      ...i
    });
  }
  fetchOptimistic(i) {
    const r = u(this, je).defaultQueryOptions(i), n = u(this, je).getQueryCache().build(u(this, je), r);
    return n.isFetchingOptimistic = !0, n.fetch().then(() => this.createResult(n, r));
  }
  fetch(i) {
    return P(this, $t, el).call(this, {
      ...i,
      cancelRefetch: i.cancelRefetch ?? !0
    }).then(() => (this.updateResult(), u(this, Oe)));
  }
  createResult(i, r) {
    var F;
    const n = u(this, mt), s = this.options, a = u(this, Oe), l = u(this, Rn), d = u(this, xs), w = i !== n ? i.state : u(this, Bl), { state: m } = i;
    let f = { ...m }, b = !1, g;
    if (r._optimisticResults) {
      const A = this.hasListeners(), N = !A && wm(i, r), G = A && fm(i, n, r, s);
      (N || G) && (f = {
        ...f,
        ...xg(m.data, i.options)
      }), r._optimisticResults === "isRestoring" && (f.fetchStatus = "idle");
    }
    let { error: $, errorUpdatedAt: O, status: k } = f;
    if (r.select && f.data !== void 0)
      if (a && f.data === (l == null ? void 0 : l.data) && r.select === u(this, Ul))
        g = u(this, Cs);
      else
        try {
          E(this, Ul, r.select), g = r.select(f.data), g = Tp(a == null ? void 0 : a.data, g, r), E(this, Cs, g), E(this, Ai, null);
        } catch (A) {
          E(this, Ai, A);
        }
    else
      g = f.data;
    if (r.placeholderData !== void 0 && g === void 0 && k === "pending") {
      let A;
      if (a != null && a.isPlaceholderData && r.placeholderData === (d == null ? void 0 : d.placeholderData))
        A = a.data;
      else if (A = typeof r.placeholderData == "function" ? r.placeholderData(
        (F = u(this, ks)) == null ? void 0 : F.state.data,
        u(this, ks)
      ) : r.placeholderData, r.select && A !== void 0)
        try {
          A = r.select(A), E(this, Ai, null);
        } catch (N) {
          E(this, Ai, N);
        }
      A !== void 0 && (k = "success", g = Tp(
        a == null ? void 0 : a.data,
        A,
        r
      ), b = !0);
    }
    u(this, Ai) && ($ = u(this, Ai), g = u(this, Cs), O = Date.now(), k = "error");
    const S = f.fetchStatus === "fetching", _ = k === "pending", V = k === "error", I = _ && S, D = g !== void 0;
    return {
      status: k,
      fetchStatus: f.fetchStatus,
      isPending: _,
      isSuccess: k === "success",
      isError: V,
      isInitialLoading: I,
      isLoading: I,
      data: g,
      dataUpdatedAt: f.dataUpdatedAt,
      error: $,
      errorUpdatedAt: O,
      failureCount: f.fetchFailureCount,
      failureReason: f.fetchFailureReason,
      errorUpdateCount: f.errorUpdateCount,
      isFetched: f.dataUpdateCount > 0 || f.errorUpdateCount > 0,
      isFetchedAfterMount: f.dataUpdateCount > w.dataUpdateCount || f.errorUpdateCount > w.errorUpdateCount,
      isFetching: S,
      isRefetching: S && !_,
      isLoadingError: V && !D,
      isPaused: f.fetchStatus === "paused",
      isPlaceholderData: b,
      isRefetchError: V && D,
      isStale: vw(i, r),
      refetch: this.refetch
    };
  }
  updateResult(i) {
    const r = u(this, Oe), n = this.createResult(u(this, mt), this.options);
    if (E(this, Rn, u(this, mt).state), E(this, xs, this.options), u(this, Rn).data !== void 0 && E(this, ks, u(this, mt)), oh(n, r))
      return;
    E(this, Oe, n);
    const s = {}, a = /* @__PURE__ */ c(() => {
      if (!r)
        return !0;
      const { notifyOnChangeProps: l } = this.options, d = typeof l == "function" ? l() : l;
      if (d === "all" || !d && !u(this, $s).size)
        return !0;
      const h = new Set(
        d ?? u(this, $s)
      );
      return this.options.throwOnError && h.add("error"), Object.keys(u(this, Oe)).some((w) => {
        const m = w;
        return u(this, Oe)[m] !== r[m] && h.has(m);
      });
    }, "shouldNotifyListeners");
    (i == null ? void 0 : i.listeners) !== !1 && a() && (s.listeners = !0), P(this, $t, Eg).call(this, { ...s, ...i });
  }
  onQueryUpdate() {
    this.updateResult(), this.hasListeners() && P(this, $t, Dp).call(this);
  }
}, je = new WeakMap(), mt = new WeakMap(), Bl = new WeakMap(), Oe = new WeakMap(), Rn = new WeakMap(), xs = new WeakMap(), Ai = new WeakMap(), Ul = new WeakMap(), Cs = new WeakMap(), ks = new WeakMap(), In = new WeakMap(), On = new WeakMap(), Fr = new WeakMap(), $s = new WeakMap(), $t = new WeakSet(), el = /* @__PURE__ */ c(function(i) {
  P(this, $t, Vp).call(this);
  let r = u(this, mt).fetch(
    this.options,
    i
  );
  return i != null && i.throwOnError || (r = r.catch(si)), r;
}, "#executeFetch"), Rp = /* @__PURE__ */ c(function() {
  P(this, $t, Fp).call(this);
  const i = Qo(
    this.options.staleTime,
    u(this, mt)
  );
  if (gc || u(this, Oe).isStale || !Lp(i))
    return;
  const n = yg(u(this, Oe).dataUpdatedAt, i) + 1;
  E(this, In, setTimeout(() => {
    u(this, Oe).isStale || this.updateResult();
  }, n));
}, "#updateStaleTimeout"), Ip = /* @__PURE__ */ c(function() {
  return (typeof this.options.refetchInterval == "function" ? this.options.refetchInterval(u(this, mt)) : this.options.refetchInterval) ?? !1;
}, "#computeRefetchInterval"), Op = /* @__PURE__ */ c(function(i) {
  P(this, $t, Np).call(this), E(this, Fr, i), !(gc || mi(this.options.enabled, u(this, mt)) === !1 || !Lp(u(this, Fr)) || u(this, Fr) === 0) && E(this, On, setInterval(() => {
    (this.options.refetchIntervalInBackground || mw.isFocused()) && P(this, $t, el).call(this);
  }, u(this, Fr)));
}, "#updateRefetchInterval"), Dp = /* @__PURE__ */ c(function() {
  P(this, $t, Rp).call(this), P(this, $t, Op).call(this, P(this, $t, Ip).call(this));
}, "#updateTimers"), Fp = /* @__PURE__ */ c(function() {
  u(this, In) && (clearTimeout(u(this, In)), E(this, In, void 0));
}, "#clearStaleTimeout"), Np = /* @__PURE__ */ c(function() {
  u(this, On) && (clearInterval(u(this, On)), E(this, On, void 0));
}, "#clearRefetchInterval"), Vp = /* @__PURE__ */ c(function() {
  const i = u(this, je).getQueryCache().build(u(this, je), this.options);
  if (i === u(this, mt))
    return;
  const r = u(this, mt);
  E(this, mt, i), E(this, Bl, i.state), this.hasListeners() && (r == null || r.removeObserver(this), i.addObserver(this));
}, "#updateQuery"), Eg = /* @__PURE__ */ c(function(i) {
  be.batch(() => {
    i.listeners && this.listeners.forEach((r) => {
      r(u(this, Oe));
    }), u(this, je).getQueryCache().notify({
      query: u(this, mt),
      type: "observerResultsUpdated"
    });
  });
}, "#notify"), c(Es, "QueryObserver"), Es);
function i2(o, t) {
  return mi(t.enabled, o) !== !1 && o.state.data === void 0 && !(o.state.status === "error" && t.retryOnMount === !1);
}
c(i2, "shouldLoadOnMount");
function wm(o, t) {
  return i2(o, t) || o.state.data !== void 0 && Hp(o, t, t.refetchOnMount);
}
c(wm, "shouldFetchOnMount");
function Hp(o, t, i) {
  if (mi(t.enabled, o) !== !1) {
    const r = typeof i == "function" ? i(o) : i;
    return r === "always" || r !== !1 && vw(o, t);
  }
  return !1;
}
c(Hp, "shouldFetchOn");
function fm(o, t, i, r) {
  return (o !== t || mi(r.enabled, o) === !1) && (!i.suspense || o.state.status !== "error") && vw(o, i);
}
c(fm, "shouldFetchOptionally");
function vw(o, t) {
  return mi(t.enabled, o) !== !1 && o.isStaleByTime(Qo(t.staleTime, o));
}
c(vw, "isStale");
function r2(o, t) {
  return !oh(o.getCurrentResult(), t);
}
c(r2, "shouldAssignObserverCurrentProperties");
var _s, n2 = (_s = class extends $g {
  constructor(t, i) {
    super(t, i);
  }
  bindMethods() {
    super.bindMethods(), this.fetchNextPage = this.fetchNextPage.bind(this), this.fetchPreviousPage = this.fetchPreviousPage.bind(this);
  }
  setOptions(t, i) {
    super.setOptions(
      {
        ...t,
        behavior: Ap()
      },
      i
    );
  }
  getOptimisticResult(t) {
    return t.behavior = Ap(), super.getOptimisticResult(t);
  }
  fetchNextPage(t) {
    return this.fetch({
      ...t,
      meta: {
        fetchMore: { direction: "forward" }
      }
    });
  }
  fetchPreviousPage(t) {
    return this.fetch({
      ...t,
      meta: {
        fetchMore: { direction: "backward" }
      }
    });
  }
  createResult(t, i) {
    var $, O;
    const { state: r } = t, n = super.createResult(t, i), { isFetching: s, isRefetching: a, isError: l, isRefetchError: d } = n, h = (O = ($ = r.fetchMeta) == null ? void 0 : $.fetchMore) == null ? void 0 : O.direction, w = l && h === "forward", m = s && h === "forward", f = l && h === "backward", b = s && h === "backward";
    return {
      ...n,
      fetchNextPage: this.fetchNextPage,
      fetchPreviousPage: this.fetchPreviousPage,
      hasNextPage: Jb(i, r.data),
      hasPreviousPage: t2(i, r.data),
      isFetchNextPageError: w,
      isFetchingNextPage: m,
      isFetchPreviousPageError: f,
      isFetchingPreviousPage: b,
      isRefetchError: d && !w && !f,
      isRefetching: a && !m && !b
    };
  }
}, c(_s, "InfiniteQueryObserver"), _s), Nr, Vr, We, er, dr, Ud, Bp, Ps, kt = (Ps = class extends Dc {
  constructor(i, r) {
    super();
    T(this, dr);
    T(this, Nr);
    T(this, Vr);
    T(this, We);
    T(this, er);
    E(this, Nr, i), this.setOptions(r), this.bindMethods(), P(this, dr, Ud).call(this);
  }
  bindMethods() {
    this.mutate = this.mutate.bind(this), this.reset = this.reset.bind(this);
  }
  setOptions(i) {
    var n;
    const r = this.options;
    this.options = u(this, Nr).defaultMutationOptions(i), oh(this.options, r) || u(this, Nr).getMutationCache().notify({
      type: "observerOptionsUpdated",
      mutation: u(this, We),
      observer: this
    }), r != null && r.mutationKey && this.options.mutationKey && io(r.mutationKey) !== io(this.options.mutationKey) ? this.reset() : ((n = u(this, We)) == null ? void 0 : n.state.status) === "pending" && u(this, We).setOptions(this.options);
  }
  onUnsubscribe() {
    var i;
    this.hasListeners() || (i = u(this, We)) == null || i.removeObserver(this);
  }
  onMutationUpdate(i) {
    P(this, dr, Ud).call(this), P(this, dr, Bp).call(this, i);
  }
  getCurrentResult() {
    return u(this, Vr);
  }
  reset() {
    var i;
    (i = u(this, We)) == null || i.removeObserver(this), E(this, We, void 0), P(this, dr, Ud).call(this), P(this, dr, Bp).call(this);
  }
  mutate(i, r) {
    var n;
    return E(this, er, r), (n = u(this, We)) == null || n.removeObserver(this), E(this, We, u(this, Nr).getMutationCache().build(u(this, Nr), this.options)), u(this, We).addObserver(this), u(this, We).execute(i);
  }
}, Nr = new WeakMap(), Vr = new WeakMap(), We = new WeakMap(), er = new WeakMap(), dr = new WeakSet(), Ud = /* @__PURE__ */ c(function() {
  var r;
  const i = ((r = u(this, We)) == null ? void 0 : r.state) ?? Cg();
  E(this, Vr, {
    ...i,
    isPending: i.status === "pending",
    isSuccess: i.status === "success",
    isError: i.status === "error",
    isIdle: i.status === "idle",
    mutate: this.mutate,
    reset: this.reset
  });
}, "#updateResult"), Bp = /* @__PURE__ */ c(function(i) {
  be.batch(() => {
    var r, n, s, a, l, d, h, w;
    if (u(this, er) && this.hasListeners()) {
      const m = u(this, Vr).variables, f = u(this, Vr).context;
      (i == null ? void 0 : i.type) === "success" ? ((n = (r = u(this, er)).onSuccess) == null || n.call(r, i.data, m, f), (a = (s = u(this, er)).onSettled) == null || a.call(s, i.data, null, m, f)) : (i == null ? void 0 : i.type) === "error" && ((d = (l = u(this, er)).onError) == null || d.call(l, i.error, m, f), (w = (h = u(this, er)).onSettled) == null || w.call(
        h,
        void 0,
        i.error,
        m,
        f
      ));
    }
    this.listeners.forEach((m) => {
      m(u(this, Vr));
    });
  });
}, "#notify"), c(Ps, "MutationObserver"), Ps);
function _g(o) {
  return o;
}
c(_g, "defaultTransformerFn");
function o2(o) {
  return {
    mutationKey: o.options.mutationKey,
    state: o.state,
    ...o.options.scope && { scope: o.options.scope },
    ...o.meta && { meta: o.meta }
  };
}
c(o2, "dehydrateMutation");
function s2(o, t) {
  var i;
  return {
    state: {
      ...o.state,
      ...o.state.data !== void 0 && {
        data: t(o.state.data)
      }
    },
    queryKey: o.queryKey,
    queryHash: o.queryHash,
    ...o.state.status === "pending" && {
      promise: (i = o.promise) == null ? void 0 : i.then(t).catch((r) => Promise.reject(new Error("redacted")))
    },
    ...o.meta && { meta: o.meta }
  };
}
c(s2, "dehydrateQuery");
function a2(o) {
  return o.state.isPaused;
}
c(a2, "defaultShouldDehydrateMutation");
function c2(o) {
  return o.state.status === "success";
}
c(c2, "defaultShouldDehydrateQuery");
function l2(o, t = {}) {
  var l, d, h;
  const i = t.shouldDehydrateMutation ?? ((l = o.getDefaultOptions().dehydrate) == null ? void 0 : l.shouldDehydrateMutation) ?? a2, r = o.getMutationCache().getAll().flatMap(
    (w) => i(w) ? [o2(w)] : []
  ), n = t.shouldDehydrateQuery ?? ((d = o.getDefaultOptions().dehydrate) == null ? void 0 : d.shouldDehydrateQuery) ?? c2, s = t.serializeData ?? ((h = o.getDefaultOptions().dehydrate) == null ? void 0 : h.serializeData) ?? _g, a = o.getQueryCache().getAll().flatMap(
    (w) => n(w) ? [s2(w, s)] : []
  );
  return { mutations: r, queries: a };
}
c(l2, "dehydrate");
function d2(o, t, i) {
  var d, h;
  if (typeof t != "object" || t === null)
    return;
  const r = o.getMutationCache(), n = o.getQueryCache(), s = ((d = i == null ? void 0 : i.defaultOptions) == null ? void 0 : d.deserializeData) ?? ((h = o.getDefaultOptions().hydrate) == null ? void 0 : h.deserializeData) ?? _g, a = t.mutations || [], l = t.queries || [];
  a.forEach(({ state: w, ...m }) => {
    var f, b;
    r.build(
      o,
      {
        ...(f = o.getDefaultOptions().hydrate) == null ? void 0 : f.mutations,
        ...(b = i == null ? void 0 : i.defaultOptions) == null ? void 0 : b.mutations,
        ...m
      },
      w
    );
  }), l.forEach(({ queryKey: w, state: m, queryHash: f, meta: b, promise: g }) => {
    var k, S;
    let $ = n.get(f);
    const O = m.data === void 0 ? m.data : s(m.data);
    if ($) {
      if ($.state.dataUpdatedAt < m.dataUpdatedAt) {
        const { fetchStatus: _, ...V } = m;
        $.setState({
          ...V,
          data: O
        });
      }
    } else
      $ = n.build(
        o,
        {
          ...(k = o.getDefaultOptions().hydrate) == null ? void 0 : k.queries,
          ...(S = i == null ? void 0 : i.defaultOptions) == null ? void 0 : S.queries,
          queryKey: w,
          queryHash: f,
          meta: b
        },
        // Reset fetch status to idle to avoid
        // query being stuck in fetching state upon hydration
        {
          ...m,
          data: O,
          fetchStatus: "idle"
        }
      );
    if (g) {
      const _ = Promise.resolve(g).then(s);
      $.fetch(void 0, { initialPromise: _ });
    }
  });
}
c(d2, "hydrate");
function mm() {
}
c(mm, "noop");
function h2({
  storage: o,
  key: t = "REACT_QUERY_OFFLINE_CACHE",
  throttleTime: i = 1e3,
  serialize: r = JSON.stringify,
  deserialize: n = JSON.parse,
  retry: s
}) {
  if (o) {
    const a = /* @__PURE__ */ c((l) => {
      try {
        o.setItem(t, r(l));
        return;
      } catch (d) {
        return d;
      }
    }, "trySave");
    return {
      persistClient: u2((l) => {
        let d = l, h = a(d), w = 0;
        for (; h && d; )
          w++, d = s == null ? void 0 : s({
            persistedClient: d,
            error: h,
            errorCount: w
          }), d && (h = a(d));
      }, i),
      restoreClient: /* @__PURE__ */ c(() => {
        const l = o.getItem(t);
        if (l)
          return n(l);
      }, "restoreClient"),
      removeClient: /* @__PURE__ */ c(() => {
        o.removeItem(t);
      }, "removeClient")
    };
  }
  return {
    persistClient: mm,
    restoreClient: /* @__PURE__ */ c(() => {
    }, "restoreClient"),
    removeClient: mm
  };
}
c(h2, "createSyncStoragePersister");
function u2(o, t = 100) {
  let i = null, r;
  return function(...n) {
    r = n, i === null && (i = setTimeout(() => {
      o(...r), i = null;
    }, t));
  };
}
c(u2, "throttle$2");
var p2 = ["added", "removed", "updated"];
function vm(o) {
  return p2.includes(o);
}
c(vm, "isCacheEventType");
async function y2({
  queryClient: o,
  persister: t,
  maxAge: i = 1e3 * 60 * 60 * 24,
  buster: r = "",
  hydrateOptions: n
}) {
  try {
    const s = await t.restoreClient();
    if (s)
      if (s.timestamp) {
        const a = Date.now() - s.timestamp > i, l = s.buster !== r;
        a || l ? t.removeClient() : d2(o, s.clientState, n);
      } else
        t.removeClient();
  } catch {
    t.removeClient();
  }
}
c(y2, "persistQueryClientRestore");
async function gm({
  queryClient: o,
  persister: t,
  buster: i = "",
  dehydrateOptions: r
}) {
  const n = {
    buster: i,
    timestamp: Date.now(),
    clientState: l2(o, r)
  };
  await t.persistClient(n);
}
c(gm, "persistQueryClientSave");
function w2(o) {
  const t = o.queryClient.getQueryCache().subscribe((r) => {
    vm(r.type) && gm(o);
  }), i = o.queryClient.getMutationCache().subscribe((r) => {
    vm(r.type) && gm(o);
  });
  return () => {
    t(), i();
  };
}
c(w2, "persistQueryClientSubscribe");
const gw = /* @__PURE__ */ c((o) => {
  o && requestAnimationFrame(() => {
    var t;
    return (t = o == null ? void 0 : o.focus) == null ? void 0 : t.call(o);
  });
}, "autofocusRef");
async function Fc(o, t = "wy-") {
  const i = [];
  for (let r = o; r = r.parentElement; )
    r.matches(":not(:defined)") && r.localName.startsWith(t) && (console.log("Waiting for defining", r.localName), i.push(customElements.whenDefined(r.localName)));
  await Promise.all(i);
}
c(Fc, "whenParentsDefined");
const f2 = /* @__PURE__ */ c((o, t) => {
  let i;
  const r = new ResizeObserver(() => {
    const { isConnected: n } = o;
    n !== i && (i = n, t(n, o));
  });
  return r.observe(o), r;
}, "observeConnected");
async function m2() {
  document.hidden && await new Promise((o) => {
    window.addEventListener(
      "visibilitychange",
      () => {
        document.hidden || o(!0);
      },
      { once: !0 }
    );
  });
}
c(m2, "whenDocumentVisible");
const Pg = {
  // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  /* @ts-ignore */
  opacityProperty: !0,
  visibilityProperty: !0,
  // Legacy compatibility
  checkOpacity: !0,
  checkVisibilityCSS: !0
};
function Sg(o, t = !0, i = Pg, r) {
  o.checkVisibility(i) === t ? r(t) : requestAnimationFrame(() => Sg(o, t, i, r));
}
c(Sg, "untilVisibility");
async function v2(o, t = !0, i = Pg) {
  o.checkVisibility(i) !== t && await new Promise((n) => {
    Sg(o, t, i, n);
  });
}
c(v2, "whenElementVisible");
function bm(o) {
  return o.getRootNode() instanceof ShadowRoot;
}
c(bm, "isInShadowDom");
const g2 = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // QUERY CLIENT
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), this.createQueryClient(), this.host.isConnected && this._queryClient.mount(), this._hostIsConnectedObserver = f2(this.host, (n) => {
        this.isDestroyed || (n ? (console.log(this.weavyId, "Query client mounted"), this._queryClient.mount()) : (console.log(this.weavyId, "Query client unmounted"), this._queryClient.unmount()));
      });
    }
    get queryClient() {
      return this._queryClient;
    }
    async createQueryClient() {
      if (this.isDestroyed)
        throw new Bt();
      this._queryClient = new e2({
        defaultOptions: {
          queries: {
            staleTime: this.staleTime,
            gcTime: this.gcTime
          }
        }
      });
      try {
        this._sessionStoragePersister = h2({
          key: "WEAVY_QUERY_OFFLINE_CACHE",
          storage: window.sessionStorage,
          throttleTime: this.staleTime
        });
        const r = {
          queryClient: this._queryClient,
          persister: this._sessionStoragePersister,
          maxAge: this.gcTime,
          // 24h - should match gcTime
          buster: ci.version,
          // Cache busting parameter (build hash or similar)
          hydrateOptions: void 0,
          dehydrateOptions: {
            shouldDehydrateMutation: /* @__PURE__ */ c((n) => {
              var a, l;
              const s = ((l = (a = n.state.context) == null ? void 0 : a.status) == null ? void 0 : l.state) === "pending";
              return !!(n.state.context && !s || n.state.isPaused);
            }, "shouldDehydrateMutation")
          }
        };
        await y2(r), this._unsubscribeQueryClient = w2(r);
      } catch {
        console.warn(this.weavyId, "Query cache persister not available.");
      }
    }
    async disconnectQueryClient() {
      var r, n;
      console.log(this.weavyId, "Query client disconnected"), await this._queryClient.cancelQueries(), this.queryClient.setQueriesData({}, void 0), this.queryClient.resetQueries(), (r = this._sessionStoragePersister) == null || r.removeClient(), (n = this._unsubscribeQueryClient) == null || n.call(this), this._queryClient.unmount(), this._queryClient.clear();
    }
    destroy() {
      super.destroy(), this._hostIsConnectedObserver.disconnect(), this.disconnectQueryClient();
    }
  }, c(t, "WeavyQuery"), t;
}, "WeavyQueryMixin"), b2 = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), this.version = ci.version, this.whenUrl().then(() => {
        this.isDestroyed || this.checkVersion();
      });
    }
    /**
     * Checks the version of the Weavy Context against the Weavy Environment version.
     *
     * @param {string} [version] - Optional version to check against the environment version.
     */
    async checkVersion(r = this.version) {
      var a, l;
      await this.whenUrl(), this.networkStateIsPending = !0;
      let n;
      try {
        if (n = await fetch(new URL("/version", this.url), await this.fetchOptions(!1)), !n.ok)
          throw new Error("Could not verify environment version.");
        this.networkStateIsPending = !1, this.serverState = "ok";
      } catch (d) {
        this.networkStateIsPending = !1, this.serverState = "unreachable", console.warn("Could not check version: " + d.toString());
        return;
      }
      const s = await n.text();
      if (!r || !s || r !== s)
        try {
          const d = r.split(".").slice(0, 2), h = s.split(".").slice(0, 2);
          if (d[0] !== h[0])
            throw new Error();
          d[1] !== h[1] && console.warn(
            `Version inconsistency: ${ci.sourceName}@${this.version} ≠ ${(a = this.url) == null ? void 0 : a.hostname}@${s}`
          );
        } catch {
          throw new Error(
            `Version mismatch! ${ci.sourceName}@${this.version} ≠ ${(l = this.url) == null ? void 0 : l.hostname}@${s}`
          );
        }
    }
  }, c(t, "WeavyVersion"), t;
}, "WeavyVersionMixin");
var ah = /* @__PURE__ */ ((o) => (o.JSON = "application/json;charset=utf-8", o.FormData = "multipart/form-data;charset=utf-8", o.URLEncoded = "application/x-www-form-urlencoded;charset=utf-8", o.Text = "text/plain;charset=utf-8", o.Auto = "", o))(ah || {});
const x2 = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // FETCH
    async fetchOptions(r = !0) {
      if (this.isDestroyed)
        throw new Bt();
      const n = {
        "X-Weavy-Source": `${ci.sourceName}@${ci.version}`
      };
      return r && (n.Authorization = "Bearer " + await this.getToken()), Ep(
        Sb,
        {
          headers: n
        },
        !0
      );
    }
    async get(r) {
      return await this.post(r, "GET");
    }
    async post(r, n, s, a = ah.JSON, l = !0) {
      if (this.isDestroyed)
        throw new Bt();
      const d = Ep(
        await this.fetchOptions(),
        {
          headers: { "content-type": a },
          method: n,
          body: s
        },
        !0
      );
      this.networkStateIsPending = !0;
      const h = await fetch(new URL(r, this.url), d);
      if (h.ok)
        this.networkStateIsPending = !1, this.serverState = "ok";
      else if (h.status === 401 || h.status === 403) {
        if (l)
          return await this.getToken(!0), await this.post(r, n, s, a, !1);
        this.networkStateIsPending = !1, this.serverState = "unauthorized";
      } else
        this.networkStateIsPending = !1;
      return h;
    }
    async upload(r, n, s, a = ah.JSON, l, d = !0) {
      if (this.isDestroyed)
        throw new Bt();
      const h = await this.getToken();
      return await new Promise((w, m) => {
        const f = new XMLHttpRequest();
        f.open(n, new URL(r, this.url), !0), f.setRequestHeader("Authorization", "Bearer " + h), f.setRequestHeader("X-Weavy-Source", `${ci.sourceName}@${ci.version}`), a && f.setRequestHeader("content-type", a), l && f.upload.addEventListener("progress", (b) => {
          l(b.loaded / b.total * 100 || 100);
        }), f.onload = (b) => {
          d && (f.status === 401 || f.status === 401) ? this.getToken(!0).then(() => this.upload(r, n, s, a, l, !1)).then(w).catch(m) : w(new Response(f.response, { status: f.status, statusText: f.statusText }));
        }, f.onerror = m, f.send(s);
      });
    }
  }, c(t, "WeavyFetch"), t;
}, "WeavyFetchMixin");
function Be(o) {
  return o < 0 ? -1 : o === 0 ? 0 : 1;
}
c(Be, "signum");
function dl(o, t, i) {
  return (1 - i) * o + i * t;
}
c(dl, "lerp");
function C2(o, t, i) {
  return i < o ? o : i > t ? t : i;
}
c(C2, "clampInt");
function ch(o, t, i) {
  return i < o ? o : i > t ? t : i;
}
c(ch, "clampDouble");
function bw(o) {
  return o = o % 360, o < 0 && (o = o + 360), o;
}
c(bw, "sanitizeDegreesDouble");
function k2(o, t) {
  return bw(t - o) <= 180 ? 1 : -1;
}
c(k2, "rotationDirection");
function $2(o, t) {
  return 180 - Math.abs(Math.abs(o - t) - 180);
}
c($2, "differenceDegrees");
function Up(o, t) {
  const i = o[0] * t[0][0] + o[1] * t[0][1] + o[2] * t[0][2], r = o[0] * t[1][0] + o[1] * t[1][1] + o[2] * t[1][2], n = o[0] * t[2][0] + o[1] * t[2][1] + o[2] * t[2][2];
  return [i, r, n];
}
c(Up, "matrixMultiply");
const E2 = [
  [0.41233895, 0.35762064, 0.18051042],
  [0.2126, 0.7152, 0.0722],
  [0.01932141, 0.11916382, 0.95034478]
], _2 = [
  [
    3.2413774792388685,
    -1.5376652402851851,
    -0.49885366846268053
  ],
  [
    -0.9691452513005321,
    1.8758853451067872,
    0.04156585616912061
  ],
  [
    0.05562093689691305,
    -0.20395524564742123,
    1.0571799111220335
  ]
], P2 = [95.047, 100, 108.883];
function xw(o, t, i) {
  return (255 << 24 | (o & 255) << 16 | (t & 255) << 8 | i & 255) >>> 0;
}
c(xw, "argbFromRgb");
function xm(o) {
  const t = Xn(o[0]), i = Xn(o[1]), r = Xn(o[2]);
  return xw(t, i, r);
}
c(xm, "argbFromLinrgb");
function Lg(o) {
  return o >> 16 & 255;
}
c(Lg, "redFromArgb");
function Mg(o) {
  return o >> 8 & 255;
}
c(Mg, "greenFromArgb");
function Tg(o) {
  return o & 255;
}
c(Tg, "blueFromArgb");
function S2(o, t, i) {
  const r = _2, n = r[0][0] * o + r[0][1] * t + r[0][2] * i, s = r[1][0] * o + r[1][1] * t + r[1][2] * i, a = r[2][0] * o + r[2][1] * t + r[2][2] * i, l = Xn(n), d = Xn(s), h = Xn(a);
  return xw(l, d, h);
}
c(S2, "argbFromXyz");
function L2(o) {
  const t = Ko(Lg(o)), i = Ko(Mg(o)), r = Ko(Tg(o));
  return Up([t, i, r], E2);
}
c(L2, "xyzFromArgb");
function M2(o) {
  const t = on(o), i = Xn(t);
  return xw(i, i, i);
}
c(M2, "argbFromLstar");
function jp(o) {
  const t = L2(o)[1];
  return 116 * Ag(t / 100) - 16;
}
c(jp, "lstarFromArgb");
function on(o) {
  return 100 * A2((o + 16) / 116);
}
c(on, "yFromLstar");
function Wp(o) {
  return Ag(o / 100) * 116 - 16;
}
c(Wp, "lstarFromY");
function Ko(o) {
  const t = o / 255;
  return t <= 0.040449936 ? t / 12.92 * 100 : Math.pow((t + 0.055) / 1.055, 2.4) * 100;
}
c(Ko, "linearized");
function Xn(o) {
  const t = o / 100;
  let i = 0;
  return t <= 31308e-7 ? i = t * 12.92 : i = 1.055 * Math.pow(t, 1 / 2.4) - 0.055, C2(0, 255, Math.round(i * 255));
}
c(Xn, "delinearized");
function T2() {
  return P2;
}
c(T2, "whitePointD65");
function Ag(o) {
  const t = 0.008856451679035631, i = 24389 / 27;
  return o > t ? Math.pow(o, 1 / 3) : (i * o + 16) / 116;
}
c(Ag, "labF");
function A2(o) {
  const t = 0.008856451679035631, i = 24389 / 27, r = o * o * o;
  return r > t ? r : (116 * o - 16) / i;
}
c(A2, "labInvf");
const tu = class tu {
  /**
   * Create ViewingConditions from a simple, physically relevant, set of
   * parameters.
   *
   * @param whitePoint White point, measured in the XYZ color space.
   *     default = D65, or sunny day afternoon
   * @param adaptingLuminance The luminance of the adapting field. Informally,
   *     how bright it is in the room where the color is viewed. Can be
   *     calculated from lux by multiplying lux by 0.0586. default = 11.72,
   *     or 200 lux.
   * @param backgroundLstar The lightness of the area surrounding the color.
   *     measured by L* in L*a*b*. default = 50.0
   * @param surround A general description of the lighting surrounding the
   *     color. 0 is pitch dark, like watching a movie in a theater. 1.0 is a
   *     dimly light room, like watching TV at home at night. 2.0 means there
   *     is no difference between the lighting on the color and around it.
   *     default = 2.0
   * @param discountingIlluminant Whether the eye accounts for the tint of the
   *     ambient lighting, such as knowing an apple is still red in green light.
   *     default = false, the eye does not perform this process on
   *       self-luminous objects like displays.
   */
  static make(t = T2(), i = 200 / Math.PI * on(50) / 100, r = 50, n = 2, s = !1) {
    const a = t, l = a[0] * 0.401288 + a[1] * 0.650173 + a[2] * -0.051461, d = a[0] * -0.250268 + a[1] * 1.204414 + a[2] * 0.045854, h = a[0] * -2079e-6 + a[1] * 0.048952 + a[2] * 0.953127, w = 0.8 + n / 10, m = w >= 0.9 ? dl(0.59, 0.69, (w - 0.9) * 10) : dl(0.525, 0.59, (w - 0.8) * 10);
    let f = s ? 1 : w * (1 - 1 / 3.6 * Math.exp((-i - 42) / 92));
    f = f > 1 ? 1 : f < 0 ? 0 : f;
    const b = w, g = [
      f * (100 / l) + 1 - f,
      f * (100 / d) + 1 - f,
      f * (100 / h) + 1 - f
    ], $ = 1 / (5 * i + 1), O = $ * $ * $ * $, k = 1 - O, S = O * i + 0.1 * k * k * Math.cbrt(5 * i), _ = on(r) / t[1], V = 1.48 + Math.sqrt(_), I = 0.725 / Math.pow(_, 0.2), D = I, z = [
      Math.pow(S * g[0] * l / 100, 0.42),
      Math.pow(S * g[1] * d / 100, 0.42),
      Math.pow(S * g[2] * h / 100, 0.42)
    ], F = [
      400 * z[0] / (z[0] + 27.13),
      400 * z[1] / (z[1] + 27.13),
      400 * z[2] / (z[2] + 27.13)
    ], A = (2 * F[0] + F[1] + 0.05 * F[2]) * I;
    return new tu(_, A, I, D, m, b, g, S, Math.pow(S, 0.25), V);
  }
  /**
   * Parameters are intermediate values of the CAM16 conversion process. Their
   * names are shorthand for technical color science terminology, this class
   * would not benefit from documenting them individually. A brief overview
   * is available in the CAM16 specification, and a complete overview requires
   * a color science textbook, such as Fairchild's Color Appearance Models.
   */
  constructor(t, i, r, n, s, a, l, d, h, w) {
    this.n = t, this.aw = i, this.nbb = r, this.ncb = n, this.c = s, this.nc = a, this.rgbD = l, this.fl = d, this.fLRoot = h, this.z = w;
  }
};
c(tu, "ViewingConditions");
let vi = tu;
vi.DEFAULT = vi.make();
const Si = class Si {
  /**
   * All of the CAM16 dimensions can be calculated from 3 of the dimensions, in
   * the following combinations:
   *      -  {j or q} and {c, m, or s} and hue
   *      - jstar, astar, bstar
   * Prefer using a static method that constructs from 3 of those dimensions.
   * This constructor is intended for those methods to use to return all
   * possible dimensions.
   *
   * @param hue
   * @param chroma informally, colorfulness / color intensity. like saturation
   *     in HSL, except perceptually accurate.
   * @param j lightness
   * @param q brightness; ratio of lightness to white point's lightness
   * @param m colorfulness
   * @param s saturation; ratio of chroma to white point's chroma
   * @param jstar CAM16-UCS J coordinate
   * @param astar CAM16-UCS a coordinate
   * @param bstar CAM16-UCS b coordinate
   */
  constructor(t, i, r, n, s, a, l, d, h) {
    this.hue = t, this.chroma = i, this.j = r, this.q = n, this.m = s, this.s = a, this.jstar = l, this.astar = d, this.bstar = h;
  }
  /**
   * CAM16 instances also have coordinates in the CAM16-UCS space, called J*,
   * a*, b*, or jstar, astar, bstar in code. CAM16-UCS is included in the CAM16
   * specification, and is used to measure distances between colors.
   */
  distance(t) {
    const i = this.jstar - t.jstar, r = this.astar - t.astar, n = this.bstar - t.bstar, s = Math.sqrt(i * i + r * r + n * n);
    return 1.41 * Math.pow(s, 0.63);
  }
  /**
   * @param argb ARGB representation of a color.
   * @return CAM16 color, assuming the color was viewed in default viewing
   *     conditions.
   */
  static fromInt(t) {
    return Si.fromIntInViewingConditions(t, vi.DEFAULT);
  }
  /**
   * @param argb ARGB representation of a color.
   * @param viewingConditions Information about the environment where the color
   *     was observed.
   * @return CAM16 color.
   */
  static fromIntInViewingConditions(t, i) {
    const r = (t & 16711680) >> 16, n = (t & 65280) >> 8, s = t & 255, a = Ko(r), l = Ko(n), d = Ko(s), h = 0.41233895 * a + 0.35762064 * l + 0.18051042 * d, w = 0.2126 * a + 0.7152 * l + 0.0722 * d, m = 0.01932141 * a + 0.11916382 * l + 0.95034478 * d, f = 0.401288 * h + 0.650173 * w - 0.051461 * m, b = -0.250268 * h + 1.204414 * w + 0.045854 * m, g = -2079e-6 * h + 0.048952 * w + 0.953127 * m, $ = i.rgbD[0] * f, O = i.rgbD[1] * b, k = i.rgbD[2] * g, S = Math.pow(i.fl * Math.abs($) / 100, 0.42), _ = Math.pow(i.fl * Math.abs(O) / 100, 0.42), V = Math.pow(i.fl * Math.abs(k) / 100, 0.42), I = Be($) * 400 * S / (S + 27.13), D = Be(O) * 400 * _ / (_ + 27.13), z = Be(k) * 400 * V / (V + 27.13), F = (11 * I + -12 * D + z) / 11, A = (I + D - 2 * z) / 9, N = (20 * I + 20 * D + 21 * z) / 20, G = (40 * I + 20 * D + z) / 20, lt = Math.atan2(A, F) * 180 / Math.PI, at = lt < 0 ? lt + 360 : lt >= 360 ? lt - 360 : lt, Ae = at * Math.PI / 180, ve = G * i.nbb, Ot = 100 * Math.pow(ve / i.aw, i.c * i.z), Et = 4 / i.c * Math.sqrt(Ot / 100) * (i.aw + 4) * i.fLRoot, oe = at < 20.14 ? at + 360 : at, nt = 0.25 * (Math.cos(oe * Math.PI / 180 + 2) + 3.8), ui = 5e4 / 13 * nt * i.nc * i.ncb * Math.sqrt(F * F + A * A) / (N + 0.305), pi = Math.pow(ui, 0.9) * Math.pow(1.64 - Math.pow(0.29, i.n), 0.73), Ki = pi * Math.sqrt(Ot / 100), Pi = Ki * i.fLRoot, xo = 50 * Math.sqrt(pi * i.c / (i.aw + 4)), Gi = (1 + 100 * 7e-3) * Ot / (1 + 7e-3 * Ot), ze = 1 / 0.0228 * Math.log(1 + 0.0228 * Pi), $r = ze * Math.cos(Ae), At = ze * Math.sin(Ae);
    return new Si(at, Ki, Ot, Et, Pi, xo, Gi, $r, At);
  }
  /**
   * @param j CAM16 lightness
   * @param c CAM16 chroma
   * @param h CAM16 hue
   */
  static fromJch(t, i, r) {
    return Si.fromJchInViewingConditions(t, i, r, vi.DEFAULT);
  }
  /**
   * @param j CAM16 lightness
   * @param c CAM16 chroma
   * @param h CAM16 hue
   * @param viewingConditions Information about the environment where the color
   *     was observed.
   */
  static fromJchInViewingConditions(t, i, r, n) {
    const s = 4 / n.c * Math.sqrt(t / 100) * (n.aw + 4) * n.fLRoot, a = i * n.fLRoot, l = i / Math.sqrt(t / 100), d = 50 * Math.sqrt(l * n.c / (n.aw + 4)), h = r * Math.PI / 180, w = (1 + 100 * 7e-3) * t / (1 + 7e-3 * t), m = 1 / 0.0228 * Math.log(1 + 0.0228 * a), f = m * Math.cos(h), b = m * Math.sin(h);
    return new Si(r, i, t, s, a, d, w, f, b);
  }
  /**
   * @param jstar CAM16-UCS lightness.
   * @param astar CAM16-UCS a dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the Y axis.
   * @param bstar CAM16-UCS b dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the X axis.
   */
  static fromUcs(t, i, r) {
    return Si.fromUcsInViewingConditions(t, i, r, vi.DEFAULT);
  }
  /**
   * @param jstar CAM16-UCS lightness.
   * @param astar CAM16-UCS a dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the Y axis.
   * @param bstar CAM16-UCS b dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the X axis.
   * @param viewingConditions Information about the environment where the color
   *     was observed.
   */
  static fromUcsInViewingConditions(t, i, r, n) {
    const s = i, a = r, l = Math.sqrt(s * s + a * a), h = (Math.exp(l * 0.0228) - 1) / 0.0228 / n.fLRoot;
    let w = Math.atan2(a, s) * (180 / Math.PI);
    w < 0 && (w += 360);
    const m = t / (1 - (t - 100) * 7e-3);
    return Si.fromJchInViewingConditions(m, h, w, n);
  }
  /**
   *  @return ARGB representation of color, assuming the color was viewed in
   *     default viewing conditions, which are near-identical to the default
   *     viewing conditions for sRGB.
   */
  toInt() {
    return this.viewed(vi.DEFAULT);
  }
  /**
   * @param viewingConditions Information about the environment where the color
   *     will be viewed.
   * @return ARGB representation of color
   */
  viewed(t) {
    const i = this.chroma === 0 || this.j === 0 ? 0 : this.chroma / Math.sqrt(this.j / 100), r = Math.pow(i / Math.pow(1.64 - Math.pow(0.29, t.n), 0.73), 1 / 0.9), n = this.hue * Math.PI / 180, s = 0.25 * (Math.cos(n + 2) + 3.8), a = t.aw * Math.pow(this.j / 100, 1 / t.c / t.z), l = s * (5e4 / 13) * t.nc * t.ncb, d = a / t.nbb, h = Math.sin(n), w = Math.cos(n), m = 23 * (d + 0.305) * r / (23 * l + 11 * r * w + 108 * r * h), f = m * w, b = m * h, g = (460 * d + 451 * f + 288 * b) / 1403, $ = (460 * d - 891 * f - 261 * b) / 1403, O = (460 * d - 220 * f - 6300 * b) / 1403, k = Math.max(0, 27.13 * Math.abs(g) / (400 - Math.abs(g))), S = Be(g) * (100 / t.fl) * Math.pow(k, 1 / 0.42), _ = Math.max(0, 27.13 * Math.abs($) / (400 - Math.abs($))), V = Be($) * (100 / t.fl) * Math.pow(_, 1 / 0.42), I = Math.max(0, 27.13 * Math.abs(O) / (400 - Math.abs(O))), D = Be(O) * (100 / t.fl) * Math.pow(I, 1 / 0.42), z = S / t.rgbD[0], F = V / t.rgbD[1], A = D / t.rgbD[2], N = 1.86206786 * z - 1.01125463 * F + 0.14918677 * A, G = 0.38752654 * z + 0.62144744 * F - 897398e-8 * A, et = -0.0158415 * z - 0.03412294 * F + 1.04996444 * A;
    return S2(N, G, et);
  }
  /// Given color expressed in XYZ and viewed in [viewingConditions], convert to
  /// CAM16.
  static fromXyzInViewingConditions(t, i, r, n) {
    const s = 0.401288 * t + 0.650173 * i - 0.051461 * r, a = -0.250268 * t + 1.204414 * i + 0.045854 * r, l = -2079e-6 * t + 0.048952 * i + 0.953127 * r, d = n.rgbD[0] * s, h = n.rgbD[1] * a, w = n.rgbD[2] * l, m = Math.pow(n.fl * Math.abs(d) / 100, 0.42), f = Math.pow(n.fl * Math.abs(h) / 100, 0.42), b = Math.pow(n.fl * Math.abs(w) / 100, 0.42), g = Be(d) * 400 * m / (m + 27.13), $ = Be(h) * 400 * f / (f + 27.13), O = Be(w) * 400 * b / (b + 27.13), k = (11 * g + -12 * $ + O) / 11, S = (g + $ - 2 * O) / 9, _ = (20 * g + 20 * $ + 21 * O) / 20, V = (40 * g + 20 * $ + O) / 20, D = Math.atan2(S, k) * 180 / Math.PI, z = D < 0 ? D + 360 : D >= 360 ? D - 360 : D, F = z * Math.PI / 180, A = V * n.nbb, N = 100 * Math.pow(A / n.aw, n.c * n.z), G = 4 / n.c * Math.sqrt(N / 100) * (n.aw + 4) * n.fLRoot, et = z < 20.14 ? z + 360 : z, lt = 1 / 4 * (Math.cos(et * Math.PI / 180 + 2) + 3.8), Ae = 5e4 / 13 * lt * n.nc * n.ncb * Math.sqrt(k * k + S * S) / (_ + 0.305), ve = Math.pow(Ae, 0.9) * Math.pow(1.64 - Math.pow(0.29, n.n), 0.73), Ot = ve * Math.sqrt(N / 100), Et = Ot * n.fLRoot, oe = 50 * Math.sqrt(ve * n.c / (n.aw + 4)), nt = (1 + 100 * 7e-3) * N / (1 + 7e-3 * N), xt = Math.log(1 + 0.0228 * Et) / 0.0228, ui = xt * Math.cos(F), pi = xt * Math.sin(F);
    return new Si(z, Ot, N, G, Et, oe, nt, ui, pi);
  }
  /// XYZ representation of CAM16 seen in [viewingConditions].
  xyzInViewingConditions(t) {
    const i = this.chroma === 0 || this.j === 0 ? 0 : this.chroma / Math.sqrt(this.j / 100), r = Math.pow(i / Math.pow(1.64 - Math.pow(0.29, t.n), 0.73), 1 / 0.9), n = this.hue * Math.PI / 180, s = 0.25 * (Math.cos(n + 2) + 3.8), a = t.aw * Math.pow(this.j / 100, 1 / t.c / t.z), l = s * (5e4 / 13) * t.nc * t.ncb, d = a / t.nbb, h = Math.sin(n), w = Math.cos(n), m = 23 * (d + 0.305) * r / (23 * l + 11 * r * w + 108 * r * h), f = m * w, b = m * h, g = (460 * d + 451 * f + 288 * b) / 1403, $ = (460 * d - 891 * f - 261 * b) / 1403, O = (460 * d - 220 * f - 6300 * b) / 1403, k = Math.max(0, 27.13 * Math.abs(g) / (400 - Math.abs(g))), S = Be(g) * (100 / t.fl) * Math.pow(k, 1 / 0.42), _ = Math.max(0, 27.13 * Math.abs($) / (400 - Math.abs($))), V = Be($) * (100 / t.fl) * Math.pow(_, 1 / 0.42), I = Math.max(0, 27.13 * Math.abs(O) / (400 - Math.abs(O))), D = Be(O) * (100 / t.fl) * Math.pow(I, 1 / 0.42), z = S / t.rgbD[0], F = V / t.rgbD[1], A = D / t.rgbD[2], N = 1.86206786 * z - 1.01125463 * F + 0.14918677 * A, G = 0.38752654 * z + 0.62144744 * F - 897398e-8 * A, et = -0.0158415 * z - 0.03412294 * F + 1.04996444 * A;
    return [N, G, et];
  }
};
c(Si, "Cam16");
let ai = Si;
const ct = class ct {
  /**
   * Sanitizes a small enough angle in radians.
   *
   * @param angle An angle in radians; must not deviate too much
   * from 0.
   * @return A coterminal angle between 0 and 2pi.
   */
  static sanitizeRadians(t) {
    return (t + Math.PI * 8) % (Math.PI * 2);
  }
  /**
   * Delinearizes an RGB component, returning a floating-point
   * number.
   *
   * @param rgbComponent 0.0 <= rgb_component <= 100.0, represents
   * linear R/G/B channel
   * @return 0.0 <= output <= 255.0, color channel converted to
   * regular RGB space
   */
  static trueDelinearized(t) {
    const i = t / 100;
    let r = 0;
    return i <= 31308e-7 ? r = i * 12.92 : r = 1.055 * Math.pow(i, 1 / 2.4) - 0.055, r * 255;
  }
  static chromaticAdaptation(t) {
    const i = Math.pow(Math.abs(t), 0.42);
    return Be(t) * 400 * i / (i + 27.13);
  }
  /**
   * Returns the hue of a linear RGB color in CAM16.
   *
   * @param linrgb The linear RGB coordinates of a color.
   * @return The hue of the color in CAM16, in radians.
   */
  static hueOf(t) {
    const i = Up(t, ct.SCALED_DISCOUNT_FROM_LINRGB), r = ct.chromaticAdaptation(i[0]), n = ct.chromaticAdaptation(i[1]), s = ct.chromaticAdaptation(i[2]), a = (11 * r + -12 * n + s) / 11, l = (r + n - 2 * s) / 9;
    return Math.atan2(l, a);
  }
  static areInCyclicOrder(t, i, r) {
    const n = ct.sanitizeRadians(i - t), s = ct.sanitizeRadians(r - t);
    return n < s;
  }
  /**
   * Solves the lerp equation.
   *
   * @param source The starting number.
   * @param mid The number in the middle.
   * @param target The ending number.
   * @return A number t such that lerp(source, target, t) = mid.
   */
  static intercept(t, i, r) {
    return (i - t) / (r - t);
  }
  static lerpPoint(t, i, r) {
    return [
      t[0] + (r[0] - t[0]) * i,
      t[1] + (r[1] - t[1]) * i,
      t[2] + (r[2] - t[2]) * i
    ];
  }
  /**
   * Intersects a segment with a plane.
   *
   * @param source The coordinates of point A.
   * @param coordinate The R-, G-, or B-coordinate of the plane.
   * @param target The coordinates of point B.
   * @param axis The axis the plane is perpendicular with. (0: R, 1:
   * G, 2: B)
   * @return The intersection point of the segment AB with the plane
   * R=coordinate, G=coordinate, or B=coordinate
   */
  static setCoordinate(t, i, r, n) {
    const s = ct.intercept(t[n], i, r[n]);
    return ct.lerpPoint(t, s, r);
  }
  static isBounded(t) {
    return 0 <= t && t <= 100;
  }
  /**
   * Returns the nth possible vertex of the polygonal intersection.
   *
   * @param y The Y value of the plane.
   * @param n The zero-based index of the point. 0 <= n <= 11.
   * @return The nth possible vertex of the polygonal intersection
   * of the y plane and the RGB cube, in linear RGB coordinates, if
   * it exists. If this possible vertex lies outside of the cube,
   * [-1.0, -1.0, -1.0] is returned.
   */
  static nthVertex(t, i) {
    const r = ct.Y_FROM_LINRGB[0], n = ct.Y_FROM_LINRGB[1], s = ct.Y_FROM_LINRGB[2], a = i % 4 <= 1 ? 0 : 100, l = i % 2 === 0 ? 0 : 100;
    if (i < 4) {
      const d = a, h = l, w = (t - d * n - h * s) / r;
      return ct.isBounded(w) ? [w, d, h] : [-1, -1, -1];
    } else if (i < 8) {
      const d = a, h = l, w = (t - h * r - d * s) / n;
      return ct.isBounded(w) ? [h, w, d] : [-1, -1, -1];
    } else {
      const d = a, h = l, w = (t - d * r - h * n) / s;
      return ct.isBounded(w) ? [d, h, w] : [-1, -1, -1];
    }
  }
  /**
   * Finds the segment containing the desired color.
   *
   * @param y The Y value of the color.
   * @param targetHue The hue of the color.
   * @return A list of two sets of linear RGB coordinates, each
   * corresponding to an endpoint of the segment containing the
   * desired color.
   */
  static bisectToSegment(t, i) {
    let r = [-1, -1, -1], n = r, s = 0, a = 0, l = !1, d = !0;
    for (let h = 0; h < 12; h++) {
      const w = ct.nthVertex(t, h);
      if (w[0] < 0)
        continue;
      const m = ct.hueOf(w);
      if (!l) {
        r = w, n = w, s = m, a = m, l = !0;
        continue;
      }
      (d || ct.areInCyclicOrder(s, m, a)) && (d = !1, ct.areInCyclicOrder(s, i, m) ? (n = w, a = m) : (r = w, s = m));
    }
    return [r, n];
  }
  static midpoint(t, i) {
    return [
      (t[0] + i[0]) / 2,
      (t[1] + i[1]) / 2,
      (t[2] + i[2]) / 2
    ];
  }
  static criticalPlaneBelow(t) {
    return Math.floor(t - 0.5);
  }
  static criticalPlaneAbove(t) {
    return Math.ceil(t - 0.5);
  }
  /**
   * Finds a color with the given Y and hue on the boundary of the
   * cube.
   *
   * @param y The Y value of the color.
   * @param targetHue The hue of the color.
   * @return The desired color, in linear RGB coordinates.
   */
  static bisectToLimit(t, i) {
    const r = ct.bisectToSegment(t, i);
    let n = r[0], s = ct.hueOf(n), a = r[1];
    for (let l = 0; l < 3; l++)
      if (n[l] !== a[l]) {
        let d = -1, h = 255;
        n[l] < a[l] ? (d = ct.criticalPlaneBelow(ct.trueDelinearized(n[l])), h = ct.criticalPlaneAbove(ct.trueDelinearized(a[l]))) : (d = ct.criticalPlaneAbove(ct.trueDelinearized(n[l])), h = ct.criticalPlaneBelow(ct.trueDelinearized(a[l])));
        for (let w = 0; w < 8 && !(Math.abs(h - d) <= 1); w++) {
          const m = Math.floor((d + h) / 2), f = ct.CRITICAL_PLANES[m], b = ct.setCoordinate(n, f, a, l), g = ct.hueOf(b);
          ct.areInCyclicOrder(s, i, g) ? (a = b, h = m) : (n = b, s = g, d = m);
        }
      }
    return ct.midpoint(n, a);
  }
  static inverseChromaticAdaptation(t) {
    const i = Math.abs(t), r = Math.max(0, 27.13 * i / (400 - i));
    return Be(t) * Math.pow(r, 1 / 0.42);
  }
  /**
   * Finds a color with the given hue, chroma, and Y.
   *
   * @param hueRadians The desired hue in radians.
   * @param chroma The desired chroma.
   * @param y The desired Y.
   * @return The desired color as a hexadecimal integer, if found; 0
   * otherwise.
   */
  static findResultByJ(t, i, r) {
    let n = Math.sqrt(r) * 11;
    const s = vi.DEFAULT, a = 1 / Math.pow(1.64 - Math.pow(0.29, s.n), 0.73), d = 0.25 * (Math.cos(t + 2) + 3.8) * (5e4 / 13) * s.nc * s.ncb, h = Math.sin(t), w = Math.cos(t);
    for (let m = 0; m < 5; m++) {
      const f = n / 100, b = i === 0 || n === 0 ? 0 : i / Math.sqrt(f), g = Math.pow(b * a, 1 / 0.9), O = s.aw * Math.pow(f, 1 / s.c / s.z) / s.nbb, k = 23 * (O + 0.305) * g / (23 * d + 11 * g * w + 108 * g * h), S = k * w, _ = k * h, V = (460 * O + 451 * S + 288 * _) / 1403, I = (460 * O - 891 * S - 261 * _) / 1403, D = (460 * O - 220 * S - 6300 * _) / 1403, z = ct.inverseChromaticAdaptation(V), F = ct.inverseChromaticAdaptation(I), A = ct.inverseChromaticAdaptation(D), N = Up([z, F, A], ct.LINRGB_FROM_SCALED_DISCOUNT);
      if (N[0] < 0 || N[1] < 0 || N[2] < 0)
        return 0;
      const G = ct.Y_FROM_LINRGB[0], et = ct.Y_FROM_LINRGB[1], lt = ct.Y_FROM_LINRGB[2], at = G * N[0] + et * N[1] + lt * N[2];
      if (at <= 0)
        return 0;
      if (m === 4 || Math.abs(at - r) < 2e-3)
        return N[0] > 100.01 || N[1] > 100.01 || N[2] > 100.01 ? 0 : xm(N);
      n = n - (at - r) * n / (2 * at);
    }
    return 0;
  }
  /**
   * Finds an sRGB color with the given hue, chroma, and L*, if
   * possible.
   *
   * @param hueDegrees The desired hue, in degrees.
   * @param chroma The desired chroma.
   * @param lstar The desired L*.
   * @return A hexadecimal representing the sRGB color. The color
   * has sufficiently close hue, chroma, and L* to the desired
   * values, if possible; otherwise, the hue and L* will be
   * sufficiently close, and chroma will be maximized.
   */
  static solveToInt(t, i, r) {
    if (i < 1e-4 || r < 1e-4 || r > 99.9999)
      return M2(r);
    t = bw(t);
    const n = t / 180 * Math.PI, s = on(r), a = ct.findResultByJ(n, i, s);
    if (a !== 0)
      return a;
    const l = ct.bisectToLimit(s, n);
    return xm(l);
  }
  /**
   * Finds an sRGB color with the given hue, chroma, and L*, if
   * possible.
   *
   * @param hueDegrees The desired hue, in degrees.
   * @param chroma The desired chroma.
   * @param lstar The desired L*.
   * @return An CAM16 object representing the sRGB color. The color
   * has sufficiently close hue, chroma, and L* to the desired
   * values, if possible; otherwise, the hue and L* will be
   * sufficiently close, and chroma will be maximized.
   */
  static solveToCam(t, i, r) {
    return ai.fromInt(ct.solveToInt(t, i, r));
  }
};
c(ct, "HctSolver");
let Fi = ct;
Fi.SCALED_DISCOUNT_FROM_LINRGB = [
  [
    0.001200833568784504,
    0.002389694492170889,
    2795742885861124e-19
  ],
  [
    5891086651375999e-19,
    0.0029785502573438758,
    3270666104008398e-19
  ],
  [
    10146692491640572e-20,
    5364214359186694e-19,
    0.0032979401770712076
  ]
];
Fi.LINRGB_FROM_SCALED_DISCOUNT = [
  [
    1373.2198709594231,
    -1100.4251190754821,
    -7.278681089101213
  ],
  [
    -271.815969077903,
    559.6580465940733,
    -32.46047482791194
  ],
  [
    1.9622899599665666,
    -57.173814538844006,
    308.7233197812385
  ]
];
Fi.Y_FROM_LINRGB = [0.2126, 0.7152, 0.0722];
Fi.CRITICAL_PLANES = [
  0.015176349177441876,
  0.045529047532325624,
  0.07588174588720938,
  0.10623444424209313,
  0.13658714259697685,
  0.16693984095186062,
  0.19729253930674434,
  0.2276452376616281,
  0.2579979360165119,
  0.28835063437139563,
  0.3188300904430532,
  0.350925934958123,
  0.3848314933096426,
  0.42057480301049466,
  0.458183274052838,
  0.4976837250274023,
  0.5391024159806381,
  0.5824650784040898,
  0.6277969426914107,
  0.6751227633498623,
  0.7244668422128921,
  0.775853049866786,
  0.829304845476233,
  0.8848452951698498,
  0.942497089126609,
  1.0022825574869039,
  1.0642236851973577,
  1.1283421258858297,
  1.1946592148522128,
  1.2631959812511864,
  1.3339731595349034,
  1.407011200216447,
  1.4823302800086415,
  1.5599503113873272,
  1.6398909516233677,
  1.7221716113234105,
  1.8068114625156377,
  1.8938294463134073,
  1.9832442801866852,
  2.075074464868551,
  2.1693382909216234,
  2.2660538449872063,
  2.36523901573795,
  2.4669114995532007,
  2.5710888059345764,
  2.6777882626779785,
  2.7870270208169257,
  2.898822059350997,
  3.0131901897720907,
  3.1301480604002863,
  3.2497121605402226,
  3.3718988244681087,
  3.4967242352587946,
  3.624204428461639,
  3.754355295633311,
  3.887192587735158,
  4.022731918402185,
  4.160988767090289,
  4.301978482107941,
  4.445716283538092,
  4.592217266055746,
  4.741496401646282,
  4.893568542229298,
  5.048448422192488,
  5.20615066083972,
  5.3666897647573375,
  5.5300801301023865,
  5.696336044816294,
  5.865471690767354,
  6.037501145825082,
  6.212438385869475,
  6.390297286737924,
  6.571091626112461,
  6.7548350853498045,
  6.941541251256611,
  7.131223617812143,
  7.323895587840543,
  7.5195704746346665,
  7.7182615035334345,
  7.919981813454504,
  8.124744458384042,
  8.332562408825165,
  8.543448553206703,
  8.757415699253682,
  8.974476575321063,
  9.194643831691977,
  9.417930041841839,
  9.644347703669503,
  9.873909240696694,
  10.106627003236781,
  10.342513269534024,
  10.58158024687427,
  10.8238400726681,
  11.069304815507364,
  11.317986476196008,
  11.569896988756009,
  11.825048221409341,
  12.083451977536606,
  12.345119996613247,
  12.610063955123938,
  12.878295467455942,
  13.149826086772048,
  13.42466730586372,
  13.702830557985108,
  13.984327217668513,
  14.269168601521828,
  14.55736596900856,
  14.848930523210871,
  15.143873411576273,
  15.44220572664832,
  15.743938506781891,
  16.04908273684337,
  16.35764934889634,
  16.66964922287304,
  16.985093187232053,
  17.30399201960269,
  17.62635644741625,
  17.95219714852476,
  18.281524751807332,
  18.614349837764564,
  18.95068293910138,
  19.290534541298456,
  19.633915083172692,
  19.98083495742689,
  20.331304511189067,
  20.685334046541502,
  21.042933821039977,
  21.404114048223256,
  21.76888489811322,
  22.137256497705877,
  22.50923893145328,
  22.884842241736916,
  23.264076429332462,
  23.6469514538663,
  24.033477234264016,
  24.42366364919083,
  24.817520537484558,
  25.21505769858089,
  25.61628489293138,
  26.021211842414342,
  26.429848230738664,
  26.842203703840827,
  27.258287870275353,
  27.678110301598522,
  28.10168053274597,
  28.529008062403893,
  28.96010235337422,
  29.39497283293396,
  29.83362889318845,
  30.276079891419332,
  30.722335150426627,
  31.172403958865512,
  31.62629557157785,
  32.08401920991837,
  32.54558406207592,
  33.010999283389665,
  33.4802739966603,
  33.953417292456834,
  34.430438229418264,
  34.911345834551085,
  35.39614910352207,
  35.88485700094671,
  36.37747846067349,
  36.87402238606382,
  37.37449765026789,
  37.87891309649659,
  38.38727753828926,
  38.89959975977785,
  39.41588851594697,
  39.93615253289054,
  40.460400508064545,
  40.98864111053629,
  41.520882981230194,
  42.05713473317016,
  42.597404951718396,
  43.141702194811224,
  43.6900349931913,
  44.24241185063697,
  44.798841244188324,
  45.35933162437017,
  45.92389141541209,
  46.49252901546552,
  47.065252796817916,
  47.64207110610409,
  48.22299226451468,
  48.808024568002054,
  49.3971762874833,
  49.9904556690408,
  50.587870934119984,
  51.189430279724725,
  51.79514187861014,
  52.40501387947288,
  53.0190544071392,
  53.637271562750364,
  54.259673423945976,
  54.88626804504493,
  55.517063457223934,
  56.15206766869424,
  56.79128866487574,
  57.43473440856916,
  58.08241284012621,
  58.734331877617365,
  59.39049941699807,
  60.05092333227251,
  60.715611475655585,
  61.38457167773311,
  62.057811747619894,
  62.7353394731159,
  63.417162620860914,
  64.10328893648692,
  64.79372614476921,
  65.48848194977529,
  66.18756403501224,
  66.89098006357258,
  67.59873767827808,
  68.31084450182222,
  69.02730813691093,
  69.74813616640164,
  70.47333615344107,
  71.20291564160104,
  71.93688215501312,
  72.67524319850172,
  73.41800625771542,
  74.16517879925733,
  74.9167682708136,
  75.67278210128072,
  76.43322770089146,
  77.1981124613393,
  77.96744375590167,
  78.74122893956174,
  79.51947534912904,
  80.30219030335869,
  81.08938110306934,
  81.88105503125999,
  82.67721935322541,
  83.4778813166706,
  84.28304815182372,
  85.09272707154808,
  85.90692527145302,
  86.72564993000343,
  87.54890820862819,
  88.3767072518277,
  89.2090541872801,
  90.04595612594655,
  90.88742016217518,
  91.73345337380438,
  92.58406282226491,
  93.43925555268066,
  94.29903859396902,
  95.16341895893969,
  96.03240364439274,
  96.9059996312159,
  97.78421388448044,
  98.6670533535366,
  99.55452497210776
];
const Wo = class Wo {
  static from(t, i, r) {
    return new Wo(Fi.solveToInt(t, i, r));
  }
  /**
   * @param argb ARGB representation of a color.
   * @return HCT representation of a color in default viewing conditions
   */
  static fromInt(t) {
    return new Wo(t);
  }
  toInt() {
    return this.argb;
  }
  /**
   * A number, in degrees, representing ex. red, orange, yellow, etc.
   * Ranges from 0 <= hue < 360.
   */
  get hue() {
    return this.internalHue;
  }
  /**
   * @param newHue 0 <= newHue < 360; invalid values are corrected.
   * Chroma may decrease because chroma has a different maximum for any given
   * hue and tone.
   */
  set hue(t) {
    this.setInternalState(Fi.solveToInt(t, this.internalChroma, this.internalTone));
  }
  get chroma() {
    return this.internalChroma;
  }
  /**
   * @param newChroma 0 <= newChroma < ?
   * Chroma may decrease because chroma has a different maximum for any given
   * hue and tone.
   */
  set chroma(t) {
    this.setInternalState(Fi.solveToInt(this.internalHue, t, this.internalTone));
  }
  /** Lightness. Ranges from 0 to 100. */
  get tone() {
    return this.internalTone;
  }
  /**
   * @param newTone 0 <= newTone <= 100; invalid valids are corrected.
   * Chroma may decrease because chroma has a different maximum for any given
   * hue and tone.
   */
  set tone(t) {
    this.setInternalState(Fi.solveToInt(this.internalHue, this.internalChroma, t));
  }
  constructor(t) {
    this.argb = t;
    const i = ai.fromInt(t);
    this.internalHue = i.hue, this.internalChroma = i.chroma, this.internalTone = jp(t), this.argb = t;
  }
  setInternalState(t) {
    const i = ai.fromInt(t);
    this.internalHue = i.hue, this.internalChroma = i.chroma, this.internalTone = jp(t), this.argb = t;
  }
  /**
   * Translates a color into different [ViewingConditions].
   *
   * Colors change appearance. They look different with lights on versus off,
   * the same color, as in hex code, on white looks different when on black.
   * This is called color relativity, most famously explicated by Josef Albers
   * in Interaction of Color.
   *
   * In color science, color appearance models can account for this and
   * calculate the appearance of a color in different settings. HCT is based on
   * CAM16, a color appearance model, and uses it to make these calculations.
   *
   * See [ViewingConditions.make] for parameters affecting color appearance.
   */
  inViewingConditions(t) {
    const r = ai.fromInt(this.toInt()).xyzInViewingConditions(t), n = ai.fromXyzInViewingConditions(r[0], r[1], r[2], vi.make());
    return Wo.from(n.hue, n.chroma, Wp(r[1]));
  }
};
c(Wo, "Hct");
let Se = Wo;
const eu = class eu {
  /**
   * Blend the design color's HCT hue towards the key color's HCT
   * hue, in a way that leaves the original color recognizable and
   * recognizably shifted towards the key color.
   *
   * @param designColor ARGB representation of an arbitrary color.
   * @param sourceColor ARGB representation of the main theme color.
   * @return The design color with a hue shifted towards the
   * system's color, a slightly warmer/cooler variant of the design
   * color's hue.
   */
  static harmonize(t, i) {
    const r = Se.fromInt(t), n = Se.fromInt(i), s = $2(r.hue, n.hue), a = Math.min(s * 0.5, 15), l = bw(r.hue + a * k2(r.hue, n.hue));
    return Se.from(l, r.chroma, r.tone).toInt();
  }
  /**
   * Blends hue from one color into another. The chroma and tone of
   * the original color are maintained.
   *
   * @param from ARGB representation of color
   * @param to ARGB representation of color
   * @param amount how much blending to perform; 0.0 >= and <= 1.0
   * @return from, with a hue blended towards to. Chroma and tone
   * are constant.
   */
  static hctHue(t, i, r) {
    const n = eu.cam16Ucs(t, i, r), s = ai.fromInt(n), a = ai.fromInt(t);
    return Se.from(s.hue, a.chroma, jp(t)).toInt();
  }
  /**
   * Blend in CAM16-UCS space.
   *
   * @param from ARGB representation of color
   * @param to ARGB representation of color
   * @param amount how much blending to perform; 0.0 >= and <= 1.0
   * @return from, blended towards to. Hue, chroma, and tone will
   * change.
   */
  static cam16Ucs(t, i, r) {
    const n = ai.fromInt(t), s = ai.fromInt(i), a = n.jstar, l = n.astar, d = n.bstar, h = s.jstar, w = s.astar, m = s.bstar, f = a + (h - a) * r, b = l + (w - l) * r, g = d + (m - d) * r;
    return ai.fromUcs(f, b, g).toInt();
  }
};
c(eu, "Blend");
let ti = eu;
const Tr = class Tr {
  /**
   * Returns a contrast ratio, which ranges from 1 to 21.
   *
   * @param toneA Tone between 0 and 100. Values outside will be clamped.
   * @param toneB Tone between 0 and 100. Values outside will be clamped.
   */
  static ratioOfTones(t, i) {
    return t = ch(0, 100, t), i = ch(0, 100, i), Tr.ratioOfYs(on(t), on(i));
  }
  static ratioOfYs(t, i) {
    const r = t > i ? t : i, n = r === i ? t : i;
    return (r + 5) / (n + 5);
  }
  /**
   * Returns a tone >= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns -1 if ratio cannot be achieved with tone parameter.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in -1 being returned.
   * @param ratio Contrast ratio of return value and tone.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static lighter(t, i) {
    if (t < 0 || t > 100)
      return -1;
    const r = on(t), n = i * (r + 5) - 5, s = Tr.ratioOfYs(n, r), a = Math.abs(s - i);
    if (s < i && a > 0.04)
      return -1;
    const l = Wp(n) + 0.4;
    return l < 0 || l > 100 ? -1 : l;
  }
  /**
   * Returns a tone <= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns -1 if ratio cannot be achieved with tone parameter.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in -1 being returned.
   * @param ratio Contrast ratio of return value and tone.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static darker(t, i) {
    if (t < 0 || t > 100)
      return -1;
    const r = on(t), n = (r + 5) / i - 5, s = Tr.ratioOfYs(r, n), a = Math.abs(s - i);
    if (s < i && a > 0.04)
      return -1;
    const l = Wp(n) - 0.4;
    return l < 0 || l > 100 ? -1 : l;
  }
  /**
   * Returns a tone >= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns 100 if ratio cannot be achieved with tone parameter.
   *
   * This method is unsafe because the returned value is guaranteed to be in
   * bounds for tone, i.e. between 0 and 100. However, that value may not reach
   * the ratio with tone. For example, there is no color lighter than T100.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in 100 being returned.
   * @param ratio Desired contrast ratio of return value and tone parameter.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static lighterUnsafe(t, i) {
    const r = Tr.lighter(t, i);
    return r < 0 ? 100 : r;
  }
  /**
   * Returns a tone >= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns 100 if ratio cannot be achieved with tone parameter.
   *
   * This method is unsafe because the returned value is guaranteed to be in
   * bounds for tone, i.e. between 0 and 100. However, that value may not reach
   * the [ratio with [tone]. For example, there is no color darker than T0.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in 0 being returned.
   * @param ratio Desired contrast ratio of return value and tone parameter.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static darkerUnsafe(t, i) {
    const r = Tr.darker(t, i);
    return r < 0 ? 0 : r;
  }
};
c(Tr, "Contrast");
let Ue = Tr;
const iu = class iu {
  /**
   * Returns true if a color is disliked.
   *
   * @param hct A color to be judged.
   * @return Whether the color is disliked.
   *
   * Disliked is defined as a dark yellow-green that is not neutral.
   */
  static isDisliked(t) {
    const i = Math.round(t.hue) >= 90 && Math.round(t.hue) <= 111, r = Math.round(t.chroma) > 16, n = Math.round(t.tone) < 65;
    return i && r && n;
  }
  /**
   * If a color is disliked, lighten it to make it likable.
   *
   * @param hct A color to be judged.
   * @return A new color if the original color is disliked, or the original
   *   color if it is acceptable.
   */
  static fixIfDisliked(t) {
    return iu.isDisliked(t) ? Se.from(t.hue, t.chroma, 70) : t;
  }
};
c(iu, "DislikeAnalyzer");
let qp = iu;
const Re = class Re {
  /**
   * Create a DynamicColor defined by a TonalPalette and HCT tone.
   *
   * @param args Functions with DynamicScheme as input. Must provide a palette
   * and tone. May provide a background DynamicColor and ToneDeltaConstraint.
   */
  static fromPalette(t) {
    return new Re(t.name ?? "", t.palette, t.tone, t.isBackground ?? !1, t.background, t.secondBackground, t.contrastCurve, t.toneDeltaPair);
  }
  /**
   * The base constructor for DynamicColor.
   *
   * _Strongly_ prefer using one of the convenience constructors. This class is
   * arguably too flexible to ensure it can support any scenario. Functional
   * arguments allow  overriding without risks that come with subclasses.
   *
   * For example, the default behavior of adjust tone at max contrast
   * to be at a 7.0 ratio with its background is principled and
   * matches accessibility guidance. That does not mean it's the desired
   * approach for _every_ design system, and every color pairing,
   * always, in every case.
   *
   * @param name The name of the dynamic color. Defaults to empty.
   * @param palette Function that provides a TonalPalette given
   * DynamicScheme. A TonalPalette is defined by a hue and chroma, so this
   * replaces the need to specify hue/chroma. By providing a tonal palette, when
   * contrast adjustments are made, intended chroma can be preserved.
   * @param tone Function that provides a tone, given a DynamicScheme.
   * @param isBackground Whether this dynamic color is a background, with
   * some other color as the foreground. Defaults to false.
   * @param background The background of the dynamic color (as a function of a
   *     `DynamicScheme`), if it exists.
   * @param secondBackground A second background of the dynamic color (as a
   *     function of a `DynamicScheme`), if it
   * exists.
   * @param contrastCurve A `ContrastCurve` object specifying how its contrast
   * against its background should behave in various contrast levels options.
   * @param toneDeltaPair A `ToneDeltaPair` object specifying a tone delta
   * constraint between two colors. One of them must be the color being
   * constructed.
   */
  constructor(t, i, r, n, s, a, l, d) {
    if (this.name = t, this.palette = i, this.tone = r, this.isBackground = n, this.background = s, this.secondBackground = a, this.contrastCurve = l, this.toneDeltaPair = d, this.hctCache = /* @__PURE__ */ new Map(), !s && a)
      throw new Error(`Color ${t} has secondBackgrounddefined, but background is not defined.`);
    if (!s && l)
      throw new Error(`Color ${t} has contrastCurvedefined, but background is not defined.`);
    if (s && !l)
      throw new Error(`Color ${t} has backgrounddefined, but contrastCurve is not defined.`);
  }
  /**
   * Return a ARGB integer (i.e. a hex code).
   *
   * @param scheme Defines the conditions of the user interface, for example,
   * whether or not it is dark mode or light mode, and what the desired
   * contrast level is.
   */
  getArgb(t) {
    return this.getHct(t).toInt();
  }
  /**
   * Return a color, expressed in the HCT color space, that this
   * DynamicColor is under the conditions in scheme.
   *
   * @param scheme Defines the conditions of the user interface, for example,
   * whether or not it is dark mode or light mode, and what the desired
   * contrast level is.
   */
  getHct(t) {
    const i = this.hctCache.get(t);
    if (i != null)
      return i;
    const r = this.getTone(t), n = this.palette(t).getHct(r);
    return this.hctCache.size > 4 && this.hctCache.clear(), this.hctCache.set(t, n), n;
  }
  /**
   * Return a tone, T in the HCT color space, that this DynamicColor is under
   * the conditions in scheme.
   *
   * @param scheme Defines the conditions of the user interface, for example,
   * whether or not it is dark mode or light mode, and what the desired
   * contrast level is.
   */
  getTone(t) {
    const i = t.contrastLevel < 0;
    if (this.toneDeltaPair) {
      const r = this.toneDeltaPair(t), n = r.roleA, s = r.roleB, a = r.delta, l = r.polarity, d = r.stayTogether, w = this.background(t).getTone(t), m = l === "nearer" || l === "lighter" && !t.isDark || l === "darker" && t.isDark, f = m ? n : s, b = m ? s : n, g = this.name === f.name, $ = t.isDark ? 1 : -1, O = f.contrastCurve.getContrast(t.contrastLevel), k = b.contrastCurve.getContrast(t.contrastLevel), S = f.tone(t);
      let _ = Ue.ratioOfTones(w, S) >= O ? S : Re.foregroundTone(w, O);
      const V = b.tone(t);
      let I = Ue.ratioOfTones(w, V) >= k ? V : Re.foregroundTone(w, k);
      return i && (_ = Re.foregroundTone(w, O), I = Re.foregroundTone(w, k)), (I - _) * $ >= a || (I = ch(0, 100, _ + a * $), (I - _) * $ >= a || (_ = ch(0, 100, I - a * $))), 50 <= _ && _ < 60 ? $ > 0 ? (_ = 60, I = Math.max(I, _ + a * $)) : (_ = 49, I = Math.min(I, _ + a * $)) : 50 <= I && I < 60 && (d ? $ > 0 ? (_ = 60, I = Math.max(I, _ + a * $)) : (_ = 49, I = Math.min(I, _ + a * $)) : $ > 0 ? I = 60 : I = 49), g ? _ : I;
    } else {
      let r = this.tone(t);
      if (this.background == null)
        return r;
      const n = this.background(t).getTone(t), s = this.contrastCurve.getContrast(t.contrastLevel);
      if (Ue.ratioOfTones(n, r) >= s || (r = Re.foregroundTone(n, s)), i && (r = Re.foregroundTone(n, s)), this.isBackground && 50 <= r && r < 60 && (Ue.ratioOfTones(49, n) >= s ? r = 49 : r = 60), this.secondBackground) {
        const [a, l] = [this.background, this.secondBackground], [d, h] = [a(t).getTone(t), l(t).getTone(t)], [w, m] = [Math.max(d, h), Math.min(d, h)];
        if (Ue.ratioOfTones(w, r) >= s && Ue.ratioOfTones(m, r) >= s)
          return r;
        const f = Ue.lighter(w, s), b = Ue.darker(m, s), g = [];
        return f !== -1 && g.push(f), b !== -1 && g.push(b), Re.tonePrefersLightForeground(d) || Re.tonePrefersLightForeground(h) ? f < 0 ? 100 : f : g.length === 1 ? g[0] : b < 0 ? 0 : b;
      }
      return r;
    }
  }
  /**
   * Given a background tone, find a foreground tone, while ensuring they reach
   * a contrast ratio that is as close to [ratio] as possible.
   *
   * @param bgTone Tone in HCT. Range is 0 to 100, undefined behavior when it
   *     falls outside that range.
   * @param ratio The contrast ratio desired between bgTone and the return
   *     value.
   */
  static foregroundTone(t, i) {
    const r = Ue.lighterUnsafe(t, i), n = Ue.darkerUnsafe(t, i), s = Ue.ratioOfTones(r, t), a = Ue.ratioOfTones(n, t);
    if (Re.tonePrefersLightForeground(t)) {
      const d = Math.abs(s - a) < 0.1 && s < i && a < i;
      return s >= i || s >= a || d ? r : n;
    } else
      return a >= i || a >= s ? n : r;
  }
  /**
   * Returns whether [tone] prefers a light foreground.
   *
   * People prefer white foregrounds on ~T60-70. Observed over time, and also
   * by Andrew Somers during research for APCA.
   *
   * T60 used as to create the smallest discontinuity possible when skipping
   * down to T49 in order to ensure light foregrounds.
   * Since `tertiaryContainer` in dark monochrome scheme requires a tone of
   * 60, it should not be adjusted. Therefore, 60 is excluded here.
   */
  static tonePrefersLightForeground(t) {
    return Math.round(t) < 60;
  }
  /**
   * Returns whether [tone] can reach a contrast ratio of 4.5 with a lighter
   * color.
   */
  static toneAllowsLightForeground(t) {
    return Math.round(t) <= 49;
  }
  /**
   * Adjust a tone such that white has 4.5 contrast, if the tone is
   * reasonably close to supporting it.
   */
  static enableLightForeground(t) {
    return Re.tonePrefersLightForeground(t) && !Re.toneAllowsLightForeground(t) ? 49 : t;
  }
};
c(Re, "DynamicColor");
let J = Re;
var ml;
(function(o) {
  o[o.MONOCHROME = 0] = "MONOCHROME", o[o.NEUTRAL = 1] = "NEUTRAL", o[o.TONAL_SPOT = 2] = "TONAL_SPOT", o[o.VIBRANT = 3] = "VIBRANT", o[o.EXPRESSIVE = 4] = "EXPRESSIVE", o[o.FIDELITY = 5] = "FIDELITY", o[o.CONTENT = 6] = "CONTENT", o[o.RAINBOW = 7] = "RAINBOW", o[o.FRUIT_SALAD = 8] = "FRUIT_SALAD";
})(ml || (ml = {}));
const tf = class tf {
  /**
   * Creates a `ContrastCurve` object.
   *
   * @param low Contrast requirement for contrast level -1.0
   * @param normal Contrast requirement for contrast level 0.0
   * @param medium Contrast requirement for contrast level 0.5
   * @param high Contrast requirement for contrast level 1.0
   */
  constructor(t, i, r, n) {
    this.low = t, this.normal = i, this.medium = r, this.high = n;
  }
  /**
   * Returns the contrast ratio at a given contrast level.
   *
   * @param contrastLevel The contrast level. 0.0 is the default (normal);
   * -1.0 is the lowest; 1.0 is the highest.
   * @return The contrast ratio, a number between 1.0 and 21.0.
   */
  getContrast(t) {
    return t <= -1 ? this.low : t < 0 ? dl(this.low, this.normal, (t - -1) / 1) : t < 0.5 ? dl(this.normal, this.medium, (t - 0) / 0.5) : t < 1 ? dl(this.medium, this.high, (t - 0.5) / 0.5) : this.high;
  }
};
c(tf, "ContrastCurve");
let ft = tf;
const ef = class ef {
  /**
   * Documents a constraint in tone distance between two DynamicColors.
   *
   * The polarity is an adjective that describes "A", compared to "B".
   *
   * For instance, ToneDeltaPair(A, B, 15, 'darker', stayTogether) states that
   * A's tone should be at least 15 darker than B's.
   *
   * 'nearer' and 'farther' describes closeness to the surface roles. For
   * instance, ToneDeltaPair(A, B, 10, 'nearer', stayTogether) states that A
   * should be 10 lighter than B in light mode, and 10 darker than B in dark
   * mode.
   *
   * @param roleA The first role in a pair.
   * @param roleB The second role in a pair.
   * @param delta Required difference between tones. Absolute value, negative
   * values have undefined behavior.
   * @param polarity The relative relation between tones of roleA and roleB,
   * as described above.
   * @param stayTogether Whether these two roles should stay on the same side of
   * the "awkward zone" (T50-59). This is necessary for certain cases where
   * one role has two backgrounds.
   */
  constructor(t, i, r, n, s) {
    this.roleA = t, this.roleB = i, this.delta = r, this.polarity = n, this.stayTogether = s;
  }
};
c(ef, "ToneDeltaPair");
let Le = ef;
function Nc(o) {
  return o.variant === ml.FIDELITY || o.variant === ml.CONTENT;
}
c(Nc, "isFidelity");
function Yt(o) {
  return o.variant === ml.MONOCHROME;
}
c(Yt, "isMonochrome");
function z2(o, t, i, r) {
  let n = i, s = Se.from(o, t, i);
  if (s.chroma < t) {
    let a = s.chroma;
    for (; s.chroma < t; ) {
      n += r ? -1 : 1;
      const l = Se.from(o, t, n);
      if (a > l.chroma || Math.abs(l.chroma - t) < 0.4)
        break;
      const d = Math.abs(l.chroma - t), h = Math.abs(s.chroma - t);
      d < h && (s = l), a = Math.max(a, l.chroma);
    }
  }
  return n;
}
c(z2, "findDesiredChromaByTone");
function R2(o) {
  return vi.make(
    /*whitePoint=*/
    void 0,
    /*adaptingLuminance=*/
    void 0,
    /*backgroundLstar=*/
    o.isDark ? 30 : 80,
    /*surround=*/
    void 0,
    /*discountingIlluminant=*/
    void 0
  );
}
c(R2, "viewingConditionsForAlbers");
function Cw(o, t) {
  const i = o.inViewingConditions(R2(t));
  return J.tonePrefersLightForeground(o.tone) && !J.toneAllowsLightForeground(i.tone) ? J.enableLightForeground(o.tone) : J.enableLightForeground(i.tone);
}
c(Cw, "performAlbers");
const yl = class yl {
  static highestSurface(t) {
    return t.isDark ? yl.surfaceBright : yl.surfaceDim;
  }
};
c(yl, "MaterialDynamicColors");
let B = yl;
B.contentAccentToneDelta = 15;
B.primaryPaletteKeyColor = J.fromPalette({
  name: "primary_palette_key_color",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.primaryPalette.keyColor.tone, "tone")
});
B.secondaryPaletteKeyColor = J.fromPalette({
  name: "secondary_palette_key_color",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.secondaryPalette.keyColor.tone, "tone")
});
B.tertiaryPaletteKeyColor = J.fromPalette({
  name: "tertiary_palette_key_color",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.tertiaryPalette.keyColor.tone, "tone")
});
B.neutralPaletteKeyColor = J.fromPalette({
  name: "neutral_palette_key_color",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.neutralPalette.keyColor.tone, "tone")
});
B.neutralVariantPaletteKeyColor = J.fromPalette({
  name: "neutral_variant_palette_key_color",
  palette: /* @__PURE__ */ c((o) => o.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.neutralVariantPalette.keyColor.tone, "tone")
});
B.background = J.fromPalette({
  name: "background",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 6 : 98, "tone"),
  isBackground: !0
});
B.onBackground = J.fromPalette({
  name: "on_background",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.background, "background"),
  contrastCurve: new ft(3, 3, 4.5, 7)
});
B.surface = J.fromPalette({
  name: "surface",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 6 : 98, "tone"),
  isBackground: !0
});
B.surfaceDim = J.fromPalette({
  name: "surface_dim",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 6 : 87, "tone"),
  isBackground: !0
});
B.surfaceBright = J.fromPalette({
  name: "surface_bright",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 24 : 98, "tone"),
  isBackground: !0
});
B.surfaceContainerLowest = J.fromPalette({
  name: "surface_container_lowest",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 4 : 100, "tone"),
  isBackground: !0
});
B.surfaceContainerLow = J.fromPalette({
  name: "surface_container_low",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 10 : 96, "tone"),
  isBackground: !0
});
B.surfaceContainer = J.fromPalette({
  name: "surface_container",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 12 : 94, "tone"),
  isBackground: !0
});
B.surfaceContainerHigh = J.fromPalette({
  name: "surface_container_high",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 17 : 92, "tone"),
  isBackground: !0
});
B.surfaceContainerHighest = J.fromPalette({
  name: "surface_container_highest",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 22 : 90, "tone"),
  isBackground: !0
});
B.onSurface = J.fromPalette({
  name: "on_surface",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.surfaceVariant = J.fromPalette({
  name: "surface_variant",
  palette: /* @__PURE__ */ c((o) => o.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 30 : 90, "tone"),
  isBackground: !0
});
B.onSurfaceVariant = J.fromPalette({
  name: "on_surface_variant",
  palette: /* @__PURE__ */ c((o) => o.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 80 : 30, "tone"),
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(3, 4.5, 7, 11)
});
B.inverseSurface = J.fromPalette({
  name: "inverse_surface",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 90 : 20, "tone")
});
B.inverseOnSurface = J.fromPalette({
  name: "inverse_on_surface",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 20 : 95, "tone"),
  background: /* @__PURE__ */ c((o) => B.inverseSurface, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.outline = J.fromPalette({
  name: "outline",
  palette: /* @__PURE__ */ c((o) => o.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 60 : 50, "tone"),
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1.5, 3, 4.5, 7)
});
B.outlineVariant = J.fromPalette({
  name: "outline_variant",
  palette: /* @__PURE__ */ c((o) => o.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 30 : 80, "tone"),
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7)
});
B.shadow = J.fromPalette({
  name: "shadow",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => 0, "tone")
});
B.scrim = J.fromPalette({
  name: "scrim",
  palette: /* @__PURE__ */ c((o) => o.neutralPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => 0, "tone")
});
B.surfaceTint = J.fromPalette({
  name: "surface_tint",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 80 : 40, "tone"),
  isBackground: !0
});
B.primary = J.fromPalette({
  name: "primary",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? o.isDark ? 100 : 0 : o.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.primaryContainer, B.primary, 15, "nearer", !1), "toneDeltaPair")
});
B.onPrimary = J.fromPalette({
  name: "on_primary",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? o.isDark ? 10 : 90 : o.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ c((o) => B.primary, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.primaryContainer = J.fromPalette({
  name: "primary_container",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Nc(o) ? Cw(o.sourceColorHct, o) : Yt(o) ? o.isDark ? 85 : 25 : o.isDark ? 30 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.primaryContainer, B.primary, 15, "nearer", !1), "toneDeltaPair")
});
B.onPrimaryContainer = J.fromPalette({
  name: "on_primary_container",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Nc(o) ? J.foregroundTone(B.primaryContainer.tone(o), 4.5) : Yt(o) ? o.isDark ? 0 : 100 : o.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.primaryContainer, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.inversePrimary = J.fromPalette({
  name: "inverse_primary",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 40 : 80, "tone"),
  background: /* @__PURE__ */ c((o) => B.inverseSurface, "background"),
  contrastCurve: new ft(3, 4.5, 7, 11)
});
B.secondary = J.fromPalette({
  name: "secondary",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.secondaryContainer, B.secondary, 15, "nearer", !1), "toneDeltaPair")
});
B.onSecondary = J.fromPalette({
  name: "on_secondary",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? o.isDark ? 10 : 100 : o.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ c((o) => B.secondary, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.secondaryContainer = J.fromPalette({
  name: "secondary_container",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => {
    const t = o.isDark ? 30 : 90;
    if (Yt(o))
      return o.isDark ? 30 : 85;
    if (!Nc(o))
      return t;
    let i = z2(o.secondaryPalette.hue, o.secondaryPalette.chroma, t, !o.isDark);
    return i = Cw(o.secondaryPalette.getHct(i), o), i;
  }, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.secondaryContainer, B.secondary, 15, "nearer", !1), "toneDeltaPair")
});
B.onSecondaryContainer = J.fromPalette({
  name: "on_secondary_container",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Nc(o) ? J.foregroundTone(B.secondaryContainer.tone(o), 4.5) : o.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.secondaryContainer, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.tertiary = J.fromPalette({
  name: "tertiary",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? o.isDark ? 90 : 25 : o.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.tertiaryContainer, B.tertiary, 15, "nearer", !1), "toneDeltaPair")
});
B.onTertiary = J.fromPalette({
  name: "on_tertiary",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? o.isDark ? 10 : 90 : o.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ c((o) => B.tertiary, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.tertiaryContainer = J.fromPalette({
  name: "tertiary_container",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => {
    if (Yt(o))
      return o.isDark ? 60 : 49;
    if (!Nc(o))
      return o.isDark ? 30 : 90;
    const t = Cw(o.tertiaryPalette.getHct(o.sourceColorHct.tone), o), i = o.tertiaryPalette.getHct(t);
    return qp.fixIfDisliked(i).tone;
  }, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.tertiaryContainer, B.tertiary, 15, "nearer", !1), "toneDeltaPair")
});
B.onTertiaryContainer = J.fromPalette({
  name: "on_tertiary_container",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? o.isDark ? 0 : 100 : Nc(o) ? J.foregroundTone(B.tertiaryContainer.tone(o), 4.5) : o.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.tertiaryContainer, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.error = J.fromPalette({
  name: "error",
  palette: /* @__PURE__ */ c((o) => o.errorPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.errorContainer, B.error, 15, "nearer", !1), "toneDeltaPair")
});
B.onError = J.fromPalette({
  name: "on_error",
  palette: /* @__PURE__ */ c((o) => o.errorPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ c((o) => B.error, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.errorContainer = J.fromPalette({
  name: "error_container",
  palette: /* @__PURE__ */ c((o) => o.errorPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 30 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.errorContainer, B.error, 15, "nearer", !1), "toneDeltaPair")
});
B.onErrorContainer = J.fromPalette({
  name: "on_error_container",
  palette: /* @__PURE__ */ c((o) => o.errorPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => o.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.errorContainer, "background"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.primaryFixed = J.fromPalette({
  name: "primary_fixed",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 40 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.primaryFixed, B.primaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
B.primaryFixedDim = J.fromPalette({
  name: "primary_fixed_dim",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 30 : 80, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.primaryFixed, B.primaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
B.onPrimaryFixed = J.fromPalette({
  name: "on_primary_fixed",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 100 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.primaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ c((o) => B.primaryFixed, "secondBackground"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.onPrimaryFixedVariant = J.fromPalette({
  name: "on_primary_fixed_variant",
  palette: /* @__PURE__ */ c((o) => o.primaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 90 : 30, "tone"),
  background: /* @__PURE__ */ c((o) => B.primaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ c((o) => B.primaryFixed, "secondBackground"),
  contrastCurve: new ft(3, 4.5, 7, 11)
});
B.secondaryFixed = J.fromPalette({
  name: "secondary_fixed",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 80 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.secondaryFixed, B.secondaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
B.secondaryFixedDim = J.fromPalette({
  name: "secondary_fixed_dim",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 70 : 80, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.secondaryFixed, B.secondaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
B.onSecondaryFixed = J.fromPalette({
  name: "on_secondary_fixed",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.secondaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ c((o) => B.secondaryFixed, "secondBackground"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.onSecondaryFixedVariant = J.fromPalette({
  name: "on_secondary_fixed_variant",
  palette: /* @__PURE__ */ c((o) => o.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 25 : 30, "tone"),
  background: /* @__PURE__ */ c((o) => B.secondaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ c((o) => B.secondaryFixed, "secondBackground"),
  contrastCurve: new ft(3, 4.5, 7, 11)
});
B.tertiaryFixed = J.fromPalette({
  name: "tertiary_fixed",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 40 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.tertiaryFixed, B.tertiaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
B.tertiaryFixedDim = J.fromPalette({
  name: "tertiary_fixed_dim",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 30 : 80, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ c((o) => B.highestSurface(o), "background"),
  contrastCurve: new ft(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ c((o) => new Le(B.tertiaryFixed, B.tertiaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
B.onTertiaryFixed = J.fromPalette({
  name: "on_tertiary_fixed",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 100 : 10, "tone"),
  background: /* @__PURE__ */ c((o) => B.tertiaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ c((o) => B.tertiaryFixed, "secondBackground"),
  contrastCurve: new ft(4.5, 7, 11, 21)
});
B.onTertiaryFixedVariant = J.fromPalette({
  name: "on_tertiary_fixed_variant",
  palette: /* @__PURE__ */ c((o) => o.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ c((o) => Yt(o) ? 90 : 30, "tone"),
  background: /* @__PURE__ */ c((o) => B.tertiaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ c((o) => B.tertiaryFixed, "secondBackground"),
  contrastCurve: new ft(3, 4.5, 7, 11)
});
const Sn = class Sn {
  /**
   * @param argb ARGB representation of a color
   * @return Tones matching that color's hue and chroma.
   */
  static fromInt(t) {
    const i = Se.fromInt(t);
    return Sn.fromHct(i);
  }
  /**
   * @param hct Hct
   * @return Tones matching that color's hue and chroma.
   */
  static fromHct(t) {
    return new Sn(t.hue, t.chroma, t);
  }
  /**
   * @param hue HCT hue
   * @param chroma HCT chroma
   * @return Tones matching hue and chroma.
   */
  static fromHueAndChroma(t, i) {
    return new Sn(t, i, Sn.createKeyColor(t, i));
  }
  constructor(t, i, r) {
    this.hue = t, this.chroma = i, this.keyColor = r, this.cache = /* @__PURE__ */ new Map();
  }
  static createKeyColor(t, i) {
    let n = Se.from(t, i, 50), s = Math.abs(n.chroma - i);
    for (let a = 1; a < 50; a += 1) {
      if (Math.round(i) === Math.round(n.chroma))
        return n;
      const l = Se.from(t, i, 50 + a), d = Math.abs(l.chroma - i);
      d < s && (s = d, n = l);
      const h = Se.from(t, i, 50 - a), w = Math.abs(h.chroma - i);
      w < s && (s = w, n = h);
    }
    return n;
  }
  /**
   * @param tone HCT tone, measured from 0 to 100.
   * @return ARGB representation of a color with that tone.
   */
  tone(t) {
    let i = this.cache.get(t);
    return i === void 0 && (i = Se.from(this.hue, this.chroma, t).toInt(), this.cache.set(t, i)), i;
  }
  /**
   * @param tone HCT tone.
   * @return HCT representation of a color with that tone.
   */
  getHct(t) {
    return Se.fromInt(this.tone(t));
  }
};
c(Sn, "TonalPalette");
let Lt = Sn;
function Cm(o) {
  const t = Lg(o), i = Mg(o), r = Tg(o), n = [t.toString(16), i.toString(16), r.toString(16)];
  for (const [s, a] of n.entries())
    a.length === 1 && (n[s] = "0" + a);
  return "#" + n.join("");
}
c(Cm, "hexFromArgb");
function I2(o) {
  o = o.replace("#", "");
  const t = o.length === 3, i = o.length === 6, r = o.length === 8;
  if (!t && !i && !r)
    throw new Error("unexpected hex " + o);
  let n = 0, s = 0, a = 0;
  return t ? (n = Zi(o.slice(0, 1).repeat(2)), s = Zi(o.slice(1, 2).repeat(2)), a = Zi(o.slice(2, 3).repeat(2))) : i ? (n = Zi(o.slice(0, 2)), s = Zi(o.slice(2, 4)), a = Zi(o.slice(4, 6))) : r && (n = Zi(o.slice(2, 4)), s = Zi(o.slice(4, 6)), a = Zi(o.slice(6, 8))), (255 << 24 | (n & 255) << 16 | (s & 255) << 8 | a & 255) >>> 0;
}
c(I2, "argbFromHex");
function Zi(o) {
  return parseInt(o, 16);
}
c(Zi, "parseIntHex");
function O2(o, t = !1) {
  var l;
  const i = (l = o.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)$/)) == null ? void 0 : l.slice(1).map((d, h) => h === 3 ? Math.round(parseFloat(d) * 255) : parseFloat(d));
  if (!i)
    throw new Error("Could not parse rgba color.");
  const [r, n, s, a] = i;
  return ((t ? 255 : a & 255) << 24 | (r & 255) << 16 | (n & 255) << 8 | s & 255) >>> 0;
}
c(O2, "argbFromRgba");
function D2(o) {
  const t = document.createElement("wy-compute-styles");
  t.setAttribute("style", `color: ${o} !important;`), document.documentElement.append(t);
  const i = window.getComputedStyle(t).color;
  return t.remove(), i;
}
c(D2, "getComputedColor");
function Qp(o) {
  return getComputedStyle(o).getPropertyValue("--wy-theme-color") || void 0;
}
c(Qp, "getCSSThemeColor");
function F2(o, t) {
  let i = Qp(o);
  const r = new MutationObserver(() => {
    const a = Qp(o);
    a !== i && (console.log("--wy-theme-color changed", a), i = a, t(a));
  }), n = {
    attributes: !0,
    attributeFilter: ["class", "style"]
  };
  let s = o;
  for (; s && s !== document; )
    r.observe(s, n), s = s.parentNode;
  return () => r.disconnect();
}
c(F2, "observeCSSThemeColor");
function Kp() {
  var i;
  return ((i = Array.from(document.head.querySelectorAll("meta[name='theme-color']")).filter((r) => {
    var s;
    const n = r.getAttribute("media");
    return !n || ((s = window.matchMedia(n)) == null ? void 0 : s.matches);
  }).pop()) == null ? void 0 : i.getAttribute("content")) || void 0;
}
c(Kp, "getMetaThemeColor");
function N2(o) {
  const t = Array.from(document.head.querySelectorAll("meta[name='theme-color']"));
  if (!t)
    return () => {
    };
  let i = Kp();
  const r = /* @__PURE__ */ c(() => {
    const l = Kp();
    l !== i && (console.log("meta theme-color changed", l), i = l, o(l));
  }, "checkChangedColor"), n = new MutationObserver(r), s = {
    attributes: !0,
    attributeFilter: ["content"]
  }, a = [];
  return t.forEach((l) => {
    n.observe(l, s);
    const d = l.getAttribute("media");
    if (d) {
      const h = window.matchMedia(d);
      h.addEventListener("change", r), a.push(h);
    }
  }), () => {
    n.disconnect(), a.forEach((l) => l.removeEventListener("change", r));
  };
}
c(N2, "observeMetaThemeColor");
const Jc = [], V2 = 16;
function H2(o, t = !1) {
  var I;
  if (Jc.some((D) => D.seedColor === o)) {
    const D = (I = Jc.find((z) => z.seedColor === o)) == null ? void 0 : I.colors;
    if (D)
      return D;
  }
  const i = [];
  t && i.push(`--wy-theme-color:${o};`);
  let r = o;
  !o.startsWith("#") && !o.startsWith("rgb") && (r = D2(o), console.log("computed color", o));
  const n = o.startsWith("#") ? I2(r) : O2(r), s = Se.fromInt(n), a = s.hue, l = s.chroma, d = Math.max(48, l), h = Math.min(d, 84), m = 360 / 16, f = 27.4, b = -8, g = (a + 360 - f - b + m / 2) % m + f + b - m / 2, $ = {
    primary: Lt.fromHueAndChroma(a, d),
    secondary: Lt.fromHueAndChroma(a, d / 3),
    tertiary: Lt.fromHueAndChroma(a + 60, d / 2),
    neutral: Lt.fromHueAndChroma(a, Math.min(l / 12, 4)),
    "neutral-variant": Lt.fromHueAndChroma(a, Math.min(l / 6, 8)),
    error: Lt.fromHueAndChroma(g, 84),
    warning: Lt.fromHueAndChroma(g + 4 * m, h),
    // Same as yellow
    red: Lt.fromHueAndChroma(g, h),
    "deep-orange": Lt.fromHueAndChroma(g + 1 * m, h),
    orange: Lt.fromHueAndChroma(g + 2 * m, h),
    amber: Lt.fromHueAndChroma(g + 3 * m, h),
    yellow: Lt.fromHueAndChroma(g + 4 * m, h),
    lime: Lt.fromHueAndChroma(g + 5 * m, h),
    "light-green": Lt.fromHueAndChroma(g + 6 * m, h),
    green: Lt.fromHueAndChroma(g + 7 * m, h),
    teal: Lt.fromHueAndChroma(g + 8 * m, h),
    cyan: Lt.fromHueAndChroma(g + 9 * m, h),
    "light-blue": Lt.fromHueAndChroma(g + 10 * m, h),
    blue: Lt.fromHueAndChroma(g + 11 * m, h),
    indigo: Lt.fromHueAndChroma(g + 12 * m, h),
    "deep-purple": Lt.fromHueAndChroma(g + 13 * m, h),
    purple: Lt.fromHueAndChroma(g + 14 * m, h),
    pink: Lt.fromHueAndChroma(g + 15 * m, h),
    gray: Lt.fromHueAndChroma(a, 4)
  }, O = {
    //"100": 100,
    99: 99,
    95: 95,
    90: 90,
    80: 80,
    70: 70,
    60: 60,
    50: 50,
    40: 40,
    30: 30,
    20: 20,
    10: 10
    //"0": 0
  }, k = {
    primary: O,
    secondary: O,
    tertiary: O,
    neutral: O,
    "neutral-variant": O,
    error: O,
    warning: O,
    blue: { light: 70, dark: 80 },
    indigo: { light: 60, dark: 60 },
    purple: { light: 60, dark: 70 },
    pink: { light: 60, dark: 70 },
    red: { light: 60, dark: 60 },
    orange: { light: 70, dark: 70 },
    yellow: { light: 70, dark: 80 },
    green: { light: 60, dark: 60 },
    teal: { light: 60, dark: 60 },
    cyan: { light: 50, dark: 60 },
    gray: { light: 50, dark: 60 }
  };
  for (const D in k) {
    const z = k[D];
    for (const F in z) {
      const A = Cm($[D].tone(z[F]));
      i.push(`--wy-${D}-${F}:${A};`);
    }
  }
  const S = {
    light: $.primary.tone(40),
    dark: $.primary.tone(80)
  }, _ = {
    light: $.neutral.tone(99),
    dark: $.neutral.tone(10)
  }, V = {
    "surface-1": {
      light: ti.cam16Ucs(_.light, S.light, 0.05),
      dark: ti.cam16Ucs(_.dark, S.dark, 0.05)
    },
    "surface-2": {
      light: ti.cam16Ucs(_.light, S.light, 0.08),
      dark: ti.cam16Ucs(_.dark, S.dark, 0.08)
    },
    "surface-3": {
      light: ti.cam16Ucs(_.light, S.light, 0.11),
      dark: ti.cam16Ucs(_.dark, S.dark, 0.11)
    },
    "surface-4": {
      light: ti.cam16Ucs(_.light, S.light, 0.12),
      dark: ti.cam16Ucs(_.dark, S.dark, 0.12)
    },
    "surface-5": {
      light: ti.cam16Ucs(_.light, S.light, 0.14),
      dark: ti.cam16Ucs(_.dark, S.dark, 0.14)
    }
  };
  for (const D in V) {
    const z = V[D];
    for (const F in z) {
      const A = Cm(z[F]);
      i.push(`--wy-${D}-${F}:${A};`);
    }
  }
  return Jc.unshift({ seedColor: o, colors: i }), Jc.length = Math.min(Jc.length, V2), i;
}
c(H2, "generateThemeColors");
const B2 = /* @__PURE__ */ c((o) => {
  if (lb)
    document.adoptedStyleSheets = o.map(
      (t) => t instanceof CSSStyleSheet ? t : t.styleSheet
    );
  else
    for (const t of o) {
      const i = document.createElement("style"), r = global.litNonce;
      r !== void 0 && i.setAttribute("nonce", r), i.textContent = t.cssText, (document.head || document.documentElement).appendChild(i);
    }
}, "adoptGlobalStyles"), U2 = ".wy-light :where(wy-chat),.wy-light :where(wy-comments),.wy-light :where(wy-files),.wy-light :where(wy-messenger),.wy-light :where(wy-notifications),.wy-light :where(wy-posts),:host(.wy-light),:host .wy-light,::slotted(.wy-light){color-scheme:light;--wy-primary: var(--wy-primary-40, #006399);--wy-on-primary: var(--wy-white, #ffffff);--wy-primary-container: var(--wy-primary-90, #cde5ff);--wy-on-primary-container: var(--wy-primary-10, #001d32);--wy-secondary: var(--wy-secondary-40, #3b6a1c);--wy-on-secondary: var(--wy-white, #ffffff);--wy-secondary-container: var(--wy-secondary-90, #bbf294);--wy-on-secondary-container: var(--wy-secondary-10, #0a2100);--wy-tertiary: var(--wy-tertiary-40, #3b6a1c);--wy-on-tertiary: var(--wy-white, #ffffff);--wy-tertiary-container: var(--wy-tertiary-90, #bbf294);--wy-on-tertiary-container: var(--wy-tertiary-10, #0a2100);--wy-error: var(--wy-error-40, #ba1824);--wy-on-error: var(--wy-white, #ffffff);--wy-error-container: var(--wy-error-90, #ffdad7);--wy-on-error-container: var(--wy-error-10, #410004);--wy-warning: var(--wy-warning-70, #afb140);--wy-on-warning: var(--wy-black, #000000);--wy-warning-container: var(--wy-warning-90, #e7e971);--wy-on-warning-container: var(--wy-warning-10, #1c1d00);--wy-background: var(--wy-neutral-99, #fcfcff);--wy-on-background: var(--wy-neutral-10, #1a1c1e);--wy-surface: var(--wy-neutral-99, #fcfcff);--wy-on-surface: var(--wy-neutral-10, #1a1c1e);--wy-surface-variant: var(--wy-neutral-variant-90, #dee3eb);--wy-on-surface-variant: var(--wy-neutral-variant-30, #42474e);--wy-outline: var(--wy-neutral-variant-50, #72777e);--wy-outline-variant: var(--wy-neutral-variant-80, #c2c7ce);--wy-inverse-surface: var(--wy-neutral-20, #2f3033);--wy-on-inverse-surface: var(--wy-neutral-95, #f0f0f4);--wy-inverse-primary: var(--wy-primary-80, #95ccff);--wy-surface-1: var(--wy-surface-1-light, #f1f2f7);--wy-surface-2: var(--wy-surface-2-light, #eaedf3);--wy-surface-3: var(--wy-surface-3-light, #e3e7ee);--wy-surface-4: var(--wy-surface-4-light, #e1e6ed);--wy-surface-5: var(--wy-surface-5-light, #dce2ea);--wy-highlight: var(--wy-primary-95, #e8f2ff);--wy-on-highlight: var(--wy-primary-10, #001d32);--wy-link: var(--wy-primary-40, #006399);--wy-presence-active: var(--wy-green-light, #00a38b);--wy-blue: var(--wy-blue-light, #89a9fc);--wy-indigo: var(--wy-indigo-light, #9185de);--wy-purple: var(--wy-purple-light, #c675b7);--wy-pink: var(--wy-pink-light, #d57194);--wy-red: var(--wy-red-light, #db726c);--wy-orange: var(--wy-orange-light, #e89a3a);--wy-yellow: var(--wy-yellow-light, #afb140);--wy-green: var(--wy-green-light, #00a38b);--wy-teal: var(--wy-teal-light, #00a0a8);--wy-cyan: var(--wy-cyan-light, #0082a1);--wy-gray: var(--wy-gray-light, #76777a);--wy-code-text: var(--wy-code-text-light, #3b3b3b);--wy-code-variable: var(--wy-code-variable-light, #001080);--wy-code-operator: var(--wy-code-operator-light, #000000);--wy-code-prolog: var(--wy-code-prolog-light, #000080);--wy-code-comment: var(--wy-code-comment-light, #008000);--wy-code-builtin: var(--wy-code-builtin-light, #0070C1);--wy-code-number: var(--wy-code-number-light, #098658);--wy-code-inserted: var(--wy-code-inserted-light, #098658);--wy-code-constant: var(--wy-code-constant-light, #811F3F);--wy-code-hexcode: var(--wy-code-hexcode-light, #811F3F);--wy-code-regex: var(--wy-code-regex-light, #811F3F);--wy-code-char: var(--wy-code-char-light, #811F3F);--wy-code-tag: var(--wy-code-tag-light, #800000);--wy-code-attr-name: var(--wy-code-attr-name-light, #E50000);--wy-code-selector: var(--wy-code-selector-light, #E50000);--wy-code-property: var(--wy-code-property-light, #E50000);--wy-code-deleted: var(--wy-code-deleted-light, #A31515);--wy-code-string: var(--wy-code-string-light, #A31515);--wy-code-changed: var(--wy-code-changed-light, #0451A5);--wy-code-punctuation: var(--wy-code-punctuation-light, #000000);--wy-code-function: var(--wy-code-function-light, #0000FF);--wy-code-keyword: var(--wy-code-keyword-light, #AF00DB);--wy-code-class-name: var(--wy-code-class-name-light, #267F99)}.wy-dark:not(.wy-light) :where(wy-chat),.wy-dark:not(.wy-light) :where(wy-comments),.wy-dark:not(.wy-light) :where(wy-files),.wy-dark:not(.wy-light) :where(wy-messenger),.wy-dark:not(.wy-light) :where(wy-notifications),.wy-dark:not(.wy-light) :where(wy-posts),:host(.wy-dark:not(.wy-light)),:host .wy-dark:not(.wy-light),::slotted(.wy-dark:not(.wy-light)){color-scheme:dark;--wy-primary: var(--wy-primary-80, #95ccff);--wy-on-primary: var(--wy-primary-20, #003352);--wy-primary-container: var(--wy-primary-30, #004a75);--wy-on-primary-container: var(--wy-primary-90, #cde5ff);--wy-secondary: var(--wy-secondary-80, #a0d57b);--wy-on-secondary: var(--wy-secondary-20, #163800);--wy-secondary-container: var(--wy-secondary-30, #245103);--wy-on-secondary-container: var(--wy-secondary-90, #bbf294);--wy-tertiary: var(--wy-tertiary-80, #a0d57b);--wy-on-tertiary: var(--wy-tertiary-20, #163800);--wy-tertiary-container: var(--wy-tertiary-30, #245103);--wy-on-tertiary-container: var(--wy-tertiary-90, #bbf294);--wy-error: var(--wy-error-80, #ffb3ae);--wy-on-error: var(--wy-error-20, #68000b);--wy-error-container: var(--wy-error-30, #930014);--wy-on-error-container: var(--wy-error-90, #ffdad7);--wy-warning: var(--wy-warning-90, #e7e971);--wy-on-warning: var(--wy-warning-30, #484a00);--wy-warning-container: var(--wy-warning-50, #7a7c05);--wy-on-warning-container: var(--wy-warning-95, #f5f77d);--wy-background: var(--wy-neutral-10, #1a1c1e);--wy-on-background: var(--wy-neutral-90, #e2e2e5);--wy-surface: var(--wy-neutral-10, #1a1c1e);--wy-on-surface: var(--wy-neutral-90, #e2e2e5);--wy-surface-variant: var(--wy-neutral-variant-30, #42474e);--wy-on-surface-variant: var(--wy-neutral-variant-80, #c2c7ce);--wy-outline: var(--wy-neutral-variant-60, #8c9198);--wy-outline-variant: var(--wy-neutral-variant-30, #42474e);--wy-inverse-surface: var(--wy-neutral-90, #e2e2e5);--wy-on-inverse-surface: var(--wy-neutral-20, #2f3033);--wy-inverse-primary: var(--wy-primary-40, #006399);--wy-surface-1: var(--wy-surface-1-dark, #212427);--wy-surface-2: var(--wy-surface-2-dark, #25292d);--wy-surface-3: var(--wy-surface-3-dark, #292e33);--wy-surface-4: var(--wy-surface-4-dark, #2b3035);--wy-surface-5: var(--wy-surface-5-dark, #2d3338);--wy-highlight: var(--wy-primary-20, #003352);--wy-on-highlight: var(--wy-primary-90, #cde5ff);--wy-link: var(--wy-primary-80, #95ccff);--wy-presence-active: var(--wy-green-dark, #00a38b);--wy-blue: var(--wy-blue-dark, #b1c5ff);--wy-indigo: var(--wy-indigo-dark, #9185de);--wy-purple: var(--wy-purple-dark, #e38fd3);--wy-pink: var(--wy-pink-dark, #f48bae);--wy-red: var(--wy-red-dark, #db726c);--wy-orange: var(--wy-orange-dark, #e89a3a);--wy-yellow: var(--wy-yellow-dark, #cacc58);--wy-green: var(--wy-green-dark, #00a38b);--wy-teal: var(--wy-teal-dark, #00a0a8);--wy-cyan: var(--wy-cyan-dark, #009dc3);--wy-gray: var(--wy-gray-dark, #909194);--wy-code-text: var(--wy-code-text-dark, #cccccc);--wy-code-variable: var(--wy-code-variable-dark, #9CDCFE);--wy-code-operator: var(--wy-code-operator-dark, #d4d4d4);--wy-code-prolog: var(--wy-code-prolog-dark, #569CD6);--wy-code-comment: var(--wy-code-comment-dark, #6a9955);--wy-code-builtin: var(--wy-code-builtin-dark, #4fc1ff);--wy-code-number: var(--wy-code-number-dark, #b5cea8);--wy-code-inserted: var(--wy-code-inserted-dark, #b5cea8);--wy-code-constant: var(--wy-code-constant-dark, #646695);--wy-code-hexcode: var(--wy-code-hexcode-dark, #646695);--wy-code-regex: var(--wy-code-regex-dark, #d16969);--wy-code-char: var(--wy-code-char-dark, #d16969);--wy-code-tag: var(--wy-code-tag-dark, #569cd6);--wy-code-attr-name: var(--wy-code-attr-name-dark, #9cdcfe);--wy-code-selector: var(--wy-code-selector-dark, #9cdcfe);--wy-code-property: var(--wy-code-property-dark, #9cdcfe);--wy-code-deleted: var(--wy-code-deleted-dark, #ce9178);--wy-code-string: var(--wy-code-string-dark, #ce9178);--wy-code-changed: var(--wy-code-changed-dark, #569cd6);--wy-code-punctuation: var(--wy-code-punctuation-dark, #D4D4D4);--wy-code-function: var(--wy-code-function-dark, #569cd6);--wy-code-keyword: var(--wy-code-keyword-dark, #C586C0);--wy-code-class-name: var(--wy-code-class-name-dark, #4ec9b0)}", ki = Pt(U2), j2 = '@property --wy-component-color{syntax: "<color>"; inherits: true; initial-value: transparent;}@property --wy-component-background-color{syntax: "<color>"; inherits: true; initial-value: transparent;}', W2 = Pt(j2), q2 = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), B2([W2, ki]);
    }
  }, c(t, "WeavyStyles"), t;
}, "WeavyStylesMixin"), Q2 = /* @__PURE__ */ c((o) => {
  var t;
  return t = class extends o {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...r) {
      super(...r), this._notificationEvents = ci.defaults.notificationEvents ?? !1, this.dispatchRealtimeEvent = (n) => {
        const s = this.host !== document.documentElement ? { composed: !0 } : { bubbles: !0 };
        switch (n.action) {
          case "notification_created":
          case "notification_updated":
          case "notification_deleted":
          case "notifications_marked": {
            const a = new CustomEvent("wy:notifications", { ...s, detail: n });
            this.host.dispatchEvent(a);
          }
        }
      };
    }
    get notificationEvents() {
      return this._notificationEvents;
    }
    set notificationEvents(r) {
      this.realtimeUnsubscribe(), this._notificationEvents = r, this.realtimeSubscribe();
    }
    realtimeSubscribe() {
      const r = this;
      this.notificationEvents && (r.subscribe(null, "notification_created", this.dispatchRealtimeEvent), r.subscribe(null, "notification_updated", this.dispatchRealtimeEvent), r.subscribe(null, "notifications_marked", this.dispatchRealtimeEvent));
    }
    realtimeUnsubscribe() {
      const r = this;
      this.notificationEvents && (r.unsubscribe(null, "notification_created", this.dispatchRealtimeEvent), r.unsubscribe(null, "notification_updated", this.dispatchRealtimeEvent), r.unsubscribe(null, "notifications_marked", this.dispatchRealtimeEvent));
    }
    destroy() {
      this.realtimeUnsubscribe(), super.destroy();
    }
  }, c(t, "WeavyRealtime"), t;
}, "WeavyRealtimeMixin");
var jl, Wl, ql, Hr, Ql, Ss;
const ee = class ee {
  // CONSTRUCTOR
  constructor(t) {
    T(this, jl);
    // Promises
    // whenUrl
    T(this, Wl);
    T(this, ql);
    // Reactive options
    T(this, Hr);
    // DEPRECATED
    T(this, Ql);
    T(this, Ss);
    this.weavySid = rh(), this.weavyId = `${ee.sourceName}#${this.weavySid}`, this.host = document.documentElement, this.cloudFilePickerUrl = ee.defaults.cloudFilePickerUrl, this.confluenceAuthenticationUrl = ee.defaults.confluenceAuthenticationUrl, this.confluenceProductName = ee.defaults.confluenceProductName, this.disableEnvironmentImports = ee.defaults.disableEnvironmentImports, this.gcTime = ee.defaults.gcTime, this.reactions = ee.defaults.reactions, this.scrollBehavior = ee.defaults.scrollBehavior, this.staleTime = ee.defaults.staleTime, this.tokenFactoryRetryDelay = ee.defaults.tokenFactoryRetryDelay, this.tokenFactoryTimeout = ee.defaults.tokenFactoryTimeout, E(this, ql, new Promise((r) => {
      E(this, Wl, r);
    })), E(this, Ss, !1), console.info(`${ee.sourceName}@${ee.version} #${this.weavySid}`);
    const i = {};
    for (const r in t) {
      const n = r;
      t[n] !== void 0 && Object.assign(i, { [n]: t[n] });
    }
    i != null && i.host && (this.host = i.host, delete i.host), i && Object.assign(this, i), this.host !== document.documentElement ? (cm.detachListeners(), E(this, jl, new nh(this.host, {
      context: ne,
      initialValue: this
    }))) : cm.setValue(this);
  }
  async whenUrl() {
    await u(this, ql);
  }
  /**
   * The URL to the weavy environment.
   */
  get url() {
    return u(this, Hr);
  }
  set url(t) {
    var i;
    if (this.isDestroyed)
      throw new Bt();
    try {
      if (typeof t == "string")
        t && E(this, Hr, new URL(t, window.location.toString()));
      else if (t instanceof URL)
        E(this, Hr, t);
      else
        throw -1;
    } catch {
      throw new TypeError("Invalid url");
    }
    !this.disableEnvironmentImports && globalThis.WEAVY_IMPORT_URL === void 0 && (globalThis.WEAVY_IMPORT_URL = new URL(
      "./uikit-web/",
      t
    ).href), u(this, Hr) && ((i = u(this, Wl)) == null || i.call(this, u(this, Hr)));
  }
  get zoomAuthenticationUrl() {
    return u(this, Ql) ?? ee.defaults.zoomAuthenticationUrl;
  }
  set zoomAuthenticationUrl(t) {
    console.warn('Setting "zoomAuthenticationUrl" is deprecated. Configure Zoom on your Weavy Environment instead.'), E(this, Ql, t);
  }
  get isDestroyed() {
    return u(this, Ss);
  }
  destroy() {
    var t;
    E(this, Ss, !0), (t = u(this, jl)) == null || t.detachListeners(), console.info(this.weavyId, "was destroyed");
  }
};
jl = new WeakMap(), Wl = new WeakMap(), ql = new WeakMap(), Hr = new WeakMap(), Ql = new WeakMap(), Ss = new WeakMap(), c(ee, "WeavyContextBase"), ee.version = "24.0.4", ee.sourceName = "@weavy/uikit-web", ee.defaults = {
  cloudFilePickerUrl: "https://filebrowser.weavy.io/v14/",
  confluenceAuthenticationUrl: void 0,
  confluenceProductName: void 0,
  disableEnvironmentImports: !1,
  gcTime: 1e3 * 60 * 60 * 24,
  // 24h,
  locale: ug,
  reactions: ["😍", "😎", "😉", "😜", "👍"],
  notificationEvents: !1,
  scrollBehavior: Ib ? "instant" : "smooth",
  staleTime: 1e3 * 1,
  // 1s
  tokenFactoryRetryDelay: 2e3,
  tokenFactoryTimeout: 2e4,
  zoomAuthenticationUrl: void 0
};
let ci = ee;
const rf = class rf extends Q2(
  Ob(
    Nb(
      Db(
        Fb(
          g2(b2(x2(q2(ci))))
        )
      )
    )
  )
) {
};
c(rf, "WeavyContext");
let Go = rf;
const nf = class nf extends Go {
};
c(nf, "Weavy");
let km = nf;
const Q = /* @__PURE__ */ c((o) => (t, i) => {
  i !== void 0 ? i.addInitializer(() => {
    customElements.define(o, t);
  }) : customElements.define(o, t);
}, "t$1");
const K2 = { attribute: !0, type: String, converter: db, reflect: !1, hasChanged: hb }, G2 = /* @__PURE__ */ c((o = K2, t, i) => {
  const { kind: r, metadata: n } = i;
  let s = globalThis.litPropertyMetadata.get(n);
  if (s === void 0 && globalThis.litPropertyMetadata.set(n, s = /* @__PURE__ */ new Map()), s.set(i.name, o), r === "accessor") {
    const { name: a } = i;
    return { set(l) {
      const d = t.get.call(this);
      t.set.call(this, l), this.requestUpdate(a, d, o);
    }, init(l) {
      return l !== void 0 && this.P(a, void 0, o), l;
    } };
  }
  if (r === "setter") {
    const { name: a } = i;
    return function(l) {
      const d = this[a];
      t.call(this, l), this.requestUpdate(a, d, o);
    };
  }
  throw Error("Unsupported decorator location: " + r);
}, "r$1");
function v(o) {
  return (t, i) => typeof i == "object" ? G2(o, t, i) : ((r, n, s) => {
    const a = n.hasOwnProperty(s);
    return n.constructor.createProperty(s, a ? { ...r, wrapped: !0 } : r), a ? Object.getOwnPropertyDescriptor(n, s) : void 0;
  })(o, t, i);
}
c(v, "n");
function W(o) {
  return v({ ...o, state: !0, attribute: !1 });
}
c(W, "r");
const Z2 = /* @__PURE__ */ c((o, t, i) => (i.configurable = !0, i.enumerable = !0, Reflect.decorate && typeof t != "object" && Object.defineProperty(o, t, i), i), "e$2");
function Y2(o) {
  return (t, i) => {
    const { slot: r, selector: n } = o ?? {}, s = "slot" + (r ? `[name=${r}]` : ":not([name])");
    return Z2(t, i, { get() {
      var d;
      const a = (d = this.renderRoot) == null ? void 0 : d.querySelector(s), l = (a == null ? void 0 : a.assignedElements(o)) ?? [];
      return n === void 0 ? l : l.filter((h) => h.matches(n));
    } });
  };
}
c(Y2, "o");
function X2(o) {
  return typeof o == "string" && o ? o = eval == null ? void 0 : (0, eval)(`"use strict";(${o})`) : o = void 0, o;
}
c(X2, "indirectEvalObject");
function Cd(o) {
  if (o)
    try {
      return new URL(o, window.location.toString());
    } catch {
      console.warn("Invalid url: ", o);
    }
}
c(Cd, "toUrl");
const J2 = `@charset "UTF-8";:where(:host,:host>*,[class^=wy-],[class*=" wy-"]){box-sizing:border-box;text-align:initial;font-size:var(--wy-font-size, var(--wy-size, 1em))}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:before,:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:after{box-sizing:inherit}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a){text-decoration:var(--wy-link-decoration, none);color:var(--wy-link, var(--wy-primary-40, #006399))}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a):hover,:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a):hover{text-decoration:var(--wy-link-hover-decoration, unset)}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a):where(:not([href]):not([class])):hover,:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a):where(:not([href]):not([class])):hover{text-decoration:none}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(p),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(p){margin-top:0;margin-bottom:calc(1 * var(--wy-size, 1rem))}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(label),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(label){cursor:inherit}:where(:host,:host>*,[class^=wy-],[class*=" wy-"])[hidden],:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *[hidden]{display:none!important}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where([role=button]),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where([role=button]){cursor:pointer}.wy-scroll-y{scroll-padding-top:var(--wy-scrollbar-adjust-top, 0);scroll-padding-bottom:var(--wy-scrollbar-adjust-bottom, 0)}.wy-scroll-y{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-y:not(body){-webkit-overflow-scrolling:touch}.wy-scroll-y:not(.wy-scroll-x){overflow-x:hidden;touch-action:pan-y}.wy-scroll-x{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-x:not(.wy-scroll-y){overflow-y:hidden;touch-action:pan-x}.wy-appbars{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));background-color:var(--wy-component-background-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 calc(-1 * var(--wy-border, 1px)) 0 0 inset}@supports (position: sticky){.wy-appbars{position:sticky;top:0;z-index:1020}}.wy-appbars>.wy-appbar,.wy-appbars>.wy-toolbar{background-color:transparent;box-shadow:none}.wy-appbar{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));display:grid;align-items:center;justify-content:space-between;justify-items:center;height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));padding:calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));flex:0 0 var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));grid-template-columns:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) minmax(0,max-content) var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));column-gap:calc(2 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))) + var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));line-height:var(--wy-line-height, 1.5);background-color:var(--wy-component-background-color);color:var(--wy-component-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 calc(-1 * var(--wy-border, 1px)) 0 0 inset}.wy-appbar .wy-badge{align-self:center}.wy-appbar .wy-button{max-height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-appbar-buttons,.wy-toolbar-buttons,.wy-appbar-section{display:flex;flex:0 0 auto;align-items:center;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));max-width:100%}.wy-appbar-buttons-first{justify-content:flex-start}.wy-appbar-buttons-last{justify-content:flex-end}.wy-toolbar-buttons-last{margin-inline-start:auto}.wy-appbar-text{max-width:100%;display:block;color:inherit!important;-webkit-user-select:none;user-select:none}.wy-appbar-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-appbar-text a,.wy-appbar-text a:hover{color:inherit}.wy-appbar-text-trashed{text-decoration:line-through}.wy-toolbars-bottom{position:absolute;z-index:1030;bottom:calc(var(--wy-footerbar-height, calc(4 * var(--wy-size, 1rem))) / 2);left:0;right:0;min-height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;justify-content:center;justify-items:center}.wy-toolbar{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-start;justify-items:center;min-height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));padding:calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));flex:1 0 var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));column-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));line-height:var(--wy-line-height, 1.5);background-color:var(--wy-component-background-color);color:var(--wy-component-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 calc(-1 * var(--wy-border, 1px)) 0 0 inset}.wy-toolbar-center{margin:0 auto;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)))}.wy-toolbar-center .wy-input{text-align:center}.wy-toolbar-text{margin-left:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-footerbar{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));position:absolute;bottom:0;left:0;right:0;z-index:1020}.wy-footerbar:after{content:"";background-color:var(--wy-component-background-color);color:var(--wy-component-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 var(--wy-border, 1px) 0 0 inset;position:absolute;width:100%;left:0;bottom:0;height:100%;z-index:-1}.wy-footerbar-sticky{position:sticky}[part~=wy-button]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-component-color);background:var(--wy-component-background-color, transparent);height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;font-size:var(--wy-button-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-button-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;border:var(--wy-button-border-width, var(--wy-border-outline, 0)) solid var(--wy-outline, var(--wy-neutral-variant-50, #72777e));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex;align-items:center;justify-content:center;gap:var(--wy-button-gap, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));position:relative}[part~=wy-button]:disabled{opacity:var(--wy-opacity-disabled, 38%);cursor:unset;pointer-events:none}[part~=wy-button-state-layer]>*{z-index:3}[part~=wy-button-state-layer]:before{content:"";z-index:2;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-button-state-layer][part~=wy-button-sm]:before{margin:calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25);border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))))}[part~=wy-button-state-layer]:hover:before{opacity:8%}[part~=wy-button-state-layer]:focus:before,[part~=wy-button-state-layer]:active:before,[part~=wy-button-state-layer][part~=wy-active]:before{opacity:12%}[part~=wy-button-icon]{--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));line-height:1;align-items:center;justify-content:center}[part~=wy-button-icon][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625);width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625);padding:0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5)}[part~=wy-button-icon][part~=wy-active]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-icon-inline]{height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));width:auto;min-width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));background:var(--wy-component-background-color);color:currentColor;display:flex;padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))}[part~=wy-button-icon-inline][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625);padding:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .25) 0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5);min-width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625)}[part~=wy-button-inline]{border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:calc(.5 * var(--wy-size, 1rem)) calc(.75 * var(--wy-size, 1rem));margin-inline:calc(-.25 * var(--wy-size, 1rem))}[part~=wy-button-primary]{--wy-component-background-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-color: var(--wy-on-primary, var(--wy-white, #ffffff))}[part~=wy-button-variant]{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}[part~=wy-button-primary-text]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-inherit-color]{--wy-component-color: currentColor}[part~=wy-button-no-color]{--wy-component-color: unset}[part=wy-button-link]{padding:0;color:var(--wy-link-color, var(--wy-primary, var(--wy-primary-40, #006399)));text-decoration:var(--wy-link-decoration, none)}[part=wy-button-link]:hover,[part=wy-button-link]:focus{text-decoration:var(--wy-link-hover-decoration, unset)}[part~=wy-buttons]{display:flex;align-items:center;flex-wrap:wrap;gap:calc(.5 * var(--wy-size, 1rem))}[part~=wy-buttons-reverse]{flex-direction:row-reverse}[part~=wy-buttons-floating]{position:sticky;padding:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))) var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))) 0;top:0;height:0;margin-bottom:calc(-1 * var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));z-index:1030;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-code pre,.wy-content pre{text-wrap:pretty}.wy-code code[class*=language-],.wy-code pre[class*=language-],.wy-content code[class*=language-],.wy-content pre[class*=language-]{color:var(--wy-code-text, var(--wy-code-text-light, #3b3b3b));font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:break-word;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}@media print{.wy-code code[class*=language-],.wy-code pre[class*=language-],.wy-content code[class*=language-],.wy-content pre[class*=language-]{text-shadow:none}}.wy-code pre[class*=language-],.wy-content pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}.wy-code :not(pre)>code[class*=language-],.wy-code pre[class*=language-],.wy-content :not(pre)>code[class*=language-],.wy-content pre[class*=language-]{color:var(--wy-code-text, var(--wy-code-text-light, #3b3b3b));background:var(--wy-background, var(--wy-neutral-99, #fcfcff))}.wy-code :not(pre)>code[class*=language-],.wy-content :not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.wy-code .token.variable,.wy-content .token.variable{color:var(--wy-code-variable, var(--wy-code-variable-light, #001080))}.wy-code .token.operator,.wy-content .token.operator{color:var(--wy-code-operator, var(--wy-code-operator-light, #000000))}.wy-code .token.prolog,.wy-content .token.prolog{color:var(--wy-code-prolog, var(--wy-code-prolog-light, #000080))}.wy-code .token.comment,.wy-content .token.comment{color:var(--wy-code-comment, var(--wy-code-comment-light, #008000))}.wy-code .token.builtin,.wy-content .token.builtin{color:var(--wy-code-builtin, var(--wy-code-builtin-light, #0070C1))}.wy-code .token.number,.wy-content .token.number{color:var(--wy-code-number, var(--wy-code-number-light, #098658))}.wy-code .token.inserted,.wy-content .token.inserted{color:var(--wy-code-inserted, var(--wy-code-inserted-light, #098658))}.wy-code .token.constant,.wy-content .token.constant{color:var(--wy-code-constant, var(--wy-code-constant-light, #811F3F))}.wy-code .token.hexcode,.wy-content .token.hexcode{color:var(--wy-code-hexcode, var(--wy-code-hexcode-light, #811F3F))}.wy-code .token.regex,.wy-content .token.regex{color:var(--wy-code-regex, var(--wy-code-regex-light, #811F3F))}.wy-code .token.char,.wy-content .token.char{color:var(--wy-code-char, var(--wy-code-char-light, #811F3F))}.wy-code .token.tag,.wy-content .token.tag{color:var(--wy-code-tag, var(--wy-code-tag-light, #800000))}.wy-code .token.attr-name,.wy-content .token.attr-name{color:var(--wy-code-attr-name, var(--wy-code-attr-name-light, #E50000))}.wy-code .token.selector,.wy-content .token.selector{color:var(--wy-code-selector, var(--wy-code-selector-light, #E50000))}.wy-code .token.property,.wy-content .token.property{color:var(--wy-code-property, var(--wy-code-property-light, #E50000))}.wy-code .token.deleted,.wy-content .token.deleted{color:var(--wy-code-deleted, var(--wy-code-deleted-light, #A31515))}.wy-code .token.string,.wy-content .token.string{color:var(--wy-code-string, var(--wy-code-string-light, #A31515))}.wy-code .token.changed,.wy-content .token.changed{color:var(--wy-code-changed, var(--wy-code-changed-light, #0451A5))}.wy-code .token.punctuation,.wy-content .token.punctuation{color:var(--wy-code-punctuation, var(--wy-code-punctuation-light, #000000))}.wy-code .token.function,.wy-content .token.function{color:var(--wy-code-function, var(--wy-code-function-light, #0000FF))}.wy-code .token.keyword,.wy-content .token.keyword{color:var(--wy-code-keyword, var(--wy-code-keyword-light, #AF00DB))}.wy-code .token.class-name,.wy-content .token.class-name{color:var(--wy-code-class-name, var(--wy-code-class-name-light, #267F99))}.wy-code .token.important,.wy-code .token.bold,.wy-content .token.important,.wy-content .token.bold{font-weight:700}.wy-code .token.italic,.wy-content .token.italic{font-style:italic}.wy-content{overflow-wrap:break-word;min-width:0}.wy-content :not(pre)>code{overflow-wrap:inherit}.wy-content pre,.wy-content pre>code[class*=language-]{white-space:pre-wrap}.wy-content :first-child{margin-top:0}.wy-content :last-child{margin-bottom:0}.wy-content:empty{display:none}.wy-hashtag{color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-mention{font-weight:700}.wy-emoji-icon{display:inline-flex;justify-content:center;align-items:center;line-height:1;width:1em;height:1em;font-size:1.25em}.wy-emoji-icon-sm{width:calc(1.125 * var(--wy-size, 1rem));height:calc(1.125 * var(--wy-size, 1rem));font-size:calc(1.125 * var(--wy-size, 1rem))}.wy-emoji-icon-xs{width:calc(1.125 * var(--wy-size, 1rem));height:calc(1.125 * var(--wy-size, 1rem));font-size:calc(1 * var(--wy-size, 1rem))}.wy-empty{display:flex;align-items:center;justify-content:center;flex:1;min-width:0;position:relative;flex-direction:column;gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}[part~=wy-icon]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-icon][width="24"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon][height="24"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon-first]{margin-left:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-last]{margin-right:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-padded]{margin:16.66666667%}[part~=wy-icon-inline]{vertical-align:-.25em}[part~=wy-icon-overlay]{position:absolute;bottom:0;right:0;background:var(--wy-component-background-color, var(--wy-background, var(--wy-neutral-99, #fcfcff)));border-radius:50%;border:1px solid var(--wy-component-background-color, var(--wy-background, var(--wy-neutral-99, #fcfcff)))}:host(wy-icon-stack),[part~=wy-icon-stack]{display:inline-flex;position:relative;line-height:1}[part~=wy-icon-stack-layer]{position:absolute}[part~=wy-icon-stack-overlay]{position:absolute;bottom:0;right:0;background-color:var(--wy-component-background-color, var(--wy-background, var(--wy-neutral-99, #fcfcff)));border-radius:50%;width:calc(var(--wy-component-icon-width) / 2);height:calc(var(--wy-component-icon-height) / 2)}[part~=wy-icon-current-color]{fill:currentColor}[part~=wy-icon-state]{transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));align-self:center;justify-self:center;margin:auto;opacity:0}[part~=wy-icon-state][part~=wy-active]{opacity:1}:host(wy-icon-display),[part~=wy-icon-display]{color:var(--wy-component-color, var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e)));border-radius:var(--wy-component-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));margin:auto}[part~=wy-icon-display-icon]{--wy-component-icon-width: calc(4 * var(--wy-size, 1rem));--wy-component-icon-height: calc(4 * var(--wy-size, 1rem));padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-icon-display-text],[part~=wy-icon-display-meta]{padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));text-align:center}[part~=wy-icon-color-primary]{fill:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-icon-color-secondary]{fill:var(--wy-secondary, var(--wy-secondary-40, #3b6a1c))}[part~=wy-icon-color-tertiary]{fill:var(--wy-tertiary, var(--wy-tertiary-40, #3b6a1c))}[part~=wy-icon-color-surface]{fill:var(--wy-surface, var(--wy-neutral-99, #fcfcff))}[part~=wy-icon-color-surface-variant]{fill:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-icon-color-error]{fill:var(--wy-error, var(--wy-error-40, #ba1824))}[part~=wy-icon-color-warning]{fill:var(--wy-warning, var(--wy-warning-70, #afb140))}[part~=wy-icon-color-blue]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-icon-color-indigo]{fill:var(--wy-indigo, var(--wy-indigo-light, #9185de))}[part~=wy-icon-color-purple]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-icon-color-pink]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-icon-color-red]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-icon-color-orange]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-icon-color-yellow]{fill:var(--wy-yellow, var(--wy-yellow-light, #afb140))}[part~=wy-icon-color-green]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-icon-color-teal]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-icon-color-cyan]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-icon-color-gray]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-icon-color-black]{fill:var(--wy-black, var(--wy-black, #000000))}[part~=wy-icon-color-white]{fill:var(--wy-white, var(--wy-white, #ffffff))}[part*=wy-kind-]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-kind-archive]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-audio]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-kind-code]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-document]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-kind-email]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-presentation]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-spreadsheet]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-image]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-kind-text]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-kind-video]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-ext-pdf]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-text-icon]{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}.wy-image-grid{display:flex;flex-wrap:wrap;justify-content:space-evenly;position:relative;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));overflow:hidden;column-gap:1px;row-gap:1px}.wy-image-grid .wy-image{padding:0;width:50%;position:relative;flex:auto;background-color:inherit;background-clip:content-box}.wy-image-grid .wy-image:first-of-type:not(:nth-last-of-type(2)){flex-basis:100%!important}.wy-image-grid .wy-image-area{display:block;height:100%;cursor:pointer}.wy-image-grid .wy-image-area img{position:absolute;height:100%;width:100%;object-fit:contain}.wy-image-grid .wy-image-area img.wy-loading{transition:opacity .15s ease-out;opacity:0}.wy-image-grid .wy-image-area img.wy-loading.wy-loaded{opacity:1;transition:opacity .15s ease-out}.wy-image-grid .wy-image-area img.wy-loading.wy-loaded~img{transition-delay:.15s;opacity:0}.wy-image-grid .wy-more{position:absolute;line-height:100%;color:var(--wy-white, #ffffff);top:0;left:0;bottom:0;right:0;display:flex;align-items:center;justify-content:center;font-size:calc(1.5 * var(--wy-size, 1rem));background:rgba(0,0,0,var(--wy-opacity-disabled, 38%))}.wy-title{font-family:var(--wy-headings-font-family, var(--wy-font-family, unset));font-size:var(--wy-headings-font-size, 1.25em);font-style:var(--wy-headings-font-style, unset);font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, bolder));line-height:var(--wy-headings-line-height, var(--wy-line-height, 1.5));margin-block:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-input{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));display:block;width:100%;min-height:calc(2.5 * var(--wy-size, 1rem));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-input-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-input-line-height, var(--wy-line-height, calc(1.5 * var(--wy-size, 1rem))));background-clip:padding-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--wy-input-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-input:focus{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-primary, var(--wy-primary-40, #006399));outline:0}.wy-input::placeholder{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:1}.wy-input:disabled{opacity:38%}.wy-input::file-selector-button,.wy-input::-webkit-file-upload-button{color:var(--wy-component-color);background-color:var(--wy-component-background-color);padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));margin:calc(-1 * var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) calc(-1 * var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));margin-inline-end:var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--wy-input-border-width, var(--wy-border, 1px));border-radius:0}.wy-input:hover:not(:disabled):not([readonly])::file-selector-button,.wy-input:hover:not(:disabled):not([readonly]) ::-webkit-file-upload-button{background-color:var(--wy-component-background-color)}.wy-input[type=file]{overflow:hidden}.wy-input[type=file]:not(:disabled):not([readonly]){cursor:pointer}.wy-input::-webkit-date-and-time-value{height:calc(var(--wy-input-line-height, var(--wy-line-height, calc(1.5 * var(--wy-size, 1rem)))) * 1em)}.wy-input[type=search]::-webkit-search-cancel-button{-webkit-appearance:none}.wy-input-filled{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-input-filled-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem)))));border-color:var(--wy-component-background-color)}.wy-input-filled:focus{border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-label{display:inline-block;margin-bottom:calc(.5 * var(--wy-size, 1rem))}.wy-description{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));margin-top:calc(.25 * var(--wy-size, 1rem))}.wy-is-invalid,.wy-is-invalid:focus{border-color:var(--wy-error, var(--wy-error-40, #ba1824))}.wy-invalid-feedback{margin-top:calc(.25 * var(--wy-size, 1rem));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));color:var(--wy-error, var(--wy-error-40, #ba1824))}.wy-input-group{position:relative;display:flex;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));align-items:center}.wy-input-group-button-icon{position:absolute;top:0;right:0;z-index:4;border-radius:var(--wy-input-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));--wy-component-background-color: transparent}.wy-input-group-input:placeholder-shown~.wy-input-group-button-icon[type=reset]{display:none}.wy-input-group-input:not(:placeholder-shown)~.wy-input-group-button-icon[type=reset]+.wy-input-group-button-icon{display:none}.wy-item{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));position:relative;display:flex;align-items:center;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-decoration:none;min-height:calc(3 * var(--wy-size, 1rem))}.wy-item-lg{padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));min-height:calc(4.5 * var(--wy-size, 1rem));gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-item-body{width:100%;min-width:0}.wy-item-rows{display:flex;flex-direction:column;width:100%;row-gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));min-width:0}.wy-item-rows:only-child{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-rows-compact{row-gap:0}.wy-item-rows-single{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-title{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-title-lg{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title-lg{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.wy-item-text{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-text .wy-icon{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}.wy-item-quote{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-item-quote:before,.wy-item-quote:after{content:'"'}.wy-item-actions{--wy-component-background-color: transparent;display:flex;align-items:center;justify-items:flex-end;flex:0 0 auto;margin:calc(-.25 * var(--wy-size, 1rem))}.wy-item-top{align-self:flex-start}.wy-item-actions-bottom{align-self:flex-start;margin-block:calc(-.5 * var(--wy-size, 1rem))}.wy-item-row{display:flex;align-items:center;column-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-item-row .wy-item-title,.wy-item-row .wy-item-text{margin-right:auto}.wy-item-row .wy-meta{white-space:nowrap}.wy-item-right{margin-left:auto}.wy-item-hover{-webkit-user-select:none;user-select:none;cursor:pointer}.wy-item-hover:hover,.wy-item-hover:focus{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);text-decoration:none}.wy-item-hover:active{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-item-hover.wy-disabled,.wy-item-hover:disabled{opacity:var(--wy-opacity-disabled, 38%);pointer-events:none}.wy-item-hover.wy-active{--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-color:var(--wy-component-background-color)}.wy-item-trashed{text-decoration:line-through;opacity:var(--wy-opacity-disabled, 38%)}.wy-item-trashed.wy-item-hover:hover{opacity:1}.wy-list{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;gap:var(--wy-border);min-width:0}.wy-list .wy-item:not(.wy-item-hover){--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-list .wy-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.wy-list .wy-item:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.wy-list-bordered{border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));gap:0}.wy-list-bordered .wy-item{border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-left:none;border-right:none}.wy-list-bordered .wy-item:first-child{border-top:none}.wy-list-bordered .wy-item:last-child{border-bottom:none}.wy-list-bordered .wy-item+.wy-list-bordered .wy-item{border-top-width:0}@keyframes wy-highlight{0%{--wy-component-background-color: var(--wy-highlight, var(--wy-primary-95, #e8f2ff));--wy-component-color: var(--wy-on-highlight, var(--wy-primary-10, #001d32))}}.wy-messages{padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));flex:1 1 100%}.wy-message-placeholder{opacity:.5}.wy-date-separator{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));pointer-events:none;margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-align:center;position:sticky;top:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));z-index:10}.wy-date-separator time{background:var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:inline-block}.wy-message{display:flex;flex-direction:row;align-items:flex-start;margin-bottom:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));scroll-margin-block:6rem;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-message .wy-image-grid,.wy-message .wy-attachments{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-message-meta{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));margin:0 0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message-bubble{background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));display:flex;flex-direction:column;padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));max-width:min(32 * var(--wy-size, 1rem),100% - 2 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))))}.wy-message-bubble>div{flex:1 1 100%}.wy-message-author{margin:calc(1.375 * var(--wy-size, 1rem)) calc(.5 * var(--wy-size, 1rem)) 0 0}.wy-message-content{display:flex;flex-direction:column;width:100%;align-items:flex-start;flex-wrap:wrap;min-width:0;position:relative}.wy-message-content-row{display:flex;flex-direction:row;align-items:center;max-width:100%}.wy-message-bot{--wy-component-background-color: var(--wy-tertiary-container, var(--wy-tertiary-90, #bbf294));--wy-component-color: var(--wy-on-tertiary-container, var(--wy-tertiary-10, #0a2100))}.wy-message-me{margin-right:0;margin-left:calc(2.5 * var(--wy-size, 1rem));align-items:flex-end;--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32))}.wy-message-me .wy-message-meta{margin:0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) 0}.wy-message-me .wy-message-content{align-items:flex-end}.wy-message-me .wy-message-content-row{flex-direction:row-reverse}.wy-message-emoji .wy-message-bubble{background:none;padding:0 0 var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-message-emoji .wy-content .wy-emoji{width:calc(3 * var(--wy-size, 1rem));height:calc(3 * var(--wy-size, 1rem));margin:0}.wy-message-emoji.wy-message-me .wy-content{text-align:end}.wy-readby-status{display:flex;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));height:calc(1.125 * var(--wy-size, 1rem));justify-content:flex-end;margin-top:calc(-.125 * var(--wy-size, 1rem))}.wy-status-pending,.wy-status-sent,.wy-status-delivered{--wy-component-background-color: var(--wy-inverse-primary, var(--wy-primary-80, #95ccff));color:var(--wy-component-background-color)}.wy-message-readmore{justify-self:center;text-align:center}.wy-meta{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-meta-sm{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)))}.wy-dialog{background:none;border:none;padding:0}.wy-overlay-dialog{width:100%;height:100%;align-items:center;justify-content:center;overflow:visible}.wy-overlay-dialog:popover-open,.wy-overlay-dialog[open]{display:flex}.wy-overlay{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column}.wy-overlay.wy-modal{width:100%;height:100%;overflow:hidden;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level4, 0 calc(1 * var(--wy-size, 1rem)) calc(2.25 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .14), 0 calc(.375 * var(--wy-size, 1rem)) calc(1.875 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .12), 0 calc(.5 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) calc(-.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2))}@media (min-width: 768px){.wy-overlay.wy-modal{margin-left:calc(4 * var(--wy-size, 1rem));margin-top:auto;margin-right:calc(4 * var(--wy-size, 1rem));margin-bottom:auto;width:calc(32 * var(--wy-size, 1rem));max-height:calc(32 * var(--wy-size, 1rem))}}.wy-overlay.wy-modal-full{width:100%;height:100%}@media (min-width: 768px){.wy-overlay.wy-modal-full{margin:0;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level4, 0 calc(1 * var(--wy-size, 1rem)) calc(2.25 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .14), 0 calc(.375 * var(--wy-size, 1rem)) calc(1.875 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .12), 0 calc(.5 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) calc(-.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));max-width:calc(100% - 2 * var(--wy-size, 1rem));max-height:calc(100% - 2 * var(--wy-size, 1rem))}}.wy-overlay{opacity:0;visibility:hidden;transition:opacity var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) .01s,transform var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) .01s,visibility .01s step-end var(--wy-transition-duration-fast, .1s)}.wy-overlay.wy-open{transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),visibility var(--wy-transition-duration, .2s) step-start;visibility:visible}.wy-overlay.wy-open.wy-transition{opacity:1;transform:none}.wy-pane{display:flex;flex-direction:column;position:relative;min-height:0;height:100%;flex:1 1 auto}.wy-pane-body{display:flex;flex-direction:column;flex:1}.wy-pane-group{padding:calc(.75 * var(--wy-size, 1rem))}.wy-pane-background{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-picker-list{background:var(--wy-component-background-color);color:var(--wy-component-color);border:none}.wy-picker-list>.wy-picker-list-item:first-child,.wy-picker-list>:first-child .wy-picker-list-item{border-top:none}.wy-picker-list>.wy-picker-list-item:last-child,.wy-picker-list>:last-child .wy-picker-list-item{border-bottom:none}.wy-picker-list-item{display:flex;align-items:center;padding:calc(.25 * var(--wy-size, 1rem)) calc(.5 * var(--wy-size, 1rem))}.wy-picker-list-item>wy-icon{margin-left:calc(.25 * var(--wy-size, 1rem));margin-right:calc(.25 * var(--wy-size, 1rem));flex:0 0 auto}.wy-picker-list-item>button{margin-block-start:auto;flex:0 0 auto}.wy-picker-list-item-title{flex-grow:1}.wy-picker-list-item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-main{display:flex;height:calc(100% - var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem))))));min-height:0}@media (max-width: 767.98px){.wy-main{flex-direction:column}}.wy-preview{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;align-items:stretch;justify-content:stretch;position:relative;flex:1 1 100%;min-width:calc(16 * var(--wy-size, 1rem));min-height:calc(16 * var(--wy-size, 1rem));max-height:100%;max-width:100%}.wy-preview-swiper{display:flex;flex-direction:row;flex:1 1 100%;align-items:center;justify-content:start;min-width:calc(16 * var(--wy-size, 1rem));min-height:calc(16 * var(--wy-size, 1rem));max-height:100%;max-width:100%;overflow-x:scroll;scroll-snap-type:x mandatory;scroll-behavior:auto;overscroll-behavior-x:none;scrollbar-width:none}.wy-preview-swiper::-webkit-scrollbar{display:none}.wy-preview-swiper-disabled{overflow-x:hidden}.wy-preview-area{position:relative;min-width:100%;min-height:100%;width:100%;height:100%;flex:1 1 auto;display:flex;flex-direction:column;scroll-snap-stop:always;scroll-snap-align:center}.wy-nav-prev,.wy-nav-next{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));background-color:var(--wy-component-background-color);position:absolute;top:50%;z-index:1000;border-radius:50%}.wy-nav-prev{left:calc(.5 * var(--wy-size, 1rem))}.wy-nav-next{right:calc(.5 * var(--wy-size, 1rem))}.wy-document{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);align-self:flex-start;padding:calc(2 * var(--wy-size, 1rem)) calc(3.5 * var(--wy-size, 1rem));width:100%;min-height:100%;flex:1 0 auto}@media (min-width: 768px){.wy-document{padding:calc(3 * var(--wy-size, 1rem)) calc(4 * var(--wy-size, 1rem));margin:calc(2 * var(--wy-size, 1rem)) auto;border-radius:calc(.125 * var(--wy-size, 1rem));box-shadow:var(--wy-shadow-level2, 0 calc(.25 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12), 0 calc(.125 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem)) calc(-.0625 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));width:120ch;min-height:170ch;max-width:calc(100% - 3.5 * var(--wy-size, 1rem))}}.wy-content-code{align-self:flex-start;width:100%;padding:calc(2 * var(--wy-size, 1rem)) calc(3.5 * var(--wy-size, 1rem))}.wy-content-iframe{border:0;display:block;width:100%;height:100%;top:0;left:0;flex:1 1 100%}.wy-content-iframe.wy-loaded{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-content-iframe.wy-loaded~.wy-content-iframe-fallback,.wy-content-iframe.wy-loaded~.wy-spinner,.wy-content-iframe.wy-loaded~wy-spinner{display:none}.wy-content-iframe.wy-loading:not(.wy-loaded){position:absolute;visibility:hidden;z-index:-1;pointer-events:none}.wy-content-iframe.wy-loading:not(.wy-loaded):not(.wy-fallback)~.wy-content-iframe-fallback{display:none}.wy-content-iframe.wy-loading:not(.wy-loaded).wy-fallback~.wy-spinner,.wy-content-iframe.wy-loading:not(.wy-loaded).wy-fallback~wy-spinner{display:none}.wy-content-iframe~.wy-spinner,.wy-content-iframe~wy-spinner{margin:auto}.wy-content-html pre,.wy-content-html code{word-break:break-word;white-space:pre-wrap}.wy-content-image{min-width:0;display:flex;align-items:center;justify-content:center;position:relative;margin:auto;max-height:100%;max-width:100%;transition:transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),transform-origin var(--wy-transition-duration, .2s) step-end}.wy-content-image.wy-zoom{cursor:zoom-out;transition:transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),transform-origin var(--wy-transition-duration, .2s) step-start}.wy-content-image img{min-width:0;min-height:0;width:100%;height:100%}.wy-content-image img:not(.wy-loading-transition):not([data-controller~=image])~.wy-spinner,.wy-content-image img:not(.wy-loading-transition):not([data-controller~=image])~wy-spinner{display:none}.wy-content-image img.wy-loading,.wy-content-image img[data-controller~=image]{transition:opacity .15s ease-out;opacity:0}.wy-content-image img.wy-loading.wy-loaded,.wy-content-image img[data-controller~=image].wy-loaded{opacity:1;transition:opacity .15s ease-out}.wy-content-image img.wy-loading.wy-loaded~img,.wy-content-image img[data-controller~=image].wy-loaded~img{transition-delay:.15s;opacity:0}.wy-content-image img.wy-loading.wy-loaded~.wy-spinner,.wy-content-image img.wy-loading.wy-loaded~wy-spinner,.wy-content-image img[data-controller~=image].wy-loaded~.wy-spinner,.wy-content-image img[data-controller~=image].wy-loaded~wy-spinner{display:none}.wy-content-image img.wy-responsive-image-thumb{position:absolute;z-index:-1}.wy-content-image img~.wy-spinner,.wy-content-image img~wy-spinner{position:absolute}.wy-content-video:not(.wy-error){min-height:0;max-width:100%;max-height:100%;flex:1 1 auto}.wy-content-video,.wy-content-audio{margin:auto}.wy-content-video.wy-loading:not(.wy-loaded),.wy-content-video[data-controller~=media]:not(.wy-loaded),.wy-content-audio.wy-loading:not(.wy-loaded),.wy-content-audio[data-controller~=media]:not(.wy-loaded){visibility:hidden}.wy-content-video.wy-loading.wy-loaded~.wy-spinner,.wy-content-video.wy-loading.wy-loaded~wy-spinner,.wy-content-video[data-controller~=media].wy-loaded~.wy-spinner,.wy-content-video[data-controller~=media].wy-loaded~wy-spinner,.wy-content-audio.wy-loading.wy-loaded~.wy-spinner,.wy-content-audio.wy-loading.wy-loaded~wy-spinner,.wy-content-audio[data-controller~=media].wy-loaded~.wy-spinner,.wy-content-audio[data-controller~=media].wy-loaded~wy-spinner{display:none}.wy-content-video:focus,.wy-content-audio:focus{outline:none}.wy-pdf-container{position:absolute;width:100%;height:100%;bottom:0;left:0}.wy-pdf-container{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-pdf-container:not(body){-webkit-overflow-scrolling:touch}.wy-pdf-container{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-content-pdf .textLayer{position:absolute;text-align:initial;top:0;right:0;bottom:0;left:0;overflow:hidden;opacity:1;line-height:1;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0;caret-color:CanvasText}.wy-content-pdf .textLayer.highlighting{touch-action:none}.wy-content-pdf .textLayer :is(span,br){color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}.wy-content-pdf .textLayer span.markedContent{top:0;height:0}.wy-content-pdf .textLayer .highlight{--highlight-bg-color: rgb(180 0 170 / .25);--highlight-selected-bg-color: rgb(0 100 0 / .25);--highlight-backdrop-filter: none;--highlight-selected-backdrop-filter: none;margin:-1px;padding:1px;background-color:var(--highlight-bg-color);-webkit-backdrop-filter:var(--highlight-backdrop-filter);backdrop-filter:var(--highlight-backdrop-filter);border-radius:4px}@media screen and (forced-colors: active){.wy-content-pdf .textLayer .highlight{--highlight-bg-color: transparent;--highlight-selected-bg-color: transparent;--highlight-backdrop-filter: var(--hcm-highlight-filter);--highlight-selected-backdrop-filter: var(--hcm-highlight-selected-filter)}}.wy-content-pdf .textLayer .highlight.appended{position:initial}.wy-content-pdf .textLayer .highlight.begin{border-radius:4px 0 0 4px}.wy-content-pdf .textLayer .highlight.end{border-radius:0 4px 4px 0}.wy-content-pdf .textLayer .highlight.middle{border-radius:0}.wy-content-pdf .textLayer .highlight.selected{background-color:var(--highlight-selected-bg-color);-webkit-backdrop-filter:var(--highlight-selected-backdrop-filter);backdrop-filter:var(--highlight-selected-backdrop-filter)}.wy-content-pdf .textLayer ::-moz-selection{background:#0000ff40;background:color-mix(in srgb,AccentColor,transparent 75%)}.wy-content-pdf .textLayer ::selection{background:#0000ff40;background:color-mix(in srgb,AccentColor,transparent 75%)}.wy-content-pdf .textLayer br::-moz-selection{background:transparent}.wy-content-pdf .textLayer br::selection{background:transparent}.wy-content-pdf .textLayer .endOfContent{display:block;position:absolute;top:100%;right:0;bottom:0;left:0;z-index:-1;cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none}.wy-content-pdf .textLayer .endOfContent.active{top:0}.wy-content-pdf .annotationLayer{--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--input-focus-border-color: Highlight;--input-focus-outline: 1px solid Canvas;--input-unfocused-border-color: transparent;--input-disabled-border-color: transparent;--input-hover-border-color: black;--link-outline: none;position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}@media screen and (forced-colors: active){.wy-content-pdf .annotationLayer{--input-focus-border-color: CanvasText;--input-unfocused-border-color: ActiveText;--input-disabled-border-color: GrayText;--input-hover-border-color: Highlight;--link-outline: 1.5px solid LinkText}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):required,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:required,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:required{outline:1.5px solid selectedItem}.wy-content-pdf .annotationLayer .linkAnnotation{outline:var(--link-outline)}.wy-content-pdf .annotationLayer .linkAnnotation:hover{-webkit-backdrop-filter:var(--hcm-highlight-filter);backdrop-filter:var(--hcm-highlight-filter)}.wy-content-pdf .annotationLayer .linkAnnotation>a:hover{opacity:0!important;background:none!important;box-shadow:none}.wy-content-pdf .annotationLayer .popupAnnotation .popup{outline:calc(1.5px * var(--scale-factor)) solid CanvasText!important;background-color:ButtonFace!important;color:ButtonText!important}.wy-content-pdf .annotationLayer .highlightArea:hover:after{position:absolute;top:0;left:0;width:100%;height:100%;-webkit-backdrop-filter:var(--hcm-highlight-filter);backdrop-filter:var(--hcm-highlight-filter);content:"";pointer-events:none}.wy-content-pdf .annotationLayer .popupAnnotation.focused .popup{outline:calc(3px * var(--scale-factor)) solid Highlight!important}}.wy-content-pdf .annotationLayer[data-main-rotation="90"] .norotate{transform:rotate(270deg) translate(-100%)}.wy-content-pdf .annotationLayer[data-main-rotation="180"] .norotate{transform:rotate(180deg) translate(-100%,-100%)}.wy-content-pdf .annotationLayer[data-main-rotation="270"] .norotate{transform:rotate(90deg) translateY(-100%)}.wy-content-pdf .annotationLayer.disabled section,.wy-content-pdf .annotationLayer.disabled .popup{pointer-events:none}.wy-content-pdf .annotationLayer .annotationContent{position:absolute;width:100%;height:100%;pointer-events:none}.wy-content-pdf .annotationLayer .annotationContent.freetext{background:transparent;border:none;top:0;right:0;bottom:0;left:0;overflow:visible;white-space:nowrap;font:10px sans-serif;line-height:1.35;-webkit-user-select:none;-moz-user-select:none;user-select:none}.wy-content-pdf .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}.wy-content-pdf .annotationLayer section:has(div.annotationContent) canvas.annotationContent{display:none}.wy-content-pdf .annotationLayer :is(.linkAnnotation,.buttonWidgetAnnotation.pushButton)>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}.wy-content-pdf .annotationLayer :is(.linkAnnotation,.buttonWidgetAnnotation.pushButton):not(.hasBorder)>a:hover{opacity:.2;background-color:#ff0;box-shadow:0 2px 10px #ff0}.wy-content-pdf .annotationLayer .linkAnnotation.hasBorder:hover{background-color:#ff03}.wy-content-pdf .annotationLayer .hasBorder{background-size:100% 100%}.wy-content-pdf .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%;top:0;left:0}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea),.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input{background-image:var(--annotation-unfocused-field-background);border:2px solid var(--input-unfocused-border-color);box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):required,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:required,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:required{outline:1.5px solid red}.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select option{padding:0}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.wy-content-pdf .annotationLayer .textWidgetAnnotation textarea{resize:none}.wy-content-pdf .annotationLayer .textWidgetAnnotation [disabled]:is(input,textarea),.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select[disabled],.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input[disabled]{background:none;border:2px solid var(--input-disabled-border-color);cursor:not-allowed}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):hover,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:hover,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:hover{border:2px solid var(--input-hover-border-color)}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):hover,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:hover,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:hover{border-radius:2px}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):focus,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:2px solid var(--input-focus-border-color);border-radius:2px;outline:var(--input-focus-outline)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) :focus{background-image:none;background-color:transparent}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox :focus{border:2px solid var(--input-focus-border-color);border-radius:2px;outline:var(--input-focus-outline)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton :focus{border:2px solid var(--input-focus-border-color);outline:var(--input-focus-outline)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:25%;top:25%;width:50%}.wy-content-pdf .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.wy-content-pdf .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input{-webkit-appearance:none;-moz-appearance:none;appearance:none}.wy-content-pdf .annotationLayer .fileAttachmentAnnotation .popupTriggerArea{height:100%;width:100%}.wy-content-pdf .annotationLayer .popupAnnotation{position:absolute;font-size:calc(9px * var(--scale-factor));pointer-events:none;width:-moz-max-content;width:max-content;max-width:45%;height:auto}.wy-content-pdf .annotationLayer .popup{background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));outline:1.5px solid rgb(255,255,74);padding:calc(6px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}.wy-content-pdf .annotationLayer .popupAnnotation.focused .popup{outline-width:3px}.wy-content-pdf .annotationLayer .popup *{font-size:calc(9px * var(--scale-factor))}.wy-content-pdf .annotationLayer .popup>.header{display:inline-block}.wy-content-pdf .annotationLayer .popup>.header h1{display:inline}.wy-content-pdf .annotationLayer .popup>.header .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor));width:-moz-fit-content;width:fit-content}.wy-content-pdf .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}.wy-content-pdf .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}.wy-content-pdf .annotationLayer .popupTriggerArea{cursor:pointer}.wy-content-pdf .annotationLayer section svg{position:absolute;width:100%;height:100%;top:0;left:0}.wy-content-pdf .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none}.wy-content-pdf .annotationLayer .annotationTextContent span{width:100%;display:inline-block}.wy-content-pdf .annotationLayer svg.quadrilateralsContainer{contain:strict;width:0;height:0;position:absolute;top:0;left:0;z-index:-1}.wy-content-pdf :host{--xfa-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--xfa-focus-outline: auto}@media screen and (forced-colors: active){.wy-content-pdf :host{--xfa-focus-outline: 2px solid CanvasText}.wy-content-pdf .xfaLayer *:required{outline:1.5px solid selectedItem}}.wy-content-pdf .xfaLayer{background-color:transparent}.wy-content-pdf .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}.wy-content-pdf .xfaLayer .highlight.appended{position:initial}.wy-content-pdf .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}.wy-content-pdf .xfaLayer .highlight.end{border-radius:0 4px 4px 0}.wy-content-pdf .xfaLayer .highlight.middle{border-radius:0}.wy-content-pdf .xfaLayer .highlight.selected{background-color:#cbdfcb}.wy-content-pdf .xfaPage{overflow:hidden;position:relative}.wy-content-pdf .xfaContentarea{position:absolute}.wy-content-pdf .xfaPrintOnly{display:none}.wy-content-pdf .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}.wy-content-pdf .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}.wy-content-pdf .xfaLayer *:required{outline:1.5px solid red}.wy-content-pdf .xfaLayer div,.wy-content-pdf .xfaLayer svg,.wy-content-pdf .xfaLayer svg *{pointer-events:none}.wy-content-pdf .xfaLayer a{color:#00f}.wy-content-pdf .xfaRich li{margin-left:3em}.wy-content-pdf .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}.wy-content-pdf .xfaCaption{overflow:hidden;flex:0 0 auto}.wy-content-pdf .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}.wy-content-pdf .xfaLabel{height:100%;width:100%}.wy-content-pdf .xfaLeft{display:flex;flex-direction:row;align-items:center}.wy-content-pdf .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}.wy-content-pdf :is(.xfaLeft,.xfaRight)>:is(.xfaCaption,.xfaCaptionForCheckButton){max-height:100%}.wy-content-pdf .xfaTop{display:flex;flex-direction:column;align-items:flex-start}.wy-content-pdf .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}.wy-content-pdf :is(.xfaTop,.xfaBottom)>:is(.xfaCaption,.xfaCaptionForCheckButton){width:100%}.wy-content-pdf .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}.wy-content-pdf .xfaWrapped{width:100%;height:100%}.wy-content-pdf :is(.xfaTextfield,.xfaSelect):focus{background-image:none;background-color:transparent;outline:var(--xfa-focus-outline);outline-offset:-1px}.wy-content-pdf :is(.xfaCheckbox,.xfaRadio):focus{outline:var(--xfa-focus-outline)}.wy-content-pdf .xfaTextfield,.wy-content-pdf .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}.wy-content-pdf .xfaSelect{padding-inline:2px}.wy-content-pdf :is(.xfaTop,.xfaBottom)>:is(.xfaTextfield,.xfaSelect){flex:0 1 auto}.wy-content-pdf .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}.wy-content-pdf .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}.wy-content-pdf .xfaCheckbox,.wy-content-pdf .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}.wy-content-pdf .xfaRich{white-space:pre-wrap;width:100%;height:100%}.wy-content-pdf .xfaImage{-o-object-position:left top;object-position:left top;-o-object-fit:contain;object-fit:contain;width:100%;height:100%}.wy-content-pdf .xfaLrTb,.wy-content-pdf .xfaRlTb,.wy-content-pdf .xfaTb{display:flex;flex-direction:column;align-items:stretch}.wy-content-pdf .xfaLr{display:flex;flex-direction:row;align-items:stretch}.wy-content-pdf .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}.wy-content-pdf .xfaTb>div{justify-content:left}.wy-content-pdf .xfaPosition,.wy-content-pdf .xfaArea{position:relative}.wy-content-pdf .xfaValignMiddle{display:flex;align-items:center}.wy-content-pdf .xfaTable{display:flex;flex-direction:column;align-items:stretch}.wy-content-pdf .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}.wy-content-pdf .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}.wy-content-pdf .xfaTable .xfaRlRow>div{flex:1}.wy-content-pdf :is(.xfaNonInteractive,.xfaDisabled,.xfaReadOnly) :is(input,textarea){background:initial}@media print{.wy-content-pdf .xfaTextfield,.wy-content-pdf .xfaSelect{background:transparent}.wy-content-pdf .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}.wy-content-pdf .canvasWrapper svg{transform:none}.wy-content-pdf .canvasWrapper svg[data-main-rotation="90"] mask,.wy-content-pdf .canvasWrapper svg[data-main-rotation="90"] use:not(.clip,.mask){transform:matrix(0,1,-1,0,1,0)}.wy-content-pdf .canvasWrapper svg[data-main-rotation="180"] mask,.wy-content-pdf .canvasWrapper svg[data-main-rotation="180"] use:not(.clip,.mask){transform:matrix(-1,0,0,-1,1,1)}.wy-content-pdf .canvasWrapper svg[data-main-rotation="270"] mask,.wy-content-pdf .canvasWrapper svg[data-main-rotation="270"] use:not(.clip,.mask){transform:matrix(0,-1,1,0,0,1)}.wy-content-pdf .canvasWrapper svg.highlight{--blend-mode: multiply;position:absolute;mix-blend-mode:var(--blend-mode)}@media screen and (forced-colors: active){.wy-content-pdf .canvasWrapper svg.highlight{--blend-mode: difference}}.wy-content-pdf .canvasWrapper svg.highlight:not(.free){fill-rule:evenodd}.wy-content-pdf .canvasWrapper svg.highlightOutline{position:absolute;mix-blend-mode:normal;fill-rule:evenodd;fill:none}.wy-content-pdf .canvasWrapper svg.highlightOutline.hovered:not(.free):not(.selected){stroke:var(--hover-outline-color);stroke-width:var(--outline-width)}.wy-content-pdf .canvasWrapper svg.highlightOutline.selected:not(.free) .mainOutline{stroke:var(--outline-around-color);stroke-width:calc(var(--outline-width) + 2 * var(--outline-around-width))}.wy-content-pdf .canvasWrapper svg.highlightOutline.selected:not(.free) .secondaryOutline{stroke:var(--outline-color);stroke-width:var(--outline-width)}.wy-content-pdf .canvasWrapper svg.highlightOutline.free.hovered:not(.selected){stroke:var(--hover-outline-color);stroke-width:calc(2 * var(--outline-width))}.wy-content-pdf .canvasWrapper svg.highlightOutline.free.selected .mainOutline{stroke:var(--outline-around-color);stroke-width:calc(2 * (var(--outline-width) + var(--outline-around-width)))}.wy-content-pdf .canvasWrapper svg.highlightOutline.free.selected .secondaryOutline{stroke:var(--outline-color);stroke-width:calc(2 * var(--outline-width))}.wy-content-pdf .toggle-button{--button-background-color: #f0f0f4;--button-background-color-hover: #e0e0e6;--button-background-color-active: #cfcfd8;--color-accent-primary: #0060df;--color-accent-primary-hover: #0250bb;--color-accent-primary-active: #054096;--border-interactive-color: #8f8f9d;--border-radius-circle: 9999px;--border-width: 1px;--size-item-small: 16px;--size-item-large: 32px;--color-canvas: white;--toggle-background-color: var(--button-background-color);--toggle-background-color-hover: var(--button-background-color-hover);--toggle-background-color-active: var(--button-background-color-active);--toggle-background-color-pressed: var(--color-accent-primary);--toggle-background-color-pressed-hover: var(--color-accent-primary-hover);--toggle-background-color-pressed-active: var(--color-accent-primary-active);--toggle-border-color: var(--border-interactive-color);--toggle-border-color-hover: var(--toggle-border-color);--toggle-border-color-active: var(--toggle-border-color);--toggle-border-radius: var(--border-radius-circle);--toggle-border-width: var(--border-width);--toggle-height: var(--size-item-small);--toggle-width: var(--size-item-large);--toggle-dot-background-color: var(--toggle-border-color);--toggle-dot-background-color-hover: var(--toggle-dot-background-color);--toggle-dot-background-color-active: var(--toggle-dot-background-color);--toggle-dot-background-color-on-pressed: var(--color-canvas);--toggle-dot-margin: 1px;--toggle-dot-height: calc(var(--toggle-height) - 2 * var(--toggle-dot-margin) - 2 * var(--toggle-border-width));--toggle-dot-width: var(--toggle-dot-height);--toggle-dot-transform-x: calc(var(--toggle-width) - 4 * var(--toggle-dot-margin) - var(--toggle-dot-width));-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;margin:0;border:var(--toggle-border-width) solid var(--toggle-border-color);height:var(--toggle-height);width:var(--toggle-width);border-radius:var(--toggle-border-radius);background:var(--toggle-background-color);box-sizing:border-box;flex-shrink:0}@media (prefers-color-scheme: dark){.wy-content-pdf .toggle-button{--button-background-color: color-mix(in srgb, currentColor 7%, transparent);--button-background-color-hover: color-mix(in srgb, currentColor 14%, transparent);--button-background-color-active: color-mix(in srgb, currentColor 21%, transparent);--color-accent-primary: #0df;--color-accent-primary-hover: #80ebff;--color-accent-primary-active: #aaf2ff;--border-interactive-color: #bfbfc9;--color-canvas: #1c1b22}}@media (forced-colors: active){.wy-content-pdf .toggle-button{--color-accent-primary: ButtonText;--color-accent-primary-hover: SelectedItem;--color-accent-primary-active: SelectedItem;--border-interactive-color: ButtonText;--button-background-color: ButtonFace;--border-interactive-color-hover: SelectedItem;--border-interactive-color-active: SelectedItem;--border-interactive-color-disabled: GrayText;--color-canvas: ButtonText}}.wy-content-pdf .toggle-button:focus-visible{outline:var(--focus-outline);outline-offset:var(--focus-outline-offset)}.wy-content-pdf .toggle-button:enabled:hover{background:var(--toggle-background-color-hover);border-color:var(--toggle-border-color)}.wy-content-pdf .toggle-button:enabled:active{background:var(--toggle-background-color-active);border-color:var(--toggle-border-color)}.wy-content-pdf .toggle-button[aria-pressed=true]{background:var(--toggle-background-color-pressed);border-color:transparent}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:hover{background:var(--toggle-background-color-pressed-hover);border-color:transparent}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:active{background:var(--toggle-background-color-pressed-active);border-color:transparent}.wy-content-pdf .toggle-button:before{display:block;content:"";background-color:var(--toggle-dot-background-color);height:var(--toggle-dot-height);width:var(--toggle-dot-width);margin:var(--toggle-dot-margin);border-radius:var(--toggle-border-radius);translate:0}.wy-content-pdf .toggle-button[aria-pressed=true]:before{translate:var(--toggle-dot-transform-x);background-color:var(--toggle-dot-background-color-on-pressed)}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:hover:before,.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:active:before{background-color:var(--toggle-dot-background-color-on-pressed)}.wy-content-pdf [dir=rtl] .toggle-button[aria-pressed=true]:before{translate:calc(-1 * var(--toggle-dot-transform-x))}@media (prefers-reduced-motion: no-preference){.wy-content-pdf .toggle-button:before{transition:translate .1s}}@media (prefers-contrast){.wy-content-pdf .toggle-button:enabled:hover{border-color:var(--toggle-border-color-hover)}.wy-content-pdf .toggle-button:enabled:active{border-color:var(--toggle-border-color-active)}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled{border-color:var(--toggle-border-color);position:relative}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:hover,.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:hover:active{border-color:var(--toggle-border-color-hover)}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:active{background-color:var(--toggle-dot-background-color-active);border-color:var(--toggle-dot-background-color-hover)}.wy-content-pdf .toggle-button:hover:before,.wy-content-pdf .toggle-button:active:before{background-color:var(--toggle-dot-background-color-hover)}}@media (forced-colors){.wy-content-pdf .toggle-button{--toggle-dot-background-color: var(--color-accent-primary);--toggle-dot-background-color-hover: var(--color-accent-primary-hover);--toggle-dot-background-color-active: var(--color-accent-primary-active);--toggle-dot-background-color-on-pressed: var(--button-background-color);--toggle-background-color-disabled: var(--button-background-color-disabled);--toggle-border-color-hover: var(--border-interactive-color-hover);--toggle-border-color-active: var(--border-interactive-color-active);--toggle-border-color-disabled: var(--border-interactive-color-disabled)}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:after{border:1px solid var(--button-background-color);content:"";position:absolute;height:var(--toggle-height);width:var(--toggle-width);display:block;border-radius:var(--toggle-border-radius);top:-2px;right:-2px;bottom:-2px;left:-2px}.wy-content-pdf .toggle-button[aria-pressed=true]:enabled:active:after{border-color:var(--toggle-border-color-active)}}:host{--outline-width: 2px;--outline-color: #0060df;--outline-around-width: 1px;--outline-around-color: #f0f0f4;--hover-outline-around-color: var(--outline-around-color);--focus-outline: solid var(--outline-width) var(--outline-color);--unfocus-outline: solid var(--outline-width) transparent;--focus-outline-around: solid var(--outline-around-width) var(--outline-around-color);--hover-outline-color: #8f8f9d;--hover-outline: solid var(--outline-width) var(--hover-outline-color);--hover-outline-around: solid var(--outline-around-width) var(--hover-outline-around-color);--freetext-line-height: 1.35;--freetext-padding: 2px;--resizer-bg-color: var(--outline-color);--resizer-size: 6px;--resizer-shift: calc(0px - (var(--outline-width) + var(--resizer-size)) / 2 - var(--outline-around-width));--editorFreeText-editing-cursor: text}.wy-content-pdf .visuallyHidden{position:absolute;top:0;left:0;border:0;margin:0;padding:0;width:0;height:0;overflow:hidden;white-space:nowrap;font-size:0}.wy-content-pdf .textLayer.highlighting{cursor:var(--editorFreeHighlight-editing-cursor)}.wy-content-pdf .textLayer.highlighting:not(.free) span{cursor:var(--editorHighlight-editing-cursor)}.wy-content-pdf .textLayer.highlighting.free span{cursor:var(--editorFreeHighlight-editing-cursor)}@media screen and (forced-colors: active){:host{--outline-color: CanvasText;--outline-around-color: ButtonFace;--resizer-bg-color: ButtonText;--hover-outline-color: Highlight;--hover-outline-around-color: SelectedItemText}}.wy-content-pdf [data-editor-rotation="90"]{transform:rotate(90deg)}.wy-content-pdf [data-editor-rotation="180"]{transform:rotate(180deg)}.wy-content-pdf [data-editor-rotation="270"]{transform:rotate(270deg)}.wy-content-pdf .annotationEditorLayer{background:transparent;position:absolute;top:0;right:0;bottom:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0;cursor:auto}.wy-content-pdf .annotationEditorLayer.waiting{content:"";cursor:wait;position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%}.wy-content-pdf .annotationEditorLayer.disabled{pointer-events:none}.wy-content-pdf .annotationEditorLayer.freetextEditing{cursor:var(--editorFreeText-editing-cursor)}.wy-content-pdf .annotationEditorLayer.inkEditing{cursor:var(--editorInk-editing-cursor)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor){position:absolute;background:transparent;z-index:1;transform-origin:0 0;cursor:auto;max-width:100%;max-height:100%;border:var(--unfocus-outline)}.wy-content-pdf .annotationEditorLayer .draggable.selectedEditor:is(.freeTextEditor,.inkEditor,.stampEditor){cursor:move}.wy-content-pdf .annotationEditorLayer .moving:is(.freeTextEditor,.inkEditor,.stampEditor){touch-action:none}.wy-content-pdf .annotationEditorLayer .selectedEditor:is(.freeTextEditor,.inkEditor,.stampEditor){border:var(--focus-outline);outline:var(--focus-outline-around)}.wy-content-pdf .annotationEditorLayer .selectedEditor:is(.freeTextEditor,.inkEditor,.stampEditor):before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border:var(--focus-outline-around);pointer-events:none}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor):hover:not(.selectedEditor){border:var(--hover-outline);outline:var(--hover-outline-around)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor):hover:not(.selectedEditor):before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border:var(--focus-outline-around)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar{--editor-toolbar-bg-color: #f0f0f4;--editor-toolbar-fg-color: #2e2e56;--editor-toolbar-border-color: #8f8f9d;--editor-toolbar-hover-border-color: var(--editor-toolbar-border-color);--editor-toolbar-hover-bg-color: #e0e0e6;--editor-toolbar-hover-fg-color: var(--editor-toolbar-fg-color);--editor-toolbar-hover-outline: none;--editor-toolbar-focus-outline-color: #0060df;--editor-toolbar-shadow: 0 2px 6px 0 rgb(58 57 68 / .2);--editor-toolbar-vert-offset: 6px;--editor-toolbar-height: 28px;--editor-toolbar-padding: 2px;display:flex;width:-moz-fit-content;width:fit-content;height:var(--editor-toolbar-height);flex-direction:column;justify-content:center;align-items:center;cursor:default;pointer-events:auto;box-sizing:content-box;padding:var(--editor-toolbar-padding);position:absolute;inset-inline-end:0;inset-block-start:calc(100% + var(--editor-toolbar-vert-offset));border-radius:6px;background-color:var(--editor-toolbar-bg-color);border:1px solid var(--editor-toolbar-border-color);box-shadow:var(--editor-toolbar-shadow)}@media (prefers-color-scheme: dark){.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar{--editor-toolbar-bg-color: #2b2a33;--editor-toolbar-fg-color: #fbfbfe;--editor-toolbar-hover-bg-color: #52525e;--editor-toolbar-focus-outline-color: #0df}}@media screen and (forced-colors: active){.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar{--editor-toolbar-bg-color: ButtonFace;--editor-toolbar-fg-color: ButtonText;--editor-toolbar-border-color: ButtonText;--editor-toolbar-hover-border-color: AccentColor;--editor-toolbar-hover-bg-color: ButtonFace;--editor-toolbar-hover-fg-color: AccentColor;--editor-toolbar-hover-outline: 2px solid var(--editor-toolbar-hover-border-color);--editor-toolbar-focus-outline-color: ButtonBorder;--editor-toolbar-shadow: none}}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar.hidden{display:none}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar:has(:focus-visible){border-color:transparent}.wy-content-pdf [dir=ltr] :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar{transform-origin:100% 0}.wy-content-pdf [dir=rtl] :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar{transform-origin:0 0}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons{display:flex;justify-content:center;align-items:center;gap:0;height:100%}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .divider{width:1px;height:calc(2 * var(--editor-toolbar-padding) + var(--editor-toolbar-height));background-color:var(--editor-toolbar-border-color);display:inline-block;margin-inline:2px}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .highlightButton{width:var(--editor-toolbar-height)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .highlightButton:before{content:"";-webkit-mask-image:var(--editor-toolbar-highlight-image);mask-image:var(--editor-toolbar-highlight-image);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;display:inline-block;background-color:var(--editor-toolbar-fg-color);width:100%;height:100%}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .highlightButton:hover:before{background-color:var(--editor-toolbar-hover-fg-color)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .delete{width:var(--editor-toolbar-height)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .delete:before{content:"";-webkit-mask-image:var(--editor-toolbar-delete-image);mask-image:var(--editor-toolbar-delete-image);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;display:inline-block;background-color:var(--editor-toolbar-fg-color);width:100%;height:100%}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .delete:hover:before{background-color:var(--editor-toolbar-hover-fg-color)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons>*{height:var(--editor-toolbar-height)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons>:not(.divider){border:none;background-color:transparent;cursor:pointer}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons>:not(.divider):hover{border-radius:2px;background-color:var(--editor-toolbar-hover-bg-color);color:var(--editor-toolbar-hover-fg-color);outline:var(--editor-toolbar-hover-outline);outline-offset:1px}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons>:not(.divider):hover:active{outline:none}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons>:not(.divider):focus-visible{border-radius:2px;outline:2px solid var(--editor-toolbar-focus-outline-color)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText{display:flex;align-items:center;justify-content:center;width:-moz-max-content;width:max-content;padding-inline:8px;pointer-events:all;font:menu;font-weight:590;font-size:12px;color:var(--editor-toolbar-fg-color)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText:disabled{pointer-events:none}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText:before{content:"";-webkit-mask-image:var(--alt-text-add-image);mask-image:var(--alt-text-add-image);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;display:inline-block;width:12px;height:13px;background-color:var(--editor-toolbar-fg-color);margin-inline-end:4px}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText:hover:before{background-color:var(--editor-toolbar-hover-fg-color)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText.done:before{-webkit-mask-image:var(--alt-text-done-image);mask-image:var(--alt-text-done-image)}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText .tooltip{display:none}.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText .tooltip.show{--alt-text-tooltip-bg: #f0f0f4;--alt-text-tooltip-fg: #15141a;--alt-text-tooltip-border: #8f8f9d;--alt-text-tooltip-shadow: 0px 2px 6px 0px rgb(58 57 68 / .2);display:inline-flex;flex-direction:column;align-items:center;justify-content:center;position:absolute;top:calc(100% + 2px);inset-inline-start:0;padding-block:2px 3px;padding-inline:3px;max-width:300px;width:-moz-max-content;width:max-content;height:auto;font-size:12px;border:.5px solid var(--alt-text-tooltip-border);background:var(--alt-text-tooltip-bg);box-shadow:var(--alt-text-tooltip-shadow);color:var(--alt-text-tooltip-fg);pointer-events:none}@media (prefers-color-scheme: dark){.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText .tooltip.show{--alt-text-tooltip-bg: #1c1b22;--alt-text-tooltip-fg: #fbfbfe;--alt-text-tooltip-shadow: 0px 2px 6px 0px #15141a}}@media screen and (forced-colors: active){.wy-content-pdf :is(.annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor,.highlightEditor),.textLayer) .editToolbar .buttons .altText .tooltip.show{--alt-text-tooltip-bg: Canvas;--alt-text-tooltip-fg: CanvasText;--alt-text-tooltip-border: CanvasText;--alt-text-tooltip-shadow: none}}.wy-content-pdf .annotationEditorLayer .freeTextEditor{padding:calc(var(--freetext-padding) * var(--scale-factor));width:auto;height:auto;touch-action:none}.wy-content-pdf .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;right:0;bottom:0;left:0;overflow:visible;white-space:nowrap;font:10px sans-serif;line-height:var(--freetext-line-height);-webkit-user-select:none;-moz-user-select:none;user-select:none}.wy-content-pdf .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;right:0;bottom:0;left:0;width:100%;height:100%}.wy-content-pdf .annotationEditorLayer freeTextEditor .overlay.enabled{display:block}.wy-content-pdf .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}.wy-content-pdf .annotationEditorLayer .freeTextEditor .internal:focus{outline:none;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}.wy-content-pdf .annotationEditorLayer .inkEditor{width:100%;height:100%}.wy-content-pdf .annotationEditorLayer .inkEditor.editing{cursor:inherit}.wy-content-pdf .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;touch-action:none}.wy-content-pdf .annotationEditorLayer .stampEditor{width:auto;height:auto}.wy-content-pdf .annotationEditorLayer .stampEditor canvas{width:100%;height:100%}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers{position:absolute;top:0;right:0;bottom:0;left:0}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers.hidden{display:none}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer{width:var(--resizer-size);height:var(--resizer-size);background:content-box var(--resizer-bg-color);border:var(--focus-outline-around);border-radius:2px;position:absolute}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.topLeft{top:var(--resizer-shift);left:var(--resizer-shift)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.topMiddle{top:var(--resizer-shift);left:calc(50% + var(--resizer-shift))}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.topRight{top:var(--resizer-shift);right:var(--resizer-shift)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.middleRight{top:calc(50% + var(--resizer-shift));right:var(--resizer-shift)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.bottomRight{bottom:var(--resizer-shift);right:var(--resizer-shift)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.bottomMiddle{bottom:var(--resizer-shift);left:calc(50% + var(--resizer-shift))}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.bottomLeft{bottom:var(--resizer-shift);left:var(--resizer-shift)}.wy-content-pdf .annotationEditorLayer :is(.freeTextEditor,.inkEditor,.stampEditor)>.resizers>.resizer.middleLeft{top:calc(50% + var(--resizer-shift));left:var(--resizer-shift)}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.bottomRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.bottomRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.bottomRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.bottomRight{cursor:nwse-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.bottomMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.bottomMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.bottomMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.bottomMiddle{cursor:ns-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.bottomLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.bottomLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.bottomLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.bottomLeft{cursor:nesw-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.middleLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.middleLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.middleLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.middleLeft{cursor:ew-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.topLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.bottomRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.bottomRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.bottomRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.bottomRight{cursor:nesw-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.topMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.bottomMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.bottomMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.bottomMiddle,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.bottomMiddle{cursor:ew-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.topRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.bottomLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.bottomLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.bottomLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.bottomLeft{cursor:nwse-resize}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.middleRight,.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] :is([data-editor-rotation="90"],[data-editor-rotation="270"])>.resizers>.resizer.middleLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] :is([data-editor-rotation="0"],[data-editor-rotation="180"])>.resizers>.resizer.middleLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] :is([data-editor-rotation="270"],[data-editor-rotation="90"])>.resizers>.resizer.middleLeft,.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] :is([data-editor-rotation="180"],[data-editor-rotation="0"])>.resizers>.resizer.middleLeft{cursor:ns-resize}.wy-content-pdf .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="90"],[data-main-rotation="90"] [data-editor-rotation="0"],[data-main-rotation="180"] [data-editor-rotation="270"],[data-main-rotation="270"] [data-editor-rotation="180"]) .editToolbar{rotate:270deg}.wy-content-pdf [dir=ltr] .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="90"],[data-main-rotation="90"] [data-editor-rotation="0"],[data-main-rotation="180"] [data-editor-rotation="270"],[data-main-rotation="270"] [data-editor-rotation="180"]) .editToolbar{inset-inline-end:calc(0px - var(--editor-toolbar-vert-offset));inset-block-start:0}.wy-content-pdf [dir=rtl] .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="90"],[data-main-rotation="90"] [data-editor-rotation="0"],[data-main-rotation="180"] [data-editor-rotation="270"],[data-main-rotation="270"] [data-editor-rotation="180"]) .editToolbar{inset-inline-end:calc(100% + var(--editor-toolbar-vert-offset));inset-block-start:0}.wy-content-pdf .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="180"],[data-main-rotation="90"] [data-editor-rotation="90"],[data-main-rotation="180"] [data-editor-rotation="0"],[data-main-rotation="270"] [data-editor-rotation="270"]) .editToolbar{rotate:180deg;inset-inline-end:100%;inset-block-start:calc(0pc - var(--editor-toolbar-vert-offset))}.wy-content-pdf .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="270"],[data-main-rotation="90"] [data-editor-rotation="180"],[data-main-rotation="180"] [data-editor-rotation="90"],[data-main-rotation="270"] [data-editor-rotation="0"]) .editToolbar{rotate:90deg}.wy-content-pdf [dir=ltr] .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="270"],[data-main-rotation="90"] [data-editor-rotation="180"],[data-main-rotation="180"] [data-editor-rotation="90"],[data-main-rotation="270"] [data-editor-rotation="0"]) .editToolbar{inset-inline-end:calc(100% + var(--editor-toolbar-vert-offset));inset-block-start:100%}.wy-content-pdf [dir=rtl] .annotationEditorLayer :is([data-main-rotation="0"] [data-editor-rotation="270"],[data-main-rotation="90"] [data-editor-rotation="180"],[data-main-rotation="180"] [data-editor-rotation="90"],[data-main-rotation="270"] [data-editor-rotation="0"]) .editToolbar{inset-inline-start:calc(0px - var(--editor-toolbar-vert-offset));inset-block-start:0}.wy-content-pdf #altTextDialog{--dialog-bg-color: white;--dialog-border-color: white;--dialog-shadow: 0 2px 14px 0 rgb(58 57 68 / .2);--text-primary-color: #15141a;--text-secondary-color: #5b5b66;--hover-filter: brightness(.9);--focus-ring-color: #0060df;--focus-ring-outline: 2px solid var(--focus-ring-color);--textarea-border-color: #8f8f9d;--textarea-bg-color: white;--textarea-fg-color: var(--text-secondary-color);--radio-bg-color: #f0f0f4;--radio-checked-bg-color: #fbfbfe;--radio-border-color: #8f8f9d;--radio-checked-border-color: #0060df;--button-cancel-bg-color: #f0f0f4;--button-cancel-fg-color: var(--text-primary-color);--button-cancel-border-color: var(--button-cancel-bg-color);--button-cancel-hover-bg-color: var(--button-cancel-bg-color);--button-cancel-hover-fg-color: var(--button-cancel-fg-color);--button-cancel-hover-border-color: var(--button-cancel-hover-bg-color);--button-save-bg-color: #0060df;--button-save-fg-color: #fbfbfe;--button-save-hover-bg-color: var(--button-save-bg-color);--button-save-hover-fg-color: var(--button-save-fg-color);--button-save-hover-border-color: var(--button-save-hover-bg-color);font:message-box;font-size:13px;font-weight:400;line-height:150%;border-radius:4px;padding:12px 16px;border:1px solid var(--dialog-border-color);background:var(--dialog-bg-color);color:var(--text-primary-color);box-shadow:var(--dialog-shadow)}@media (prefers-color-scheme: dark){.wy-content-pdf #altTextDialog{--dialog-bg-color: #1c1b22;--dialog-border-color: #1c1b22;--dialog-shadow: 0 2px 14px 0 #15141a;--text-primary-color: #fbfbfe;--text-secondary-color: #cfcfd8;--focus-ring-color: #0df;--hover-filter: brightness(1.4);--textarea-bg-color: #42414d;--radio-bg-color: #2b2a33;--radio-checked-bg-color: #15141a;--radio-checked-border-color: #0df;--button-cancel-bg-color: #2b2a33;--button-save-bg-color: #0df;--button-save-fg-color: #15141a}}@media screen and (forced-colors: active){.wy-content-pdf #altTextDialog{--dialog-bg-color: Canvas;--dialog-border-color: CanvasText;--dialog-shadow: none;--text-primary-color: CanvasText;--text-secondary-color: CanvasText;--hover-filter: none;--focus-ring-color: ButtonBorder;--textarea-border-color: ButtonBorder;--textarea-bg-color: Field;--textarea-fg-color: ButtonText;--radio-bg-color: ButtonFace;--radio-checked-bg-color: ButtonFace;--radio-border-color: ButtonText;--radio-checked-border-color: ButtonText;--button-cancel-bg-color: ButtonFace;--button-cancel-fg-color: ButtonText;--button-cancel-border-color: ButtonText;--button-cancel-hover-bg-color: AccentColor;--button-cancel-hover-fg-color: AccentColorText;--button-save-bg-color: ButtonText;--button-save-fg-color: ButtonFace;--button-save-hover-bg-color: AccentColor;--button-save-hover-fg-color: AccentColorText}}.wy-content-pdf #altTextDialog::backdrop{-webkit-mask:url(#alttext-manager-mask);mask:url(#alttext-manager-mask)}.wy-content-pdf #altTextDialog.positioned{margin:0}.wy-content-pdf #altTextDialog #altTextContainer{width:300px;height:-moz-fit-content;height:fit-content;display:inline-flex;flex-direction:column;align-items:flex-start;gap:16px}.wy-content-pdf #altTextDialog #altTextContainer *:focus-visible{outline:var(--focus-ring-outline);outline-offset:2px}.wy-content-pdf #altTextDialog #altTextContainer .radio{display:flex;flex-direction:column;align-items:flex-start;gap:4px}.wy-content-pdf #altTextDialog #altTextContainer .radio .radioButton{display:flex;gap:8px;align-self:stretch;align-items:center}.wy-content-pdf #altTextDialog #altTextContainer .radio .radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;width:16px;height:16px;border-radius:50%;background-color:var(--radio-bg-color);border:1px solid var(--radio-border-color)}.wy-content-pdf #altTextDialog #altTextContainer .radio .radioButton input:hover{filter:var(--hover-filter)}.wy-content-pdf #altTextDialog #altTextContainer .radio .radioButton input:checked{background-color:var(--radio-checked-bg-color);border:4px solid var(--radio-checked-border-color)}.wy-content-pdf #altTextDialog #altTextContainer .radio .radioLabel{display:flex;padding-inline-start:24px;align-items:flex-start;gap:10px;align-self:stretch}.wy-content-pdf #altTextDialog #altTextContainer .radio .radioLabel span{flex:1 0 0;font-size:11px;color:var(--text-secondary-color)}.wy-content-pdf #altTextDialog #altTextContainer #overallDescription{display:flex;flex-direction:column;align-items:flex-start;gap:4px;align-self:stretch}.wy-content-pdf #altTextDialog #altTextContainer #overallDescription span{align-self:stretch}.wy-content-pdf #altTextDialog #altTextContainer #overallDescription .title{font-size:13px;font-style:normal;font-weight:590}.wy-content-pdf #altTextDialog #altTextContainer #addDescription{display:flex;flex-direction:column;align-items:stretch;gap:8px}.wy-content-pdf #altTextDialog #altTextContainer #addDescription .descriptionArea{flex:1;padding-inline:24px 10px}.wy-content-pdf #altTextDialog #altTextContainer #addDescription .descriptionArea textarea{font:inherit;width:100%;min-height:75px;padding:8px;resize:none;margin:0;box-sizing:border-box;border-radius:4px;border:1px solid var(--textarea-border-color);background:var(--textarea-bg-color);color:var(--textarea-fg-color)}.wy-content-pdf #altTextDialog #altTextContainer #addDescription .descriptionArea textarea:focus{outline-offset:0;border-color:transparent}.wy-content-pdf #altTextDialog #altTextContainer #addDescription .descriptionArea textarea:disabled{pointer-events:none;opacity:.4}.wy-content-pdf #altTextDialog #altTextContainer #buttons{display:flex;justify-content:flex-end;align-items:flex-start;gap:8px;align-self:stretch}.wy-content-pdf #altTextDialog #altTextContainer #buttons button{border-radius:4px;border:1px solid;font:menu;font-weight:600;padding:4px 16px;width:auto;height:32px}.wy-content-pdf #altTextDialog #altTextContainer #buttons button:hover{cursor:pointer;filter:var(--hover-filter)}.wy-content-pdf #altTextDialog #altTextContainer #buttons button#altTextCancel{color:var(--button-cancel-fg-color);background-color:var(--button-cancel-bg-color);border-color:var(--button-cancel-border-color)}.wy-content-pdf #altTextDialog #altTextContainer #buttons button#altTextCancel:hover{color:var(--button-cancel-hover-fg-color);background-color:var(--button-cancel-hover-bg-color);border-color:var(--button-cancel-hover-border-color)}.wy-content-pdf #altTextDialog #altTextContainer #buttons button#altTextSave{color:var(--button-save-hover-fg-color);background-color:var(--button-save-hover-bg-color);border-color:var(--button-save-hover-border-color);opacity:1}.wy-content-pdf #altTextDialog #altTextContainer #buttons button#altTextSave:hover{color:var(--button-save-hover-fg-color);background-color:var(--button-save-hover-bg-color);border-color:var(--button-save-hover-border-color)}.wy-content-pdf .colorPicker{--hover-outline-color: #0250bb;--selected-outline-color: #0060df;--swatch-border-color: #cfcfd8}@media (prefers-color-scheme: dark){.wy-content-pdf .colorPicker{--hover-outline-color: #80ebff;--selected-outline-color: #aaf2ff;--swatch-border-color: #52525e}}@media screen and (forced-colors: active){.wy-content-pdf .colorPicker{--hover-outline-color: Highlight;--selected-outline-color: var(--hover-outline-color);--swatch-border-color: ButtonText}}.wy-content-pdf .colorPicker .swatch{width:16px;height:16px;border:1px solid var(--swatch-border-color);border-radius:100%;outline-offset:2px;box-sizing:border-box;forced-color-adjust:none}.wy-content-pdf .colorPicker button:is(:hover,.selected)>.swatch{border:none}.wy-content-pdf .annotationEditorLayer[data-main-rotation="0"] .highlightEditor:not(.free)>.editToolbar{rotate:0deg}.wy-content-pdf .annotationEditorLayer[data-main-rotation="90"] .highlightEditor:not(.free)>.editToolbar{rotate:270deg}.wy-content-pdf .annotationEditorLayer[data-main-rotation="180"] .highlightEditor:not(.free)>.editToolbar{rotate:180deg}.wy-content-pdf .annotationEditorLayer[data-main-rotation="270"] .highlightEditor:not(.free)>.editToolbar{rotate:90deg}.wy-content-pdf .annotationEditorLayer .highlightEditor{position:absolute;background:transparent;z-index:1;cursor:auto;max-width:100%;max-height:100%;border:none;outline:none;pointer-events:none;transform-origin:0 0}.wy-content-pdf .annotationEditorLayer .highlightEditor:not(.free){transform:none}.wy-content-pdf .annotationEditorLayer .highlightEditor .internal{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:auto}.wy-content-pdf .annotationEditorLayer .highlightEditor.disabled .internal{pointer-events:none}.wy-content-pdf .annotationEditorLayer .highlightEditor.selectedEditor .internal{cursor:pointer}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar{transform-origin:center!important}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker{position:relative;width:auto;display:flex;justify-content:center;align-items:center;gap:4px;padding:4px}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker:after{content:"";-webkit-mask-image:var(--editor-toolbar-colorpicker-arrow-image);mask-image:var(--editor-toolbar-colorpicker-arrow-image);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;display:inline-block;background-color:var(--editor-toolbar-fg-color);width:12px;height:12px}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker:hover:after{background-color:var(--editor-toolbar-hover-fg-color)}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker:has(.dropdown:not(.hidden)){background-color:var(--editor-toolbar-hover-bg-color)}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker:has(.dropdown:not(.hidden)):after{scale:-1}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker .dropdown{position:absolute;display:flex;justify-content:center;align-items:center;flex-direction:column;gap:11px;padding-block:8px;border-radius:6px;background-color:var(--editor-toolbar-bg-color);border:1px solid var(--editor-toolbar-border-color);box-shadow:var(--editor-toolbar-shadow);inset-block-start:calc(100% + 4px);width:calc(100% + 2 * var(--editor-toolbar-padding))}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker .dropdown button{width:100%;height:auto;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;background:none}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker .dropdown button:is(:active,:focus-visible){outline:none}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker .dropdown button>.swatch{outline-offset:2px}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker .dropdown button[aria-selected=true]>.swatch{outline:2px solid var(--selected-outline-color)}.wy-content-pdf .annotationEditorLayer .highlightEditor .editToolbar .buttons .colorPicker .dropdown button:is(:hover,:active,:focus-visible)>.swatch{outline:2px solid var(--hover-outline-color)}.wy-content-pdf .editorParamsToolbar:has(#highlightParamsToolbarContainer){padding:unset}.wy-content-pdf #highlightParamsToolbarContainer{height:auto;padding-inline:10px;padding-block:10px 16px;gap:16px;display:flex;flex-direction:column;box-sizing:border-box}.wy-content-pdf #highlightParamsToolbarContainer .editorParamsLabel{width:-moz-fit-content;width:fit-content;inset-inline-start:0}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker{display:flex;flex-direction:column;gap:8px}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker .dropdown{display:flex;justify-content:space-between;align-items:center;flex-direction:row;height:auto}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker .dropdown button{width:auto;height:auto;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;background:none;flex:0 0 auto}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker .dropdown button .swatch{width:24px;height:24px}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker .dropdown button:is(:active,:focus-visible){outline:none}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker .dropdown button[aria-selected=true]>.swatch{outline:2px solid var(--selected-outline-color)}.wy-content-pdf #highlightParamsToolbarContainer .colorPicker .dropdown button:is(:hover,:active,:focus-visible)>.swatch{outline:2px solid var(--hover-outline-color)}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness{display:flex;flex-direction:column;align-items:center;gap:4px;align-self:stretch}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .editorParamsLabel{width:100%;height:auto;align-self:stretch}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker{display:flex;justify-content:space-between;align-items:center;align-self:stretch;--example-color: #bfbfc9}@media (prefers-color-scheme: dark){.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker{--example-color: #80808e}}@media screen and (forced-colors: active){.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker{--example-color: CanvasText}}.wy-content-pdf :is(#highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker>.editorParamsSlider[disabled]){opacity:.4}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker:before,.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker:after{content:"";width:8px;aspect-ratio:1;display:block;border-radius:100%;background-color:var(--example-color)}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker:after{width:24px}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightThickness .thicknessPicker .editorParamsSlider{width:unset;height:14px}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightVisibility{display:flex;flex-direction:column;align-items:flex-start;gap:8px;align-self:stretch}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightVisibility .divider{--divider-color: #d7d7db;margin-block:4px;width:100%;height:1px;background-color:var(--divider-color)}@media (prefers-color-scheme: dark){.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightVisibility .divider{--divider-color: #8f8f9d}}@media screen and (forced-colors: active){.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightVisibility .divider{--divider-color: CanvasText}}.wy-content-pdf #highlightParamsToolbarContainer #editorHighlightVisibility .toggler{display:flex;justify-content:space-between;align-items:center;align-self:stretch}:host{--viewer-container-height: 0;--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--loading-icon-delay: .4s}@media screen and (forced-colors: active){:host{--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--spreadHorizontalWrapped-margin-LR: 3.5px}}.wy-content-pdf [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}.wy-content-pdf [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}.wy-content-pdf [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}.wy-content-pdf #hiddenCopyElement,.wy-content-pdf .hiddenCanvasElement{position:absolute;top:0;left:0;width:0;height:0;display:none}.wy-content-pdf .pdfViewer{--scale-factor: 1;padding-bottom:var(--pdfViewer-padding-bottom);--hcm-highlight-filter: none;--hcm-highlight-selected-filter: none}@media screen and (forced-colors: active){.wy-content-pdf .pdfViewer{--hcm-highlight-filter: invert(100%)}}.wy-content-pdf .pdfViewer .canvasWrapper{overflow:hidden;width:100%;height:100%}.wy-content-pdf .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;background-color:#fff}.wy-content-pdf .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}.wy-content-pdf .pdfViewer.noUserSelect{-webkit-user-select:none;-moz-user-select:none;user-select:none}.wy-content-pdf .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}.wy-content-pdf .pdfViewer.singlePageView{display:inline-block}.wy-content-pdf .pdfViewer.singlePageView .page{margin:0;border:none}.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped),.wy-content-pdf .spread{margin-inline:3.5px;text-align:center}.wy-content-pdf .pdfViewer.scrollHorizontal,.wy-content-pdf .spread{white-space:nowrap}.wy-content-pdf .pdfViewer.removePageBorders,.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped) .spread{margin-inline:0}.wy-content-pdf .spread :is(.page,.dummyPage),.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped) :is(.page,.spread){display:inline-block;vertical-align:middle}.wy-content-pdf .spread .page,.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped) .page{margin-inline:var(--spreadHorizontalWrapped-margin-LR)}.wy-content-pdf .pdfViewer.removePageBorders .spread .page,.wy-content-pdf .pdfViewer.removePageBorders:is(.scrollHorizontal,.scrollWrapped) .page{margin-inline:5px}.wy-content-pdf .pdfViewer .page canvas{margin:0;display:block}.wy-content-pdf .pdfViewer .page canvas .structTree{contain:strict}.wy-content-pdf .pdfViewer .page canvas[hidden]{display:none}.wy-content-pdf .pdfViewer .page canvas[zooming]{width:100%;height:100%}.wy-content-pdf .pdfViewer .page.loadingIcon:after{position:absolute;top:0;left:0;content:"";width:100%;height:100%;display:none;transition-property:display;transition-delay:var(--loading-icon-delay);z-index:5;contain:strict}.wy-content-pdf .pdfViewer .page.loading:after{display:block}.wy-content-pdf .pdfViewer .page:not(.loading):after{transition-property:none;display:none}.wy-content-pdf .pdfPresentationMode .pdfViewer{padding-bottom:0}.wy-content-pdf .pdfPresentationMode .spread{margin:0}.wy-content-pdf .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}.wy-content-pdf .pdfViewer .page{box-shadow:var(--wy-shadow-level2, 0 calc(.25 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12), 0 calc(.125 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem)) calc(-.0625 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));background-color:var(--wy-white, var(--wy-white, #ffffff))}.wy-content-pdf .pdfViewer .page.loadingIcon:after{background:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cstyle type='text/css'%3Eg%7Banimation:rotate 2s linear infinite;transform-origin:center center%7Dcircle%7Bstroke-dasharray:1,100;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite,color 6s ease-in-out infinite%7D@keyframes rotate%7B100%25%7Btransform:rotate(360deg)%7D%7D@keyframes dash%7B0%25%7Bstroke-dasharray:1,100;stroke-dashoffset:0%7D50%25%7Bstroke-dasharray:44.5,100;stroke-dashoffset:-17.5px%7D100%25%7Bstroke-dasharray:44.5,100;stroke-dashoffset:-62px%7D%7D@keyframes color%7B0%25,100%25%7Bstroke:%23216eb4%7D40%25%7Bstroke:%2328b7cf%7D66%25%7Bstroke:%23216eb4%7D80%25,90%25%7Bstroke:%2328b7cf%7D%7D%3C/style%3E%3Cg%3E%3Ccircle fill='none' cx='12' cy='12' r='11' stroke-linecap='butt' stroke-width='2' /%3E%3C/g%3E%3C/svg%3E") center no-repeat}.wy-pdf-page-number{width:calc(3 * var(--wy-size, 1rem))}.wy-pdf-zoom-level{width:calc(5 * var(--wy-size, 1rem))}.wy-content-text{word-break:break-word;white-space:pre-wrap}[part~=wy-reaction]{font-size:calc(1.125 * var(--wy-size, 1rem))}[part~=wy-reactions]{display:inline-flex;align-items:center;column-gap:calc(.25 * var(--wy-size, 1rem));margin-left:calc(.25 * var(--wy-size, 1rem));margin-right:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reactions]:empty{display:none}[part~=wy-reaction-count]{margin:0 calc(.25 * var(--wy-size, 1rem)) 0;line-height:1;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}[part~=wy-reaction-menu]{width:max-content;position:absolute;z-index:1000;border:none;--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;margin:0;text-align:left;background-clip:padding-box;box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));font-size:calc(1.125 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))))}[part~=wy-reaction-picker]{display:flex;flex-direction:row;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}[part~=wy-reactions-line]{display:flex;align-items:center;padding-left:calc(.1875 * var(--wy-size, 1rem));padding-right:calc(.1875 * var(--wy-size, 1rem));gap:calc(.1875 * var(--wy-size, 1rem));justify-content:end}[part~=wy-reactions-line-reverse]{flex-direction:row-reverse;justify-content:start}[part~=wy-reactions-line-bottom]{position:absolute;bottom:calc(-1.125 * var(--wy-size, 1rem));right:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reactions-line-below]{position:relative;height:0;min-height:0;max-height:0;margin:calc(var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) - var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(-1 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))) calc(-1 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));padding-left:calc(.125 * var(--wy-size, 1rem));padding-right:calc(.125 * var(--wy-size, 1rem));gap:calc(.125 * var(--wy-size, 1rem));flex:0 0 0;justify-content:flex-end}.wy-sheet{--wy-scrollbar-adjust-top: 0;--wy-scrollbar-adjust-bottom: 0;--wy-component-background-color: var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);position:fixed;z-index:1055;display:flex;flex-direction:column;overflow:hidden;bottom:calc(.5 * var(--wy-size, 1rem));left:calc(.5 * var(--wy-size, 1rem));right:calc(.5 * var(--wy-size, 1rem));max-height:max(50vh,50%);min-height:calc(3 * var(--wy-size, 1rem));margin:calc(.5 * var(--wy-size, 1rem)) auto;max-width:calc(32 * var(--wy-size, 1rem));transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12))}.wy-sheet>.wy-appbars,.wy-sheet>.wy-appbar{border-top-left-radius:inherit;border-top-right-radius:inherit}.wy-sheet-body{overflow:hidden;padding:calc(.5 * var(--wy-size, 1rem));position:relative;min-height:calc(3 * var(--wy-size, 1rem))}.wy-sheet-body.wy-scroll-y{overflow-y:auto}.wy-sheet-no-padding{padding:0}.wy-sheet:not(.wy-show){opacity:0;transform:translateY(calc(32 * var(--wy-size, 1rem)))}.wy-sheet.wy-show{opacity:1;transform:none;transition:transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));pointer-events:auto}.wy-toasts{background:none;border:none;padding:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));margin:0;width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;align-items:flex-end;justify-content:flex-end;pointer-events:none}.wy-toasts>::slotted(*){pointer-events:auto}.wy-toast{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background:var(--wy-component-background-color);color:var(--wy-component-color);gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));margin-top:0;margin-bottom:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));display:flex;cursor:pointer;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));padding:0;-webkit-user-select:none;user-select:none;box-shadow:var(--wy-shadow-level2, 0 calc(.25 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12), 0 calc(.125 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem)) calc(-.0625 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));position:relative;overflow:hidden;min-height:calc(4.5 * var(--wy-size, 1rem));max-width:calc(32 * var(--wy-size, 1rem))}.wy-toast.wy-fade{transition-property:opacity,min-height,padding-top,padding-bottom,margin-top,margin-bottom,height;transition-duration:var(--wy-transition-duration, .2s);transition-timing-function:var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))}.wy-toast.wy-fade:not(.wy-show){opacity:0;min-height:0;height:0;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;pointer-events:none}.wy-toast-action{position:sticky;top:calc(4.5 * var(--wy-size, 1rem));bottom:calc(4.5 * var(--wy-size, 1rem));z-index:990;background-color:var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-on-primary, var(--wy-white, #ffffff));padding:calc(.5 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:calc(.5 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));width:max-content;min-height:0;max-width:calc(100% - 3 * var(--wy-size, 1rem));height:auto;align-self:center;text-align:center;box-shadow:none}.wy-toast-primary{background:var(--wy-on-primary-container, var(--wy-primary-10, #001d32));color:var(--wy-primary-container, var(--wy-primary-90, #cde5ff))}.wy-placeholder{cursor:wait;color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));background:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));opacity:.5;animation:wy-placeholder-glow 2s ease-in-out infinite}@keyframes wy-placeholder-glow{50%{opacity:.2}}.wy-meeting .wy-item-title{font-weight:700}.wy-meeting .wy-item-text{font-size:var(--wy-font-size, var(--wy-size, 1em))}.wy-meeting.wy-disabled .wy-item-title{font-weight:400}.wy-dragging:after{content:attr(data-drag-title);background-color:#ffffff80;display:flex;justify-content:center;align-items:center;border:calc(.125 * var(--wy-size, 1rem)) dashed var(--wy-primary, var(--wy-primary-40, #006399));font-weight:var(--wy-font-weight-bold, bolder);z-index:10000;position:absolute;top:0;left:0;bottom:0;right:0}.wy-message-editor-top{background-color:var(--wy-component-background-color);color:var(--wy-component-color)}@supports (position: sticky){.wy-message-editor-top{position:sticky;top:0;z-index:1020}}.wy-message-editor-bottom{background-color:var(--wy-component-background-color);color:var(--wy-component-color)}@supports (position: sticky){.wy-message-editor-bottom{position:sticky;bottom:0;z-index:1020}}.wy-message-form .wy-spinner{display:none}.wy-message-form.wy-uploading .wy-spinner{display:block}.wy-message-form.wy-uploading [data-icon=plus]{display:none}.wy-message-form .wy-picker-list:not(:empty){border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-message-editor-inputs{display:flex;flex-direction:row;align-items:flex-end;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));min-height:calc(3.5 * var(--wy-size, 1rem));gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-message-editor-buttons{flex:1 0 auto}.wy-message-editor-text{flex:1 1 100%;display:flex;flex-direction:column}.wy-message-editor-mention,.wy-message-editor-link{background:#00f;color:#fff}.wy-message-editor .cm-editor,.wy-message-editor-grow:after,.wy-message-editor-grow>textarea,.wy-message-editor-textfield{flex:1 1 100%;max-height:11.25em;background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-input-filled-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem)))));border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-background, var(--wy-neutral-99, #fcfcff))}.wy-message-editor .cm-editor:focus,.wy-message-editor-grow:focus:after,.wy-message-editor-grow>textarea:focus,.wy-message-editor-textfield:focus{border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-message-editor .cm-editor .cm-content,.wy-message-editor-textcontent{font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)), inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));min-height:calc(calc(2.5 * var(--wy-size, 1rem)) - var(--wy-input-border-width, var(--wy-border, 1px)));line-height:calc(1.5 * var(--wy-size, 1rem))}.wy-message-editor-grow{display:grid}.wy-message-editor-grow:after,.wy-message-editor-grow>textarea{grid-area:1/1/2/2}.wy-message-editor-grow:after{content:attr(data-replicated-value) " ";white-space:pre-wrap;visibility:hidden}.wy-message-editor-grow>textarea{resize:none;overflow:hidden}.wy-message-editor .cm-scroller{font-family:unset;line-height:1.5}.wy-message-editor .cm-widgetBuffer{vertical-align:unset}.wy-message-editor .cm-placeholder{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-message-editor .cm-content{caret-color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e))}.wy-message-editor .cm-editor.cm-focused{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));outline:0}.wy-message-editor .cm-editor .cm-scroller{overflow:auto}.wy-message-editor .wy-is-invalid+[data-editor-target] .cm-editor,.wy-message-editor .wy-is-invalid .cm-editor{border-color:var(--wy-error, var(--wy-error-40, #ba1824))!important}.wy-message-editor .cm-tooltip.cm-tooltip-autocomplete>ul{font-family:unset;max-height:calc(15 * var(--wy-size, 1rem))}.wy-message-editor .cm-tooltip.cm-tooltip-autocomplete>ul>li{padding:0}.wy-message-editor .cm-tooltip{border:none;background-clip:padding-box;background-color:var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;z-index:1000}.wy-message-editor .cm-tooltip-autocomplete ul li[aria-selected]{background:var(--wy-primary-container, var(--wy-primary-90, #cde5ff));color:unset}.wy-message-editor .cm-tooltip-autocomplete .cm-completionLabel{display:none}.wy-message-editor .cm-tooltip-autocomplete .wy-item-hover:hover,.wy-message-editor .cm-tooltip-autocomplete .wy-item-hover:focus{background:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}.wy-chat-conversation{overflow-anchor:none;display:flex;flex-direction:column;flex:1 0 min-content;height:100%;width:100%;min-height:0;min-width:0}.wy-truncated-text-and-icon{display:flex;align-items:center;gap:.25rem}.wy-truncated-text-and-icon :first-child{line-height:var(--wy-line-height, 1.5);flex:0 1 auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wy-truncated-text-and-icon :last-child:not(:first-child){flex:0 0 auto;white-space:nowrap}.wy-filename{font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-filename .wy-truncated-text-and-icon{justify-content:center}.wy-files{position:relative;display:flex;flex-direction:column;flex:1;min-height:0;container-type:inline-size}@supports (position: sticky){wy-files-appbar{position:sticky;top:0;z-index:1020}}.wy-table-files thead{text-align:left;display:none}@container (inline-size >= 576px){.wy-table-files thead{display:table-header-group}}.wy-table-files tr[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-table-files tr>:nth-child(2){width:100%}.wy-table-files tr>:nth-child(2) td{padding:0 var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))))}.wy-table-files tr>:nth-child(3){width:calc(7 * var(--wy-size, 1rem));display:none}@container (inline-size >= 768px){.wy-table-files tr>:nth-child(3){display:table-cell}}.wy-table-files tr>:nth-child(3){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-table-files tr>:nth-child(4){width:calc(7.5 * var(--wy-size, 1rem));text-align:right;display:none}@container (inline-size >= 768px){.wy-table-files tr>:nth-child(4){display:table-cell}}.wy-table-files tr>:nth-child(4){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-table-files tr>:nth-child(5){width:calc(7 * var(--wy-size, 1rem));text-align:right;display:none}@container (inline-size >= 576px){.wy-table-files tr>:nth-child(5){display:table-cell}}.wy-table-files tr>:nth-child(5){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-sidebar{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background:var(--wy-component-background-color);color:var(--wy-component-color);min-width:0;min-height:0;flex-grow:0;flex-shrink:0;flex-basis:calc(18 * var(--wy-size, 1rem));z-index:10;display:flex;flex-direction:column;transition:flex-basis var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));position:relative;order:9999}.wy-sidebar>*{transition:opacity var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) - var(--wy-transition-duration-fast, .1s));min-width:calc(18 * var(--wy-size, 1rem))}.wy-sidebar[hidden]{display:flex!important;flex-basis:0}.wy-sidebar[hidden]>*{transition:opacity var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));opacity:0}@media (min-width: 768px){.wy-sidebar>*{min-width:calc(18 * var(--wy-size, 1rem))}.wy-sidebar .wy-sidebar-handle{display:none}}@media (max-width: 767.98px){.wy-sidebar{transition:flex-basis var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),margin-top var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));border-top-left-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-top-right-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));flex-basis:50vh}.wy-sidebar:not([hidden]){margin-top:calc(-1 * var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-sidebar:not([hidden]).wy-maximized{flex-basis:calc(100% - var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem))))) * .5);margin-top:calc(-50% + var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem))))) * 2.5 - var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-sidebar:not([hidden]).wy-maximized~* .wy-nav-prev,.wy-sidebar:not([hidden]).wy-maximized~* .wy-nav-next{display:none}.wy-sidebar>*{min-height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))))}}.wy-sidebar-handle{width:calc(4 * var(--wy-size, 1rem));background-clip:content-box;background-color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));height:calc(1 * var(--wy-size, 1rem));border:calc(.375 * var(--wy-size, 1rem)) solid transparent;position:absolute;top:0;z-index:2;left:50%;margin-left:calc(-2 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));cursor:pointer}.wy-table{table-layout:fixed;width:100%;vertical-align:top;border-collapse:collapse}.wy-table th,.wy-table td{background-color:var(--wy-component-background-color);padding:var(--wy-table-cell-padding-y, var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 -1px 0 0 inset;line-height:1;vertical-align:middle;height:calc(2.5 * var(--wy-size, 1rem))}.wy-table th:first-child,.wy-table td:first-child{padding-left:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-table th:last-child,.wy-table td:last-child{padding-right:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-table>tbody{vertical-align:inherit}.wy-table>thead{vertical-align:bottom}.wy-table .wy-table-cell-icon{vertical-align:middle;text-align:center;padding:calc(var(--wy-table-cell-padding-y, var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5) var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));width:calc(calc(2.5 * var(--wy-size, 1rem)) + var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))) * 2);font-size:var(--wy-font-size, var(--wy-size, 1em));font-weight:var(--wy-font-weight, unset);text-transform:none;letter-spacing:normal}.wy-table .wy-table-cell-text{width:100%}.wy-table .wy-table-cell-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-table-hover>tbody>tr:hover>*{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));color:var(--wy-component-color);cursor:pointer}.wy-table-row-trashed th,.wy-table-row-trashed td{text-decoration:line-through}.wy-table-row-trashed th:not(:last-child)>*,.wy-table-row-trashed td:not(:last-child)>*{opacity:var(--wy-opacity-disabled, 38%)}.wy-table-row-trashed th>a,.wy-table-row-trashed td>a{color:var(--wy-component-color)}.wy-table-row-trashed:hover th,.wy-table-row-trashed:hover td{opacity:1}.wy-table-no-result{text-align:center;padding:calc(1 * var(--wy-size, 1rem))}.wy-table-sort-link{display:inline-flex;align-items:center;color:var(--wy-link, var(--wy-primary-40, #006399));cursor:pointer}.wy-posts{display:flex;flex-direction:column;gap:calc(1 * var(--wy-size, 1rem))}.wy-post{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;position:relative;--wy-component-border-radius: var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-radius:var(--wy-component-border-radius)}.wy-post[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-post .wy-image-grid{border-radius:0}.wy-post wy-comment-list{border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-post-body{display:flex;flex-direction:column;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-body:empty{display:none}.wy-post-footer{display:flex;align-items:center;justify-content:space-between;margin:0 calc(.75 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) calc(.75 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))}.wy-post-footer .wy-meta{margin-right:calc(.5 * var(--wy-size, 1rem))}.wy-post-comments:not(:empty){padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-post-dragging:after{content:attr(data-drag-title,"Drop files here to upload.");background-color:#ffffff80;display:flex;justify-content:center;align-items:center;border:calc(.125 * var(--wy-size, 1rem)) dashed var(--wy-primary, var(--wy-primary-40, #006399));font-weight:var(--wy-font-weight-bold, bolder);z-index:10000;position:absolute;top:0;left:0;bottom:0;right:0}.wy-poll{flex:1 1 100%;min-width:0;display:flex;flex-direction:column;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-poll-form{background:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-poll-form:empty{display:none}.wy-poll-option{overflow:hidden;position:relative;background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));min-height:calc(2.5 * var(--wy-size, 1rem));cursor:pointer}.wy-poll-option .wy-progress{position:absolute;top:0;left:0;bottom:0;background-color:var(--wy-surface-5, var(--wy-surface-5-light, #dce2ea))}.wy-poll-option>:not(.wy-progress){z-index:1}.wy-embed{display:flex;flex-direction:column;word-wrap:break-word;border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));clip-path:border-box;overflow:hidden}.wy-embed-photo a{display:flex}.wy-embed-photo img{width:100%;height:auto}.wy-embed-photo-sm a{padding:0 calc(1 * var(--wy-size, 1rem))}.wy-embed-photo-sm img{display:block;margin:0 auto;width:auto;max-width:100%;border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-embed-video{position:relative;display:block;width:100%;padding:0;overflow:hidden}.wy-embed-video:before{display:block;content:"";padding-top:56.25%}.wy-embed-video iframe,.wy-embed-video embed,.wy-embed-video object,.wy-embed-video video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.wy-embed-caption{--wy-component-background-color: var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);padding:calc(.5 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));position:relative}.wy-embed-link{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));text-transform:uppercase;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-embed-link:after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:""}.wy-embed-title{font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, bolder));margin-bottom:calc(.5 * var(--wy-size, 1rem))}.wy-embed-description{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-embed-preview a[target=_blank]{pointer-events:none}.wy-embed-preview .wy-embed{border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));display:none}.wy-embed-preview .wy-embed:first-child{display:block}.wy-embed-preview .wy-embed-caption{border-bottom-left-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-bottom-right-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)))}.wy-embed-preview .wy-embed-actions{display:flex}.wy-embed-actions{display:none;justify-content:space-between;padding:calc(.5 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem))}.wy-embed-cycle{visibility:hidden}.wy-embed-show-cycle .wy-embed-cycle{visibility:visible}.wy-post-editor{padding:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-editor.wy-uploading .wy-icon-active-stack>:first-child{opacity:0}.wy-post-editor.wy-uploading .wy-icon-active-stack>:last-child{opacity:1}.wy-post-editor .wy-picker-list:not(:empty){margin-top:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-post-editor-inputs{display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;flex-wrap:wrap;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-editor-buttons{display:flex;flex-direction:row;align-items:flex-end;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));flex:1 0 auto}.wy-post-editor-text{flex:1 1 100%;display:flex;flex-direction:column}.wy-post-editor-mention,.wy-post-editor-link{background:#00f;color:#fff}.wy-post-editor .cm-editor,.wy-post-editor-grow:after,.wy-post-editor-grow>textarea,.wy-post-editor-textfield{flex:1 1 100%;max-height:11.25em;min-height:4em;background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));caret-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-post-editor .cm-editor:focus,.wy-post-editor-grow:focus:after,.wy-post-editor-grow>textarea:focus,.wy-post-editor-textfield:focus{border-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-post-editor .cm-editor .cm-content,.wy-post-editor-textcontent{font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-post-editor-grow{display:grid}.wy-post-editor-grow:after,.wy-post-editor-grow>textarea{grid-area:1/1/2/2}.wy-post-editor-grow:after{content:attr(data-replicated-value) " ";white-space:pre-wrap;visibility:hidden}.wy-post-editor-grow>textarea{resize:none;overflow:hidden}.wy-post-editor .cm-scroller{font-family:unset;line-height:1.5}.wy-post-editor .cm-widgetBuffer{vertical-align:unset}.wy-post-editor .cm-placeholder{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-post-editor .cm-content{caret-color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e))}.wy-post-editor .cm-editor.cm-focused{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-primary, var(--wy-primary-40, #006399));outline:0}.wy-post-editor .cm-editor .cm-scroller{overflow:auto}.wy-post-editor .wy-is-invalid+[data-editor-target] .cm-editor,.wy-post-editor .wy-is-invalid .cm-editor{border-color:var(--wy-error, var(--wy-error-40, #ba1824))!important}.wy-post-editor .cm-tooltip.cm-tooltip-autocomplete>ul{font-family:unset;max-height:calc(15 * var(--wy-size, 1rem))}.wy-post-editor .cm-tooltip.cm-tooltip-autocomplete>ul>li{padding:0}.wy-post-editor .cm-tooltip{border:none;background-clip:padding-box;background-color:var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;z-index:1000}.wy-post-editor .cm-tooltip-autocomplete ul li[aria-selected]{background:var(--wy-primary-container, var(--wy-primary-90, #cde5ff));color:unset}.wy-post-editor .cm-tooltip-autocomplete .cm-completionLabel{display:none}.wy-post-editor .cm-tooltip-autocomplete .wy-item-hover:hover,.wy-post-editor .cm-tooltip-autocomplete .wy-item-hover:focus{background:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}.wy-comments{display:flex;flex-direction:column;gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-comment{--wy-component-background-color: var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-border-radius: var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-radius:var(--wy-component-border-radius);background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));position:relative}.wy-comment[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-comment-body{flex:1 0 auto;z-index:1}.wy-comment-content{padding:0 var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));display:flex;flex-direction:column;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-comment-editor .wy-spinner{display:none}.wy-comment-editor.wy-uploading .wy-spinner{display:block}.wy-comment-editor.wy-uploading [data-icon=plus]{display:none}.wy-comment-editor .wy-picker-list:not(:empty){border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-comment-editor-bottom{position:sticky;bottom:0;z-index:999;background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-comment-editor-inputs{display:flex;flex-direction:row;align-items:flex-end;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));min-height:calc(3.5 * var(--wy-size, 1rem));gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-comment-editor-buttons{flex:1 0 auto}.wy-comment-editor-text{flex:1 1 100%;display:flex;flex-direction:column}.wy-comment-editor-mention,.wy-comment-editor-link{background:#00f;color:#fff}.wy-comment-editor .cm-editor,.wy-comment-editor-grow:after,.wy-comment-editor-grow>textarea,.wy-comment-editor-textfield{flex:1 1 100%;max-height:calc(11.25 * var(--wy-size, 1rem));background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));border-radius:calc(1.25 * var(--wy-size, 1rem));border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-comment-editor .cm-editor:focus,.wy-comment-editor-grow:focus:after,.wy-comment-editor-grow>textarea:focus,.wy-comment-editor-textfield:focus{border-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-comment-editor .cm-editor .cm-content,.wy-comment-editor-textcontent{font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-comment-editor-grow{display:grid}.wy-comment-editor-grow:after,.wy-comment-editor-grow>textarea{grid-area:1/1/2/2}.wy-comment-editor-grow:after{content:attr(data-replicated-value) " ";white-space:pre-wrap;visibility:hidden}.wy-comment-editor-grow>textarea{resize:none;overflow:hidden}.wy-comment-editor{position:relative}.wy-comment-editor .cm-scroller{font-family:unset;line-height:1.5}.wy-comment-editor .cm-widgetBuffer{vertical-align:unset}.wy-comment-editor .cm-placeholder{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-comment-editor .cm-content{caret-color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e))}.wy-comment-editor .cm-editor.cm-focused{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-primary, var(--wy-primary-40, #006399));outline:0}.wy-comment-editor .cm-editor .cm-scroller{overflow:auto}.wy-comment-editor .wy-is-invalid+.cm-editor,.wy-comment-editor .wy-is-invalid .cm-editor{border-color:var(--wy-error, var(--wy-error-40, #ba1824))!important}.wy-comment-editor .cm-tooltip.cm-tooltip-autocomplete>ul{font-family:unset;max-height:calc(15 * var(--wy-size, 1rem))}.wy-comment-editor .cm-tooltip.cm-tooltip-autocomplete>ul>li{padding:0}.wy-comment-editor .cm-tooltip{border:none;background-clip:padding-box;background-color:var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;z-index:1000}.wy-comment-editor .cm-tooltip-autocomplete ul li[aria-selected]{background:var(--wy-primary-container, var(--wy-primary-90, #cde5ff));color:unset}.wy-comment-editor .cm-tooltip-autocomplete .cm-completionLabel{display:none}.wy-comment-editor .cm-tooltip-autocomplete .wy-item-hover:hover,.wy-comment-editor .cm-tooltip-autocomplete .wy-item-hover:focus{background:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}.wy-badge{display:inline-block;padding:.35em .65em;font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));font-weight:var(--wy-font-weight-bold, bolder);line-height:1;color:var(--wy-on-primary, var(--wy-white, #ffffff));text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));background-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-badge:empty{display:none}.wy-button-badge{position:absolute;right:0;top:0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5);padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));min-width:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));max-width:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) * 3 + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) * 2);height:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));line-height:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) - var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));display:block;text-align:center}.wy-button-badge{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-button-badge:empty{display:none}.wy-button-dot{position:absolute;right:0;top:0;content-visibility:hidden;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));margin:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));line-height:0;min-width:0;height:0}.wy-button-dot:empty{display:none}[part~=wy-tabs]{display:flex;overflow-y:hidden;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-tabs]{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}[part~=wy-tabs]{scrollbar-width:thin;scrollbar-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) transparent}[part~=wy-tabs]::-webkit-scrollbar{height:.375rem;width:.375rem;background:transparent;z-index:999}[part~=wy-tabs]::-webkit-scrollbar-track{background:transparent}[part~=wy-tabs]::-webkit-scrollbar-thumb{background-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));opacity:75%;border:0 solid transparent;border-radius:0;background-clip:padding-box}[part~=wy-tabs]::-webkit-scrollbar-thumb:hover{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:75%}[part~=wy-tabs]::-webkit-scrollbar-thumb:window-inactive{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:50%}[part~=wy-tab]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-background-color: transparent;color:var(--wy-component-color);background:var(--wy-component-background-color);border:none;border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));position:relative;text-align:center;text-decoration:none;cursor:pointer;-webkit-user-select:none;user-select:none}[part~=wy-tab] .wy-tab-icon{position:relative;padding:calc(.25 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex}[part~=wy-tab] .wy-tab-icon:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-tab]:hover .wy-tab-icon:before{opacity:8%}[part~=wy-tab]:focus .wy-tab-icon:before,[part~=wy-tab]:active .wy-tab-icon:before,[part~=wy-tab].wy-active .wy-tab-icon:before{opacity:12%}[part~=wy-tab] .wy-tab-label{font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));font-weight:var(--wy-font-weight, unset)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]{padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5);margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) auto;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]:before{margin:calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * 0)}.wy-conversations{position:relative}.wy-conversation{display:flex;position:relative}.wy-conversation .wy-item-title{font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset));font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em))}.wy-conversation.wy-unread .wy-item-title{font-weight:var(--wy-font-weight-bold, bolder)}.wy-conversation.wy-unread .wy-item-text,.wy-conversation.wy-unread .wy-meta{color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));font-weight:var(--wy-font-weight-bold, bolder)}.wy-conversation .wy-item-text .wy-typing-show{font-weight:var(--wy-font-weight, unset)}.wy-conversation .wy-item-text .wy-typing-show{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`, rt = Pt(J2);
var tx = Object.defineProperty, ex = Object.getOwnPropertyDescriptor, qt = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? ex(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && tx(t, i, n), n;
}, "__decorateClass$1a");
function $m(o) {
  return o != null && o !== !1;
}
c($m, "acceptedValue");
var Ls;
let Rt = (Ls = class extends K {
  constructor() {
    super(), this.provider = !1, this.childElementCount && (this.provider = !0), this.weavyContext ?? (this.weavyContext = new Go({ host: this.provider ? this : void 0 }));
  }
  /**
   * The semver version of the package.
   */
  get version() {
    return Go.version;
  }
  /**
   * The Weavy source name; package name.
   */
  get sourceName() {
    return Go.sourceName;
  }
  willUpdate(t) {
    if (super.willUpdate(t), this.weavyContext) {
      const i = {};
      Array.from(t.keys()).forEach((r) => {
        r !== "weavyContext" && ($m(this[r]) || $m(t.get(r))) && Object.assign(i, { [r]: this[r] });
      }), Object.assign(this.weavyContext, i);
    }
  }
  render() {
    return y` <slot></slot> `;
  }
}, c(Ls, "WyContext"), Ls);
Rt.styles = [
  rt,
  ki,
  vt`
      :host {
        display: contents;
      }
    `
];
qt([
  v({ attribute: !0, type: Boolean })
], Rt.prototype, "provider", 2);
qt([
  v({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ c((o) => Cd(o), "fromAttribute")
    }
  })
], Rt.prototype, "cloudFilePickerUrl", 2);
qt([
  v({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ c((o) => Cd(o), "fromAttribute")
    }
  })
], Rt.prototype, "confluenceAuthenticationUrl", 2);
qt([
  v({ attribute: !0 })
], Rt.prototype, "confluenceProductName", 2);
qt([
  v({ type: Boolean })
], Rt.prototype, "disableEnvironmentImports", 2);
qt([
  v({ attribute: !0 })
], Rt.prototype, "locale", 2);
qt([
  v({ attribute: !0, type: Array })
], Rt.prototype, "locales", 2);
qt([
  v({ attribute: !0, type: Number })
], Rt.prototype, "gcTime", 2);
qt([
  v({ attribute: !0 })
], Rt.prototype, "modalParent", 2);
qt([
  v({ attribute: !0, type: Array })
], Rt.prototype, "reactions", 2);
qt([
  v({ type: Boolean })
], Rt.prototype, "notificationEvents", 2);
qt([
  v({ type: Boolean })
], Rt.prototype, "notificationToasts", 2);
qt([
  v({ attribute: !0 })
], Rt.prototype, "scrollBehavior", 2);
qt([
  v({ attribute: !0, type: Number })
], Rt.prototype, "staleTime", 2);
qt([
  v({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ c((o) => X2(o), "fromAttribute")
    }
  })
], Rt.prototype, "tokenFactory", 2);
qt([
  v({ attribute: !0, type: Number })
], Rt.prototype, "tokenFactoryRetryDelay", 2);
qt([
  v({ attribute: !0, type: Number })
], Rt.prototype, "tokenFactoryTimeout", 2);
qt([
  v({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ c((o) => Cd(o), "fromAttribute")
    }
  })
], Rt.prototype, "tokenUrl", 2);
qt([
  v({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ c((o) => Cd(o), "fromAttribute")
    }
  })
], Rt.prototype, "url", 2);
qt([
  v({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ c((o) => Cd(o), "fromAttribute")
    }
  })
], Rt.prototype, "zoomAuthenticationUrl", 2);
qt([
  W()
], Rt.prototype, "weavyContext", 2);
Rt = qt([
  Q("wy-context")
], Rt);
const of = class of {
  constructor(t, i) {
    this.firstUpdate = !0, this.styles = [], t.addController(this), this.host = t, i && (this.styles = i);
  }
  checkThemeUpdate() {
    const t = this.themeColor || Qp(this.host) || Kp();
    if (t && t !== this._resolvedThemeColor) {
      this._resolvedThemeColor = t, console.log("Configuring theme", this._resolvedThemeColor);
      const i = H2(this._resolvedThemeColor).join(""), r = vt`
        :host {
          ${Pt(i)};
        }
      `, n = this.host.renderRoot;
      ub(n, [...this.styles, r]);
    }
  }
  hostUpdate() {
    this.firstUpdate && (this.checkThemeUpdate(), this.firstUpdate = !1);
  }
  hostConnected() {
    this.cssObserverDisconnect = F2(this.host, () => this.checkThemeUpdate()), this.metaObserverDisconnect = N2(() => this.checkThemeUpdate());
  }
  hostDisconnected() {
    var t, i;
    (t = this.cssObserverDisconnect) == null || t.call(this), (i = this.metaObserverDisconnect) == null || i.call(this);
  }
};
c(of, "ThemeController");
let hr = of;
var Kl;
const sf = class sf {
  //notificationsToasts: NotificationsToastsType = "browser";
  // PROPERTY INIT
  constructor(t) {
    T(this, Kl);
    this.notifications = "button-list", this.notificationsBadge = "count", E(this, Kl, t), Object.keys(this).forEach((r) => {
      r in t && Object.assign(this, { [r]: t[r] });
    });
  }
  /**
   * Provides a reference to the host.
   */
  get component() {
    return u(this, Kl);
  }
};
Kl = new WeakMap(), c(sf, "BlockSettings");
let lh = sf;
const zg = Symbol.for("weavy-block-settings"), Rg = Symbol.for("weavy-server-configuration");
var Vc = /* @__PURE__ */ ((o) => (o.Chat = "chat", o.Comments = "comments", o.Feeds = "feeds", o.Files = "files", o.Messenger = "messenger", o))(Vc || {});
const dp = {
  attachments: "attachments",
  cloud_files: "cloudFiles",
  comments: "comments",
  confluence: "confluence",
  embeds: "embeds",
  meetings: "meetings",
  mentions: "mentions",
  polls: "polls",
  previews: "previews",
  reactions: "reactions",
  receipts: "receipts",
  thumbnails: "thumbnails",
  typing: "typing",
  versions: "versions",
  web_dav: "webDAV"
}, Em = {
  attachments: "noAttachments",
  cloud_files: "noCloudFiles",
  comments: "noComments",
  confluence: "noConfluence",
  embeds: "noEmbeds",
  meetings: "noMeetings",
  mentions: "noMentions",
  polls: "noPolls",
  previews: "noPreviews",
  reactions: "noReactions",
  receipts: "noReceipts",
  thumbnails: "noThumbnails",
  typing: "noTyping",
  versions: "noVersions",
  web_dav: "noWebDAV"
}, af = class af {
  get result() {
    return this._result && this.observer ? this.observer.trackResult(this._result) : void 0;
  }
  constructor(t) {
    t.addController(this), this.host = t, this.setContext();
  }
  async setContext() {
    this.whenContext = new Promise((t) => this.resolveContext = t), await Fc(this.host), this.context = new cn(this.host, { context: ne, subscribe: !0 });
  }
  hostUpdate() {
    var t, i;
    (t = this.context) != null && t.value && ((i = this.resolveContext) == null || i.call(this));
  }
  async trackQuery(t, i = !0, r) {
    var s, a, l;
    if (r || (await this.whenContext, r = (a = (s = this.context) == null ? void 0 : s.value) == null ? void 0 : a.queryClient), !r)
      throw new Error("No QueryClient provided");
    (l = this.observerUnsubscribe) == null || l.call(this);
    const n = new $g(r, t);
    this.observer = n, this.observerSubscribe(i);
  }
  observerSubscribe(t = !0) {
    this.observer && (t ? this._result = this.observer.getOptimisticResult(this.observer.options) : this._result = void 0, this.observerUnsubscribe = this.observer.subscribe(() => {
      if (this.observer) {
        const i = xd(this.result, this.observer.getCurrentResult());
        i !== this._result && (this._result = i, this.host.requestUpdate());
      }
    }), this.observer.updateResult(), this.host.requestUpdate());
  }
  untrackQuery() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this), this.observerUnsubscribe = void 0, this._result = void 0, this.observer = void 0, this.host.requestUpdate();
  }
  hostConnected() {
    this.observerSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this);
  }
};
c(af, "QueryController");
let xe = af;
function Ge(o, t, i, r, n, s = "GET") {
  return {
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: t,
    queryFn: /* @__PURE__ */ c(async () => {
      const a = await o.post(i || "/api/" + t.join("/"), s, n);
      if (a.ok)
        return await a.json();
      throw new Error(`Error calling ${i || "/api/" + t.join("/")}`);
    }, "queryFn"),
    ...r
  };
}
c(Ge, "getApiOptions");
async function ix(o, t, i, r, n, s = "GET", a = !1) {
  const l = o.queryClient, d = Ge(o, t, i, r, n, s);
  return a ? await l.fetchQuery(d) : await l.ensureQueryData(d);
}
c(ix, "getApi");
function rx(o, t, i, r) {
  return i === gi.Unknown ? Ge(o, ["apps", t]) : Ge(o, ["apps", t], void 0, void 0, JSON.stringify({ type: i, ...r }), "PUT");
}
c(rx, "getAppOptions");
function Ig(o, t) {
  const i = o.queryClient, r = ["apps", t.uid];
  return {
    mutationFn: /* @__PURE__ */ c(async ({ subscribe: s }) => {
      if (t.id >= 1) {
        const a = await o.post(
          `/api/apps/${t.id}/${s ? "subscribe" : "unsubscribe"}`,
          "POST",
          ""
        );
        if (!a.ok)
          throw await a.json();
      } else
        throw new Error(`Could not subscribe to app ${t.uid}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => {
      let a;
      return i.setQueryData(r, (d) => (a = d.is_subscribed, { ...d, is_subscribed: s.subscribe })), {
        previousSubscribe: a,
        subscribe: s.subscribe
      };
    }, "onMutate"),
    onError(s, a, l) {
      l && l.previousSubscribe !== void 0 && i.setQueryData(r, (d) => ({ ...d, is_subscribed: l == null ? void 0 : l.previousSubscribe }));
    }
  };
}
c(Ig, "getAppSubscribeMutationOptions");
const kw = Symbol.for("weavy-app"), su = Symbol.for("weavy-user"), $w = Symbol.for("weavy-product-features"), Og = Symbol.for("weavy-link");
var nx = Object.defineProperty, ox = Object.getOwnPropertyDescriptor, Ct = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? ox(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && nx(t, i, n), n;
}, "__decorateClass$19");
const wo = /* @__PURE__ */ c((o) => {
  var i, r, n, s, a, l, d, h, w, m, f, b, g, $, O, k, S, _;
  const V = class V extends o {
    // PROPERTY INIT
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...z) {
      super(...z);
      // PROMISES
      // TODO: Switch to Promise.withResolvers() when allowed by typescript
      T(this, i);
      T(this, r);
      T(this, n);
      T(this, s);
      T(this, a);
      T(this, l);
      T(this, d);
      T(this, h);
      T(this, w);
      T(this, m);
      T(this, f);
      T(this, b);
      T(this, g);
      T(this, $);
      T(this, O);
      T(this, k);
      T(this, S);
      T(this, _);
      this.configuration = {}, this.storage = Mb("localStorage"), this.storageLinkHandler = (F) => {
        F.storageArea === this.storage && F.key === "wy-link" && F.newValue && this.readStorageLink();
      }, this.linkEventHandler = async (F) => {
        F.defaultPrevented || (this.link && this.link.id === F.detail.id && (this.link = void 0, await this.updateComplete), this.link = F.detail, this.link || this.provideStorageLink(F.detail));
      }, this.notifications = "button-list", this.notificationsBadge = "count", this.noAttachments = !1, this.noCloudFiles = !1, this.noComments = !1, this.noConfluence = !1, this.noEmbeds = !1, this.noMeetings = !1, this.noMentions = !1, this.noPolls = !1, this.noPreviews = !1, this.noReactions = !1, this.noReceipts = !1, this.noThumbnails = !1, this.noTyping = !1, this.noVersions = !1, this.noWebDAV = !1, E(this, r, new Promise((F) => {
        E(this, i, F);
      })), E(this, s, new Promise((F) => {
        E(this, n, F);
      })), E(this, l, new Promise((F) => {
        E(this, a, F);
      })), E(this, h, new Promise((F) => {
        E(this, d, F);
      })), E(this, m, new Promise((F) => {
        E(this, w, F);
      })), E(this, b, new Promise((F) => {
        E(this, f, F);
      })), E(this, $, new Promise((F) => {
        E(this, g, F);
      })), E(this, O, new xe(this)), E(this, k, new xe(this)), E(this, S, new xe(this)), E(this, _, new xe(this)), this.settings = new lh(this), this.contexts = {
        app: this.app,
        configuration: this.configuration,
        hasFeatures: this.hasFeatures,
        link: this.link,
        settings: this.settings,
        user: this.user,
        weavyContext: this.weavyContext
      };
    }
    get link() {
      return this._link;
    }
    set link(z) {
      var A, N;
      const F = this._link;
      // Messenger conversation
      z && z.app && !this.contextualType && ((A = this.conversationTypes) != null && A.includes(z.app.type)) ? (this._link = z, this.requestUpdate("link", F)) : /* Contextual app not configured yet */ z && z.app && !this.uid && this.contextualType && this.contextualType !== gi.Unknown ? this.whenApp().then((G) => {
        var et;
        ((et = z == null ? void 0 : z.app) == null ? void 0 : et.id) === G.id ? (this._link = z, this.requestUpdate("link", F)) : (console.error("Incorrect app uid or id in provided link", z), this._link = void 0, this.requestUpdate("link", F));
      }) : /* Normal contextual app */ z && z.app && this.contextualType !== gi.Unknown && this.uid && ((N = z.app) == null ? void 0 : N.uid) === this.uid ? (this._link = z, this.requestUpdate("link", F)) : (this._link = void 0, this.requestUpdate("link", F));
    }
    /**
     * Shares a link with other blocks that may consume it automatically.
     *
     * @param {EntityType} link - The entity to provide
     */
    provideStorageLink(z) {
      var F;
      (F = this.storage) == null || F.setItem("wy-link", btoa(JSON.stringify(z)));
    }
    /**
     * Reads a link from storage provides it in the .link property/context.
     */
    readStorageLink() {
      if (!this.storage) {
        console.error("Storage not available");
        return;
      }
      const z = this.storage.getItem("wy-link");
      if (z)
        try {
          const F = JSON.parse(atob(z));
          F && (this.link = F);
        } catch (F) {
          console.error("Error parsing link", F);
        }
    }
    /**
     * Consumes a link in the storage. Make sure to consume it after it has been used.
     */
    consumeStorageLink() {
      var z;
      (z = this.storage) == null || z.removeItem("wy-link");
    }
    set features(z) {
      if (console.warn('Setting a "features" object is deprecated, use feature-disabling properties/attributes instead.'), z)
        for (const F in dp) {
          const A = dp[F];
          if (A in z) {
            const N = Em[F], G = z[A] === !1;
            console.warn(`Using "${N}" from deprecated "features.${A}".`), this[N] = G;
          }
        }
    }
    get features() {
      return this.hasFeatures;
    }
    set name(z) {
      this._initialAppName ?? (this._initialAppName = z), this._appName = z;
    }
    get name() {
      return this._appName;
    }
    async whenApp() {
      return await u(this, r);
    }
    async whenConfiguration() {
      return await u(this, s);
    }
    async whenHasFeatures() {
      return await u(this, l);
    }
    async whenLink() {
      return await u(this, h);
    }
    async whenSettings() {
      return await u(this, m);
    }
    async whenUser() {
      return await u(this, b);
    }
    async whenWeavyContext() {
      return await u(this, $);
    }
    connectedCallback() {
      super.connectedCallback(), document.addEventListener("wy:link", this.linkEventHandler), window.addEventListener("storage", this.storageLinkHandler), this.app && this.requestUpdate("app"), this.configuration && this.requestUpdate("configuration"), this.hasFeatures && this.requestUpdate("hasFeatures"), this.link && this.requestUpdate("link"), this.settings && this.requestUpdate("settings"), this.user && this.requestUpdate("user"), this.weavyContext && this.requestUpdate("weavyContext");
    }
    disconnectedCallback() {
      super.disconnectedCallback(), document.removeEventListener("wy:link", this.linkEventHandler), window.removeEventListener("storage", this.storageLinkHandler);
    }
    async scheduleUpdate() {
      await Fc(this), super.scheduleUpdate();
    }
    willUpdate(z) {
      var A, N, G, et, lt, at, Ae, ve, Ot, Et, oe, nt, xt, ui, pi, Ki, Pi, xo, Gi, ze, $r, At;
      if (super.willUpdate(z), this.weavyContextConsumer ?? (this.weavyContextConsumer = new cn(this, { context: ne, subscribe: !0 })), (A = this.weavyContextConsumer) != null && A.value && this.weavyContext !== ((N = this.weavyContextConsumer) == null ? void 0 : N.value) && (this.weavyContext = (G = this.weavyContextConsumer) == null ? void 0 : G.value), Object.keys(this.settings).find((zt) => z.has(zt)) && (this.settings = new lh(this)), z.has("weavyContext") && this.weavyContext && (u(this, k).trackQuery(
        Ge(this.weavyContext, ["configuration"])
      ), u(this, _).trackQuery(Ge(this.weavyContext, ["user"]))), !((et = u(this, k).result) != null && et.isPending) && ((lt = u(this, k).result) != null && lt.data) && (this.configuration = (at = u(this, k).result) == null ? void 0 : at.data), (Ae = u(this, _).result) != null && Ae.isPending || this.user && u(this, _).result.data && this.user.id !== u(this, _).result.data.id && (console.warn("User changed, invalidating cache"), (ve = this.weavyContext) == null || ve.queryClient.invalidateQueries()), (Ot = u(this, _).result) != null && Ot.isPending || (this.user = (Et = u(this, _).result) == null ? void 0 : Et.data), (z.has("productType") || z.has("weavyContext")) && this.productType && this.weavyContext && u(this, S).trackQuery(
        Ge(this.weavyContext, ["features", this.productType])
      ), !((oe = u(this, S).result) != null && oe.isPending)) {
        const zt = (nt = u(this, S).result) == null ? void 0 : nt.data;
        if (zt) {
          const Co = {};
          zt.forEach(($o) => {
            const Yc = this[Em[$o]];
            Co[dp[$o]] = !Yc;
          });
          const ko = this.hasFeatures;
          this.hasFeatures = Co, this.requestUpdate("features", ko);
        }
      }
      if (z.has("contextualType") || z.has("uid") || z.has("name") || z.has("weavyContext"))
        if (this.contextualType && this.uid && this.weavyContext) {
          const zt = this.name ? { name: this.name } : void 0;
          u(this, O).trackQuery(rx(this.weavyContext, this.uid, this.contextualType, zt));
        } else
          u(this, O).untrackQuery(), this.app = void 0, this.name = this._initialAppName;
      (xt = u(this, O).result) != null && xt.isPending || (this.app = (ui = u(this, O).result) == null ? void 0 : ui.data, (pi = this.app) != null && pi.name && (this.name = this.app.name)), (!this.link && (z.has("uid") && this.uid || z.has("app") && this.app) && this.contextualType && this.contextualType !== gi.Unknown || z.has("conversationTypes") && this.conversationTypes) && this.readStorageLink(), z.has("link") && this.link && (console.info(`Opening notification link in ${this.uid ?? this.contextualType ?? this.productType}`), this.consumeStorageLink()), (z.has("app") || z.has("configuration") || z.has("hasFeatures") || z.has("link") || z.has("settings") || z.has("user") || z.has("weavyContext")) && (this.contexts = {
        app: this.app,
        configuration: this.configuration,
        hasFeatures: this.hasFeatures,
        link: this.link,
        settings: this.settings,
        user: this.user,
        weavyContext: this.weavyContext
      }), z.has("app") && this.app && ((Ki = u(this, i)) == null || Ki.call(this, this.app)), z.has("configuration") && this.configuration && ((Pi = u(this, n)) == null || Pi.call(this, this.configuration)), z.has("hasFeatures") && this.hasFeatures && ((xo = u(this, a)) == null || xo.call(this, this.hasFeatures)), z.has("link") && this.link && ((Gi = u(this, d)) == null || Gi.call(this, this.link)), z.has("settings") && this.settings && ((ze = u(this, w)) == null || ze.call(this, this.settings)), z.has("user") && this.user && (($r = u(this, f)) == null || $r.call(this, this.user)), z.has("weavyContext") && this.weavyContext && ((At = u(this, g)) == null || At.call(this, this.weavyContext)), (z.has("weavyContext") || z.has("configuration")) && this.weavyContext && this.configuration && !this.configuration.zoom_authentication_url && this.weavyContext.zoomAuthenticationUrl && (console.warn('Using "zoomAuthenticationUrl" from WyContext.'), this.configuration.zoom_authentication_url = this.weavyContext.zoomAuthenticationUrl.toString());
    }
  };
  i = new WeakMap(), r = new WeakMap(), n = new WeakMap(), s = new WeakMap(), a = new WeakMap(), l = new WeakMap(), d = new WeakMap(), h = new WeakMap(), w = new WeakMap(), m = new WeakMap(), f = new WeakMap(), b = new WeakMap(), g = new WeakMap(), $ = new WeakMap(), O = new WeakMap(), k = new WeakMap(), S = new WeakMap(), _ = new WeakMap(), c(V, "BlockProvider");
  let t = V;
  return Ct([
    W()
  ], t.prototype, "weavyContext", 2), Ct([
    kn({ context: kw }),
    W()
  ], t.prototype, "app", 2), Ct([
    kn({ context: Rg }),
    W()
  ], t.prototype, "configuration", 2), Ct([
    kn({ context: $w }),
    W()
  ], t.prototype, "hasFeatures", 2), Ct([
    kn({ context: zg }),
    W()
  ], t.prototype, "settings", 2), Ct([
    kn({ context: su }),
    W()
  ], t.prototype, "user", 2), Ct([
    kn({ context: Og })
  ], t.prototype, "_link", 2), Ct([
    v({ type: Object })
  ], t.prototype, "link", 1), Ct([
    v({ type: Object })
  ], t.prototype, "features", 1), Ct([
    W()
  ], t.prototype, "productType", 2), Ct([
    W()
  ], t.prototype, "contextualType", 2), Ct([
    W()
  ], t.prototype, "conversationTypes", 2), Ct([
    v()
  ], t.prototype, "uid", 2), Ct([
    v({ type: String })
  ], t.prototype, "name", 1), Ct([
    v({ type: String })
  ], t.prototype, "notifications", 2), Ct([
    v({ type: String })
  ], t.prototype, "notificationsBadge", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noAttachments", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noCloudFiles", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noComments", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noConfluence", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noEmbeds", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noMeetings", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noMentions", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noPolls", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noPreviews", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noReactions", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noReceipts", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noThumbnails", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noTyping", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noVersions", 2), Ct([
    v({ type: Boolean })
  ], t.prototype, "noWebDAV", 2), Ct([
    W()
  ], t.prototype, "contexts", 2), t;
}, "BlockProviderMixin"), sx = ":host{position:relative;display:flex;flex-direction:column;flex:1;min-height:3rem;min-width:16rem;isolation:isolate}", ax = ".wy-scroll-y{scroll-padding-top:var(--wy-scrollbar-adjust-top, 0);scroll-padding-bottom:var(--wy-scrollbar-adjust-bottom, 0)}.wy-scroll-y{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-y:not(body){-webkit-overflow-scrolling:touch}.wy-scroll-y:not(.wy-scroll-x){overflow-x:hidden;touch-action:pan-y}.wy-scroll-x{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-x:not(.wy-scroll-y){overflow-y:hidden;touch-action:pan-x}:host{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}:host:not(body){-webkit-overflow-scrolling:touch}", cx = ":host{display:contents}", lx = ":host{font-family:var(--wy-font-family, unset)}", kd = Pt(ax), Dg = Pt(cx), Hc = Pt(sx), fo = Pt(lx);
function dx(o, t, i = {}, r) {
  var n, s;
  if (o) {
    if (o = JSON.parse(JSON.stringify(o)), o != null && o.pages) {
      let a = -1;
      return {
        pages: [...o.pages.map((d, h) => {
          if (a >= 0)
            return d;
          const w = d.data || [], m = w.filter(
            (f) => f.id !== t.id && (!r || f.id !== r)
          );
          return i && i.by ? (a = m.findIndex((f) => {
            let b = f[i.by], g = t[i.by];
            if (i.by === "updated_at" && (b ?? (b = f.created_at), g ?? (g = t.created_at)), typeof b == "string" && typeof g == "string") {
              const $ = b.localeCompare(g, void 0, {
                sensitivity: "base",
                numeric: !0
              });
              return i.descending ? $ < 0 : $ > 0;
            }
            return b && g && (i.descending ? b < g : b > g);
          }), a >= 0 ? (m.splice(a, 0, t), d.data = [...m], d.end && (d.end += 1 + m.length - w.length)) : o && h == o.pages.length - 1 && d.end === d.count ? (d.data = [...m, t], d.end && (d.end += 1 + m.length - w.length)) : d.data = [...m]) : h === 0 && (i.descending ? d.data = [t, ...m] : d.data = [...m, t], d.end && (d.end += 1 + m.length - w.length)), d;
        }) ?? []],
        pageParams: [...o.pageParams]
      };
    } else if ((n = o == null ? void 0 : o.data) != null && n.length) {
      let a = -1;
      const l = [
        ...((s = o.data) == null ? void 0 : s.filter(
          (h) => h.id !== t.id && (!r || h.id !== r)
        )) || []
      ];
      let d = o.count;
      return i && i.by ? (a = l.findIndex((h) => {
        let w = h[i.by], m = t[i.by];
        if (i.by === "updated_at" && (w ?? (w = h.created_at), m ?? (m = t.created_at)), typeof w == "string" && typeof m == "string") {
          const f = w.localeCompare(m, void 0, {
            sensitivity: "base",
            numeric: !0
          });
          return i.descending ? f < 0 : f > 0;
        }
        return w && m && (i.descending ? w < m : w > m);
      }), a >= 0 ? l.splice(a, 0, t) : (l.push(t), d++)) : (i.descending ? l.unshift(t) : l.push(t), d++), {
        data: l,
        count: d
      };
    }
  }
  return o;
}
c(dx, "addToQueryData");
function Fg(o, t, i) {
  var n, s;
  const r = t === void 0 ? () => !0 : t instanceof Function ? t : (a) => a.id === t;
  return o && (o = JSON.parse(JSON.stringify(o)), o.pages ? {
    pages: o.pages.map((l) => (l.data && (l.data = [
      ...l.data.map((d) => (r(d) && (d = { ...d }, i(d)), d))
    ]), l)) ?? [],
    pageParams: o.pageParams
  } : (n = o.data) != null && n.length ? {
    ...o,
    data: [
      ...((s = o.data) == null ? void 0 : s.map((a) => (r(a) && (a = { ...a }, i(a)), a))) || []
    ]
  } : o.data ? {
    data: [
      ...o.data.map((l) => (r(l) && (l = { ...l }, i(l)), l))
    ],
    count: o.count
  } : o);
}
c(Fg, "updateQueryData");
function Ng(o, t) {
  var i, r, n;
  if (t !== void 0) {
    const s = t instanceof Function ? t : (a) => a.id === t;
    if (o) {
      if (o = JSON.parse(JSON.stringify(o)), o.pages)
        return {
          pages: o.pages.map((l) => (l.data && (l.data = [...l.data.filter((d) => !s(d))]), l)) ?? [],
          pageParams: o.pageParams
        };
      if ((i = o.data) != null && i.length) {
        const a = (r = o.data) == null ? void 0 : r.length;
        let l = o.count;
        const d = [...((n = o.data) == null ? void 0 : n.filter((h) => !s(h))) || []];
        return a !== d.length && l--, {
          data: d,
          count: l
        };
      }
    }
  }
  return o;
}
c(Ng, "removeQueryData");
const ur = /* @__PURE__ */ c((o, t, i, r, n) => o.setQueryData(t, (s) => dx(
  s,
  i,
  n,
  r
)), "addCacheItem"), _t = /* @__PURE__ */ c((o, t, i, r) => o.setQueryData(t, (n) => Fg(
  n,
  i,
  r
)), "updateCacheItem"), ut = /* @__PURE__ */ c((o, t, i, r) => {
  o.setQueriesData(t, (n) => Fg(
    n,
    i,
    r
  ));
}, "updateCacheItems"), au = /* @__PURE__ */ c((o, t, i) => o.setQueryData(t, (r) => Ng(
  r,
  i
)), "removeCacheItem"), hx = /* @__PURE__ */ c((o, t, i) => {
  o.setQueriesData(t, (r) => Ng(r, i));
}, "removeCacheItems"), dh = /* @__PURE__ */ c((o, t, i) => {
  o.setQueriesData(t, (r) => {
    const { count: n } = r;
    return { count: i(n) };
  });
}, "updateCacheItemsCount");
function ux(o, t, i) {
  var n;
  const r = o.getQueryData(t);
  (n = r == null ? void 0 : r.pages) != null && n.length && r.pages.length > 1 && o.setQueryData(
    t,
    (s) => ({
      pages: s.pages.slice(0, 1),
      pageParams: s.pageParams.slice(0, 1)
    }),
    i
  );
}
c(ux, "keepFirstPage");
function px(o, t, i = {}) {
  return {
    ...i,
    initialPageParam: 0,
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["messages", t],
    queryFn: /* @__PURE__ */ c(async (n) => {
      var h;
      const s = n.pageParam, a = "/api/apps/" + t + "/messages?orderby=id+desc&skip=" + s + "&take=25", d = await (await o.get(a)).json();
      return d.data = ((h = d.data) == null ? void 0 : h.reverse()) || [], d;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((n, s) => {
      if (n != null && n.end && (n == null ? void 0 : n.end) < (n == null ? void 0 : n.count))
        return s.length * 25;
    }, "getNextPageParam"),
    select: /* @__PURE__ */ c((n) => ({
      // reverse scroll
      pages: [...n.pages].reverse(),
      pageParams: [...n.pageParams].reverse()
    }), "select")
  };
}
c(px, "getMessagesOptions");
function yx(o, t) {
  const i = o.queryClient;
  return {
    mutationFn: /* @__PURE__ */ c(async (n) => {
      var a;
      return (await o.post(
        "/api/apps/" + n.app_id + "/messages",
        "POST",
        JSON.stringify({
          text: n.text,
          blobs: n.blobs,
          embed_id: n.embed_id || null,
          meeting_id: n.meeting_id,
          options: n.poll_options.filter((l) => l.text.trim() !== "").map((l) => ({ text: l.text })),
          metadata: {
            temp_id: (a = n.temp_id) == null ? void 0 : a.toString()
          }
        })
      )).json();
    }, "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ c(async (n) => {
      if (await i.cancelQueries({ queryKey: ["messages", n.app_id] }), n.temp_id) {
        const s = {
          id: n.temp_id,
          app: { id: -1 },
          is_trashed: !1,
          text: n.text,
          html: n.text,
          plain: n.text,
          temp: !0,
          created_by: { id: n.user_id, avatar_url: "", display_name: "", presence: void 0, name: "" },
          created_at: (/* @__PURE__ */ new Date()).toUTCString(),
          attachments: { count: 0 },
          reactions: { count: 0 },
          is_starred: !1,
          is_subscribed: !1
        };
        ur(i, ["messages", n.app_id], s);
      }
      return { temp_id: n.temp_id };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((n, s, a) => {
      ur(i, ["messages", s.app_id], n, a.temp_id);
    }, "onSuccess")
  };
}
c(yx, "getAddMessageMutationOptions");
const cf = class cf {
  get result() {
    return this._result && this.observer ? this.observer.trackResult(this._result) : void 0;
  }
  constructor(t) {
    t.addController(this), this.host = t, this.setContext();
  }
  async setContext() {
    this.whenContext = new Promise((t) => this.resolveContext = t), await Fc(this.host), this.context = new cn(this.host, { context: ne, subscribe: !0 });
  }
  hostUpdate() {
    var t, i;
    (t = this.context) != null && t.value && ((i = this.resolveContext) == null || i.call(this));
  }
  async trackInfiniteQuery(t, i = !0, r) {
    var s, a, l;
    if (r || (await this.whenContext, r = (a = (s = this.context) == null ? void 0 : s.value) == null ? void 0 : a.queryClient), !r)
      throw new Error("No QueryClient provided");
    (l = this.observerUnsubscribe) == null || l.call(this);
    const n = new n2(r, t);
    this.observer = n, this.observerSubscribe(i);
  }
  observerSubscribe(t = !0) {
    this.observer && (t ? this._result = this.observer.getOptimisticResult(
      this.observer.options
    ) : this._result = void 0, this.observerUnsubscribe = this.observer.subscribe(() => {
      if (this.observer) {
        const i = xd(this.result, this.observer.getCurrentResult());
        i !== this._result && (this._result = i, this.host.requestUpdate());
      }
    }), this.observer.updateResult(), this.host.requestUpdate());
  }
  untrackInfiniteQuery() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this), this.observerUnsubscribe = void 0, this._result = void 0, this.observer = void 0;
  }
  hostConnected() {
    this.observerSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this);
  }
};
c(cf, "InfiniteQueryController");
let pr = cf;
function wx(o) {
  for (; o; )
    if (o = o.nextElementSibling, o instanceof HTMLElement && /absolute|sticky|fixed/.test(getComputedStyle(o).position) === !1)
      return o;
  return null;
}
c(wx, "getNextPositionedChild");
function cu(o, t = !1) {
  if (o) {
    let i = getComputedStyle(o);
    const r = i.position === "absolute", n = t ? /(auto|scroll|overlay|hidden)/ : /(auto|overlay|scroll)/;
    if (i.position === "fixed" && document.scrollingElement)
      return document.scrollingElement;
    for (let s = o; s = s.parentElement || s.parentNode || s.host; )
      if (s instanceof Element && (i = getComputedStyle(s), !(r && i.position === "static") && n.test(i.overflow + i.overflowY + i.overflowX)))
        return s;
  }
  return document.scrollingElement || o;
}
c(cu, "getScrollParent");
function fx(o) {
  if (o && o.isConnected) {
    const t = cu(o);
    return t.clientHeight !== t.scrollHeight;
  }
  return !1;
}
c(fx, "hasScroll");
function mx(o, t = 32) {
  if (o) {
    const i = cu(o);
    return Math.abs(i.scrollTop + i.clientHeight - i.scrollHeight) < t;
  }
  return !1;
}
c(mx, "isParentAtBottom");
async function vx(o, t = !1) {
  if (o) {
    const i = cu(o);
    Math.abs(i.scrollTop + i.clientHeight - i.scrollHeight) > 1 && (t ? i.scrollTo({
      top: i.scrollHeight,
      left: 0,
      behavior: "smooth"
    }) : i.scrollTop = i.scrollHeight), await new Promise((r) => {
      let n = i.scrollTop;
      const s = /* @__PURE__ */ c(() => {
        t && i.scrollTop === n && (i.scrollTop = i.scrollHeight), n = i.scrollTop, Math.abs(i.scrollTop + i.clientHeight - i.scrollHeight) > 1 ? requestAnimationFrame(s) : r(void 0);
      }, "scrollCheck");
      requestAnimationFrame(s);
    });
  }
}
c(vx, "scrollParentToBottom");
const gx = 0, bx = "512px";
function xx(o, t, i = !1) {
  let r = !1;
  const n = cu(o);
  getComputedStyle(n).overflowAnchor !== "none" && (n.style.overflowAnchor = "none");
  const s = n === document.documentElement ? document : n;
  t ?? (t = /* @__PURE__ */ c(() => Promise.reject(new Error("No reverse scroller handler function defined")), "whenNext"));
  const a = new IntersectionObserver(
    (l) => {
      l.forEach((d) => {
        if (d.isIntersecting && !r) {
          r = !0;
          let h, w, m;
          i && (h = wx(d.target) || d.target, w = n.scrollHeight, m = h.offsetTop);
          const f = /* @__PURE__ */ c(() => {
            queueMicrotask(() => {
              if (w !== n.scrollHeight) {
                if (i && (h != null && h.isConnected)) {
                  const g = h.offsetTop - m;
                  n.scrollTop += g;
                }
                requestAnimationFrame(() => r = !1);
              } else
                queueMicrotask(() => {
                  if (w !== n.scrollHeight) {
                    if (i && (h != null && h.isConnected)) {
                      const g = h.offsetTop - m;
                      n.scrollTop += g;
                    }
                    requestAnimationFrame(() => r = !1);
                  } else
                    requestAnimationFrame(() => {
                      if (i && a.takeRecords().length && (h != null && h.isConnected)) {
                        const g = h.offsetTop - m;
                        n.scrollTop += g;
                      }
                      requestAnimationFrame(() => r = !1);
                    });
                });
            });
          }, "afterNext"), b = t();
          b ? b.then(f) : f();
        }
      });
    },
    { root: s, threshold: gx, rootMargin: bx }
  );
  return a.observe(o), a;
}
c(xx, "createScroller");
const lf = class lf {
  constructor(t, i = !1) {
    this.reverse = !1, this.isObservePending = !1, t.addController(this), this.host = t, this.reverse = i;
  }
  observe(t, i) {
    t && i && !t.isLoading && !this.isObservePending && (this.isObservePending = !0, requestAnimationFrame(() => {
      var r;
      this.loadMoreRefElement = i, (r = this.scroller) == null || r.disconnect(), this.scroller = xx(
        i,
        async () => {
          t.hasNextPage && !t.isFetching && (await t.fetchNextPage({ cancelRefetch: !1 }), this.reverse && await this.host.updateComplete);
        },
        this.reverse
      ), this.isObservePending = !1;
    }));
  }
  hostConnected() {
    var t;
    this.loadMoreRefElement && ((t = this.scroller) == null || t.observe(this.loadMoreRefElement));
  }
  hostDisconnected() {
    var t;
    (t = this.scroller) == null || t.disconnect();
  }
};
c(lf, "InfiniteScrollController");
let yr = lf;
const df = class df extends yr {
  constructor(t) {
    super(t, !0);
  }
};
c(df, "ReverseInfiniteScrollController");
let Gp = df;
const hf = class hf {
  constructor(t) {
    t.addController(this), this.host = t, this.whenContext = new Promise((i) => this.resolveContext = i), this.whenObserver = new Promise((i) => this.resolveObserver = i), this.setContext();
  }
  async setContext() {
    await Fc(this.host), this.context = new cn(this.host, { context: ne, subscribe: !0 });
  }
  hostUpdate() {
    var t, i;
    (t = this.context) != null && t.value && ((i = this.resolveContext) == null || i.call(this));
  }
  async trackMutation(t, i) {
    var r, n, s, a;
    if (i || (await this.whenContext, i = (n = (r = this.context) == null ? void 0 : r.value) == null ? void 0 : n.queryClient), !i)
      throw new Error("No QueryClient provided");
    return (s = this.observerUnsubscribe) == null || s.call(this), this.observer && (this.whenObserver = new Promise((l) => this.resolveObserver = l)), this.observer = new kt(i, { ...t }), this.observerSubscribe(), (a = this.resolveObserver) == null || a.call(this, this.observer), this.observer;
  }
  observerSubscribe() {
    this.observer && (this.result = this.observer.getCurrentResult(), this.observerUnsubscribe ?? (this.observerUnsubscribe = this.observer.subscribe(() => {
      if (this.observer) {
        const t = xd(this.result, this.observer.getCurrentResult());
        this.result !== t && (this.result = t, this.host.requestUpdate());
      }
    })), this.host.requestUpdate());
  }
  untrackMutation() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this), this.observerUnsubscribe = void 0, this.result = void 0, this.observer = void 0, this.host.requestUpdate();
  }
  async mutate(t, i) {
    return (await this.whenObserver).mutate(t, i);
  }
  hostConnected() {
    this.observerSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this);
  }
};
c(hf, "MutationController");
let Ze = hf;
const { I: Cx } = pb, _m = /* @__PURE__ */ c((o, t) => (o == null ? void 0 : o._$litType$) !== void 0, "nt"), kx = /* @__PURE__ */ c((o) => {
  var t;
  return ((t = o == null ? void 0 : o._$litType$) == null ? void 0 : t.h) != null;
}, "ot"), $x = /* @__PURE__ */ c((o) => o.strings === void 0, "rt"), Pm = /* @__PURE__ */ c(() => document.createComment(""), "lt"), _n = /* @__PURE__ */ c((o, t, i) => {
  var s;
  const r = o._$AA.parentNode, n = t === void 0 ? o._$AB : t._$AA;
  if (i === void 0) {
    const a = r.insertBefore(Pm(), n), l = r.insertBefore(Pm(), n);
    i = new Cx(a, l, o, o.options);
  } else {
    const a = i._$AB.nextSibling, l = i._$AM, d = l !== o;
    if (d) {
      let h;
      (s = i._$AQ) == null || s.call(i, o), i._$AM = o, i._$AP !== void 0 && (h = o._$AU) !== l._$AU && i._$AP(h);
    }
    if (a !== n || d) {
      let h = i._$AA;
      for (; h !== a; ) {
        const w = h.nextSibling;
        r.insertBefore(h, n), h = w;
      }
    }
  }
  return i;
}, "at"), Cn = /* @__PURE__ */ c((o, t, i = o) => (o._$AI(t, i), o), "ct"), Ex = {}, hh = /* @__PURE__ */ c((o, t = Ex) => o._$AH = t, "dt"), Zp = /* @__PURE__ */ c((o) => o._$AH, "ut"), hp = /* @__PURE__ */ c((o) => {
  var r;
  (r = o._$AP) == null || r.call(o, !1, !0);
  let t = o._$AA;
  const i = o._$AB.nextSibling;
  for (; t !== i; ) {
    const n = t.nextSibling;
    t.remove(), t = n;
  }
}, "pt"), _x = /* @__PURE__ */ c((o) => {
  o._$AR();
}, "ft");
const Bc = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 }, Cr = /* @__PURE__ */ c((o) => (...t) => ({ _$litDirective$: o, values: t }), "e$1"), uf = class uf {
  constructor(t) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t, i, r) {
    this.t = t, this._$AM = i, this.i = r;
  }
  _$AS(t, i) {
    return this.update(t, i);
  }
  update(t, i) {
    return this.render(...i);
  }
};
c(uf, "i");
let Ni = uf;
const hl = /* @__PURE__ */ c((o, t) => {
  var r;
  const i = o._$AN;
  if (i === void 0) return !1;
  for (const n of i) (r = n._$AO) == null || r.call(n, t, !1), hl(n, t);
  return !0;
}, "mt"), uh = /* @__PURE__ */ c((o) => {
  let t, i;
  do {
    if ((t = o._$AM) === void 0) break;
    i = t._$AN, i.delete(o), o = t;
  } while ((i == null ? void 0 : i.size) === 0);
}, "_t"), Vg = /* @__PURE__ */ c((o) => {
  for (let t; t = o._$AM; o = t) {
    let i = t._$AN;
    if (i === void 0) t._$AN = i = /* @__PURE__ */ new Set();
    else if (i.has(o)) break;
    i.add(o), Lx(t);
  }
}, "wt");
function Px(o) {
  this._$AN !== void 0 ? (uh(this), this._$AM = o, Vg(this)) : this._$AM = o;
}
c(Px, "bt");
function Sx(o, t = !1, i = 0) {
  const r = this._$AH, n = this._$AN;
  if (n !== void 0 && n.size !== 0) if (t) if (Array.isArray(r)) for (let s = i; s < r.length; s++) hl(r[s], !1), uh(r[s]);
  else r != null && (hl(r, !1), uh(r));
  else hl(this, o);
}
c(Sx, "yt");
const Lx = /* @__PURE__ */ c((o) => {
  o.type == Bc.CHILD && (o._$AP ?? (o._$AP = Sx), o._$AQ ?? (o._$AQ = Px));
}, "gt"), pf = class pf extends Ni {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(t, i, r) {
    super._$AT(t, i, r), Vg(this), this.isConnected = t._$AU;
  }
  _$AO(t, i = !0) {
    var r, n;
    t !== this.isConnected && (this.isConnected = t, t ? (r = this.reconnected) == null || r.call(this) : (n = this.disconnected) == null || n.call(this)), i && (hl(this, t), uh(this));
  }
  setValue(t) {
    if ($x(this.t)) this.t._$AI(t, this);
    else {
      const i = [...this.t._$AH];
      i[this.i] = t, this.t._$AI(i, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};
c(pf, "$t");
let Yp = pf;
const dt = /* @__PURE__ */ c(() => new Xp(), "ii"), yf = class yf {
};
c(yf, "Zt");
let Xp = yf;
const up = /* @__PURE__ */ new WeakMap(), it = Cr(class extends Yp {
  render(o) {
    return L;
  }
  update(o, [t]) {
    var r;
    const i = t !== this.Y;
    return i && this.Y !== void 0 && this.rt(void 0), (i || this.lt !== this.ct) && (this.Y = t, this.ht = (r = o.options) == null ? void 0 : r.host, this.rt(this.ct = o.element)), L;
  }
  rt(o) {
    if (this.isConnected || (o = void 0), typeof this.Y == "function") {
      const t = this.ht ?? globalThis;
      let i = up.get(t);
      i === void 0 && (i = /* @__PURE__ */ new WeakMap(), up.set(t, i)), i.get(this.Y) !== void 0 && this.Y.call(this.ht, void 0), i.set(this.Y, o), o !== void 0 && this.Y.call(this.ht, o);
    } else this.Y.value = o;
  }
  get lt() {
    var o, t;
    return typeof this.Y == "function" ? (o = up.get(this.ht ?? globalThis)) == null ? void 0 : o.get(this.Y) : (t = this.Y) == null ? void 0 : t.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});
function Mx(o, t) {
  const i = o.queryClient, r = t;
  return {
    mutationKey: r,
    mutationFn: /* @__PURE__ */ c(async ({ optionId: s }) => {
      const a = await o.post(`/api/options/${s}/vote`, "POST", "");
      if (!a.ok) {
        const l = await a.json();
        throw new Error(l.detail || l.title, { cause: l });
      }
      return a.json();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(i, { queryKey: r }, s.parentId, (a) => {
      var l, d;
      (l = a.options) != null && l.data && (a.options.data = (d = a.options.data) == null ? void 0 : d.map((h) => {
        var w, m;
        if (h.has_voted) {
          h.has_voted = !1;
          const f = ((w = h.votes) == null ? void 0 : w.count) || 1;
          h.votes.count = f - 1;
        } else if (!h.has_voted && h.id === s.optionId) {
          h.has_voted = !0;
          const f = ((m = h.votes) == null ? void 0 : m.count) || 0;
          h.votes ? h.votes.count = f + 1 : h.votes = { count: f + 1 };
        }
        return h;
      }));
    }), { id: s.optionId }), "onMutate"),
    onSuccess: /* @__PURE__ */ c(async (s, a) => {
      const d = await (await o.get("/api/" + a.parentType + "/" + a.parentId)).json();
      ut(
        i,
        { queryKey: r, exact: !1 },
        a.parentId,
        (h) => Object.assign(h, d)
      );
    }, "onSuccess")
    /*onError(error: Error, variables: MutatePollVariables) {
      updateCacheItems(queryClient, { queryKey: postsKey, exact: false }, variables.id, (existingPost: PostType) => Object.assign(existingPost, { is_subscribed: variables..is_subscribed }));
    },*/
  };
}
c(Mx, "getPollMutationOptions");
function Ew(o, t) {
  return new kt(o.queryClient, Mx(o, t));
}
c(Ew, "getPollMutation");
function Tx(o, t) {
  return {
    queryKey: ["votes", t],
    enabled: !1,
    queryFn: /* @__PURE__ */ c(async () => await (await o.get(`/api/options/${t}`)).json(), "queryFn")
  };
}
c(Tx, "getVotesOptions");
const ro = /* @__PURE__ */ c((o, t) => !!(o && t && t.indexOf(o) !== -1), "hasPermission");
function Ax(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i }) => {
      const r = `/api/conversations/${i}/delivered`;
      await o.post(r, "PUT", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async () => ({}), "onMutate")
  };
}
c(Ax, "getDeliveredConversationMutationOptions");
function zx(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, markAsRead: r, messageId: n }) => {
      const s = r ? `/api/conversations/${i}/mark?messageId=${n}` : `/api/conversations/${i}/mark`;
      await o.post(s, r ? "PUT" : "DELETE", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (ut(
      o.queryClient,
      { queryKey: ["conversations", "list"], exact: !1 },
      i.id,
      (r) => {
        r.is_unread = !i.markAsRead;
      }
    ), _t(o.queryClient, ["conversations", i.id], -1, (r) => {
      r.is_unread = !i.markAsRead, i.messageId && r.last_message && (r.last_message.id = i.messageId);
    }), {}), "onMutate"),
    onError: /* @__PURE__ */ c((i, r) => {
      console.error(i.message), ut(
        o.queryClient,
        { queryKey: ["conversations", "list"], exact: !1 },
        r.id,
        (n) => {
          n.is_unread = r.markAsRead;
        }
      );
    }, "onError")
  };
}
c(zx, "getMarkConversationMutationOptions");
function Rx(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, star: r }) => {
      await o.post(`/api/apps/${i}/stars`, r ? "POST" : "DELETE", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (ut(
      o.queryClient,
      { queryKey: ["conversations", "list"], exact: !1 },
      i.id,
      (r) => {
        r.is_starred = i.star;
      }
    ), {}), "onMutate"),
    onError: /* @__PURE__ */ c((i, r) => {
      console.error(i.message), ut(
        o.queryClient,
        { queryKey: ["conversations", "list"], exact: !1 },
        r.id,
        (n) => {
          n.is_starred = !r.star;
        }
      );
    }, "onError")
  };
}
c(Rx, "getStarConversationMutationOptions");
function Ix(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, pin: r }) => {
      await o.post(`/api/conversations/${i}/pin`, r ? "PUT" : "DELETE", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (ut(
      o.queryClient,
      { queryKey: ["conversations", "list"], exact: !1 },
      i.id,
      (r) => {
        r.is_pinned = i.pin;
      }
    ), {}), "onMutate"),
    onSettled: /* @__PURE__ */ c(async () => {
      await o.queryClient.invalidateQueries({ queryKey: ["conversations"] });
    }, "onSettled")
  };
}
c(Ix, "getPinConversationMutationOptions");
function Ox(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, members: r }) => {
      await o.post(`/api/apps/${i}/members/${r.join(",")}`, "DELETE", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (au(o.queryClient, ["conversations"], i.id), {}), "onMutate")
  };
}
c(Ox, "getLeaveConversationMutationOptions");
function Dx(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, userId: r, access: n }) => {
      await o.post(`/api/apps/${i}/members/${r}`, "PUT", JSON.stringify({ access: n }));
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (au(o.queryClient, ["conversations"], i.id), {}), "onMutate")
  };
}
c(Dx, "getUpdateMemberMutationOptions");
function Fx(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, members: r }) => {
      await o.post(
        `/api/apps/${i}/members`,
        "PUT",
        JSON.stringify(
          r.map((n) => ({ id: n, access: "write" }))
        )
      );
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async () => ({}), "onMutate")
  };
}
c(Fx, "getAddMembersToConversationMutationOptions");
function Nx(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i, name: r, blobId: n }) => (await o.post(
      `/api/apps/${i}`,
      "PATCH",
      JSON.stringify({
        name: r,
        Picture: n
      })
    )).json(), "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (_t(o.queryClient, ["conversations"], i.id, (r) => {
      r.display_name = i.name, typeof (i == null ? void 0 : i.thumbnailUrl) < "u" && (r.avatar_url = i.thumbnailUrl);
    }), _t(o.queryClient, ["conversations", i.id], -1, (r) => {
      r.display_name = i.name, typeof (i == null ? void 0 : i.thumbnailUrl) < "u" && (r.avatar_url = i.thumbnailUrl);
    }), {}), "onMutate")
  };
}
c(Nx, "getUpdateConversationMutationOptions");
function Vx(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ id: i }) => {
      await o.post(`/api/apps/${i}/trash`, "POST", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => (au(o.queryClient, ["conversations"], i.id), {}), "onMutate")
  };
}
c(Vx, "getTrashConversationMutationOptions");
function Hx(o) {
  return new kt(o.queryClient, Ax(o));
}
c(Hx, "getDeliveredConversationMutation");
function Hg(o) {
  return new kt(o.queryClient, zx(o));
}
c(Hg, "getMarkConversationMutation");
function Bx(o) {
  return new kt(o.queryClient, Rx(o));
}
c(Bx, "getStarConversationMutation");
function Ux(o) {
  return new kt(o.queryClient, Ix(o));
}
c(Ux, "getPinConversationMutation");
function Bg(o) {
  return new kt(o.queryClient, Ox(o));
}
c(Bg, "getLeaveConversationMutation");
function jx(o) {
  return new kt(o.queryClient, Dx(o));
}
c(jx, "getUpdateMemberMutation");
function Wx(o) {
  return new kt(o.queryClient, Fx(o));
}
c(Wx, "getAddMembersToConversationMutation");
function Ug(o) {
  return new kt(o.queryClient, Nx(o));
}
c(Ug, "getUpdateConversationMutation");
function qx(o) {
  return new kt(o.queryClient, Vx(o));
}
c(qx, "getTrashConversationMutation");
function Qx(o, t) {
  return Ge(o, ["conversations", t], void 0, {
    initialData: /* @__PURE__ */ c(() => {
      var i;
      return (i = o == null ? void 0 : o.queryClient.getQueryData(["conversations"])) == null ? void 0 : i.pages.flatMap((r) => r.data).find((r) => (r == null ? void 0 : r.id) === t);
    }, "initialData")
  });
}
c(Qx, "getConversationOptions");
function Sm(o, t) {
  return ix(o, ["conversations", t], void 0, {
    initialData: /* @__PURE__ */ c(() => {
      var i;
      return (i = o == null ? void 0 : o.queryClient.getQueryData(["conversations"])) == null ? void 0 : i.pages.flatMap((r) => r.data).find((r) => (r == null ? void 0 : r.id) === t);
    }, "initialData")
  });
}
c(Sm, "getConversation");
async function Kx(o, t, i = Object.values(Mt)) {
  let r;
  if (typeof t == "number")
    r = await Sm(o, t);
  else if (typeof t.id == "number" && !t.type)
    r = await Sm(o, t.id);
  else if (typeof t.type == "string")
    r = t;
  else
    return;
  return i.includes(r.type) ? r : void 0;
}
c(Kx, "resolveConversation");
var Gx = Object.defineProperty, Er = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = void 0, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = a(t, i, n) || n);
  return n && Gx(t, i, n), n;
}, "__decorateClass$18");
const It = /* @__PURE__ */ c((o) => {
  var i, r, n, s, a, l, d, h, w, m, f, b, g, $;
  const O = class O extends o {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(..._) {
      super(..._);
      // PROMISES
      // TODO: Switch to Promise.withResolvers() when allowed by typescript
      T(this, i);
      T(this, r);
      T(this, n);
      T(this, s);
      T(this, a);
      T(this, l);
      T(this, d);
      T(this, h);
      T(this, w);
      T(this, m);
      T(this, f);
      T(this, b);
      T(this, g);
      T(this, $);
      this.configuration = {}, E(this, r, new Promise((V) => {
        E(this, i, V);
      })), E(this, s, new Promise((V) => {
        E(this, n, V);
      })), E(this, l, new Promise((V) => {
        E(this, a, V);
      })), E(this, h, new Promise((V) => {
        E(this, d, V);
      })), E(this, m, new Promise((V) => {
        E(this, w, V);
      })), E(this, b, new Promise((V) => {
        E(this, f, V);
      })), E(this, $, new Promise((V) => {
        E(this, g, V);
      })), this.contexts = {
        app: this.app,
        configuration: this.configuration,
        hasFeatures: this.hasFeatures,
        link: this.link,
        settings: this.settings,
        user: this.user,
        weavyContext: this.weavyContext
      };
    }
    async whenApp() {
      return await u(this, r);
    }
    async whenConfiguration() {
      return await u(this, s);
    }
    async whenHasFeatures() {
      return await u(this, l);
    }
    async whenLink() {
      return await u(this, h);
    }
    async whenSettings() {
      return await u(this, m);
    }
    async whenUser() {
      return await u(this, b);
    }
    async whenWeavyContext() {
      return await u(this, $);
    }
    willUpdate(_) {
      var V, I, D, z, F, A, N;
      super.willUpdate(_);
      for (const G in this.contexts)
        if (_.has(G)) {
          const et = this[G];
          this.contexts = { ...this.contexts, [G]: et };
        }
      _.has("app") && this.app && ((V = u(this, i)) == null || V.call(this, this.app)), _.has("configuration") && this.configuration && ((I = u(this, n)) == null || I.call(this, this.configuration)), _.has("hasFeatures") && this.hasFeatures && ((D = u(this, a)) == null || D.call(this, this.hasFeatures)), _.has("link") && this.link && ((z = u(this, d)) == null || z.call(this, this.link)), _.has("settings") && this.settings && ((F = u(this, w)) == null || F.call(this, this.settings)), _.has("user") && this.user && ((A = u(this, f)) == null || A.call(this, this.user)), _.has("weavyContext") && this.weavyContext && ((N = u(this, g)) == null || N.call(this, this.weavyContext));
    }
    connectedCallback() {
      super.connectedCallback(), this.app && this.requestUpdate("app"), this.configuration && this.requestUpdate("configuration"), this.hasFeatures && this.requestUpdate("hasFeatures"), this.link && this.requestUpdate("link"), this.settings && this.requestUpdate("settings"), this.user && this.requestUpdate("user"), this.weavyContext && this.requestUpdate("weavyContext");
    }
  };
  i = new WeakMap(), r = new WeakMap(), n = new WeakMap(), s = new WeakMap(), a = new WeakMap(), l = new WeakMap(), d = new WeakMap(), h = new WeakMap(), w = new WeakMap(), m = new WeakMap(), f = new WeakMap(), b = new WeakMap(), g = new WeakMap(), $ = new WeakMap(), c(O, "BlockConsumer");
  let t = O;
  return Er([
    Kt({ context: kw, subscribe: !0 }),
    W()
  ], t.prototype, "app"), Er([
    Kt({ context: Rg, subscribe: !0 }),
    W()
  ], t.prototype, "configuration"), Er([
    Kt({ context: $w, subscribe: !0 }),
    W()
  ], t.prototype, "hasFeatures"), Er([
    Kt({ context: Og, subscribe: !0 }),
    W()
  ], t.prototype, "link"), Er([
    Kt({ context: zg, subscribe: !0 }),
    W()
  ], t.prototype, "settings"), Er([
    Kt({ context: su, subscribe: !0 }),
    W()
  ], t.prototype, "user"), Er([
    Kt({ context: ne, subscribe: !0 }),
    W()
  ], t.prototype, "weavyContext"), Er([
    W()
  ], t.prototype, "contexts"), t;
}, "BlockConsumerMixin"), wf = class wf {
  constructor(t, i) {
    this.additionalTargets = /* @__PURE__ */ new Set(), this.setExportParts = (r) => {
      (!this.host.hasAttribute("exportparts") || this.shadowParts) && (this.shadowParts ?? (this.shadowParts = /* @__PURE__ */ new Set()), r.forEach((n) => {
        var s;
        n.part.forEach((a) => {
          var l;
          return (l = this.shadowParts) == null ? void 0 : l.add(a);
        }), (s = n.getAttribute("exportparts")) == null || s.split(", ").forEach((a) => {
          var l;
          return (l = this.shadowParts) == null ? void 0 : l.add(a);
        });
      }), this.shadowParts.size && this.host.setAttribute("exportparts", Array.from(this.shadowParts.values()).join(", ")));
    }, t.addController(this), this.host = t, this.addLocalName = i;
  }
  addPartsFrom(t) {
    var i;
    t && !this.additionalTargets.has(t) && (this.setExportParts([t]), (i = this.observer) == null || i.observe(t, {
      attributeFilter: ["part", "exportparts"]
    }), this.additionalTargets.add(t));
  }
  async hostConnected() {
    if (await this.host.updateComplete, bm(this.host) && this.host.shadowRoot) {
      const t = Array.from(this.host.shadowRoot.querySelectorAll("[part], [exportparts]"));
      this.setExportParts(t), this.observer = new MutationObserver((i) => {
        const r = i.filter((n) => n.target instanceof Element).map((n) => n.target);
        this.setExportParts(r);
      }), this.observer.observe(this.host.shadowRoot, {
        subtree: !0,
        childList: !0,
        attributeFilter: ["part", "exportparts"]
      }), Array.from(this.additionalTargets).forEach((i) => {
        var r;
        (r = this.observer) == null || r.observe(i, {
          attributeFilter: ["part", "exportparts"]
        });
      });
    }
  }
  hostUpdated() {
    bm(this.host) && this.addLocalName !== !1 && !this.host.part.contains(this.host.localName) && (this.addLocalName || getComputedStyle(this.host).display !== "contents") && this.host.part.add(this.host.localName);
  }
  hostDisconnected() {
    var t;
    (t = this.observer) == null || t.disconnect();
  }
};
c(wf, "ShadowPartsController");
let Z = wf;
var Zx = "M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M1,10V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z", Yx = "M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z", Xx = "M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z", Jx = "M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z", t5 = "M13 13H11V7H13M11 15H13V17H11M15.73 3H8.27L3 8.27V15.73L8.27 21H15.73L21 15.73V8.27L15.73 3Z", Lm = "M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z", e5 = "M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z", jg = "M7.5,18A5.5,5.5 0 0,1 2,12.5A5.5,5.5 0 0,1 7.5,7H18A4,4 0 0,1 22,11A4,4 0 0,1 18,15H9.5A2.5,2.5 0 0,1 7,12.5A2.5,2.5 0 0,1 9.5,10H17V11.5H9.5A1,1 0 0,0 8.5,12.5A1,1 0 0,0 9.5,13.5H18A2.5,2.5 0 0,0 20.5,11A2.5,2.5 0 0,0 18,8.5H7.5A4,4 0 0,0 3.5,12.5A4,4 0 0,0 7.5,16.5H17V18H7.5Z", i5 = "M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z", Wg = "M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21", qg = "M20.84,22.73L18.11,20H3V19L5,17V11C5,9.86 5.29,8.73 5.83,7.72L1.11,3L2.39,1.73L22.11,21.46L20.84,22.73M19,15.8V11C19,7.9 16.97,5.17 14,4.29C14,4.19 14,4.1 14,4A2,2 0 0,0 12,2A2,2 0 0,0 10,4C10,4.1 10,4.19 10,4.29C9.39,4.47 8.8,4.74 8.26,5.09L19,15.8M12,23A2,2 0 0,0 14,21H10A2,2 0 0,0 12,23Z", r5 = "M15.39,14.04V14.04C15.39,12.62 14.24,11.47 12.82,11.47C11.41,11.47 10.26,12.62 10.26,14.04V14.04C10.26,15.45 11.41,16.6 12.82,16.6C14.24,16.6 15.39,15.45 15.39,14.04M17.1,14.04C17.1,16.4 15.18,18.31 12.82,18.31C11.19,18.31 9.77,17.39 9.05,16.04C8.33,17.39 6.91,18.31 5.28,18.31C2.94,18.31 1.04,16.43 1,14.11V14.11H1V7H1V7C1,6.56 1.39,6.18 1.86,6.18C2.33,6.18 2.7,6.56 2.71,7V7H2.71V10.62C3.43,10.08 4.32,9.76 5.28,9.76C6.91,9.76 8.33,10.68 9.05,12.03C9.77,10.68 11.19,9.76 12.82,9.76C15.18,9.76 17.1,11.68 17.1,14.04V14.04M7.84,14.04V14.04C7.84,12.62 6.69,11.47 5.28,11.47C3.86,11.47 2.71,12.62 2.71,14.04V14.04C2.71,15.45 3.86,16.6 5.28,16.6C6.69,16.6 7.84,15.45 7.84,14.04M22.84,16.96V16.96C22.95,17.12 23,17.3 23,17.47C23,17.73 22.88,18 22.66,18.15C22.5,18.26 22.33,18.32 22.15,18.32C21.9,18.32 21.65,18.21 21.5,18L19.59,15.47L17.7,18V18C17.53,18.21 17.28,18.32 17.03,18.32C16.85,18.32 16.67,18.26 16.5,18.15C16.29,18 16.17,17.72 16.17,17.46C16.17,17.29 16.23,17.11 16.33,16.96V16.96H16.33V16.96L18.5,14.04L16.33,11.11V11.11H16.33V11.11C16.22,10.96 16.17,10.79 16.17,10.61C16.17,10.35 16.29,10.1 16.5,9.93C16.89,9.65 17.41,9.72 17.7,10.09V10.09L19.59,12.61L21.5,10.09C21.76,9.72 22.29,9.65 22.66,9.93C22.89,10.1 23,10.36 23,10.63C23,10.8 22.95,10.97 22.84,11.11V11.11H22.84V11.11L20.66,14.04L22.84,16.96V16.96H22.84Z", n5 = "M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z", pp = "M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z", o5 = "M0.41,13.41L6,19L7.41,17.58L1.83,12M22.24,5.58L11.66,16.17L7.5,12L6.07,13.41L11.66,19L23.66,7M18,7L16.59,5.58L10.24,11.93L11.66,13.34L18,7Z", s5 = "M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z", a5 = "M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20M16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z", c5 = "M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z", l5 = "M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z", d5 = "M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z", h5 = "M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z", u5 = "M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z", p5 = "M6.5 20Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.88 6.85 7.75 5.43 9.63 4 12 4 14.93 4 16.96 6.04 19 8.07 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20Z", y5 = "M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z", w5 = "M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10Z", f5 = "M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z", m5 = "M13,19A1,1 0 0,0 14,20H16V22H13.5C12.95,22 12,21.55 12,21C12,21.55 11.05,22 10.5,22H8V20H10A1,1 0 0,0 11,19V5A1,1 0 0,0 10,4H8V2H10.5C11.05,2 12,2.45 12,3C12,2.45 12.95,2 13.5,2H16V4H14A1,1 0 0,0 13,5V19Z", Qg = "M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z", Kg = "M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8.46,11.88L9.87,10.47L12,12.59L14.12,10.47L15.53,11.88L13.41,14L15.53,16.12L14.12,17.53L12,15.41L9.88,17.53L8.47,16.12L10.59,14L8.46,11.88M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z", v5 = "M14,14H16L12,10L8,14H10V18H14V14M6,7H18V19C18,19.5 17.8,20 17.39,20.39C17,20.8 16.5,21 16,21H8C7.5,21 7,20.8 6.61,20.39C6.2,20 6,19.5 6,19V7M19,4V6H5V4H8.5L9.5,3H14.5L15.5,4H19Z", g5 = "M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z", b5 = "M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z", x5 = "M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z", C5 = "M17.9,17.39C17.64,16.59 16.89,16 16,16H15V13A1,1 0 0,0 14,12H8V10H10A1,1 0 0,0 11,9V7H13A2,2 0 0,0 15,5V4.59C17.93,5.77 20,8.64 20,12C20,14.08 19.2,15.97 17.9,17.39M11,19.93C7.05,19.44 4,16.08 4,12C4,11.38 4.08,10.78 4.21,10.21L9,15V16A2,2 0 0,0 11,18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z", k5 = "M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z", $5 = "M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z", Mm = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M6.12,15.5L9.86,19.24L11.28,17.83L8.95,15.5L11.28,13.17L9.86,11.76L6.12,15.5M17.28,15.5L13.54,11.76L12.12,13.17L14.45,15.5L12.12,17.83L13.54,19.24L17.28,15.5Z", Tm = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z", E5 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.8,20H14L12,16.6L10,20H8.2L11.1,15.5L8.2,11H10L12,14.4L14,11H15.8L12.9,15.5L15.8,20M13,9V3.5L18.5,9H13Z", _5 = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M6,20H15L18,20V12L14,16L12,14L6,20M8,9A2,2 0 0,0 6,11A2,2 0 0,0 8,13A2,2 0 0,0 10,11A2,2 0 0,0 8,9Z", P5 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,13H11V18A2,2 0 0,1 9,20A2,2 0 0,1 7,18A2,2 0 0,1 9,16C9.4,16 9.7,16.1 10,16.3V11H13V13M13,9V3.5L18.5,9H13Z", S5 = "M12.6,12.3H10.6V15.5H12.7C13.3,15.5 13.6,15.3 13.9,15C14.2,14.7 14.3,14.4 14.3,13.9C14.3,13.4 14.2,13.1 13.9,12.8C13.6,12.5 13.2,12.3 12.6,12.3M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.2,16C14.6,16.5 14.1,16.7 12.8,16.7H10.6V20H9V11H12.8C14.1,11 14.7,11.3 15.2,11.8C15.8,12.4 16,13 16,13.9C16,14.8 15.8,15.5 15.2,16M13,9V3.5L18.5,9H13Z", L5 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z", M5 = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M17,19V13L14,15.2V13H7V19H14V16.8L17,19Z", T5 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.2,20H13.8L12,13.2L10.2,20H8.8L6.6,11H8.1L9.5,17.8L11.3,11H12.6L14.4,17.8L15.8,11H17.3L15.2,20M13,9V3.5L18.5,9H13Z", A5 = "M20,2H4C2.89,2 2,2.89 2,4V20C2,21.11 2.89,22 4,22H20C21.11,22 22,21.11 22,20V4C22,2.89 21.11,2 20,2M12,4L15,7H13V9H11V7H9M7,15L4,12L7,9V11H9V13H7M12,20L9,17H11V15H13V17H15M17,15V13H15V11H17V9L20,12", z5 = "M17 4H20C21.1 4 22 4.9 22 6V8H20V6H17V4M4 8V6H7V4H4C2.9 4 2 4.9 2 6V8H4M20 16V18H17V20H20C21.1 20 22 19.1 22 18V16H20M7 18H4V16H2V18C2 19.1 2.9 20 4 20H7V18M18 8H6V16H18V8Z", R5 = "M20 6H12L10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6M18 12H16V14H18V16H16V18H14V16H16V14H14V12H16V10H14V8H16V10H18V12Z", I5 = "M17,7H22V17H17V19A1,1 0 0,0 18,20H20V22H17.5C16.95,22 16,21.55 16,21C16,21.55 15.05,22 14.5,22H12V20H14A1,1 0 0,0 15,19V5A1,1 0 0,0 14,4H12V2H14.5C15.05,2 16,2.45 16,3C16,2.45 16.95,2 17.5,2H20V4H18A1,1 0 0,0 17,5V7M2,7H13V9H4V15H13V17H2V7M20,15V9H17V15H20Z", O5 = "M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z", D5 = "M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z", F5 = "M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3", N5 = "M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z", V5 = "M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z", H5 = "M17,17H7V7H17M21,11V9H19V7C19,5.89 18.1,5 17,5H15V3H13V5H11V3H9V5H7C5.89,5 5,5.89 5,7V9H3V11H5V13H3V15H5V17A2,2 0 0,0 7,19H9V21H11V19H13V21H15V19H17A2,2 0 0,0 19,17V15H21V13H19V11M13,13H11V11H13M15,9H9V15H15V9Z", B5 = "M7,10L12,15L17,10H7Z", U5 = "M7,15L12,10L17,15H7Z", j5 = "M18.21 10.29Q19 10.34 19.7 10.68 20.39 11 20.9 11.57 21.41 12.12 21.71 12.83 22 13.54 22 14.34 22 15.18 21.68 15.92 21.36 16.66 20.8 17.21 20.25 17.76 19.5 18.08 18.78 18.41 17.94 18.41H7Q5.97 18.41 5.06 18 4.15 17.61 3.47 16.94 2.79 16.26 2.4 15.35 2 14.44 2 13.41 2 12.59 2.26 11.83 2.5 11.08 3 10.45 3.44 9.82 4.08 9.35 4.72 8.88 5.5 8.63 5.87 8.5 6.21 8.5 6.56 8.43 6.93 8.41H6.94Q7.37 7.75 7.95 7.23 8.5 6.71 9.2 6.34 9.87 6 10.62 5.78 11.37 5.59 12.16 5.59 13.22 5.59 14.2 5.94 15.18 6.29 16 6.91 16.8 7.53 17.37 8.39 17.95 9.26 18.21 10.29M12.16 6.84Q11.05 6.84 10.06 7.3 9.06 7.75 8.36 8.6 8.73 8.7 9.07 8.85 9.4 9 9.73 9.2L13.71 11.58L16 10.62Q16.21 10.53 16.44 10.45 16.67 10.38 16.92 10.33 16.68 9.55 16.21 8.91 15.74 8.27 15.11 7.81 14.5 7.35 13.73 7.1 13 6.84 12.16 6.84M4 15.66L12.27 12.18L9.08 10.26Q8.59 9.97 8.06 9.81 7.5 9.66 6.95 9.66 6.19 9.66 5.5 9.96 4.84 10.26 4.34 10.77 3.84 11.29 3.54 11.97 3.25 12.65 3.25 13.41 3.25 14 3.45 14.59 3.64 15.19 4 15.66M17.94 17.16Q18.41 17.16 18.84 17 19.27 16.86 19.64 16.58L13.61 13L5.03 16.59Q5.47 16.86 5.97 17 6.47 17.16 7 17.16M20.45 15.61Q20.75 15 20.75 14.34 20.75 13.7 20.5 13.17 20.26 12.65 19.85 12.28 19.43 11.91 18.88 11.71 18.32 11.5 17.7 11.5 17.35 11.5 17 11.6 16.66 11.68 16.33 11.81 16 11.93 15.67 12.08 15.35 12.23 15.04 12.37Z", W5 = "M19,13H5V11H19V13Z", q5 = "M21 2C22.05 2 22.92 2.81 23 3.85L23 4V16C23 17.05 22.18 17.92 21.15 18L21 18H14V20H16V22H8V20H10V18H3C1.95 18 1.08 17.18 1 16.15L1 16V4C1 2.94 1.81 2.08 2.85 2L3 2H21M21 4H3V16H21V4M12 11C14.21 11 16 11.9 16 13V14H8V13C8 11.9 9.79 11 12 11M12 6C13.11 6 14 6.9 14 8S13.11 10 12 10 10 9.11 10 8 10.9 6 12 6Z", Q5 = "M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z", Jp = "M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z", K5 = "M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z", G5 = "M2,5.27L3.28,4L20,20.72L18.73,22L12.8,16.07V22H11.2V16H6V14L8,12V11.27L2,5.27M16,12L18,14V16H17.82L8,6.18V4H7V2H17V4H16V12Z", Gg = "M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z", Z5 = "M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z", Zg = "M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z", Y5 = "M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z", X5 = "M2,21L23,12L2,3V10L17,12L2,14V21Z", J5 = "M13,19H14A1,1 0 0,1 15,20H15.73L13,17.27V19M22,20V21.18L20.82,20H22M21,22.72L19.73,24L17.73,22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H6.73L4.73,9H4A1,1 0 0,1 3,8V7.27L1,5.27L2.28,4L21,22.72M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H9.82L7,6.18V5H5.82L3.84,3C3.89,3 3.94,3 4,3M20,11A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H17.82L11.82,11H20M9,7H10V5H9V7M9,15H10V14.27L9,13.27V15M5,13V15H7V13H5Z", t4 = "M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1M15.08 16L12 14.15L8.93 16L9.74 12.5L7.03 10.16L10.61 9.85L12 6.55L13.39 9.84L16.97 10.15L14.26 12.5L15.08 16Z", e4 = "M21 11C21 16.55 17.16 21.74 12 23C6.84 21.74 3 16.55 3 11V5L12 1L21 5V11M12 21C15.75 20 19 15.54 19 11.22V6.3L12 3.18L5 6.3V11.22C5 15.54 8.25 20 12 21M15.05 16L11.97 14.15L8.9 16L9.71 12.5L7 10.16L10.58 9.85L11.97 6.55L13.37 9.84L16.95 10.15L14.23 12.5L15.05 16", i4 = "M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z", r4 = "M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z", n4 = "M20.8 22.7L17.9 19.8L18.2 21L12 17.3L5.8 21L7.4 14L2 9.2L6.9 8.8L1.1 3L2.4 1.7L22.1 21.4L20.8 22.7M22 9.2L14.8 8.6L12 2L10 6.8L16.9 13.7L22 9.2Z", o4 = "M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z", s4 = "M9,3L5,7H8V14H10V7H13M16,17V10H14V17H11L15,21L19,17H16Z", a4 = "M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z", c4 = "M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z", l4 = "M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z", d4 = "M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z", h4 = "M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z", u4 = "M3 5V19H20V5H3M7 7V9H5V7H7M5 13V11H7V13H5M5 15H7V17H5V15M18 17H9V15H18V17M18 13H9V11H18V13M18 9H9V7H18V9Z", p4 = "M4 5V18H21V5H4M14 7V10.5H11V7H14M6 7H9V10.5H6V7M6 16V12.5H9V16H6M11 16V12.5H14V16H11M19 16H16V12.5H19V16M16 10.5V7H19V10.5H16Z", y4 = "M2.28,3L1,4.27L2.47,5.74C2.04,6 1.61,6.29 1.2,6.6L3,9C3.53,8.6 4.08,8.25 4.66,7.93L6.89,10.16C6.15,10.5 5.44,10.91 4.8,11.4L6.6,13.8C7.38,13.22 8.26,12.77 9.2,12.47L11.75,15C10.5,15.07 9.34,15.5 8.4,16.2L12,21L14.46,17.73L17.74,21L19,19.72M12,3C9.85,3 7.8,3.38 5.9,4.07L8.29,6.47C9.5,6.16 10.72,6 12,6C15.38,6 18.5,7.11 21,9L22.8,6.6C19.79,4.34 16.06,3 12,3M12,9C11.62,9 11.25,9 10.88,9.05L14.07,12.25C15.29,12.53 16.43,13.07 17.4,13.8L19.2,11.4C17.2,9.89 14.7,9 12,9Z";
const Am = Y5, zm = {
  "zoom-meetings": '<path d="M21.5 12.5c0 .96-.08 1.91-.23 2.83a7.198 7.198 0 01-5.95 5.95 17.527 17.527 0 01-5.66 0 7.198 7.198 0 01-5.95-5.95 17.527 17.527 0 010-5.66c.49-3.05 2.9-5.46 5.95-5.95a17.527 17.527 0 015.66 0c3.05.49 5.46 2.9 5.95 5.95.15.92.23 1.86.23 2.83z" fill="#0b5cff"/><path d="M14.43 14.75c0 .53-.43.96-.96.96H9.29c-1.07 0-1.93-.86-1.93-1.93v-3.54c0-.53.43-.96.96-.96h4.18c1.07 0 1.93.86 1.93 1.93v3.54zM16.87 9.86l-1.41 1.06c-.24.18-.39.47-.39.77v1.61c0 .3.14.59.39.77l1.41 1.06c.32.24.77.01.77-.39v-4.5c0-.4-.45-.62-.77-.39z" fill="#fff"/>',
  "google-meet": '<path fill="#1e88e5" d="M3.5 9.07v5.86l2.09.42 2.1-.42V9.07l-2.1-.42-2.09.42z"/><path d="M17.73 12v5.86c0 .69-.56 1.26-1.26 1.26H7.69l-.42-2.09.42-2.09h5.86v-2.93l2.09-.42 2.09.42z" fill="#4caf50"/><path d="M17.73 6.14V12h-4.19V9.07H7.68l-.42-2.09.42-2.09h8.79c.69 0 1.26.56 1.26 1.26z" fill="#fbc02d"/><path d="M7.69 14.93v4.19H4.76c-.69 0-1.26-.56-1.26-1.26v-2.93h4.19z" fill="#1565c0"/><path fill="#e53935" d="M7.69 4.88v4.19H3.5l4.19-4.19z"/><path fill="#2e7d32" d="M18.15 12l-.42 3.54L13.55 12l4.18-3.54.42 3.54z"/><path d="M21.5 6.19v11.63c0 .35-.41.55-.68.33l-3.09-2.6V8.48l3.09-2.6c.27-.22.68-.03.68.33z" fill="#4caf50"/>',
  "webex-meetings": '<defs><radialGradient id="prefix__b" cx="-951.63" cy="549.04" fx="-951.63" fy="549.04" r=".05" gradientTransform="matrix(-87.16473 -146.04628 -122.52671 73.12756 -15652.44 -179117.85)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#007383"/><stop offset=".41" stop-color="#00717e" stop-opacity=".75"/><stop offset=".87" stop-color="#007281" stop-opacity="0"/></radialGradient><radialGradient id="prefix__c" cx="-952.67" cy="549.07" fx="-952.67" fy="549.07" r=".05" gradientTransform="rotate(-126.7 -53497.341 -58162.752) scale(138.69 -91.09)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#218970"/><stop offset=".46" stop-color="#267e6a"/><stop offset="1" stop-color="#026c51" stop-opacity="0"/></radialGradient><radialGradient id="prefix__d" cx="-952.61" cy="541.2" fx="-952.61" fy="541.2" r=".05" gradientTransform="matrix(-33.8827 -107.79009 -56.09397 17.63256 -1902.72 -112216.84)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#178697"/><stop offset=".41" stop-color="#17838f" stop-opacity=".79"/><stop offset=".87" stop-color="#007281" stop-opacity="0"/></radialGradient><radialGradient id="prefix__e" cx="-949.76" cy="547.24" fx="-949.76" fy="547.24" r=".05" gradientTransform="matrix(-146.98086 -246.36712 -75.94201 45.30646 -98045.43 -258761.67)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#25342f" stop-opacity=".3"/><stop offset="1" stop-color="#25342f" stop-opacity="0"/></radialGradient><radialGradient id="prefix__f" cx="-942.87" cy="563.62" fx="-942.87" fy="563.62" r=".05" gradientTransform="rotate(85.1 -69752.427 38265.017) scale(108.08 -61.22)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#056d4f"/><stop offset=".23" stop-color="#056c4e" stop-opacity=".75"/><stop offset=".6" stop-color="#056c4e" stop-opacity=".3"/><stop offset=".87" stop-color="#056c4f" stop-opacity="0"/></radialGradient><radialGradient id="prefix__g" cx="-940.36" cy="556.77" fx="-940.36" fy="556.77" r=".05" gradientTransform="matrix(68.96997 106.65216 55.9082 -36.1548 33735.1 120422.29)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#22b67b"/><stop offset=".41" stop-color="#24be82"/><stop offset="1" stop-color="#24be82" stop-opacity=".07"/></radialGradient><radialGradient id="prefix__i" cx="-940.77" cy="554.96" fx="-940.77" fy="554.96" r=".05" gradientTransform="rotate(49.69 -177135.555 122596.9) scale(165.85 -165.4)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#09f8ff"/><stop offset="1" stop-color="#0bf7f9" stop-opacity="0"/></radialGradient><radialGradient id="prefix__j" cx="-944.1" cy="553.18" fx="-944.1" fy="553.18" r=".05" gradientTransform="rotate(48.05 -367132.581 263331.898) scale(336.36 -335.78)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00b8ff"/><stop offset=".75" stop-color="#00b9fc" stop-opacity="0"/></radialGradient><radialGradient id="prefix__k" cx="-951.17" cy="546.23" fx="-951.17" fy="546.23" r=".05" gradientTransform="matrix(-48.64247 -154.74493 -107.10322 33.66679 12252.88 -165563.53)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00bcff" stop-opacity=".76"/><stop offset=".57" stop-color="#00bafc" stop-opacity="0"/></radialGradient><radialGradient id="prefix__l" cx="-953.78" cy="550.07" fx="-953.78" fy="550.07" r=".05" gradientTransform="matrix(-72.9418 -88.45403 -61.91396 51.05608 -35502.54 -112443.2)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5fec50"/><stop offset="1" stop-color="#3cc08e" stop-opacity="0"/></radialGradient><radialGradient id="prefix__m" cx="-954.59" cy="523.18" fx="-954.59" fy="523.18" r=".05" gradientTransform="rotate(-79.11 -8961.313 -26349.067) scale(34.73 -23.99)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#28855b"/><stop offset="1" stop-color="#14795c" stop-opacity="0"/></radialGradient><radialGradient id="prefix__n" cx="-955.7" cy="534.72" fx="-955.7" fy="534.72" r=".05" gradientTransform="matrix(6.00138 -27.99393 -39.07222 -8.37636 26647.75 -22260.21)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#28855b"/><stop offset="1" stop-color="#14795c" stop-opacity="0"/></radialGradient><radialGradient id="prefix__o" cx="-954.99" cy="550.19" fx="-954.99" fy="550.19" r=".05" gradientTransform="matrix(-64.43177 -69.7019 -48.95728 45.25565 -34575.21 -91452.74)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5ff05b"/><stop offset=".81" stop-color="#5de955" stop-opacity="0"/></radialGradient><radialGradient id="prefix__p" cx="-938.28" cy="553.05" fx="-938.28" fy="553.05" r=".05" gradientTransform="matrix(66.96005 51.3617 71.4219 -93.11248 23342.15 99701.75)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".97" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__q" cx="-940.1" cy="550.5" fx="-940.1" fy="550.5" r=".05" gradientTransform="matrix(98.43675 14.71147 21.98813 -147.126 80455.97 94829.3)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".59" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__r" cx="-938.38" cy="551.97" fx="-938.38" fy="551.97" r=".05" gradientTransform="rotate(24.69 -231174.852 140478.806) scale(85.04 -151.66)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".76" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__s" cx="-945.2" cy="560.82" fx="-945.2" fy="560.82" r=".05" gradientTransform="rotate(95.79 -93552.04 41883.384) scale(153.04 -83.75)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".59" stop-color="#123aa8" stop-opacity="0"/><stop offset="1" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__t" cx="-945.05" cy="562.66" fx="-945.05" fy="562.66" r=".05" gradientTransform="rotate(93.66 -104350.43 63182.76) scale(184.18 -65.64)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".88" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__u" cx="-942.29" cy="567.94" fx="-942.29" fy="567.94" r=".05" gradientTransform="matrix(8.78957 97.33394 51.50044 -4.65066 -20951.98 94373.6)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".88" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__v" cx="-942.85" cy="562.23" fx="-942.85" fy="562.23" r=".05" gradientTransform="matrix(4.89377 101.88254 84.00315 -4.03496 -42611.94 98338.06)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".88" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__w" cx="-941.74" cy="549.74" fx="-941.74" fy="549.74" r=".05" gradientTransform="rotate(-23.2 244205.91 -321749.854) scale(113.62 -222.29)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".71" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__x" cx="-959.91" cy="553.32" fx="-959.91" fy="553.32" r=".05" gradientTransform="matrix(-70.50332 -26.36011 -45.18376 120.84945 -42670.87 -92159.05)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#1a3da0"/><stop offset=".71" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__y" cx="-940.3" cy="551.63" fx="-940.3" fy="551.63" r=".05" gradientTransform="matrix(137.44492 41.41855 41.86 -138.90985 106154.62 115588.85)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#1e3882"/><stop offset=".76" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__A" cx="-940.77" cy="554.96" fx="-940.77" fy="554.96" r=".05" gradientTransform="rotate(49.69 -177135.55 122596.884) scale(165.85 -165.4)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#09f8ff"/><stop offset="1" stop-color="#0bf7f9" stop-opacity="0"/></radialGradient><radialGradient id="prefix__D" cx="-951.17" cy="546.23" fx="-951.17" fy="546.23" r=".05" gradientTransform="matrix(-48.64247 -154.74493 -107.10322 33.66679 12252.88 -165563.53)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00bcff" stop-opacity=".76"/><stop offset=".57" stop-color="#00bafc" stop-opacity="0"/></radialGradient><linearGradient id="prefix__a" x1="76.14" y1="-95.89" x2="64.37" y2="-99.75" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5cee64"/><stop offset="1" stop-color="#0bf"/></linearGradient><linearGradient id="prefix__h" x1="56.74" y1="-98.36" x2="65.09" y2="-98.43" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#09f8ff"/><stop offset="1" stop-color="#0bf7f9" stop-opacity="0"/></linearGradient><linearGradient id="prefix__z" x1="61.48" y1="-92.95" x2="67.9" y2="-97.04" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset=".23" stop-color="#1dc4ff"/><stop offset="1" stop-color="#1cc1ff" stop-opacity="0"/></linearGradient><linearGradient id="prefix__B" x1="63.13" y1="-92.11" x2="64.93" y2="-93.74" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#26fbff"/><stop offset=".64" stop-color="#0bf7f9" stop-opacity="0"/></linearGradient><linearGradient id="prefix__C" x1="60.36" y1="-97.78" x2="62.85" y2="-97.95" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#26fbff"/><stop offset=".64" stop-color="#0bf7f9" stop-opacity="0"/></linearGradient></defs><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__a)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__b)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__c)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__d)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__e)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__f)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__g)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__h)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__i)"/><path d="M15.37 5.44c-1.34 0-2.88.45-3.9 2.4-.59 1.12-.89 2.38-1.16 3.63-.09.41-.18.83-.28 1.22v5.66c.51-.14 1.05-.42 1.57-.95 1.96-1.99 2.28-7.2 3.26-8.19.11-.11.23-.18.36-.18.39 0 .7.5.99 1.1.32.67.71 1.43 1.84 1.43.52 0 1.72-.38 1.72-1.85 0-.88-1.47-4.28-4.39-4.28z" fill="url(#prefix__j)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__k)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__l)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__m)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__n)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__o)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="#316aff"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__p)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__q)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__r)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__s)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__t)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__u)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__v)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__w)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__x)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__y)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__z)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__A)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__B)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__C)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__D)"/>',
  "microsoft-teams": '<path d="M15.56 9.91h4.65c.44 0 .8.36.8.8v4.24c0 1.61-1.31 2.92-2.92 2.92h-.01c-1.61 0-2.92-1.31-2.92-2.92v-4.62c0-.23.19-.42.42-.42z" fill="#5059c9"/><circle cx="18.7" cy="7.19" r="1.88" fill="#5059c9"/><circle cx="12.84" cy="6.35" r="2.72" fill="#7b83eb"/><path d="M16.47 9.91H8.8a.79.79 0 00-.77.8v4.83c-.06 2.6 2 4.77 4.6 4.83 2.6-.06 4.67-2.23 4.6-4.83v-4.83a.783.783 0 00-.77-.8z" fill="#7b83eb"/><path d="M3.77 7.4h7.67c.42 0 .77.34.77.77v7.67c0 .42-.34.77-.77.77H3.77a.77.77 0 01-.77-.77V8.17c0-.42.34-.77.77-.77z" fill="#5a62c3"/><path d="M9.62 10.32H8.09v4.18h-.98v-4.18H5.58v-.81h4.04v.81z" fill="#fff"/>'
}, Rm = {
  "account-minus": Zx,
  "account-plus": Yx,
  alert: Xx,
  "alert-circle": Jx,
  "alert-octagon": t5,
  attachment: jg,
  back: Lm,
  "backup-restore": i5,
  bell: Wg,
  "bell-off": qg,
  bot: H5,
  check: pp,
  "check-all": o5,
  "check-circle-outline": a5,
  "checkbox-blank": c5,
  "checkbox-marked": l5,
  "circle-outline": d5,
  "check-circle": s5,
  close: h5,
  "close-circle": u5,
  comment: y5,
  "comment-outline": w5,
  confluence: "M.87 18.257c-.248.382-.53.875-.763 1.245a.764.764 0 0 0 .255 1.04l4.965 3.054a.764.764 0 0 0 1.058-.26c.199-.332.454-.763.733-1.221 1.967-3.247 3.945-2.853 7.508-1.146l4.957 2.337a.764.764 0 0 0 1.028-.382l2.364-5.346a.764.764 0 0 0-.382-1 599.851 599.851 0 0 1-4.965-2.361C10.911 10.97 5.224 11.185.87 18.257zM23.131 5.743c.249-.405.531-.875.764-1.25a.764.764 0 0 0-.256-1.034L18.675.404a.764.764 0 0 0-1.058.26c-.195.335-.451.763-.734 1.225-1.966 3.246-3.945 2.85-7.508 1.146L4.437.694a.764.764 0 0 0-1.027.382L1.046 6.422a.764.764 0 0 0 .382 1c1.039.49 3.105 1.467 4.965 2.361 6.698 3.246 12.392 3.029 16.738-4.04z",
  "content-save": f5,
  delete: Qg,
  "delete-restore": v5,
  "delete-forever": Kg,
  "dots-vertical": g5,
  download: b5,
  earth: C5,
  "emoticon-plus": "M 19 0 L 19 3 L 16 3 L 16 5 L 19 5 L 19 8 L 21 8 L 21 5 L 24 5 L 24 3 L 21 3 L 21 0 L 19 0 z M 12 2 C 6.5 2 2 6.5 2 12 C 2 17.5 6.5 22 12 22 C 17.5 22 22 17.5 22 12 L 20 12 C 20 16.4 16.4 20 12 20 C 7.6 20 4 16.4 4 12 C 4 7.6 7.6 4 12 4 L 12 2 z M 8.5 8 C 7.7 8 7 8.7 7 9.5 C 7 10.3 7.7 11 8.5 11 C 9.3 11 10 10.3 10 9.5 C 10 8.7 9.3 8 8.5 8 z M 15.5 8 C 14.7 8 14 8.7 14 9.5 C 14 10.3 14.7 11 15.5 11 C 16.3 11 17 10.3 17 9.5 C 17 8.7 16.3 8 15.5 8 z M 6.9 14 C 7.7 16 9.7 17.5 12 17.5 C 14.3 17.5 16.3 16 17.1 14 L 6.9 14 z",
  "fit-screen": z5,
  "fit-width": A5,
  "help-circle": D5,
  information: N5,
  magnify: V5,
  "menu-down": B5,
  "menu-up": U5,
  minus: W5,
  next: e5,
  "open-in-new": Q5,
  pencil: Jp,
  pin: K5,
  unpin: G5,
  plus: Gg,
  "plus-circle-outline": Z5,
  poll: n5,
  previous: Lm,
  read: pp,
  restore: Zg,
  unread: pp,
  send: X5,
  "server-network-off": J5,
  "shield-star": t4,
  "shield-star-outline": e4,
  sort: i4,
  star: r4,
  unstar: n4,
  "swap-horizontal": o4,
  textbox: I5,
  "thumb-up": a4,
  "thumb-up-outline": c4,
  trashcan: l4,
  video: h4,
  "view-list-outline": u4,
  "view-module-outline": p4,
  "wifi-off": y4,
  // Files
  email: k5,
  file: $5,
  "file-upload": L5,
  "file-music": P5,
  "file-image": _5,
  "file-video": M5,
  "file-code": Mm,
  "file-xml": Mm,
  "file-document": Tm,
  "file-word": T5,
  "file-excel": E5,
  "file-pdf": Tm,
  "file-powerpoint": S5,
  "file-compressed": R5,
  // Integrations
  meeting: q5,
  box: r5,
  cloud: p5,
  dropbox: x5,
  "google-drive": O5,
  onedrive: j5
}, Im = {
  attach: jg,
  create: Gg,
  "delete-forever": Kg,
  edit: Jp,
  modify: Jp,
  rename: m5,
  replace: s4,
  restore: Zg,
  subscribe: Wg,
  trash: Qg,
  unsubscribe: qg,
  upload: d4,
  version: F5
}, Om = {
  dropbox: "#0061fe",
  onedrive: "#0078d4",
  box: "#0161d5",
  "google-drive": "#1a73e8",
  zoom: "#4a8cff",
  confluence: "#2684ff"
};
function Dm(o) {
  return o && o in Rm ? Rm[o] : "";
}
c(Dm, "getIconMapping");
function w4(o) {
  return o && o in zm ? zm[o] : "";
}
c(w4, "getSvgMapping");
function f4(o) {
  return o && o in Im ? Im[o] : "";
}
c(f4, "getFileActionIconMapping");
const wt = /* @__PURE__ */ c((o) => o ?? L, "to"), m4 = ':where(:host,:host>*,[class^=wy-],[class*=" wy-"]){box-sizing:border-box;text-align:initial;font-size:var(--wy-font-size, var(--wy-size, 1em))}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:before,:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:after{box-sizing:inherit}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a){text-decoration:var(--wy-link-decoration, none);color:var(--wy-link, var(--wy-primary-40, #006399))}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a):hover,:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a):hover{text-decoration:var(--wy-link-hover-decoration, unset)}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(a):where(:not([href]):not([class])):hover,:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(a):where(:not([href]):not([class])):hover{text-decoration:none}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(p),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(p){margin-top:0;margin-bottom:calc(1 * var(--wy-size, 1rem))}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where(label),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where(label){cursor:inherit}:where(:host,:host>*,[class^=wy-],[class*=" wy-"])[hidden],:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *[hidden]{display:none!important}:where(:host,:host>*,[class^=wy-],[class*=" wy-"]):where([role=button]),:where(:host,:host>*,[class^=wy-],[class*=" wy-"]) *:where([role=button]){cursor:pointer}', we = Pt(m4), v4 = '[part~=wy-icon]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-icon][width="24"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon][height="24"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon-first]{margin-left:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-last]{margin-right:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-padded]{margin:16.66666667%}[part~=wy-icon-inline]{vertical-align:-.25em}[part~=wy-icon-overlay]{position:absolute;bottom:0;right:0;background:var(--wy-component-background-color, var(--wy-background, var(--wy-neutral-99, #fcfcff)));border-radius:50%;border:1px solid var(--wy-component-background-color, var(--wy-background, var(--wy-neutral-99, #fcfcff)))}:host(wy-icon-stack),[part~=wy-icon-stack]{display:inline-flex;position:relative;line-height:1}[part~=wy-icon-stack-layer]{position:absolute}[part~=wy-icon-stack-overlay]{position:absolute;bottom:0;right:0;background-color:var(--wy-component-background-color, var(--wy-background, var(--wy-neutral-99, #fcfcff)));border-radius:50%;width:calc(var(--wy-component-icon-width) / 2);height:calc(var(--wy-component-icon-height) / 2)}[part~=wy-icon-current-color]{fill:currentColor}[part~=wy-icon-state]{transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));align-self:center;justify-self:center;margin:auto;opacity:0}[part~=wy-icon-state][part~=wy-active]{opacity:1}:host(wy-icon-display),[part~=wy-icon-display]{color:var(--wy-component-color, var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e)));border-radius:var(--wy-component-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));margin:auto}[part~=wy-icon-display-icon]{--wy-component-icon-width: calc(4 * var(--wy-size, 1rem));--wy-component-icon-height: calc(4 * var(--wy-size, 1rem));padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-icon-display-text],[part~=wy-icon-display-meta]{padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));text-align:center}[part~=wy-icon-color-primary]{fill:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-icon-color-secondary]{fill:var(--wy-secondary, var(--wy-secondary-40, #3b6a1c))}[part~=wy-icon-color-tertiary]{fill:var(--wy-tertiary, var(--wy-tertiary-40, #3b6a1c))}[part~=wy-icon-color-surface]{fill:var(--wy-surface, var(--wy-neutral-99, #fcfcff))}[part~=wy-icon-color-surface-variant]{fill:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-icon-color-error]{fill:var(--wy-error, var(--wy-error-40, #ba1824))}[part~=wy-icon-color-warning]{fill:var(--wy-warning, var(--wy-warning-70, #afb140))}[part~=wy-icon-color-blue]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-icon-color-indigo]{fill:var(--wy-indigo, var(--wy-indigo-light, #9185de))}[part~=wy-icon-color-purple]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-icon-color-pink]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-icon-color-red]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-icon-color-orange]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-icon-color-yellow]{fill:var(--wy-yellow, var(--wy-yellow-light, #afb140))}[part~=wy-icon-color-green]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-icon-color-teal]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-icon-color-cyan]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-icon-color-gray]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-icon-color-black]{fill:var(--wy-black, var(--wy-black, #000000))}[part~=wy-icon-color-white]{fill:var(--wy-white, var(--wy-white, #ffffff))}[part*=wy-kind-]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-kind-archive]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-audio]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-kind-code]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-document]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-kind-email]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-presentation]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-spreadsheet]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-image]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-kind-text]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-kind-video]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-ext-pdf]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-text-icon]{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}', _w = Pt(v4), ff = class ff extends Ni {
  constructor(t) {
    var i;
    if (super(t), t.type !== Bc.ATTRIBUTE || t.name !== "part" || ((i = t.strings) == null ? void 0 : i.length) > 2)
      throw new Error(
        "`partMap()` can only be used in the `part` attribute and must be the only section in the attribute."
      );
  }
  render(t) {
    return " " + Object.keys(t).filter((i) => t[i]).join(" ") + " ";
  }
  update(t, [i]) {
    var n, s;
    if (this._previousShadowParts === void 0) {
      this._previousShadowParts = /* @__PURE__ */ new Set(), t.strings !== void 0 && (this._staticShadowParts = new Set(
        t.strings.join(" ").split(/\s/).filter((a) => a !== "")
      ));
      for (const a in i)
        i[a] && !((n = this._staticShadowParts) != null && n.has(a)) && this._previousShadowParts.add(a);
      return this.render(i);
    }
    const r = t.element.part;
    for (const a of this._previousShadowParts)
      a in i || (r.remove(a), this._previousShadowParts.delete(a));
    for (const a in i) {
      const l = !!i[a];
      l !== this._previousShadowParts.has(a) && !((s = this._staticShadowParts) != null && s.has(a)) && (l ? (r.add(a), this._previousShadowParts.add(a)) : (r.remove(a), this._previousShadowParts.delete(a)));
    }
    return bd;
  }
};
c(ff, "ShadowPartMapDirective");
let ty = ff;
const ue = Cr(ty);
const mf = class mf extends Ni {
  constructor(t) {
    if (super(t), this.it = L, t.type !== Bc.CHILD) throw Error(this.constructor.directiveName + "() can only be used in child bindings");
  }
  render(t) {
    if (t === L || t == null) return this._t = void 0, this.it = t;
    if (t === bd) return t;
    if (typeof t != "string") throw Error(this.constructor.directiveName + "() called with a non-string value");
    if (t === this.it) return this._t;
    this.it = t;
    const i = [t];
    return i.raw = i, this._t = { _$litType$: this.constructor.resultType, strings: i, values: [] };
  }
};
c(mf, "le");
let bc = mf;
bc.directiveName = "unsafeHTML", bc.resultType = 1;
const no = Cr(bc);
const vf = class vf extends bc {
};
c(vf, "pe");
let vl = vf;
vl.directiveName = "unsafeSVG", vl.resultType = 2;
const Fm = Cr(vl);
var g4 = Object.defineProperty, b4 = Object.getOwnPropertyDescriptor, Xt = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? b4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && g4(t, i, n), n;
}, "__decorateClass$17"), Ms;
let Wt = (Ms = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.color = "", this.size = 24, this.path = Am, this.inline = !1, this.first = !1, this.last = !1, this.padded = !1, this.layer = !1, this.state = !1, this.active = !1;
  }
  willUpdate(t) {
    t.has("name") && this.name && (this.path = Dm(this.name) || Am, this.overlayPath = Dm(this.overlayName) || this.overlayPath, this.nativeIconColor = this.color === "native" && Om[this.name] || void 0, this.nativeOverlayColor = this.overlayName && Om[this.overlayName] || void 0);
  }
  render() {
    var l;
    const t = this.kind ? lg(this.kind) : this.kind, i = (l = this.ext) != null && l.startsWith(".") ? this.ext.substring(1) : this.ext, r = {
      "wy-icon": !0,
      "wy-icon-current-color": !t && !this.color,
      ["wy-kind-" + t]: !!t,
      ["wy-ext-" + i]: !!i,
      ["wy-icon-color-" + this.color]: !!this.color,
      "wy-icon-first": this.first,
      "wy-icon-last": this.last,
      "wy-icon-padded": this.padded,
      "wy-icon-inline": this.inline,
      "wy-icon-stack-layer": this.layer,
      "wy-icon-state": this.state,
      "wy-active": this.active
    }, n = this.size !== 24 && this.size / 16, s = n ? `width: var(--wy-component-icon-width, calc(${n} * var(--wy-size, 1rem))); height: var(--wy-component-icon-height, calc(${n} * var(--wy-size, 1rem)));` : "", a = this.svg && w4(this.svg);
    return this.overlayPath ? y`
        <wy-icon-stack style="${s}">
          <svg part=${ue(r)} viewBox="0 0 24 24" width="${this.size}" height="${this.size}">
            ${a ? Fm(a) : am`
          <path d="${this.path}" style="fill: ${wt(this.nativeIconColor)}" />
        `}
            <!--rect width="24" height="24" fill="transparent" /-->
          </svg>
          <svg part="wy-icon-stack-overlay" viewBox="0 0 24 24" width="${this.size / 2}" height="${this.size / 2}">
            <path d="${this.overlayPath}" style="fill: ${wt(this.nativeOverlayColor)}" />
            <!--rect width="24" height="24" fill="transparent" /-->
          </svg>
        </wy-icon-stack>
      ` : y`
      <svg
        part=${ue(r)}
        style="${s}"
        viewBox="0 0 24 24"
        width="${this.size}"
        height="${this.size}"
      >
        ${a ? Fm(a) : am`
          <path d="${this.path}" style="fill: ${wt(this.nativeIconColor)}" />
        `}
        <!--rect width="24" height="24" fill="transparent" /-->
      </svg>
    `;
  }
}, c(Ms, "WyIcon"), Ms);
Wt.styles = [
  we,
  _w,
  vt`
      :host {
        display: contents;
      }
    `
];
Xt([
  v()
], Wt.prototype, "name", 2);
Xt([
  v()
], Wt.prototype, "overlayName", 2);
Xt([
  v()
], Wt.prototype, "svg", 2);
Xt([
  v()
], Wt.prototype, "color", 2);
Xt([
  v({ type: Number })
], Wt.prototype, "size", 2);
Xt([
  v()
], Wt.prototype, "kind", 2);
Xt([
  v()
], Wt.prototype, "ext", 2);
Xt([
  v({ attribute: !1 })
], Wt.prototype, "path", 2);
Xt([
  v({ attribute: !1 })
], Wt.prototype, "overlayPath", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "inline", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "first", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "last", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "padded", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "layer", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "state", 2);
Xt([
  v({ type: Boolean })
], Wt.prototype, "active", 2);
Xt([
  W()
], Wt.prototype, "nativeIconColor", 2);
Xt([
  W()
], Wt.prototype, "nativeOverlayColor", 2);
Wt = Xt([
  Q("wy-icon")
], Wt);
var Ts;
let ey = (Ts = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    return y`<slot></slot>`;
  }
}, c(Ts, "WyIconStack"), Ts);
ey.styles = [we, _w];
ey = Xt([
  Q("wy-icon-stack")
], ey);
var As;
let iy = (As = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    return y`
      <div part="wy-icon-display-icon">
        <slot></slot>
      </div>
      <div part="wy-icon-display-text">
        <slot name="text"></slot>
      </div>
      <div part="wy-icon-display-meta">
        <slot name="meta"></slot>
      </div>
    `;
  }
}, c(As, "WyIconDisplay"), As);
iy.styles = [we, _w];
iy = Xt([
  Q("wy-icon-display")
], iy);
const x4 = '[part~=wy-progress]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-progress]:not([width]),[part~=wy-progress][width="24"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress]:not([height]),[part~=wy-progress][height="24"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress-padded]{margin:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-progress][part~=wy-primary]{color:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-progress-remaining]{fill:none;stroke:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-progress-done]{fill:none;stroke:currentColor}[part~=wy-spinner]{align-self:center;justify-self:center;margin:auto}[part~=wy-spinner-padded]{margin:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-spinner-overlay]{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto}[part~=wy-spinner-circle]{stroke-dasharray:1,100;stroke-dashoffset:0;transform-origin:center;fill:none!important}[part~=wy-spinner][part~=wy-spin]{animation:wy-rotate 1.4s linear infinite}[part~=wy-spinner-circle][part~=wy-spin]{animation:wy-dash 1.4s ease-in-out infinite,wy-color 2.8s ease-in-out infinite}@keyframes wy-rotate{to{transform:rotate(360deg)}}@keyframes wy-dash{0%{stroke-dasharray:1,100;stroke-dashoffset:0}50%{stroke-dasharray:44.5,100;stroke-dashoffset:-17.5}to{stroke-dasharray:44.5,100;stroke-dashoffset:-62}}@keyframes wy-color{0%,to{stroke:var(--wy-primary, var(--wy-primary-40, #006399))}25%{stroke:var(--wy-primary, var(--wy-primary-40, #006399))}50%{stroke:transparent}75%{stroke:var(--wy-primary, var(--wy-primary-40, #006399))}}', C4 = Pt(x4), k4 = '[part~=wy-progress]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-progress]:not([width]),[part~=wy-progress][width="24"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress]:not([height]),[part~=wy-progress][height="24"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress-padded]{margin:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-progress][part~=wy-primary]{color:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-progress-remaining]{fill:none;stroke:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-progress-done]{fill:none;stroke:currentColor}', $4 = Pt(k4);
var E4 = Object.defineProperty, _4 = Object.getOwnPropertyDescriptor, Uc = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? _4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && E4(t, i, n), n;
}, "__decorateClass$16"), zs;
let ln = (zs = class extends K {
  constructor() {
    super(...arguments), this.shadowParts = new Z(this), this.size = 24, this.noSpin = !1, this.padded = !1, this.overlay = !1, this.progress = NaN;
  }
  render() {
    const t = this.noSpin && this.progress && 100 - this.progress || void 0;
    if (t !== void 0) {
      const r = Math.PI * 20, n = {
        "wy-progress": !0,
        "wy-primary": !0,
        "wy-progress-padded": this.padded
      };
      return y`<svg
        part="${ue(n)}"
        viewBox="0 0 24 24"
        width=${this.size}
        height=${this.size}
        transform="rotate(-90)"
      >
        <circle
          part="wy-progress-circle wy-progress-remaining"
          cx="12"
          cy="12"
          r=${10}
          stroke-linecap="butt"
          stroke-width="2"
          fill="none"
          stroke="#eee"
        ></circle>
        <circle
          part="wy-progress-circle wy-progress-done"
          cx="12"
          cy="12"
          r=${10}
          stroke-dasharray=${r}
          stroke-dashoffset=${r * t / 100}
          stroke-linecap="butt"
          stroke-width="2"
          fill="none"
          stroke="currentColor"
          path-length="200"
        ></circle>
      </svg>`;
    } else {
      const i = {
        "wy-spinner": !0,
        "wy-spin": !this.noSpin,
        "wy-spinner-overlay": this.overlay,
        "wy-spinner-padded": this.padded
      }, r = {
        "wy-spinner-circle": !0,
        "wy-spin": !this.noSpin
      };
      return y`<svg
        part="${ue(i)}"
        width=${this.size}
        height=${this.size}
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle
          part="${ue(r)}"
          fill="none"
          cx="12"
          cy="12"
          r="11"
          stroke-linecap="butt"
          stroke-width="2"
        />
      </svg>`;
    }
  }
}, c(zs, "WySpinner"), zs);
ln.styles = [
  we,
  C4,
  $4,
  vt`
      :host {
        display: contents;
      }
    `
];
Uc([
  v({ type: Number })
], ln.prototype, "size", 2);
Uc([
  v({
    type: Boolean
  })
], ln.prototype, "noSpin", 2);
Uc([
  v({ type: Boolean })
], ln.prototype, "padded", 2);
Uc([
  v({ type: Boolean })
], ln.prototype, "overlay", 2);
Uc([
  v({ type: Number })
], ln.prototype, "progress", 2);
ln = Uc([
  Q("wy-spinner")
], ln);
var P4 = Object.defineProperty, S4 = Object.getOwnPropertyDescriptor, Pw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? S4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && P4(t, i, n), n;
}, "__decorateClass$15"), Rs;
let gl = (Rs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.noNetwork = !1, this.handleUpdate = () => this.requestUpdate();
  }
  willUpdate(t) {
    if (t.has("weavyContext")) {
      const i = t.get("weavyContext");
      i && i !== this.weavyContext && i.removeNetworkListener(this.handleUpdate), this.weavyContext && i !== this.weavyContext && this.weavyContext.addNetworkListener(this.handleUpdate);
    }
  }
  render() {
    var t, i, r, n;
    return y`
      <div class="wy-empty">
        ${this.weavyContext && !this.noNetwork && ((t = this.weavyContext) == null ? void 0 : t.network.state) === "unreachable" ? y`
              <wy-icon-display>
                <wy-icon name="server-network-off"></wy-icon>
                <span slot="text">${C("The server is offline, try again in a few minutes...")}</span>
                <wy-spinner slot="meta" ?hidden=${!((i = this.weavyContext) != null && i.network.isPending)}></wy-spinner>
              </wy-icon-display>
            ` : !this.noNetwork && ((r = this.weavyContext) == null ? void 0 : r.network.state) === "offline" ? y`
              <wy-icon-display>
                <wy-icon name="wifi-off"></wy-icon>
                <span slot="text">${C("You are currently offline.")}</span>
                <wy-spinner slot="meta" ?hidden=${!((n = this.weavyContext) != null && n.network.isPending)}></wy-spinner>
              </wy-icon-display>
            ` : y`
              <slot>
                <wy-icon-display>
                  <wy-icon name="information"></wy-icon>
                  <slot slot="text" name="title">
                    <span>${C("Nothing to see here yet.")}</span>
                  </slot>
                </wy-icon-display>
              </slot>
            `}
      </div>
    `;
  }
  connectedCallback() {
    var t;
    super.connectedCallback(), (t = this.weavyContext) == null || t.addNetworkListener(this.handleUpdate);
  }
  disconnectedCallback() {
    var t;
    super.disconnectedCallback(), (t = this.weavyContext) == null || t.removeNetworkListener(this.handleUpdate);
  }
}, c(Rs, "WyEmpty"), Rs);
gl.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
Pw([
  Kt({ context: ne, subscribe: !0 }),
  W()
], gl.prototype, "weavyContext", 2);
Pw([
  v({ type: Boolean })
], gl.prototype, "noNetwork", 2);
gl = Pw([
  Q("wy-empty"),
  st()
], gl);
const Nm = /* @__PURE__ */ c((o, t, i) => {
  const r = /* @__PURE__ */ new Map();
  for (let n = t; n <= i; n++) r.set(o[n], n);
  return r;
}, "Jt"), Ve = Cr(class extends Ni {
  constructor(o) {
    if (super(o), o.type !== Bc.CHILD) throw Error("repeat() can only be used in text expressions");
  }
  dt(o, t, i) {
    let r;
    i === void 0 ? i = t : t !== void 0 && (r = t);
    const n = [], s = [];
    let a = 0;
    for (const l of o) n[a] = r ? r(l, a) : a, s[a] = i(l, a), a++;
    return { values: s, keys: n };
  }
  render(o, t, i) {
    return this.dt(o, t, i).values;
  }
  update(o, [t, i, r]) {
    const n = Zp(o), { values: s, keys: a } = this.dt(t, i, r);
    if (!Array.isArray(n)) return this.ut = a, s;
    const l = this.ut ?? (this.ut = []), d = [];
    let h, w, m = 0, f = n.length - 1, b = 0, g = s.length - 1;
    for (; m <= f && b <= g; ) if (n[m] === null) m++;
    else if (n[f] === null) f--;
    else if (l[m] === a[b]) d[b] = Cn(n[m], s[b]), m++, b++;
    else if (l[f] === a[g]) d[g] = Cn(n[f], s[g]), f--, g--;
    else if (l[m] === a[g]) d[g] = Cn(n[m], s[g]), _n(o, d[g + 1], n[m]), m++, g--;
    else if (l[f] === a[b]) d[b] = Cn(n[f], s[b]), _n(o, n[m], n[f]), f--, b++;
    else if (h === void 0 && (h = Nm(a, b, g), w = Nm(l, m, f)), h.has(l[m])) if (h.has(l[f])) {
      const $ = w.get(a[b]), O = $ !== void 0 ? n[$] : null;
      if (O === null) {
        const k = _n(o, n[m]);
        Cn(k, s[b]), d[b] = k;
      } else d[b] = Cn(O, s[b]), _n(o, n[m], O), n[$] = null;
      b++;
    } else hp(n[f]), f--;
    else hp(n[m]), m++;
    for (; b <= g; ) {
      const $ = _n(o, d[g + 1]);
      Cn($, s[b]), d[b++] = $;
    }
    for (; m <= f; ) {
      const $ = n[m++];
      $ !== null && hp($);
    }
    return this.ut = a, hh(o, d), bd;
  }
});
const ry = Cr(class extends Ni {
  constructor() {
    super(...arguments), this.key = L;
  }
  render(o, t) {
    return this.key = o, t;
  }
  update(o, [t, i]) {
    return t !== this.key && (hh(o), this.key = t), i;
  }
});
function wr(o) {
  o.stopPropagation();
}
c(wr, "inputConsume");
function L4(o) {
  o.key === "Escape" && (o.preventDefault(), o.stopPropagation(), o.target.value = "", o.target.dispatchEvent(new InputEvent("input", { data: "", inputType: "deleteContent" })));
}
c(L4, "inputClearOnEscape");
function ph(o) {
  o.key === "Escape" && (o.preventDefault(), o.stopPropagation(), o.target.blur(), o.target.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
}
c(ph, "inputBlurOnEscape");
function M4(o) {
  o.key === "Enter" && o.target.blur();
}
c(M4, "inputBlurOnEnter");
function Yg(o) {
  o.target.value ? L4(o) : ph(o);
}
c(Yg, "inputClearAndBlurOnEscape");
function Xg(o) {
  o.key === "Enter" && (o.preventDefault(), o.stopPropagation(), o.target.click());
}
c(Xg, "clickOnEnter");
function T4(o) {
  o.key === " " && (o.preventDefault(), o.stopPropagation());
}
c(T4, "consumeOnSpace");
function Ne(o) {
  Xg(o), T4(o);
}
c(Ne, "clickOnEnterAndConsumeOnSpace");
function li(o) {
  o.key === " " && (o.preventDefault(), o.stopPropagation(), o.target.click());
}
c(li, "clickOnSpace");
function Sw(o) {
  Xg(o), li(o);
}
c(Sw, "clickOnEnterAndSpace");
const Gt = Cr(class extends Ni {
  constructor(o) {
    var t;
    if (super(o), o.type !== Bc.ATTRIBUTE || o.name !== "class" || ((t = o.strings) == null ? void 0 : t.length) > 2) throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");
  }
  render(o) {
    return " " + Object.keys(o).filter((t) => o[t]).join(" ") + " ";
  }
  update(o, [t]) {
    var r, n;
    if (this.st === void 0) {
      this.st = /* @__PURE__ */ new Set(), o.strings !== void 0 && (this.nt = new Set(o.strings.join(" ").split(/\s/).filter((s) => s !== "")));
      for (const s in t) t[s] && !((r = this.nt) != null && r.has(s)) && this.st.add(s);
      return this.render(t);
    }
    const i = o.element.classList;
    for (const s of this.st) s in t || (i.remove(s), this.st.delete(s));
    for (const s in t) {
      const a = !!t[s];
      a === this.st.has(s) || (n = this.nt) != null && n.has(s) || (a ? (i.add(s), this.st.add(s)) : (i.remove(s), this.st.delete(s)));
    }
    return bd;
  }
});
var Lw = /* @__PURE__ */ ((o) => (o.Active = "active", o.Away = "away", o))(Lw || {});
const A4 = ":host(wy-avatar){position:relative;display:inline-flex}[part~=wy-avatar-shape]{border-radius:var(--wy-avatar-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, 50%)))}[part~=wy-avatar-img]{width:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));height:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));object-fit:cover}[part~=wy-avatar-initials]{background-color:var(--wy-component-avatar-background-color, var(--wy-primary, var(--wy-primary-40, #006399)));color:var(--wy-component-avatar-color, var(--wy-on-primary, var(--wy-white, #ffffff)));width:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));height:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));display:flex;align-items:center;align-content:center;justify-content:center;justify-items:center;font-size:calc(var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem))))}[part~=wy-avatar-initials-text]{font-size:max(8px,var(--wy-avatar-font-size, .382em));font-weight:var(--wy-avatar-font-weight, var(--wy-font-weight-bold, unset));line-height:1}[part~=wy-avatar-type]{display:flex;position:absolute;z-index:1;bottom:0;right:-8.3333333333%;border-radius:50%;background-color:var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-on-primary, var(--wy-white, #ffffff))}:host(wy-avatar-group){position:relative;display:inline-flex;flex-shrink:0;width:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));height:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)))}[part~=wy-avatar-back]{position:absolute;top:0;left:0}[part~=wy-avatar-front]{position:absolute;bottom:0;right:0}:host(wy-avatar-header){padding:calc(1.5 * var(--wy-size, 1rem));margin-left:auto;margin-right:auto;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center}", Mw = Pt(A4), z4 = '[part~=wy-presence]{width:calc(.75 * var(--wy-size, 1rem));height:calc(.75 * var(--wy-size, 1rem));border-radius:50%;position:absolute;bottom:0;right:-5%;box-sizing:border-box}[part~=wy-presence]:not([part~=wy-presence-active]){display:none}[part~=wy-presence]:after{content:"";position:absolute;width:100%;height:100%;top:0;left:0;border-radius:inherit;background-color:var(--wy-presence-active, var(--wy-green-light, #00a38b));background-clip:content-box;padding:calc(.125 * var(--wy-size, 1rem));box-sizing:border-box}[part~=wy-presence-mask]{-webkit-mask-image:radial-gradient(circle calc(.75 * var(--wy-size, 1rem)) at bottom calc(.375 * var(--wy-size, 1rem)) right calc(.375 * var(--wy-size, 1rem) - 5%),rgba(0,0,0,0) calc(.375 * var(--wy-size, 1rem)),rgb(0,0,0) calc(.375 * var(--wy-size, 1rem) + 1px));mask-image:radial-gradient(circle calc(.75 * var(--wy-size, 1rem)) at bottom calc(.375 * var(--wy-size, 1rem)) right calc(.375 * var(--wy-size, 1rem) - 5%),#0000 calc(.375 * var(--wy-size, 1rem)),#000 calc(.375 * var(--wy-size, 1rem) + 1px))}[part~=wy-presence-in-text]{position:absolute;bottom:unset;right:unset}[part~=wy-presence-in-text]:after{left:calc(-1 * var(--wy-size, 1rem))}', Jg = Pt(z4);
var R4 = Object.defineProperty, I4 = Object.getOwnPropertyDescriptor, Tw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? I4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && R4(t, i, n), n;
}, "__decorateClass$14"), Is;
let bl = (Is = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.placement = "avatar";
  }
  render() {
    const t = {
      "wy-presence": !0,
      "wy-presence-active": this.status === Lw.Active,
      "wy-presence-in-text": this.placement === "text"
    };
    return y` <span part=${ue(t)} data-presence-id=${this.id}></span> `;
  }
}, c(Is, "WyPresence"), Is);
bl.styles = [
  we,
  Jg,
  vt`
      :host {
        display: contents;
      }
    `
];
Tw([
  v()
], bl.prototype, "placement", 2);
Tw([
  v()
], bl.prototype, "status", 2);
bl = Tw([
  Q("wy-presence")
], bl);
var O4 = Object.defineProperty, D4 = Object.getOwnPropertyDescriptor, $i = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? D4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && O4(t, i, n), n;
}, "__decorateClass$13"), Os;
let dn = (Os = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.size = 32, this.src = "", this.name = "", this.isBot = !1;
  }
  render() {
    const t = this.size / 16;
    let i;
    !this.src && this.name && (i = Pb(this.name));
    const r = {
      "wy-avatar-shape": !0,
      "wy-avatar-img": !!this.src,
      "wy-avatar-initials": !this.src,
      "wy-presence-mask": this.presence === Lw.Active
    };
    return y`
      ${this.src ? y`
            <img
              alt=""
              title="${wt(this.title || this.name)}"
              part=${ue(r)}
              style="--wy-component-avatar-size: calc(${t} * var(--wy-size, 1rem));"
              height="${this.size}"
              width="${this.size}"
              src="${this.src}"
              decoding="async"
              loading="lazy"
            />
          ` : y`
            <div
              part=${ue(r)}
              style="--wy-component-avatar-size: calc(${t} * var(--wy-size, 1rem));"
              title="${wt(this.title || this.name)}"
            >
              <span part="wy-avatar-initials-text">${i}</span>
            </div>
          `}
      ${this.isBot ? y`<wy-icon part="wy-avatar-type" name="bot" size="${this.size / 3 * 1.25}"></wy-icon>` : L}
      ${this.presence && !this.isBot ? y`<wy-presence .status=${this.presence} id=${this.id}></wy-presence>` : L}
    `;
  }
}, c(Os, "WyAvatar"), Os);
dn.styles = [we, Mw, Jg];
$i([
  v({ type: Number })
], dn.prototype, "size", 2);
$i([
  v()
], dn.prototype, "src", 2);
$i([
  v()
], dn.prototype, "name", 2);
$i([
  v({ type: Boolean, reflect: !0 })
], dn.prototype, "isBot", 2);
$i([
  v()
], dn.prototype, "presence", 2);
dn = $i([
  Q("wy-avatar")
], dn);
var Ds;
let xc = (Ds = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.size = 32, this.uniqueId = `wy-avatar-${rh()}`;
  }
  render() {
    if (!this.user)
      return L;
    const t = this.size / 16, i = (this.members || []).filter((s) => {
      var a;
      return s.id !== ((a = this.user) == null ? void 0 : a.id);
    }).slice(0, 2).reverse(), r = (i == null ? void 0 : i.shift()) || this.user, n = (i == null ? void 0 : i.shift()) || (r !== this.user ? this.user : void 0);
    return [
      y`
        <style>
          :host {
            --wy-component-avatar-size: calc(${t} * var(--wy-size, 1rem));
          }

          .avatar-mask-bg {
            width: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            height: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            fill: white;
          }

          .avatar-mask {
            width: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            height: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            ry: var(--wy-avatar-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, 50%)));
            x: calc(${t / 3} * var(--wy-size, 1rem));
            y: calc(${t / 3} * var(--wy-size, 1rem));
            stroke: black;
            stroke-width: 4px;
            fill: black;
          }
        </style>
      `,
      y`
        <svg>
          <defs>
            <mask id="${this.uniqueId}-mask">
              <rect class="avatar-mask-bg" />
              <rect class="avatar-mask" />
            </mask>
          </defs>
        </svg>
      `,
      y`
        <wy-avatar
          part="wy-avatar-back"
          style="mask-image: url(#${this.uniqueId}-mask); -webkit-mask-image: url(#${this.uniqueId}-mask);"
          .src=${n == null ? void 0 : n.avatar_url}
          .name=${n == null ? void 0 : n.display_name}
          size=${this.size * 2 / 3}
        ></wy-avatar>
        <wy-avatar
          part="wy-avatar-front"
          .src=${r.avatar_url}
          .name=${r.display_name}
          .isBot=${r.is_bot}
          size=${this.size * 2 / 3}
        ></wy-avatar>
      `
    ];
  }
}, c(Ds, "WyAvatarGroup"), Ds);
xc.styles = [
  we,
  Mw,
  vt`
      :host {
        display: contents;
      }
    `
];
$i([
  v({ type: Number })
], xc.prototype, "size", 2);
$i([
  v({
    type: Array,
    attribute: !1
  })
], xc.prototype, "members", 2);
$i([
  Kt({ context: su, subscribe: !0 }),
  W()
], xc.prototype, "user", 2);
xc = $i([
  Q("wy-avatar-group")
], xc);
var Fs;
let ny = (Fs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    return y`<slot></slot>`;
  }
}, c(Fs, "WyAvatarHeader"), Fs);
ny.styles = [we, Mw];
ny = $i([
  Q("wy-avatar-header")
], ny);
const F4 = '[part~=wy-button]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-component-color);background:var(--wy-component-background-color, transparent);height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;font-size:var(--wy-button-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-button-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;border:var(--wy-button-border-width, var(--wy-border-outline, 0)) solid var(--wy-outline, var(--wy-neutral-variant-50, #72777e));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex;align-items:center;justify-content:center;gap:var(--wy-button-gap, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));position:relative}[part~=wy-button]:disabled{opacity:var(--wy-opacity-disabled, 38%);cursor:unset;pointer-events:none}[part~=wy-button-state-layer]>*{z-index:3}[part~=wy-button-state-layer]:before{content:"";z-index:2;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-button-state-layer][part~=wy-button-sm]:before{margin:calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25);border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))))}[part~=wy-button-state-layer]:hover:before{opacity:8%}[part~=wy-button-state-layer]:focus:before,[part~=wy-button-state-layer]:active:before,[part~=wy-button-state-layer][part~=wy-active]:before{opacity:12%}[part~=wy-button-icon]{--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));line-height:1;align-items:center;justify-content:center}[part~=wy-button-icon][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625);width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625);padding:0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5)}[part~=wy-button-icon][part~=wy-active]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-icon-inline]{height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));width:auto;min-width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));background:var(--wy-component-background-color);color:currentColor;display:flex;padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))}[part~=wy-button-icon-inline][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625);padding:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .25) 0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5);min-width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625)}[part~=wy-button-inline]{border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:calc(.5 * var(--wy-size, 1rem)) calc(.75 * var(--wy-size, 1rem));margin-inline:calc(-.25 * var(--wy-size, 1rem))}[part~=wy-button-primary]{--wy-component-background-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-color: var(--wy-on-primary, var(--wy-white, #ffffff))}[part~=wy-button-variant]{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}[part~=wy-button-primary-text]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-inherit-color]{--wy-component-color: currentColor}[part~=wy-button-no-color]{--wy-component-color: unset}[part=wy-button-link]{padding:0;color:var(--wy-link-color, var(--wy-primary, var(--wy-primary-40, #006399)));text-decoration:var(--wy-link-decoration, none)}[part=wy-button-link]:hover,[part=wy-button-link]:focus{text-decoration:var(--wy-link-hover-decoration, unset)}[part~=wy-buttons]{display:flex;align-items:center;flex-wrap:wrap;gap:calc(.5 * var(--wy-size, 1rem))}[part~=wy-buttons-reverse]{flex-direction:row-reverse}[part~=wy-buttons-floating]{position:sticky;padding:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))) var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))) 0;top:0;height:0;margin-bottom:calc(-1 * var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));z-index:1030;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}', t1 = Pt(F4), N4 = '.wy-scroll-y{scroll-padding-top:var(--wy-scrollbar-adjust-top, 0);scroll-padding-bottom:var(--wy-scrollbar-adjust-bottom, 0)}.wy-scroll-y{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-y:not(body){-webkit-overflow-scrolling:touch}.wy-scroll-y:not(.wy-scroll-x){overflow-x:hidden;touch-action:pan-y}.wy-scroll-x{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-x:not(.wy-scroll-y){overflow-y:hidden;touch-action:pan-x}[part~=wy-tabs]{display:flex;overflow-y:hidden;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-tabs]{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}[part~=wy-tabs]{scrollbar-width:thin;scrollbar-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) transparent}[part~=wy-tabs]::-webkit-scrollbar{height:.375rem;width:.375rem;background:transparent;z-index:999}[part~=wy-tabs]::-webkit-scrollbar-track{background:transparent}[part~=wy-tabs]::-webkit-scrollbar-thumb{background-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));opacity:75%;border:0 solid transparent;border-radius:0;background-clip:padding-box}[part~=wy-tabs]::-webkit-scrollbar-thumb:hover{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:75%}[part~=wy-tabs]::-webkit-scrollbar-thumb:window-inactive{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:50%}[part~=wy-tab]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-background-color: transparent;color:var(--wy-component-color);background:var(--wy-component-background-color);border:none;border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));position:relative;text-align:center;text-decoration:none;cursor:pointer;-webkit-user-select:none;user-select:none}[part~=wy-tab] .wy-tab-icon{position:relative;padding:calc(.25 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex}[part~=wy-tab] .wy-tab-icon:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-tab]:hover .wy-tab-icon:before{opacity:8%}[part~=wy-tab]:focus .wy-tab-icon:before,[part~=wy-tab]:active .wy-tab-icon:before,[part~=wy-tab].wy-active .wy-tab-icon:before{opacity:12%}[part~=wy-tab] .wy-tab-label{font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));font-weight:var(--wy-font-weight, unset)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]{padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5);margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) auto;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .625)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]:before{margin:calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * 0)}', e1 = Pt(N4);
var V4 = Object.defineProperty, H4 = Object.getOwnPropertyDescriptor, Ei = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? H4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && V4(t, i, n), n;
}, "__decorateClass$12"), Ns;
let fr = (Ns = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this, !1), this.kind = "filled", this.active = !1, this.small = !1, this.disabled = !1;
  }
  render() {
    const t = {
      "wy-button": !0,
      "wy-active": !!this.active,
      "wy-disabled": !!this.disabled,
      "wy-button-inline": this.kind === "inline",
      "wy-button-icon": this.kind === "icon",
      "wy-button-icon-inline": this.kind === "icon-inline",
      "wy-button-link": this.kind === "link",
      "wy-button-primary": this.color === "primary",
      "wy-button-primary-text": this.color === "primary-text",
      "wy-button-inherit-color": this.color === "inherit",
      "wy-button-no-color": this.color === "none",
      "wy-button-variant": this.color === "variant",
      "wy-button-type-submit": this.type === "submit",
      "wy-button-type-reset": this.type === "reset",
      "wy-button-state-layer": this.kind !== "link" && !this.disabled,
      "wy-button-sm": !!this.small,
      "wy-tab": this.kind === "tab",
      "wy-tab-sm": this.kind === "tab" && !!this.small
    };
    return y`
      <button part=${ue(t)} type=${wt(this.type)} ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `;
  }
}, c(Ns, "WyButton"), Ns);
fr.styles = [
  we,
  t1,
  e1,
  vt`
      :host {
        display: contents;
        position: relative;
      }
    `
];
Ei([
  v()
], fr.prototype, "type", 2);
Ei([
  v()
], fr.prototype, "kind", 2);
Ei([
  v({ type: Boolean })
], fr.prototype, "active", 2);
Ei([
  v()
], fr.prototype, "color", 2);
Ei([
  v({ type: Boolean })
], fr.prototype, "small", 2);
Ei([
  v({ type: Boolean, reflect: !0 })
], fr.prototype, "disabled", 2);
fr = Ei([
  Q("wy-button")
], fr);
var Vs;
let Cc = (Vs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.tabs = !1, this.floating = !1, this.reverse = !1;
  }
  render() {
    const t = {
      "wy-buttons": !this.tabs,
      "wy-buttons-reverse": this.reverse,
      "wy-tabs": this.tabs,
      "wy-buttons-floating": this.floating
    };
    return y`<div part=${ue(t)}><slot></slot></div>`;
  }
}, c(Vs, "WyButtons"), Vs);
Cc.styles = [
  we,
  t1,
  e1,
  vt`
      :host {
        display: contents;
      }
    `
];
Ei([
  v({ type: Boolean })
], Cc.prototype, "tabs", 2);
Ei([
  v({ type: Boolean })
], Cc.prototype, "floating", 2);
Ei([
  v({ type: Boolean })
], Cc.prototype, "reverse", 2);
Cc = Ei([
  Q("wy-buttons")
], Cc);
var B4 = Object.defineProperty, U4 = Object.getOwnPropertyDescriptor, Aw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? U4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && B4(t, i, n), n;
}, "__decorateClass$11"), Hs;
let xl = (Hs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.enableSwap = !1;
  }
  createRenderRoot() {
    return this;
  }
  dispatchRemove(t) {
    const i = new CustomEvent("embed-remove", { detail: { id: t } });
    return this.dispatchEvent(i);
  }
  dispatchSwap() {
    const t = new CustomEvent("embed-swap", { detail: {} });
    return this.dispatchEvent(t);
  }
  render() {
    const t = this.embed.type === "photo" && this.embed.provider_name.toLocaleLowerCase() === "giphy", i = !this.embed.html && !t;
    return y`
      <div class="wy-embed-actions">
        ${this.enableSwap ? y`<wy-button kind="icon" @click=${() => this.dispatchSwap()}
              ><wy-icon name="swap-horizontal"></wy-icon
            ></wy-button>` : y`<wy-button class="wy-embed-cycle"></wy-button>`}

        <wy-button kind="icon" @click=${() => this.dispatchRemove(this.embed.id)}
          ><wy-icon name="close-circle"></wy-icon
        ></wy-button>
      </div>

      ${this.embed.type === "audio" ? y`<div class="wy-embed-audio"></div>` : L}
      ${this.embed.type === "video" && this.embed.html ? y`<div class="wy-embed-video"><div>${no(this.embed.html)}</div></div>` : L}
      ${this.embed.type === "rich" ? y`<div class="wy-embed-rich"></div>` : L}
      ${this.embed.type === "photo" && this.embed.thumbnail_url ? y`
            <div
              class=${Gt({
      "wy-embed-photo": !0,
      "wy-embed-photo-sm": (this.embed.thumbnail_width || 0) < 250
    })}>
              <a href=${this.embed.original_url} target="_blank">
                <img
                  src=${this.embed.thumbnail_url}
                  width=${this.embed.thumbnail_width}
                  height=${this.embed.thumbnail_height}
                  alt="" />
              </a>
            </div>
          ` : L}
      ${this.embed.type !== "audio" && this.embed.type !== "video" && this.embed.type !== "rich" && this.embed.type !== "photo" && this.embed.thumbnail_url ? y`
            <div
              class=${Gt({
      "wy-embed-photo": !0,
      "wy-embed-photo-sm": (this.embed.thumbnail_width || 0) < 250
    })}>
              <a href=${this.embed.original_url} target="_blank">
                <img
                  src=${this.embed.thumbnail_url}
                  width=${this.embed.thumbnail_width}
                  height=${this.embed.thumbnail_height}
                  alt="" />
              </a>
            </div>
          ` : L}
      ${i ? y` <div class="wy-embed-caption">
            <a class="wy-embed-link" href=${this.embed.original_url} target="_blank">${this.embed.host}</a>
            ${this.embed.title ? y`<div class="wy-embed-title">${this.embed.title}</div>` : L}
            ${this.embed.description ? y`<div class="wy-embed-description">${this.embed.description}</div>` : L}
          </div>` : L}
    `;
  }
}, c(Hs, "WyEmbed"), Hs);
xl.styles = rt;
Aw([
  v({ attribute: !1 })
], xl.prototype, "embed", 2);
Aw([
  v({ type: Boolean, attribute: !1 })
], xl.prototype, "enableSwap", 2);
xl = Aw([
  Q("wy-embed")
], xl);
const lu = /* @__PURE__ */ c((o, t = 3) => {
  const i = [" B", " KB", " MB", " GB", " TB", " PB", " EB", " ZB", " YB"];
  let r = o, n = 0;
  for (; n < i.length - 1 && r >= 1024; )
    r = 100 * r / 1024 / 100, n++;
  return r.toLocaleString(void 0, { maximumSignificantDigits: t }) + i[n];
}, "fileSizeAsString");
function _i(o) {
  return o.lastIndexOf(".") === -1 ? "." : (o.substring(o.lastIndexOf("."), o.length) || o).toLowerCase();
}
c(_i, "getExtension");
function i1(o) {
  switch (o) {
    case ".aac":
    case ".aif":
    case ".aiff":
    case ".au":
    case ".gsm":
    case ".m4a":
    case ".mid":
    case ".midi":
    case ".mka":
    case ".mp3":
    case ".oga":
    case ".ogg":
    case ".ra":
    case ".ram":
    case ".snd":
    case ".spx":
    case ".wav":
    case ".wma":
      return !0;
    default:
      return !1;
  }
}
c(i1, "isAudio");
function j4(o) {
  switch (o) {
    case ".ai":
    case ".apng":
    case ".bmp":
    case ".emf":
    case ".eps":
    case ".gif":
    case ".heic":
    case ".ico":
    case ".jpg":
    case ".jpeg":
    case ".png":
    case ".psd":
    case ".svg":
    case ".tif":
    case ".tiff":
    case ".webp":
    case ".wmf":
      return !0;
    default:
      return !1;
  }
}
c(j4, "isImage");
function W4(o) {
  switch (_i(o)) {
    case ".apng":
    case ".bmp":
    case ".gif":
    case ".ico":
    case ".jpg":
    case ".jpeg":
    case ".png":
    case ".svg":
    case ".webp":
      return !0;
    default:
      return !1;
  }
}
c(W4, "isWebImage");
function r1(o) {
  switch (o) {
    case ".3g2":
    case ".asx":
    case ".asf":
    case ".avi":
    case ".flv":
    case ".mk3d":
    case ".mkv":
    case ".mov":
    case ".mp4":
    case ".mpeg":
    case ".mpg":
    case ".ogm":
    case ".ogv":
    case ".ogx":
    case ".qt":
    case ".rm":
    case ".rv":
    case ".smi":
    case ".smil":
    case ".swf":
    case ".webm":
    case ".wmv":
    case ".xaml":
      return !0;
    default:
      return !1;
  }
}
c(r1, "isVideo");
function q4(o) {
  switch (o) {
    case ".markdown":
    case ".md":
      return !0;
    default:
      return !1;
  }
}
c(q4, "isMarkdown");
function n1(o) {
  switch (o) {
    case ".htm":
    case ".html":
    case ".xhtml":
    case ".xml":
      return !0;
    default:
      return !1;
  }
}
c(n1, "isMarkup");
function zw(o) {
  if (n1(o))
    return !0;
  switch (o) {
    case ".as":
    case ".as3":
    case ".asm":
    case ".aspx":
    case ".bat":
    case ".c":
    case ".cc":
    case ".cmake":
    case ".coffee":
    case ".cpp":
    case ".cs":
    case ".css":
    case ".cxx":
    case ".diff":
    case ".erb":
    case ".erl":
    case ".groovy":
    case ".gvy":
    case ".h":
    case ".haml":
    case ".hh":
    case ".hpp":
    case ".hxx":
    case ".java":
    case ".js":
    case ".json":
    case ".jsx":
    case ".less":
    case ".lst":
    case ".m":
    case ".make":
    case ".ml":
    case ".mm":
    case ".out":
    case ".patch":
    case ".php":
    case ".pl":
    case ".plist":
    case ".properties":
    case ".py":
    case ".rb":
    case ".sass":
    case ".scala":
    case ".scm":
    case ".script":
    case ".scss":
    case ".sh":
    case ".sml":
    case ".sql":
    case ".vb":
    case ".vi":
    case ".vim":
    case ".xsd":
    case ".xsl":
    case ".yaml":
    case ".yml":
      return !0;
    default:
      return !1;
  }
}
c(zw, "isCode");
function o1(o) {
  if (zw(o) || q4(o))
    return !0;
  switch (o) {
    case ".txt":
      return !0;
    default:
      return !1;
  }
}
c(o1, "isText");
function mn(o) {
  const t = _i(o);
  if (t === "") return { icon: "file" };
  if (i1(t))
    return { icon: "file-music", color: "indigo" };
  if (j4(t))
    return { icon: "file-image", color: "cyan" };
  if (r1(t))
    return { icon: "file-video", color: "pink" };
  if (n1(t))
    return { icon: "file-xml", color: "purple" };
  if (zw(t))
    return { icon: "file-code", color: "purple" };
  if (o1(t))
    return { icon: "file-document" };
  switch (t) {
    case ".7z":
    case ".zip":
      return { icon: "file-compressed", color: "orange" };
    case ".doc":
    case ".docm":
    case ".docx":
    case ".dotm":
    case ".dotx":
      return { icon: "file-word", color: "native" };
    case ".eml":
    case ".msg":
      return { icon: "email", color: "" };
    case ".xls":
    case ".xlsm":
    case ".xlsx":
    case ".xltx":
      return { icon: "file-excel", color: "native" };
    case ".pdf":
      return { icon: "file-pdf", color: "native" };
    case ".ppt":
    case ".pptm":
    case ".pptx":
    case ".potx":
      return { icon: "file-powerpoint", color: "native" };
    case ".pages":
      return { icon: "file", color: "orange" };
    case ".numbers":
      return { icon: "file", color: "green" };
    case ".keynote":
      return { icon: "file", color: "blue" };
  }
  return { icon: "file" };
}
c(mn, "getIcon");
function Q4(o) {
  const t = _i(o);
  return t === "" ? "none" : W4(t) ? "image" : zw(t) ? "code" : o1(t) ? "text" : i1(t) ? "audio" : r1(t) ? "video" : "none";
}
c(Q4, "getWebPreviewFormat");
function jc(o) {
  switch (o) {
    case "Google Drive":
      return "google-drive";
    case "Dropbox":
      return "dropbox";
    case "OneDrive":
      return "onedrive";
    case "Box":
      return "box";
    case "Confluence":
      return "confluence";
    default:
      return "";
  }
}
c(jc, "getProvider");
function Rw(o) {
  let t = "file";
  switch (_i(o)) {
    case ".7z":
    case ".zip":
      t = "archive";
      break;
    case ".aac":
    case ".aif":
    case ".aiff":
    case ".au":
    case ".gsm":
    case ".m4a":
    case ".mid":
    case ".midi":
    case ".mka":
    case ".mp3":
    case ".oga":
    case ".ogg":
    case ".ra":
    case ".ram":
    case ".snd":
    case ".spx":
    case ".wav":
    case ".wma":
      t = "audio";
      break;
    case ".c":
    case ".cgi":
    case ".cpp":
    case ".cs":
    case ".cshtml":
    case ".css":
    case ".html":
    case ".java":
    case ".js":
    case ".json":
    case ".less":
    case ".php":
    case ".pl":
    case ".ps1":
    case ".py":
    case ".rb":
    case ".rs":
    case ".scss":
    case ".sh":
    case ".swift":
    case ".sql":
    case ".ts":
    case ".xml":
    case ".yaml":
    case ".yml":
      t = "code";
      break;
    case ".doc":
    case ".docm":
    case ".docx":
    case ".dotm":
    case ".dotx":
    case ".gdoc":
    case ".pages":
    case ".pdf":
      t = "document";
      break;
    case ".eml":
    case ".msg":
      t = "email";
      break;
    case ".gslides":
    case ".keynote":
    case ".ppt":
    case ".pptm":
    case ".pptx":
    case ".potx":
      t = "presentation";
      break;
    case ".gsheet":
    case ".numbers":
    case ".xls":
    case ".xlsm":
    case ".xlsx":
    case ".xltx":
      t = "spreadsheet";
      break;
    case ".ai":
    case ".apng":
    case ".bmp":
    case ".emf":
    case ".eps":
    case ".gif":
    case ".heic":
    case ".ico":
    case ".jpg":
    case ".jpeg":
    case ".png":
    case ".psd":
    case ".svg":
    case ".tif":
    case ".tiff":
    case ".webp":
    case ".wmf":
      t = "image";
      break;
    case ".md":
    case ".markdown":
    case ".txt":
      t = "text";
      break;
    case ".3g2":
    case ".asx":
    case ".asf":
    case ".avi":
    case ".flv":
    case ".mk3d":
    case ".mkv":
    case ".mov":
    case ".mp4":
    case ".mpeg":
    case ".mpg":
    case ".ogm":
    case ".ogv":
    case ".ogx":
    case ".qt":
    case ".rm":
    case ".rv":
    case ".smi":
    case ".smil":
    case ".swf":
    case ".webm":
    case ".wmv":
    case ".xaml":
      t = "video";
      break;
  }
  return t;
}
c(Rw, "getKind");
function Iw(o) {
  const t = o.target, i = t == null ? void 0 : t.value.lastIndexOf(".");
  i === -1 ? t == null || t.select() : t == null || t.setSelectionRange(0, i);
}
c(Iw, "handleSelectFilename");
var K4 = Object.defineProperty, G4 = Object.getOwnPropertyDescriptor, Wc = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? G4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && K4(t, i, n), n;
}, "__decorateClass$10"), Bs;
let hn = (Bs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.name = "", this.previewUrl = "", this.url = "", this.size = 0;
  }
  render() {
    const t = this.size && this.size > 0 ? lu(this.size) : null, i = _i(this.name), { icon: r } = mn(this.name), n = Rw(this.name), s = jc(this.provider);
    return y`
      <a href=${this.previewUrl || this.url} class="wy-item wy-item-lg" target="_blank" title=${this.name}>
        <wy-icon name=${r} .overlayName=${s} size="48" kind=${n} ext=${i}></wy-icon>
        <div class="wy-item-body ">
          <div class="wy-item-title">${this.name}</div>
          ${t ? y`<div class="wy-item-text" title="${t}">${t}</div>` : ""}
        </div>
      </a>
    `;
  }
}, c(Bs, "WyAttachment"), Bs);
hn.styles = rt;
Wc([
  v()
], hn.prototype, "name", 2);
Wc([
  v()
], hn.prototype, "previewUrl", 2);
Wc([
  v()
], hn.prototype, "url", 2);
Wc([
  v()
], hn.prototype, "provider", 2);
Wc([
  v({ type: Number })
], hn.prototype, "size", 2);
hn = Wc([
  Q("wy-attachment")
], hn);
const s1 = "important", Z4 = " !" + s1, yh = Cr(class extends Ni {
  constructor(o) {
    var t;
    if (super(o), o.type !== Bc.ATTRIBUTE || o.name !== "style" || ((t = o.strings) == null ? void 0 : t.length) > 2) throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(o) {
    return Object.keys(o).reduce((t, i) => {
      const r = o[i];
      return r == null ? t : t + `${i = i.includes("-") ? i : i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${r};`;
    }, "");
  }
  update(o, [t]) {
    const { style: i } = o.element;
    if (this.ft === void 0) return this.ft = new Set(Object.keys(t)), this.render(t);
    for (const r of this.ft) t[r] == null && (this.ft.delete(r), r.includes("-") ? i.removeProperty(r) : i[r] = null);
    for (const r in t) {
      const n = t[r];
      if (n != null) {
        this.ft.add(r);
        const s = typeof n == "string" && n.endsWith(Z4);
        r.includes("-") || s ? i.setProperty(r, s ? n.slice(0, -11) : n, s ? s1 : "") : i[r] = n;
      }
    }
    return bd;
  }
});
function wh(o) {
  const t = o;
  t && (t.complete && t.naturalHeight !== 0 ? t.classList.contains("wy-loading") ? t.decode().then(() => {
    t.classList.add("wy-loaded"), t.part.add("wy-loaded");
  }) : (t.classList.add("wy-loading", "wy-loaded"), t.part.add("wy-loading", "wy-loaded")) : (t.classList.add("wy-loading"), t.part.add("wy-loading")));
}
c(wh, "checkImageLoad");
function fh(o) {
  const t = o.target;
  t.tagName === "IMG" && t.classList.contains("wy-loading") && !t.classList.contains("wy-loaded") && (t.classList.add("wy-loaded"), t.part.add("wy-loaded"));
}
c(fh, "imageLoaded");
var Y4 = Object.defineProperty, X4 = Object.getOwnPropertyDescriptor, Ow = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? X4(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && Y4(t, i, n), n;
}, "__decorateClass$$"), Us;
let Cl = (Us = class extends K {
  constructor() {
    super(...arguments), this.images = [], this.limit = 3;
  }
  //protected exportParts = new ShadowPartsController(this);
  createRenderRoot() {
    return this;
  }
  dispatchFileOpen(t, i) {
    if (t.preventDefault(), !i.is_trashed) {
      const r = new CustomEvent("file-open", { detail: { fileId: i.id } });
      this.dispatchEvent(r);
    }
  }
  render() {
    const t = this.images.length > this.limit ? this.images.length - this.limit : 0, i = this.images.slice(0, this.limit);
    return y`
      <div class="wy-image-grid">
        ${i.map((r, n) => {
      const s = r.width / r.height || 1, a = 64, l = 2, d = s.toPrecision(5), h = (s * a).toPrecision(5) + "px", w = (100 / s).toPrecision(5) + "%", m = r.width + "px", f = r.width > 0 ? l * r.width + "px" : "none";
      return y`
            <a
              href="#"
              @click=${(b) => {
        !b.defaultPrevented && this.dispatchFileOpen(b, r);
      }}
              class="wy-image"
              style=${yh({
        flexBasis: h,
        flexGrow: d,
        flexShrink: d,
        width: m,
        maxWidth: f
      })}>
              <div class="wy-image-area" style=${yh({ paddingBottom: w })}>
                <img
                  src=${r.preview_url}
                  ${it(wh)}
                  @load=${fh}
                  alt=""
                  loading="lazy"
                  decoding="async" />
                ${n === i.length - 1 && t ? y`<span class="wy-more">+${t}</span>` : ""}
              </div>
            </a>
          `;
    })}
      </div>
    `;
  }
}, c(Us, "WyImageGrid"), Us);
Cl.styles = rt;
Ow([
  v({ attribute: !1 })
], Cl.prototype, "images", 2);
Ow([
  v({ type: Number })
], Cl.prototype, "limit", 2);
Cl = Ow([
  Q("wy-image-grid")
], Cl);
var J4 = Object.defineProperty, tC = Object.getOwnPropertyDescriptor, Dw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? tC(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && J4(t, i, n), n;
}, "__decorateClass$_"), js;
let kl = (js = class extends K {
  constructor() {
    super(...arguments), this.files = [], this.limit = 3;
  }
  //protected exportParts = new ShadowPartsController(this);
  createRenderRoot() {
    return this;
  }
  dispatchFileOpen(t, i) {
    t.preventDefault();
    const r = new CustomEvent("file-open", { detail: { fileId: i.id } });
    return this.dispatchEvent(r);
  }
  render() {
    return y`
      <div class="wy-list wy-list-bordered">
        ${this.files.map((t) => {
      const i = t.size && t.size > 0 ? lu(t.size) : null, r = _i(t.name), { icon: n } = mn(t.name), s = Rw(t.name), a = jc(t.provider);
      return y`
            <a
              @click=${(l) => {
        !l.defaultPrevented && !t.is_trashed && this.dispatchFileOpen(l, t);
      }}
              class="wy-item"
              href="${wt(t.download_url)}"
              title=${t.name}>
              <wy-icon name=${n} .overlayName=${a} size="48" kind=${s} ext=${r}></wy-icon>
              <div class="wy-item-body ">
                <div class="wy-item-title">${t.name}</div>
                ${i ? y`<div class="wy-item-text" title="${i}">${i}</div>` : ""}
              </div>
            </a>
          `;
    })}
      </div>
    `;
  }
}, c(js, "WyAttachmentsList"), js);
kl.styles = rt;
Dw([
  v({ attribute: !1 })
], kl.prototype, "files", 2);
Dw([
  v({ type: Number })
], kl.prototype, "limit", 2);
kl = Dw([
  Q("wy-attachments-list")
], kl);
const mh = Math.min, Jn = Math.max, vh = Math.round, Dd = Math.floor, un = /* @__PURE__ */ c((o) => ({
  x: o,
  y: o
}), "createCoords"), eC = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
}, iC = {
  start: "end",
  end: "start"
};
function Vm(o, t, i) {
  return Jn(o, mh(t, i));
}
c(Vm, "clamp$1");
function du(o, t) {
  return typeof o == "function" ? o(t) : o;
}
c(du, "evaluate");
function oo(o) {
  return o.split("-")[0];
}
c(oo, "getSide");
function hu(o) {
  return o.split("-")[1];
}
c(hu, "getAlignment");
function a1(o) {
  return o === "x" ? "y" : "x";
}
c(a1, "getOppositeAxis");
function c1(o) {
  return o === "y" ? "height" : "width";
}
c(c1, "getAxisLength");
function kc(o) {
  return ["top", "bottom"].includes(oo(o)) ? "y" : "x";
}
c(kc, "getSideAxis");
function l1(o) {
  return a1(kc(o));
}
c(l1, "getAlignmentAxis");
function rC(o, t, i) {
  i === void 0 && (i = !1);
  const r = hu(o), n = l1(o), s = c1(n);
  let a = n === "x" ? r === (i ? "end" : "start") ? "right" : "left" : r === "start" ? "bottom" : "top";
  return t.reference[s] > t.floating[s] && (a = gh(a)), [a, gh(a)];
}
c(rC, "getAlignmentSides");
function nC(o) {
  const t = gh(o);
  return [oy(o), t, oy(t)];
}
c(nC, "getExpandedPlacements");
function oy(o) {
  return o.replace(/start|end/g, (t) => iC[t]);
}
c(oy, "getOppositeAlignmentPlacement");
function oC(o, t, i) {
  const r = ["left", "right"], n = ["right", "left"], s = ["top", "bottom"], a = ["bottom", "top"];
  switch (o) {
    case "top":
    case "bottom":
      return i ? t ? n : r : t ? r : n;
    case "left":
    case "right":
      return t ? s : a;
    default:
      return [];
  }
}
c(oC, "getSideList");
function sC(o, t, i, r) {
  const n = hu(o);
  let s = oC(oo(o), i === "start", r);
  return n && (s = s.map((a) => a + "-" + n), t && (s = s.concat(s.map(oy)))), s;
}
c(sC, "getOppositeAxisPlacements");
function gh(o) {
  return o.replace(/left|right|bottom|top/g, (t) => eC[t]);
}
c(gh, "getOppositePlacement");
function aC(o) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...o
  };
}
c(aC, "expandPaddingObject");
function cC(o) {
  return typeof o != "number" ? aC(o) : {
    top: o,
    right: o,
    bottom: o,
    left: o
  };
}
c(cC, "getPaddingObject");
function bh(o) {
  const {
    x: t,
    y: i,
    width: r,
    height: n
  } = o;
  return {
    width: r,
    height: n,
    top: i,
    left: t,
    right: t + r,
    bottom: i + n,
    x: t,
    y: i
  };
}
c(bh, "rectToClientRect");
function Hm(o, t, i) {
  let {
    reference: r,
    floating: n
  } = o;
  const s = kc(t), a = l1(t), l = c1(a), d = oo(t), h = s === "y", w = r.x + r.width / 2 - n.width / 2, m = r.y + r.height / 2 - n.height / 2, f = r[l] / 2 - n[l] / 2;
  let b;
  switch (d) {
    case "top":
      b = {
        x: w,
        y: r.y - n.height
      };
      break;
    case "bottom":
      b = {
        x: w,
        y: r.y + r.height
      };
      break;
    case "right":
      b = {
        x: r.x + r.width,
        y: m
      };
      break;
    case "left":
      b = {
        x: r.x - n.width,
        y: m
      };
      break;
    default:
      b = {
        x: r.x,
        y: r.y
      };
  }
  switch (hu(t)) {
    case "start":
      b[a] -= f * (i && h ? -1 : 1);
      break;
    case "end":
      b[a] += f * (i && h ? -1 : 1);
      break;
  }
  return b;
}
c(Hm, "computeCoordsFromPlacement");
const lC = /* @__PURE__ */ c(async (o, t, i) => {
  const {
    placement: r = "bottom",
    strategy: n = "absolute",
    middleware: s = [],
    platform: a
  } = i, l = s.filter(Boolean), d = await (a.isRTL == null ? void 0 : a.isRTL(t));
  let h = await a.getElementRects({
    reference: o,
    floating: t,
    strategy: n
  }), {
    x: w,
    y: m
  } = Hm(h, r, d), f = r, b = {}, g = 0;
  for (let $ = 0; $ < l.length; $++) {
    const {
      name: O,
      fn: k
    } = l[$], {
      x: S,
      y: _,
      data: V,
      reset: I
    } = await k({
      x: w,
      y: m,
      initialPlacement: r,
      placement: f,
      strategy: n,
      middlewareData: b,
      rects: h,
      platform: a,
      elements: {
        reference: o,
        floating: t
      }
    });
    w = S ?? w, m = _ ?? m, b = {
      ...b,
      [O]: {
        ...b[O],
        ...V
      }
    }, I && g <= 50 && (g++, typeof I == "object" && (I.placement && (f = I.placement), I.rects && (h = I.rects === !0 ? await a.getElementRects({
      reference: o,
      floating: t,
      strategy: n
    }) : I.rects), {
      x: w,
      y: m
    } = Hm(h, f, d)), $ = -1);
  }
  return {
    x: w,
    y: m,
    placement: f,
    strategy: n,
    middlewareData: b
  };
}, "computePosition$1");
async function d1(o, t) {
  var i;
  t === void 0 && (t = {});
  const {
    x: r,
    y: n,
    platform: s,
    rects: a,
    elements: l,
    strategy: d
  } = o, {
    boundary: h = "clippingAncestors",
    rootBoundary: w = "viewport",
    elementContext: m = "floating",
    altBoundary: f = !1,
    padding: b = 0
  } = du(t, o), g = cC(b), O = l[f ? m === "floating" ? "reference" : "floating" : m], k = bh(await s.getClippingRect({
    element: (i = await (s.isElement == null ? void 0 : s.isElement(O))) == null || i ? O : O.contextElement || await (s.getDocumentElement == null ? void 0 : s.getDocumentElement(l.floating)),
    boundary: h,
    rootBoundary: w,
    strategy: d
  })), S = m === "floating" ? {
    x: r,
    y: n,
    width: a.floating.width,
    height: a.floating.height
  } : a.reference, _ = await (s.getOffsetParent == null ? void 0 : s.getOffsetParent(l.floating)), V = await (s.isElement == null ? void 0 : s.isElement(_)) ? await (s.getScale == null ? void 0 : s.getScale(_)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, I = bh(s.convertOffsetParentRelativeRectToViewportRelativeRect ? await s.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: l,
    rect: S,
    offsetParent: _,
    strategy: d
  }) : S);
  return {
    top: (k.top - I.top + g.top) / V.y,
    bottom: (I.bottom - k.bottom + g.bottom) / V.y,
    left: (k.left - I.left + g.left) / V.x,
    right: (I.right - k.right + g.right) / V.x
  };
}
c(d1, "detectOverflow");
const dC = /* @__PURE__ */ c(function(o) {
  return o === void 0 && (o = {}), {
    name: "flip",
    options: o,
    async fn(t) {
      var i, r;
      const {
        placement: n,
        middlewareData: s,
        rects: a,
        initialPlacement: l,
        platform: d,
        elements: h
      } = t, {
        mainAxis: w = !0,
        crossAxis: m = !0,
        fallbackPlacements: f,
        fallbackStrategy: b = "bestFit",
        fallbackAxisSideDirection: g = "none",
        flipAlignment: $ = !0,
        ...O
      } = du(o, t);
      if ((i = s.arrow) != null && i.alignmentOffset)
        return {};
      const k = oo(n), S = kc(l), _ = oo(l) === l, V = await (d.isRTL == null ? void 0 : d.isRTL(h.floating)), I = f || (_ || !$ ? [gh(l)] : nC(l)), D = g !== "none";
      !f && D && I.push(...sC(l, $, g, V));
      const z = [l, ...I], F = await d1(t, O), A = [];
      let N = ((r = s.flip) == null ? void 0 : r.overflows) || [];
      if (w && A.push(F[k]), m) {
        const at = rC(n, a, V);
        A.push(F[at[0]], F[at[1]]);
      }
      if (N = [...N, {
        placement: n,
        overflows: A
      }], !A.every((at) => at <= 0)) {
        var G, et;
        const at = (((G = s.flip) == null ? void 0 : G.index) || 0) + 1, Ae = z[at];
        if (Ae)
          return {
            data: {
              index: at,
              overflows: N
            },
            reset: {
              placement: Ae
            }
          };
        let ve = (et = N.filter((Ot) => Ot.overflows[0] <= 0).sort((Ot, Et) => Ot.overflows[1] - Et.overflows[1])[0]) == null ? void 0 : et.placement;
        if (!ve)
          switch (b) {
            case "bestFit": {
              var lt;
              const Ot = (lt = N.filter((Et) => {
                if (D) {
                  const oe = kc(Et.placement);
                  return oe === S || // Create a bias to the `y` side axis due to horizontal
                  // reading directions favoring greater width.
                  oe === "y";
                }
                return !0;
              }).map((Et) => [Et.placement, Et.overflows.filter((oe) => oe > 0).reduce((oe, nt) => oe + nt, 0)]).sort((Et, oe) => Et[1] - oe[1])[0]) == null ? void 0 : lt[0];
              Ot && (ve = Ot);
              break;
            }
            case "initialPlacement":
              ve = l;
              break;
          }
        if (n !== ve)
          return {
            reset: {
              placement: ve
            }
          };
      }
      return {};
    }
  };
}, "flip$1");
async function hC(o, t) {
  const {
    placement: i,
    platform: r,
    elements: n
  } = o, s = await (r.isRTL == null ? void 0 : r.isRTL(n.floating)), a = oo(i), l = hu(i), d = kc(i) === "y", h = ["left", "top"].includes(a) ? -1 : 1, w = s && d ? -1 : 1, m = du(t, o);
  let {
    mainAxis: f,
    crossAxis: b,
    alignmentAxis: g
  } = typeof m == "number" ? {
    mainAxis: m,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...m
  };
  return l && typeof g == "number" && (b = l === "end" ? g * -1 : g), d ? {
    x: b * w,
    y: f * h
  } : {
    x: f * h,
    y: b * w
  };
}
c(hC, "convertValueToCoords");
const uC = /* @__PURE__ */ c(function(o) {
  return o === void 0 && (o = 0), {
    name: "offset",
    options: o,
    async fn(t) {
      var i, r;
      const {
        x: n,
        y: s,
        placement: a,
        middlewareData: l
      } = t, d = await hC(t, o);
      return a === ((i = l.offset) == null ? void 0 : i.placement) && (r = l.arrow) != null && r.alignmentOffset ? {} : {
        x: n + d.x,
        y: s + d.y,
        data: {
          ...d,
          placement: a
        }
      };
    }
  };
}, "offset$1"), pC = /* @__PURE__ */ c(function(o) {
  return o === void 0 && (o = {}), {
    name: "shift",
    options: o,
    async fn(t) {
      const {
        x: i,
        y: r,
        placement: n
      } = t, {
        mainAxis: s = !0,
        crossAxis: a = !1,
        limiter: l = {
          fn: /* @__PURE__ */ c((O) => {
            let {
              x: k,
              y: S
            } = O;
            return {
              x: k,
              y: S
            };
          }, "fn")
        },
        ...d
      } = du(o, t), h = {
        x: i,
        y: r
      }, w = await d1(t, d), m = kc(oo(n)), f = a1(m);
      let b = h[f], g = h[m];
      if (s) {
        const O = f === "y" ? "top" : "left", k = f === "y" ? "bottom" : "right", S = b + w[O], _ = b - w[k];
        b = Vm(S, b, _);
      }
      if (a) {
        const O = m === "y" ? "top" : "left", k = m === "y" ? "bottom" : "right", S = g + w[O], _ = g - w[k];
        g = Vm(S, g, _);
      }
      const $ = l.fn({
        ...t,
        [f]: b,
        [m]: g
      });
      return {
        ...$,
        data: {
          x: $.x - i,
          y: $.y - r
        }
      };
    }
  };
}, "shift$1");
function qc(o) {
  return h1(o) ? (o.nodeName || "").toLowerCase() : "#document";
}
c(qc, "getNodeName");
function Ye(o) {
  var t;
  return (o == null || (t = o.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
c(Ye, "getWindow");
function kr(o) {
  var t;
  return (t = (h1(o) ? o.ownerDocument : o.document) || window.document) == null ? void 0 : t.documentElement;
}
c(kr, "getDocumentElement");
function h1(o) {
  return o instanceof Node || o instanceof Ye(o).Node;
}
c(h1, "isNode");
function xi(o) {
  return o instanceof Element || o instanceof Ye(o).Element;
}
c(xi, "isElement");
function Vi(o) {
  return o instanceof HTMLElement || o instanceof Ye(o).HTMLElement;
}
c(Vi, "isHTMLElement");
function Bm(o) {
  return typeof ShadowRoot > "u" ? !1 : o instanceof ShadowRoot || o instanceof Ye(o).ShadowRoot;
}
c(Bm, "isShadowRoot");
function $d(o) {
  const {
    overflow: t,
    overflowX: i,
    overflowY: r,
    display: n
  } = Ci(o);
  return /auto|scroll|overlay|hidden|clip/.test(t + r + i) && !["inline", "contents"].includes(n);
}
c($d, "isOverflowElement");
function yC(o) {
  return ["table", "td", "th"].includes(qc(o));
}
c(yC, "isTableElement");
function uu(o) {
  return [":popover-open", ":modal"].some((t) => {
    try {
      return o.matches(t);
    } catch {
      return !1;
    }
  });
}
c(uu, "isTopLayer");
function Fw(o) {
  const t = Nw(), i = xi(o) ? Ci(o) : o;
  return i.transform !== "none" || i.perspective !== "none" || (i.containerType ? i.containerType !== "normal" : !1) || !t && (i.backdropFilter ? i.backdropFilter !== "none" : !1) || !t && (i.filter ? i.filter !== "none" : !1) || ["transform", "perspective", "filter"].some((r) => (i.willChange || "").includes(r)) || ["paint", "layout", "strict", "content"].some((r) => (i.contain || "").includes(r));
}
c(Fw, "isContainingBlock");
function wC(o) {
  let t = pn(o);
  for (; Vi(t) && !$c(t); ) {
    if (Fw(t))
      return t;
    if (uu(t))
      return null;
    t = pn(t);
  }
  return null;
}
c(wC, "getContainingBlock");
function Nw() {
  return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
c(Nw, "isWebKit");
function $c(o) {
  return ["html", "body", "#document"].includes(qc(o));
}
c($c, "isLastTraversableNode");
function Ci(o) {
  return Ye(o).getComputedStyle(o);
}
c(Ci, "getComputedStyle$1");
function pu(o) {
  return xi(o) ? {
    scrollLeft: o.scrollLeft,
    scrollTop: o.scrollTop
  } : {
    scrollLeft: o.scrollX,
    scrollTop: o.scrollY
  };
}
c(pu, "getNodeScroll");
function pn(o) {
  if (qc(o) === "html")
    return o;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    o.assignedSlot || // DOM Element detected.
    o.parentNode || // ShadowRoot detected.
    Bm(o) && o.host || // Fallback.
    kr(o)
  );
  return Bm(t) ? t.host : t;
}
c(pn, "getParentNode");
function u1(o) {
  const t = pn(o);
  return $c(t) ? o.ownerDocument ? o.ownerDocument.body : o.body : Vi(t) && $d(t) ? t : u1(t);
}
c(u1, "getNearestOverflowAncestor");
function $l(o, t, i) {
  var r;
  t === void 0 && (t = []), i === void 0 && (i = !0);
  const n = u1(o), s = n === ((r = o.ownerDocument) == null ? void 0 : r.body), a = Ye(n);
  if (s) {
    const l = sy(a);
    return t.concat(a, a.visualViewport || [], $d(n) ? n : [], l && i ? $l(l) : []);
  }
  return t.concat(n, $l(n, [], i));
}
c($l, "getOverflowAncestors");
function sy(o) {
  return o.parent && Object.getPrototypeOf(o.parent) ? o.frameElement : null;
}
c(sy, "getFrameElement");
function p1(o) {
  const t = Ci(o);
  let i = parseFloat(t.width) || 0, r = parseFloat(t.height) || 0;
  const n = Vi(o), s = n ? o.offsetWidth : i, a = n ? o.offsetHeight : r, l = vh(i) !== s || vh(r) !== a;
  return l && (i = s, r = a), {
    width: i,
    height: r,
    $: l
  };
}
c(p1, "getCssDimensions");
function Vw(o) {
  return xi(o) ? o : o.contextElement;
}
c(Vw, "unwrapElement");
function Zo(o) {
  const t = Vw(o);
  if (!Vi(t))
    return un(1);
  const i = t.getBoundingClientRect(), {
    width: r,
    height: n,
    $: s
  } = p1(t);
  let a = (s ? vh(i.width) : i.width) / r, l = (s ? vh(i.height) : i.height) / n;
  return (!a || !Number.isFinite(a)) && (a = 1), (!l || !Number.isFinite(l)) && (l = 1), {
    x: a,
    y: l
  };
}
c(Zo, "getScale");
const fC = /* @__PURE__ */ un(0);
function y1(o) {
  const t = Ye(o);
  return !Nw() || !t.visualViewport ? fC : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
c(y1, "getVisualOffsets");
function mC(o, t, i) {
  return t === void 0 && (t = !1), !i || t && i !== Ye(o) ? !1 : t;
}
c(mC, "shouldAddVisualOffsets");
function so(o, t, i, r) {
  t === void 0 && (t = !1), i === void 0 && (i = !1);
  const n = o.getBoundingClientRect(), s = Vw(o);
  let a = un(1);
  t && (r ? xi(r) && (a = Zo(r)) : a = Zo(o));
  const l = mC(s, i, r) ? y1(s) : un(0);
  let d = (n.left + l.x) / a.x, h = (n.top + l.y) / a.y, w = n.width / a.x, m = n.height / a.y;
  if (s) {
    const f = Ye(s), b = r && xi(r) ? Ye(r) : r;
    let g = f, $ = sy(g);
    for (; $ && r && b !== g; ) {
      const O = Zo($), k = $.getBoundingClientRect(), S = Ci($), _ = k.left + ($.clientLeft + parseFloat(S.paddingLeft)) * O.x, V = k.top + ($.clientTop + parseFloat(S.paddingTop)) * O.y;
      d *= O.x, h *= O.y, w *= O.x, m *= O.y, d += _, h += V, g = Ye($), $ = sy(g);
    }
  }
  return bh({
    width: w,
    height: m,
    x: d,
    y: h
  });
}
c(so, "getBoundingClientRect");
function vC(o) {
  let {
    elements: t,
    rect: i,
    offsetParent: r,
    strategy: n
  } = o;
  const s = n === "fixed", a = kr(r), l = t ? uu(t.floating) : !1;
  if (r === a || l && s)
    return i;
  let d = {
    scrollLeft: 0,
    scrollTop: 0
  }, h = un(1);
  const w = un(0), m = Vi(r);
  if ((m || !m && !s) && ((qc(r) !== "body" || $d(a)) && (d = pu(r)), Vi(r))) {
    const f = so(r);
    h = Zo(r), w.x = f.x + r.clientLeft, w.y = f.y + r.clientTop;
  }
  return {
    width: i.width * h.x,
    height: i.height * h.y,
    x: i.x * h.x - d.scrollLeft * h.x + w.x,
    y: i.y * h.y - d.scrollTop * h.y + w.y
  };
}
c(vC, "convertOffsetParentRelativeRectToViewportRelativeRect");
function gC(o) {
  return Array.from(o.getClientRects());
}
c(gC, "getClientRects");
function w1(o) {
  return so(kr(o)).left + pu(o).scrollLeft;
}
c(w1, "getWindowScrollBarX");
function bC(o) {
  const t = kr(o), i = pu(o), r = o.ownerDocument.body, n = Jn(t.scrollWidth, t.clientWidth, r.scrollWidth, r.clientWidth), s = Jn(t.scrollHeight, t.clientHeight, r.scrollHeight, r.clientHeight);
  let a = -i.scrollLeft + w1(o);
  const l = -i.scrollTop;
  return Ci(r).direction === "rtl" && (a += Jn(t.clientWidth, r.clientWidth) - n), {
    width: n,
    height: s,
    x: a,
    y: l
  };
}
c(bC, "getDocumentRect");
function xC(o, t) {
  const i = Ye(o), r = kr(o), n = i.visualViewport;
  let s = r.clientWidth, a = r.clientHeight, l = 0, d = 0;
  if (n) {
    s = n.width, a = n.height;
    const h = Nw();
    (!h || h && t === "fixed") && (l = n.offsetLeft, d = n.offsetTop);
  }
  return {
    width: s,
    height: a,
    x: l,
    y: d
  };
}
c(xC, "getViewportRect");
function CC(o, t) {
  const i = so(o, !0, t === "fixed"), r = i.top + o.clientTop, n = i.left + o.clientLeft, s = Vi(o) ? Zo(o) : un(1), a = o.clientWidth * s.x, l = o.clientHeight * s.y, d = n * s.x, h = r * s.y;
  return {
    width: a,
    height: l,
    x: d,
    y: h
  };
}
c(CC, "getInnerBoundingClientRect");
function Um(o, t, i) {
  let r;
  if (t === "viewport")
    r = xC(o, i);
  else if (t === "document")
    r = bC(kr(o));
  else if (xi(t))
    r = CC(t, i);
  else {
    const n = y1(o);
    r = {
      ...t,
      x: t.x - n.x,
      y: t.y - n.y
    };
  }
  return bh(r);
}
c(Um, "getClientRectFromClippingAncestor");
function f1(o, t) {
  const i = pn(o);
  return i === t || !xi(i) || $c(i) ? !1 : Ci(i).position === "fixed" || f1(i, t);
}
c(f1, "hasFixedPositionAncestor");
function kC(o, t) {
  const i = t.get(o);
  if (i)
    return i;
  let r = $l(o, [], !1).filter((l) => xi(l) && qc(l) !== "body"), n = null;
  const s = Ci(o).position === "fixed";
  let a = s ? pn(o) : o;
  for (; xi(a) && !$c(a); ) {
    const l = Ci(a), d = Fw(a);
    !d && l.position === "fixed" && (n = null), (s ? !d && !n : !d && l.position === "static" && !!n && ["absolute", "fixed"].includes(n.position) || $d(a) && !d && f1(o, a)) ? r = r.filter((w) => w !== a) : n = l, a = pn(a);
  }
  return t.set(o, r), r;
}
c(kC, "getClippingElementAncestors");
function $C(o) {
  let {
    element: t,
    boundary: i,
    rootBoundary: r,
    strategy: n
  } = o;
  const a = [...i === "clippingAncestors" ? uu(t) ? [] : kC(t, this._c) : [].concat(i), r], l = a[0], d = a.reduce((h, w) => {
    const m = Um(t, w, n);
    return h.top = Jn(m.top, h.top), h.right = mh(m.right, h.right), h.bottom = mh(m.bottom, h.bottom), h.left = Jn(m.left, h.left), h;
  }, Um(t, l, n));
  return {
    width: d.right - d.left,
    height: d.bottom - d.top,
    x: d.left,
    y: d.top
  };
}
c($C, "getClippingRect");
function EC(o) {
  const {
    width: t,
    height: i
  } = p1(o);
  return {
    width: t,
    height: i
  };
}
c(EC, "getDimensions");
function _C(o, t, i) {
  const r = Vi(t), n = kr(t), s = i === "fixed", a = so(o, !0, s, t);
  let l = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const d = un(0);
  if (r || !r && !s)
    if ((qc(t) !== "body" || $d(n)) && (l = pu(t)), r) {
      const m = so(t, !0, s, t);
      d.x = m.x + t.clientLeft, d.y = m.y + t.clientTop;
    } else n && (d.x = w1(n));
  const h = a.left + l.scrollLeft - d.x, w = a.top + l.scrollTop - d.y;
  return {
    x: h,
    y: w,
    width: a.width,
    height: a.height
  };
}
c(_C, "getRectRelativeToOffsetParent");
function yp(o) {
  return Ci(o).position === "static";
}
c(yp, "isStaticPositioned");
function jm(o, t) {
  return !Vi(o) || Ci(o).position === "fixed" ? null : t ? t(o) : o.offsetParent;
}
c(jm, "getTrueOffsetParent");
function m1(o, t) {
  const i = Ye(o);
  if (uu(o))
    return i;
  if (!Vi(o)) {
    let n = pn(o);
    for (; n && !$c(n); ) {
      if (xi(n) && !yp(n))
        return n;
      n = pn(n);
    }
    return i;
  }
  let r = jm(o, t);
  for (; r && yC(r) && yp(r); )
    r = jm(r, t);
  return r && $c(r) && yp(r) && !Fw(r) ? i : r || wC(o) || i;
}
c(m1, "getOffsetParent");
const PC = /* @__PURE__ */ c(async function(o) {
  const t = this.getOffsetParent || m1, i = this.getDimensions, r = await i(o.floating);
  return {
    reference: _C(o.reference, await t(o.floating), o.strategy),
    floating: {
      x: 0,
      y: 0,
      width: r.width,
      height: r.height
    }
  };
}, "getElementRects");
function SC(o) {
  return Ci(o).direction === "rtl";
}
c(SC, "isRTL");
const LC = {
  convertOffsetParentRelativeRectToViewportRelativeRect: vC,
  getDocumentElement: kr,
  getClippingRect: $C,
  getOffsetParent: m1,
  getElementRects: PC,
  getClientRects: gC,
  getDimensions: EC,
  getScale: Zo,
  isElement: xi,
  isRTL: SC
};
function MC(o, t) {
  let i = null, r;
  const n = kr(o);
  function s() {
    var l;
    clearTimeout(r), (l = i) == null || l.disconnect(), i = null;
  }
  c(s, "cleanup");
  function a(l, d) {
    l === void 0 && (l = !1), d === void 0 && (d = 1), s();
    const {
      left: h,
      top: w,
      width: m,
      height: f
    } = o.getBoundingClientRect();
    if (l || t(), !m || !f)
      return;
    const b = Dd(w), g = Dd(n.clientWidth - (h + m)), $ = Dd(n.clientHeight - (w + f)), O = Dd(h), S = {
      rootMargin: -b + "px " + -g + "px " + -$ + "px " + -O + "px",
      threshold: Jn(0, mh(1, d)) || 1
    };
    let _ = !0;
    function V(I) {
      const D = I[0].intersectionRatio;
      if (D !== d) {
        if (!_)
          return a();
        D ? a(!1, D) : r = setTimeout(() => {
          a(!1, 1e-7);
        }, 1e3);
      }
      _ = !1;
    }
    c(V, "handleObserve");
    try {
      i = new IntersectionObserver(V, {
        ...S,
        // Handle <iframe>s
        root: n.ownerDocument
      });
    } catch {
      i = new IntersectionObserver(V, S);
    }
    i.observe(o);
  }
  return c(a, "refresh"), a(!0), s;
}
c(MC, "observeMove");
function v1(o, t, i, r) {
  r === void 0 && (r = {});
  const {
    ancestorScroll: n = !0,
    ancestorResize: s = !0,
    elementResize: a = typeof ResizeObserver == "function",
    layoutShift: l = typeof IntersectionObserver == "function",
    animationFrame: d = !1
  } = r, h = Vw(o), w = n || s ? [...h ? $l(h) : [], ...$l(t)] : [];
  w.forEach((k) => {
    n && k.addEventListener("scroll", i, {
      passive: !0
    }), s && k.addEventListener("resize", i);
  });
  const m = h && l ? MC(h, i) : null;
  let f = -1, b = null;
  a && (b = new ResizeObserver((k) => {
    let [S] = k;
    S && S.target === h && b && (b.unobserve(t), cancelAnimationFrame(f), f = requestAnimationFrame(() => {
      var _;
      (_ = b) == null || _.observe(t);
    })), i();
  }), h && !d && b.observe(h), b.observe(t));
  let g, $ = d ? so(o) : null;
  d && O();
  function O() {
    const k = so(o);
    $ && (k.x !== $.x || k.y !== $.y || k.width !== $.width || k.height !== $.height) && i(), $ = k, g = requestAnimationFrame(O);
  }
  return c(O, "frameLoop"), i(), () => {
    var k;
    w.forEach((S) => {
      n && S.removeEventListener("scroll", i), s && S.removeEventListener("resize", i);
    }), m == null || m(), (k = b) == null || k.disconnect(), b = null, d && cancelAnimationFrame(g);
  };
}
c(v1, "autoUpdate");
const g1 = uC, b1 = pC, x1 = dC, C1 = /* @__PURE__ */ c((o, t, i) => {
  const r = /* @__PURE__ */ new Map(), n = {
    platform: LC,
    ...i
  }, s = {
    ...n.platform,
    _c: r
  };
  return lC(o, t, {
    ...n,
    platform: s
  });
}, "computePosition");
function TC(o, t, i, r, n, s) {
  return new kt(o.queryClient, {
    mutationFn: /* @__PURE__ */ c(async () => await o.post(
      `/api/${r}/${i}/reactions`,
      "POST",
      JSON.stringify({ content: n })
    ), "mutationFn"),
    onMutate: /* @__PURE__ */ c(() => {
      _t(o.queryClient, [r, t], i, (a) => {
        Ec(a, n, s, "add");
      });
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c(() => {
      _t(o.queryClient, [r, t], i, (a) => {
        Ec(a, n, s, "add");
      });
    }, "onSuccess")
  });
}
c(TC, "addReactionMutation");
function AC(o, t, i, r, n) {
  return new kt(o.queryClient, {
    mutationFn: /* @__PURE__ */ c(async () => await o.post(`/api/${r}/${i}/reactions`, "DELETE", JSON.stringify({})), "mutationFn"),
    onMutate: /* @__PURE__ */ c(() => {
      _t(o.queryClient, [r, t], i, (s) => {
        Ec(s, "", n, "remove");
      });
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c(() => {
      _t(o.queryClient, [r, t], i, (s) => {
        Ec(s, "", n, "remove");
      });
    }, "onSuccess")
  });
}
c(AC, "removeReactionMutation");
function zC(o, t, i, r, n, s) {
  return new kt(o.queryClient, {
    mutationFn: /* @__PURE__ */ c(async () => (await o.post(`/api/${r}/${i}/reactions`, "DELETE", JSON.stringify({})), await o.post(
      `/api/${r}/${i}/reactions`,
      "POST",
      JSON.stringify({ content: n })
    )), "mutationFn"),
    onMutate: /* @__PURE__ */ c(() => {
      _t(o.queryClient, [r, t], i, (a) => {
        Ec(a, n, s, "replace");
      });
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c(() => {
      _t(o.queryClient, [r, t], i, (a) => {
        Ec(a, n, s, "replace");
      });
    }, "onSuccess")
  });
}
c(zC, "replaceReactionMutation");
function RC(o, t, i) {
  return {
    queryKey: ["reactions", t, i],
    enabled: !1,
    queryFn: /* @__PURE__ */ c(async () => await (await o.get("/api/" + t + "/" + i + "/reactions")).json(), "queryFn")
  };
}
c(RC, "getReactionListOptions");
function Ec(o, t, i, r) {
  var n;
  return (r === "remove" || r === "replace") && !((n = o.reactions) != null && n.data) || (o.reactions || (o.reactions = { count: 0, data: [] }), o.reactions.data || (o.reactions.data = []), r === "add" ? o.reactions.data = [
    ...o.reactions.data.filter((s) => {
      var a;
      return ((a = s.created_by) == null ? void 0 : a.id) !== i.id;
    }),
    { content: t, created_by: i }
  ] : r === "replace" ? o.reactions.data = [
    ...o.reactions.data.filter((s) => {
      var a;
      return ((a = s.created_by) == null ? void 0 : a.id) !== i.id;
    }),
    { content: t, created_by: i }
  ] : r === "remove" && o.reactions.data && (o.reactions.data = [...o.reactions.data.filter((s) => {
    var a;
    return ((a = s.created_by) == null ? void 0 : a.id) !== i.id;
  })])), o;
}
c(Ec, "updateReaction");
var IC = Object.defineProperty, OC = Object.getOwnPropertyDescriptor, Hw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? OC(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && IC(t, i, n), n;
}, "__decorateClass$Z"), Ws;
let El = (Ws = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.noPadding = !1, this.show = !1, this.viewportRef = dt();
  }
  close() {
    var t;
    this.show = !1, (t = this.viewportRef.value) == null || t.hidePopover();
  }
  handleClose(t) {
    t.newState === "closed" && (this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  willUpdate(t) {
    var i, r;
    super.willUpdate(t), t.has("show") && (this.show ? (i = this.viewportRef.value) == null || i.showPopover() : (r = this.viewportRef.value) == null || r.hidePopover());
  }
  render() {
    return y`
      <dialog class="wy-dialog" tabindex="0" ${it(this.viewportRef)} popover>
        <div class="wy-sheet ${this.show ? "wy-show" : ""}">
          <slot name="header">
            <header class="wy-appbars">
              <nav class="wy-appbar">
                <wy-button kind="icon" @click=${() => this.close()}>
                  <wy-icon name="close"></wy-icon>
                </wy-button>
                <slot name="appbar-text" class="wy-appbar-text"></slot>
                <slot name="appbar-buttons" class="wy-appbar-buttons wy-appbar-buttons-last"></slot>
              </nav>
            </header>
          </slot>
          <div class="wy-sheet-body wy-scroll-y ${this.noPadding ? "wy-sheet-no-padding" : ""}">
            <slot></slot>
          </div>
        </div>
      </dialog>
    `;
  }
  updated(t) {
    var i;
    t.has("show") && this.show && ((i = this.viewportRef.value) == null || i.focus());
  }
  firstUpdated(t) {
    var i;
    (i = this.viewportRef.value) == null || i.addEventListener("toggle", (r) => this.handleClose(r));
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.close();
  }
}, c(Ws, "WySheet"), Ws);
El.styles = [
  rt,
  vt`
    :host {
      display: contents;
    }
    `
];
Hw([
  v({ type: Boolean })
], El.prototype, "noPadding", 2);
Hw([
  v({ type: Boolean })
], El.prototype, "show", 2);
El = Hw([
  Q("wy-sheet")
], El);
const DC = "[part~=wy-reaction]{font-size:calc(1.125 * var(--wy-size, 1rem))}[part~=wy-reactions]{display:inline-flex;align-items:center;column-gap:calc(.25 * var(--wy-size, 1rem));margin-left:calc(.25 * var(--wy-size, 1rem));margin-right:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reactions]:empty{display:none}[part~=wy-reaction-count]{margin:0 calc(.25 * var(--wy-size, 1rem)) 0;line-height:1;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}[part~=wy-reaction-menu]{width:max-content;position:absolute;z-index:1000;border:none;--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;margin:0;text-align:left;background-clip:padding-box;box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));font-size:calc(1.125 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))))}[part~=wy-reaction-picker]{display:flex;flex-direction:row;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}[part~=wy-reactions-line]{display:flex;align-items:center;padding-left:calc(.1875 * var(--wy-size, 1rem));padding-right:calc(.1875 * var(--wy-size, 1rem));gap:calc(.1875 * var(--wy-size, 1rem));justify-content:end}[part~=wy-reactions-line-reverse]{flex-direction:row-reverse;justify-content:start}[part~=wy-reactions-line-bottom]{position:absolute;bottom:calc(-1.125 * var(--wy-size, 1rem));right:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reactions-line-below]{position:relative;height:0;min-height:0;max-height:0;margin:calc(var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) - var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(-1 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))) calc(-1 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));padding-left:calc(.125 * var(--wy-size, 1rem));padding-right:calc(.125 * var(--wy-size, 1rem));gap:calc(.125 * var(--wy-size, 1rem));flex:0 0 0;justify-content:flex-end}", FC = Pt(DC), NC = `.wy-item{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));position:relative;display:flex;align-items:center;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-decoration:none;min-height:calc(3 * var(--wy-size, 1rem))}.wy-item-lg{padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));min-height:calc(4.5 * var(--wy-size, 1rem));gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-item-body{width:100%;min-width:0}.wy-item-rows{display:flex;flex-direction:column;width:100%;row-gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));min-width:0}.wy-item-rows:only-child{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-rows-compact{row-gap:0}.wy-item-rows-single{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-title{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-title-lg{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title-lg{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.wy-item-text{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-text .wy-icon{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}.wy-item-quote{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-item-quote:before,.wy-item-quote:after{content:'"'}.wy-item-actions{--wy-component-background-color: transparent;display:flex;align-items:center;justify-items:flex-end;flex:0 0 auto;margin:calc(-.25 * var(--wy-size, 1rem))}.wy-item-top{align-self:flex-start}.wy-item-actions-bottom{align-self:flex-start;margin-block:calc(-.5 * var(--wy-size, 1rem))}.wy-item-row{display:flex;align-items:center;column-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-item-row .wy-item-title,.wy-item-row .wy-item-text{margin-right:auto}.wy-item-row .wy-meta{white-space:nowrap}.wy-item-right{margin-left:auto}.wy-item-hover{-webkit-user-select:none;user-select:none;cursor:pointer}.wy-item-hover:hover,.wy-item-hover:focus{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);text-decoration:none}.wy-item-hover:active{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-item-hover.wy-disabled,.wy-item-hover:disabled{opacity:var(--wy-opacity-disabled, 38%);pointer-events:none}.wy-item-hover.wy-active{--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-color:var(--wy-component-background-color)}.wy-item-trashed{text-decoration:line-through;opacity:var(--wy-opacity-disabled, 38%)}.wy-item-trashed.wy-item-hover:hover{opacity:1}`, k1 = Pt(NC), VC = ".wy-emoji-icon{display:inline-flex;justify-content:center;align-items:center;line-height:1;width:1em;height:1em;font-size:1.25em}.wy-emoji-icon-sm{width:calc(1.125 * var(--wy-size, 1rem));height:calc(1.125 * var(--wy-size, 1rem));font-size:calc(1.125 * var(--wy-size, 1rem))}.wy-emoji-icon-xs{width:calc(1.125 * var(--wy-size, 1rem));height:calc(1.125 * var(--wy-size, 1rem));font-size:calc(1 * var(--wy-size, 1rem))}", $1 = Pt(VC);
var HC = Object.defineProperty, BC = Object.getOwnPropertyDescriptor, le = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? BC(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && HC(t, i, n), n;
}, "__decorateClass$Y"), qs;
let ae = (qs = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.directionX = "left", this.directionY = "up", this.small = !1, this.reactions = [], this.emojis = [], this.messageType = "messages", this.line = !1, this.lineReverse = !1, this.lineBottom = !1, this.lineBelow = !1, this._placement = "bottom-start", this.show = !1, this.showSheet = !1, this.buttonRef = dt(), this.menuRef = dt(), this.reactionListQuery = new xe(this), this._documentClickHandler = (t) => {
      this.show && t.preventDefault();
    }, this.handleReaction = async (t) => {
      var i, r, n;
      !this.weavyContext || !this.parentId || !this.user || (this.reactedEmoji === t ? (this.reactedEmoji = void 0, await (await AC(
        this.weavyContext,
        this.parentId,
        this.entityId,
        this.messageType,
        this.user
      )).mutate(), (i = this.reactionListQuery.observer) == null || i.refetch()) : this.reactedEmoji === void 0 ? (this.reactedEmoji = t, await (await TC(
        this.weavyContext,
        this.parentId,
        this.entityId,
        this.messageType,
        t,
        this.user
      )).mutate(), (r = this.reactionListQuery.observer) == null || r.refetch()) : (this.reactedEmoji = t, await (await zC(
        this.weavyContext,
        this.parentId,
        this.entityId,
        this.messageType,
        t,
        this.user
      )).mutate(), (n = this.reactionListQuery.observer) == null || n.refetch()));
    };
  }
  handleClose(t) {
    t.newState === "closed" && (this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  handleClickToggle(t) {
    t.stopPropagation(), this.show = !this.show;
  }
  handleReactionsClick() {
    var t;
    (t = this.reactionListQuery.observer) == null || t.refetch(), this.showSheet = !this.showSheet, this.show = !1;
  }
  willUpdate(t) {
    var i, r, n, s, a;
    super.willUpdate(t), (t.has("reactions") || t.has("user")) && this.user && (this.reactedEmoji = (r = (i = this.reactions) == null ? void 0 : i.find((l) => {
      var d, h;
      return ((d = l.created_by) == null ? void 0 : d.id) === ((h = this.user) == null ? void 0 : h.id);
    })) == null ? void 0 : r.content), (t.has("directionX") || t.has("directionY")) && (this._placement = this.directionX === "right" && this.directionY === "down" ? "bottom-start" : this.directionX === "left" && this.directionY === "down" ? "bottom-end" : this.directionX === "right" && this.directionY === "up" ? "top-start" : "top-end"), t.has("show") && (this.show && !this._computePositionCleanup && this.buttonRef.value && this.menuRef.value ? this._computePositionCleanup = v1(this.buttonRef.value, this.menuRef.value, () => {
      requestAnimationFrame(() => {
        this.buttonRef.value && this.menuRef.value && C1(this.buttonRef.value, this.menuRef.value, {
          placement: this._placement,
          strategy: "absolute",
          middleware: [
            x1(),
            g1({ mainAxis: 0, alignmentAxis: -8 }),
            b1({ mainAxis: !0, crossAxis: !0, padding: 4, altBoundary: !0 })
          ]
        }).then(({ x: l, y: d }) => {
          this.menuRef.value && Object.assign(this.menuRef.value.style, {
            marginLeft: `${l}px`,
            marginTop: `${d}px`
          });
        });
      });
    }) : !this.show && this._computePositionCleanup && (this._computePositionCleanup(), this._computePositionCleanup = void 0)), this.show ? (requestAnimationFrame(() => {
      document.addEventListener("click", this._documentClickHandler, { once: !0, capture: !0 });
    }), (n = this.menuRef.value) == null || n.showPopover()) : (s = this.menuRef.value) == null || s.hidePopover(), t.has("weavyContext") && ((a = this.weavyContext) != null && a.reactions) && this.emojis != this.weavyContext.reactions && (this.emojis = this.weavyContext.reactions);
  }
  render() {
    var l, d, h;
    const { data: t, isPending: i } = this.reactionListQuery.result ?? {}, r = [
      ...new Map((l = this.reactions) == null ? void 0 : l.map((w) => [w.content, w])).values()
    ], n = y`
      ${r.length ? y`
            <wy-button
              kind="icon-inline"
              ?active=${this.showSheet}
              ?small=${this.small}
              @click=${this.handleReactionsClick}
            >
              <div part="wy-reactions">
                ${r.map((w) => {
      const m = {
        "wy-emoji-icon": !0,
        "wy-emoji-icon-sm": !this.small,
        "wy-emoji-icon-xs": this.small
      };
      return y`<span class=${Gt(m)} title="">${w.content}</span>`;
    })}
                ${this.reactions && ((d = this.reactions) == null ? void 0 : d.length) > 1 ? y`<small part="wy-reaction-count">${this.reactions.length}</small>` : L}
              </div>
            </wy-button>
          ` : L}

      <div ${it(this.buttonRef)}>
        <wy-button
          part="wy-reaction-menu-button"
          kind="icon"
          ?active=${this.show}
          small
          @click=${this.handleClickToggle}
          @keydown=${Ne}
          @keyup=${li}
          title=${C("React", { desc: "Button action to react" })}
        >
          <wy-icon name="emoticon-plus" size=${this.small ? 18 : 20}></wy-icon>
        </wy-button>
      </div>

      <div ${it(this.menuRef)} part="wy-reaction-menu"           @click=${this.handleClickToggle}
      @keyup=${Sw} ?hidden=${!this.show} popover>
        <div part="wy-reaction-picker">
          ${this.emojis.map(
      (w) => y`
                <wy-button
                  kind="icon"
                  color="none"
                  ?active=${this.reactedEmoji === w}
                  @click=${() => {
        this.handleReaction(w);
      }}
                >
                  <span class="wy-emoji-icon">${w}</span>
                </wy-button>
              `
    )}
        </div>
      </div>
    `, s = y`
      ${this.weavyContext ? y`
            <wy-sheet
              .show=${this.showSheet}
              @close=${() => this.showSheet = !1}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <span slot="appbar-text">${C("Reactions")}</span>
              <!-- <wy-spinner></wy-spinner> -->
              ${this.showSheet && t && !i ? y`
                    ${(h = t.data) == null ? void 0 : h.map((w) => y` <wy-reaction-item .reaction=${w}></wy-reaction-item> `)}
                  ` : L}
            </wy-sheet>
          ` : L}
    `, a = {
      "wy-reactions-line": !0,
      "wy-reactions-line-reverse": this.lineReverse,
      "wy-reactions-line-bottom": this.lineBottom,
      "wy-reactions-line-below": this.lineBelow
    };
    return this.line || this.lineReverse || this.lineBottom || this.lineBelow ? y`
          <div part=${ue(a)}>${n}</div>
          ${s}
        ` : [n, s];
  }
  firstUpdated(t) {
    var i;
    (i = this.menuRef.value) == null || i.addEventListener("toggle", (r) => this.handleClose(r));
  }
  updated(t) {
    (t.has("weavyContext") || t.has("entityId")) && this.weavyContext && this.entityId && this.reactionListQuery.trackQuery(RC(this.weavyContext, this.messageType, this.entityId));
  }
  disconnectedCallback() {
    var t;
    (t = this._computePositionCleanup) == null || t.call(this), super.disconnectedCallback();
  }
}, c(qs, "WyReactions"), qs);
ae.styles = [
  we,
  FC,
  $1,
  vt`
      :host {
        display: contents;
      }
    `
];
le([
  v()
], ae.prototype, "directionX", 2);
le([
  v()
], ae.prototype, "directionY", 2);
le([
  v({ type: Boolean })
], ae.prototype, "small", 2);
le([
  v({ attribute: !1 })
], ae.prototype, "reactions", 2);
le([
  v({ attribute: !1 })
], ae.prototype, "emojis", 2);
le([
  v({ attribute: !0, type: String })
], ae.prototype, "messageType", 2);
le([
  v({ attribute: !0, type: Number })
], ae.prototype, "parentId", 2);
le([
  v({ attribute: !0, type: Number })
], ae.prototype, "entityId", 2);
le([
  v({ type: Boolean })
], ae.prototype, "line", 2);
le([
  v({ type: Boolean })
], ae.prototype, "lineReverse", 2);
le([
  v({ type: Boolean })
], ae.prototype, "lineBottom", 2);
le([
  v({ type: Boolean })
], ae.prototype, "lineBelow", 2);
le([
  W()
], ae.prototype, "_placement", 2);
le([
  W()
], ae.prototype, "reactedEmoji", 2);
le([
  W()
], ae.prototype, "show", 2);
le([
  W()
], ae.prototype, "showSheet", 2);
ae = le([
  Q("wy-reactions"),
  st()
], ae);
var Qs;
let xh = (Qs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    var t, i, r;
    return y`
      <div class="wy-item">
        <wy-avatar
          .src=${(t = this.reaction.created_by) == null ? void 0 : t.avatar_url}
          .name=${(i = this.reaction.created_by) == null ? void 0 : i.display_name}
        ></wy-avatar>
        <div class="wy-item-body">${(r = this.reaction.created_by) == null ? void 0 : r.display_name}</div>
        <span class="wy-emoji-icon">${this.reaction.content}</span>
      </div>
    `;
  }
}, c(Qs, "WyReactionItem"), Qs);
xh.styles = [we, k1, $1];
le([
  v({ attribute: !1 })
], xh.prototype, "reaction", 2);
xh = le([
  Q("wy-reaction-item")
], xh);
function ay(o) {
  switch (o) {
    case "zoom":
      return "zoom-meetings";
    case "microsoft":
      return "microsoft-teams";
    case "google":
      return "google-meet";
  }
}
c(ay, "getMeetingIconName");
function cy(o) {
  switch (o) {
    case "zoom":
      return C("Zoom meeting");
    case "microsoft":
      return C("Teams meeting");
    case "google":
      return C("Google Meet");
  }
}
c(cy, "getMeetingTitle");
var UC = Object.defineProperty, jC = Object.getOwnPropertyDescriptor, E1 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? jC(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && UC(t, i, n), n;
}, "__decorateClass$X"), Ks;
let Ch = (Ks = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    const t = ((/* @__PURE__ */ new Date()).getTime() - new Date(this.meeting.created_at).getTime()) / 36e5 > 2;
    return y`
      <div class="wy-list">
        ${t ? y`<div class="wy-item wy-meeting wy-disabled" title="${C("Meeting ended")}">
                <wy-icon svg="${ay(this.meeting.provider)}" size="48" ></wy-icon>                
                <div class="wy-item-body">
                  <div class="wy-item-title">${cy(this.meeting.provider)}</div>
                  <div class="wy-item-text">${this.meeting.code}</div>
                </div> 
              </div>` : y`<a class="wy-item wy-meeting" href=${this.meeting.join_url} target="_blank"  title="${C("Join meeting")}">
              <wy-icon svg="${ay(this.meeting.provider)}" size="48" color="native"></wy-icon>
              <div class="wy-item-body">
                <div class="wy-item-title">${cy(this.meeting.provider)}</div>
                <div class="wy-item-text">${this.meeting.code}</div>                
              </div>
            </a>`}
      </div>
    `;
  }
}, c(Ks, "WyMeetingCard"), Ks);
Ch.styles = rt;
E1([
  v({ attribute: !1 })
], Ch.prototype, "meeting", 2);
Ch = E1([
  Q("wy-meeting-card"),
  st()
], Ch);
var WC = Object.defineProperty, qC = Object.getOwnPropertyDescriptor, _1 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? qC(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && WC(t, i, n), n;
}, "__decorateClass$W"), Gs;
let kh = (Gs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.text = "";
  }
  render() {
    const t = this.text.trim();
    let i = "";
    return t.length && (i = t.split(/(\n+)/).map((n) => `<div>${n.split(/(\s+)/).map((a) => `<span class="wy-placeholder">${a}</span>`).join(" ")}</div>`).join(" ")), y`
      <div>${no(i)}</div>
    `;
  }
}, c(Gs, "WySkeleton"), Gs);
kh.styles = rt;
_1([
  v()
], kh.prototype, "text", 2);
kh = _1([
  Q("wy-skeleton")
], kh);
const gf = class gf {
  constructor(t) {
    this.delay = NaN, this.sleep = !1, t.addController(this), this.host = t;
  }
  createObserver(t) {
    var i;
    (i = this.scrollObserver) == null || i.disconnect(), this.swipeElement = t, this.scrollObserver = new IntersectionObserver(
      (r) => {
        r.forEach(async (n) => {
          n.isIntersecting && !this.sleep && n.intersectionRatio >= 1 && (this.sleep = !0, Number.isNaN(this.delay) || await new Promise((s) => {
            setTimeout(s, this.delay);
          }), n.target === this.prevElement && this.whenPrev && await this.whenPrev(), n.target === this.nextElement && this.whenNext && await this.whenNext(), await this.host.updateComplete);
        });
      },
      { root: t, threshold: 1, rootMargin: "0px" }
    );
  }
  observe(t, i) {
    var r, n, s, a;
    this.prevElement && ((r = this.scrollObserver) == null || r.unobserve(this.prevElement), this.prevElement = void 0), this.nextElement && ((n = this.scrollObserver) == null || n.unobserve(this.nextElement), this.nextElement = void 0), t && ((s = this.scrollObserver) == null || s.observe(t), this.prevElement = t), i && ((a = this.scrollObserver) == null || a.observe(i), this.nextElement = i), this.sleep = !1;
  }
  clearObserver() {
    var t;
    this.prevElement = void 0, this.nextElement = void 0, (t = this.scrollObserver) == null || t.disconnect(), this.sleep = !1;
  }
  hostConnected() {
    this.scrollObserver && (this.prevElement && this.scrollObserver.observe(this.prevElement), this.nextElement && this.scrollObserver.observe(this.nextElement), this.sleep = !1);
  }
  hostDisconnected() {
    var t;
    (t = this.scrollObserver) == null || t.disconnect();
  }
};
c(gf, "SwipeScrollController");
let ly = gf;
const QC = "WEAVY_OFFLINE_CACHE";
let to;
try {
  to = window.sessionStorage;
} catch {
  console.warn("Session storage not available.");
}
const il = /* @__PURE__ */ new Map();
function KC() {
  il.clear();
}
c(KC, "resetPersistPropertiesCache");
async function GC(o, t) {
  const i = to == null ? void 0 : to.getItem(`${o}-${t.toString()}`);
  if (i)
    return JSON.parse(i);
}
c(GC, "getStorageItem");
async function ZC(o, t, i) {
  const r = JSON.stringify(i);
  r && (to == null || to.setItem(`${o}-${t.toString()}`, r));
}
c(ZC, "setStorageItem");
async function YC(o, t, i) {
  const r = `${QC}:${typeof o}:${t}`;
  i.forEach(async (n) => {
    if (!il.has(n)) {
      const s = await GC(r, n);
      s && (o[n] = s), il.set(n, s);
    }
    if (o[n] !== il.get(n)) {
      const s = o[n];
      il.set(n, s), ZC(r, n, s);
    }
  });
}
c(YC, "persistProperties");
var Br;
const bf = class bf {
  constructor(t, i, r) {
    T(this, Br);
    E(this, Br, ""), this.properties = [], t.addController(this), this.host = t, r && (this.properties = r), i && E(this, Br, i);
  }
  get prefixKey() {
    return u(this, Br);
  }
  set prefixKey(t) {
    t !== u(this, Br) && (KC(), E(this, Br, t), this.host.requestUpdate());
  }
  observe(t, i) {
    this.properties = t, i && (this.prefixKey = i);
  }
  hostUpdate() {
    this.prefixKey && this.properties && YC(this.host, this.prefixKey, this.properties);
  }
};
Br = new WeakMap(), c(bf, "PersistStateController");
let _l = bf;
var XC = Object.defineProperty, JC = Object.getOwnPropertyDescriptor, yu = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? JC(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && XC(t, i, n), n;
}, "__decorateClass$V"), Zs;
let _c = (Zs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.show = !0, this.maximized = !1, this.header = !1, this.viewportRef = dt();
  }
  close() {
    var t;
    (t = this.viewportRef.value) == null || t.close(), this.show = !1;
  }
  handleClose(t) {
    this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }));
  }
  willUpdate(t) {
    var i, r;
    super.willUpdate(t), t.has("show") && (this.show ? (i = this.viewportRef.value) == null || i.showModal() : (r = this.viewportRef.value) == null || r.close());
  }
  render() {
    const t = {
      "wy-open": this.show,
      "wy-modal-full": this.maximized
    };
    return y`
      <dialog class="wy-dialog wy-overlay-dialog" ${it(this.viewportRef)}>
        <div class="wy-overlay wy-transition wy-modal ${Gt(t)}">
          ${this.header ? y`
                <slot name="header">
                  <header class="wy-appbars">
                    <nav class="wy-appbar">
                      <wy-button kind="icon" @click=${() => this.close()}><wy-icon name="close"></wy-icon></wy-button>
                      <slot name="appbar-text" class="wy-appbar-text"></slot>
                      <slot name="appbar-buttons" class="wy-appbar-buttons wy-appbar-buttons-last"></slot>
                    </nav>
                  </header>
                </slot>
              ` : L}
          <slot></slot>
        </div>
      </dialog>
    `;
  }
  updated(t) {
    var i;
    t.has("show") && this.show && ((i = this.viewportRef.value) == null || i.focus());
  }
  firstUpdated(t) {
    var i;
    (i = this.viewportRef.value) == null || i.addEventListener("close", (r) => this.handleClose(r));
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.close();
  }
}, c(Zs, "WyOverlay"), Zs);
_c.styles = [
  rt,
  ki
];
yu([
  v({ type: Boolean })
], _c.prototype, "show", 2);
yu([
  v({ type: Boolean })
], _c.prototype, "maximized", 2);
yu([
  v({ type: Boolean })
], _c.prototype, "header", 2);
_c = yu([
  Q("wy-overlay")
], _c);
const t9 = ".wy-dropdown{position:relative}.wy-dropdown-toggle{white-space:nowrap}.wy-dropdown-menu{width:max-content;position:absolute;z-index:1000;min-width:calc(10 * var(--wy-size, 1rem));border:none;padding:0;--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);font-size:var(--wy-font-size, var(--wy-size, 1em));text-align:left;background-clip:padding-box;border-radius:var(--wy-dropdown-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));box-shadow:var(--wy-dropdown-shadow, var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12)));overflow:hidden;display:block}.wy-dropdown-item{background-color:transparent;color:var(--wy-component-color, var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e)));width:100%;padding:var(--wy-dropdown-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-dropdown-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));clear:both;font-family:var(--wy-font-family, unset),inherit;font-size:inherit;font-weight:var(--wy-font-weight, unset);line-height:1;text-align:inherit;text-decoration:none;white-space:nowrap;border:0;gap:var(--wy-dropdown-gap, var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));cursor:pointer;display:flex;align-items:center}.wy-dropdown-item:hover,.wy-dropdown-item:focus{--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));color:var(--wy-component-color);background-color:var(--wy-component-background-color);text-decoration:none}.wy-dropdown-item.wy-active,.wy-dropdown-item:active{--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32));--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));color:var(--wy-component-color);background-color:var(--wy-component-background-color);text-decoration:none}.wy-dropdown-item.wy-disabled,.wy-dropdown-item:disabled{color:var(--wy-component-color);background-color:var(--wy-component-background-color);pointer-events:none;opacity:var(--wy-opacity-disabled, 38%)}.wy-dropdown-item>img,.wy-dropdown-item>wy-icon{margin-right:calc(.5 * var(--wy-size, 1rem))}.wy-dropdown-item>img,.wy-dropdown-item>img .wy-icon,.wy-dropdown-item>wy-icon,.wy-dropdown-item>wy-icon .wy-icon{color:inherit}.wy-dropdown-item:active>wy-icon,.wy-dropdown-item:active>wy-icon .wy-icon{color:inherit}.wy-dropdown-item.wy-option wy-icon{visibility:hidden}.wy-dropdown-item.wy-option.wy-selected wy-icon{visibility:visible}.wy-dropdown-divider{height:0;margin:0;overflow:hidden;border:none;border-top:var(--wy-dropdown-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}", wu = Pt(t9);
var e9 = Object.defineProperty, i9 = Object.getOwnPropertyDescriptor, ke = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? i9(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && e9(t, i, n), n;
}, "__decorateClass$U"), Ys;
let Xe = (Ys = class extends K {
  constructor() {
    super(), this.exportParts = new Z(this), this.directionX = "right", this.directionY = "down", this.icon = "dots-vertical", this.small = !1, this.noWrapper = !1, this.disabled = !1, this._placement = "bottom-start", this.show = !1, this.buttonRef = dt(), this.menuRef = dt(), this._documentClickHandler = (t) => {
      this.show && t.preventDefault();
    }, this.addEventListener("click", (t) => {
      t.preventDefault();
    });
  }
  handleClose(t) {
    t.newState === "closed" && (this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  handleClickToggle(t) {
    t.stopPropagation(), this.show = !this.show;
  }
  willUpdate(t) {
    var i, r;
    (t.has("directionX") || t.has("directionY")) && (this._placement = this.directionX === "right" && this.directionY === "down" ? "bottom-start" : this.directionX === "left" && this.directionY === "down" ? "bottom-end" : this.directionX === "right" && this.directionY === "up" ? "top-start" : "top-end"), t.has("show") && (this.show && !this.computePositionCleanup && this.buttonRef.value && this.menuRef.value ? this.computePositionCleanup = v1(this.buttonRef.value, this.menuRef.value, () => {
      this.buttonRef.value && this.menuRef.value && C1(this.buttonRef.value, this.menuRef.value, {
        placement: this._placement,
        strategy: "absolute",
        middleware: [
          x1(),
          g1(({ placement: n }) => n.includes("top") ? 9 : 13),
          b1({ mainAxis: !0, crossAxis: !0, padding: 4, altBoundary: !0 })
        ]
      }).then(({ x: n, y: s }) => {
        this.menuRef.value && Object.assign(this.menuRef.value.style, {
          marginLeft: `${n}px`,
          marginTop: `${s}px`
        });
      });
    }) : !this.show && this.computePositionCleanup && (this.computePositionCleanup(), this.computePositionCleanup = void 0)), this.show ? (requestAnimationFrame(() => {
      document.addEventListener("click", this._documentClickHandler, { once: !0, capture: !0 });
    }), (i = this.menuRef.value) == null || i.showPopover()) : (r = this.menuRef.value) == null || r.hidePopover();
  }
  render() {
    const t = this._slotButton.length === 0 || this._slotButton.length === 1 && this._slotButton[0] instanceof Wt;
    return y`
      <span>
        <span
          ${it(this.buttonRef)}
          @click=${this.handleClickToggle}
          @keydown=${Ne}
          @keyup=${li}
        >
          <wy-button
            .kind=${t ? "icon" : void 0}
            ?small=${this.small}
            title=${this.title}
            ?active=${this.show}
            ?disabled=${this.disabled}
          >
            <slot name="button" @slotchange=${() => this.requestUpdate()}>
              <wy-icon name=${this.icon}></wy-icon>
            </slot>
          </wy-button>
        </span>

        <div
          ${it(this.menuRef)}
          @click=${this.handleClickToggle}
          @keyup=${Sw}
          class="wy-dropdown-menu"
          ?hidden=${!this.show}
          popover
        >
          <slot></slot>
        </div>
      </span>
    `;
  }
  firstUpdated(t) {
    var i;
    (i = this.menuRef.value) == null || i.addEventListener("toggle", (r) => this.handleClose(r));
  }
  disconnectedCallback() {
    var t;
    (t = this.computePositionCleanup) == null || t.call(this), super.disconnectedCallback();
  }
}, c(Ys, "WyDropdown"), Ys);
Xe.styles = [
  we,
  wu,
  vt`
      /*:host {
        position: relative;
      }*/
    `
];
ke([
  v()
], Xe.prototype, "directionX", 2);
ke([
  v()
], Xe.prototype, "directionY", 2);
ke([
  v()
], Xe.prototype, "icon", 2);
ke([
  v({ type: Boolean })
], Xe.prototype, "small", 2);
ke([
  v({ type: Boolean })
], Xe.prototype, "noWrapper", 2);
ke([
  v({ type: Boolean })
], Xe.prototype, "disabled", 2);
ke([
  W()
], Xe.prototype, "_placement", 2);
ke([
  W()
], Xe.prototype, "show", 2);
ke([
  Y2({ slot: "button" })
], Xe.prototype, "_slotButton", 2);
ke([
  W()
], Xe.prototype, "computePositionCleanup", 2);
Xe = ke([
  Q("wy-dropdown")
], Xe);
var Xs;
let $h = (Xs = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.active = !1;
  }
  render() {
    return y`<div class="wy-dropdown-item ${Gt({ "wy-active": this.active })}" tabindex="0"
      ><slot></slot
    ></div>`;
  }
}, c(Xs, "WyDropdownItem"), Xs);
$h.styles = [
  we,
  wu,
  vt`
      :host {
        display: contents;
      }
    `
];
ke([
  v({ type: Boolean })
], $h.prototype, "active", 2);
$h = ke([
  Q("wy-dropdown-item")
], $h);
var Js;
let Pl = (Js = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.active = !1, this.selected = !1;
  }
  render() {
    const t = {
      visibility: this.selected ? null : "hidden"
    };
    return y`
      <div
        class="wy-dropdown-item wy-option ${Gt({ "wy-active": this.active, "wy-selected": this.selected })}"
        tabindex="0"
      >
        <slot name="icon" style=${yh(t)}><wy-icon name="check"></wy-icon></slot>
        <slot></slot>
      </div>
    `;
  }
}, c(Js, "WyDropdownOption"), Js);
Pl.styles = [
  we,
  wu,
  vt`
      :host {
        display: contents;
      }
    `
];
ke([
  v({ type: Boolean })
], Pl.prototype, "active", 2);
ke([
  v({ type: Boolean })
], Pl.prototype, "selected", 2);
Pl = ke([
  Q("wy-dropdown-option")
], Pl);
var ta;
let dy = (ta = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    return y`<hr class="wy-dropdown-divider" />`;
  }
}, c(ta, "WyDropdownDivider"), ta);
dy.styles = [
  we,
  wu,
  vt`
      :host {
        display: contents;
      }
    `
];
dy = ke([
  Q("wy-dropdown-divider")
], dy);
var r9 = Object.defineProperty, n9 = Object.getOwnPropertyDescriptor, fu = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? n9(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && r9(t, i, n), n;
}, "__decorateClass$T"), ea;
let Pc = (ea = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    const t = this.icon, i = jc(this.provider);
    return y`
      <wy-icon-display>
        <wy-icon name=${t} .overlayName=${i}></wy-icon>
        <span slot="text">
          ${this.provider ? y`
                <span>${C("No preview available :(")} </span>
                <a href=${this.src} target="_blank">${C(bt`Open in ${this.provider}?`)}</a>
              ` : y`<span>${C("No preview available :(")}</span>`}
        </span>
      </wy-icon-display>
    `;
  }
}, c(ea, "WyPreviewIcon"), ea);
Pc.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
      `
];
fu([
  v()
], Pc.prototype, "src", 2);
fu([
  v()
], Pc.prototype, "icon", 2);
fu([
  v()
], Pc.prototype, "provider", 2);
Pc = fu([
  Q("wy-preview-icon"),
  st()
], Pc);
var o9 = Object.defineProperty, s9 = Object.getOwnPropertyDescriptor, mu = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? s9(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && o9(t, i, n), n;
}, "__decorateClass$S"), ia;
let Sc = (ia = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    if (this.width && this.height) {
      const t = { "--width": this.width, "--height": this.height };
      return y`
        <div class="wy-content-image wy-responsive-image" style=${yh(t)}>
          <img
            class="wy-loading-transition"
            src=${this.src}
            ${it(wh)}
            @load=${fh}
            width=${this.width}
            height=${this.height}
            decoding="async"
            alt=${C("Preview")} />
          <wy-spinner></wy-spinner>
        </div>
      `;
    } else
      return y`
        <div class="wy-content-image wy-responsive-image wy-intrinsic-image">
          <img src=${this.src} ${it(wh)} @load=${fh} decoding="async" alt=${C("Preview")} />
        </div>
      `;
  }
}, c(ia, "WyPreviewImage"), ia);
Sc.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
mu([
  v()
], Sc.prototype, "src", 2);
mu([
  v({ type: Number })
], Sc.prototype, "width", 2);
mu([
  v({ type: Number })
], Sc.prototype, "height", 2);
Sc = mu([
  Q("wy-preview-image"),
  st()
], Sc);
function P1(o) {
  o.classList.contains("wy-loading") && o.classList.add("wy-loaded"), o.classList.add("wy-error"), o.outerHTML = o.outerHTML.replace(/<(video|audio)/, "<div").replace(/(video|audio)>/, "div>");
}
c(P1, "mediaFallback");
function Wm(o) {
  const t = o.target;
  (t.tagName === "VIDEO" || t.tagName === "AUDIO") && t.classList.contains("wy-loading") && t.classList.add("wy-loaded");
}
c(Wm, "mediaLoaded");
function qm(o) {
  const t = o.target;
  if (t.tagName === "SOURCE" && t.parentNode) {
    const i = t.parentNode, r = parseInt(i.dataset.errors || "0") + 1;
    i.dataset.errors = r.toString(), i.querySelectorAll("source").length >= r && (console.warn(i.tagName.toLowerCase() + " source error, switching to fallback"), P1(i));
  }
}
c(qm, "mediaError");
function Qm(o) {
  const t = o.target;
  (t.tagName === "VIDEO" || t.tagName === "AUDIO") && (t.tagName === "VIDEO" && !t.videoWidth || t.tagName === "AUDIO" && !t.duration) && (console.warn(t.tagName.toLowerCase() + " track not available, switching to fallback"), P1(t));
}
c(Qm, "codecError");
var a9 = Object.defineProperty, c9 = Object.getOwnPropertyDescriptor, Ed = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? c9(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && a9(t, i, n), n;
}, "__decorateClass$R"), ra;
let ao = (ra = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.format = "", this.name = "";
  }
  registerLoading(t) {
    this.unregisterLoading(), t && (this.mediaElement = t, t.classList.add("wy-loading"), t.addEventListener("error", qm, !0), t.addEventListener("loadedmetadata", Wm, !0), t.addEventListener("loadedmetadata", Qm, !0));
  }
  unregisterLoading() {
    this.mediaElement && (this.mediaElement.pause(), this.mediaElement.removeAttribute("autoplay"), this.mediaElement.setAttribute("preload", "none"), this.mediaElement.removeEventListener("error", qm, !0), this.mediaElement.removeEventListener("loadedmetadata", Wm, !0), this.mediaElement.removeEventListener("loadedmetadata", Qm, !0), this.mediaElement = void 0);
  }
  render() {
    return this.format === "video" ? y`
          <video ${it(this.registerLoading)} class="wy-content-video" controls crossorigin="use-credentials" autoplay>
            <source src=${this.src} type=${wt(this.mediaType)} />
            <wy-preview-icon src=${this.src} icon="file-video"></wy-preview-icon>
          </video>
          <wy-spinner></wy-spinner>
        ` : y`
          <audio ${it(this.registerLoading)} class="wy-content-audio" controls crossorigin="use-credentials" autoplay>
            <source src=${this.src} type=${wt(this.mediaType)} />
          </audio>
        `;
  }
  disconnectedCallback() {
    this.unregisterLoading(), super.disconnectedCallback();
  }
}, c(ra, "WyPreviewMedia"), ra);
ao.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
Ed([
  v()
], ao.prototype, "format", 2);
Ed([
  v()
], ao.prototype, "src", 2);
Ed([
  v()
], ao.prototype, "name", 2);
Ed([
  v()
], ao.prototype, "mediaType", 2);
ao = Ed([
  Q("wy-preview-media")
], ao);
var l9 = Object.defineProperty, d9 = Object.getOwnPropertyDescriptor, mo = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? d9(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && l9(t, i, n), n;
}, "__decorateClass$Q"), na;
let mr = (na = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.html = !1, this.code = !1, this.textOrHtmlContent = "", this.loading = !0;
  }
  async updated(t) {
    (t.has("weavyContext") || t.has("src")) && this.weavyContext && (this.loading = !0, fetch(this.src, await this.weavyContext.fetchOptions()).then(Lb).then((i) => new Response(i)).then((i) => i.text()).then((i) => {
      this.loading = !1, this.textOrHtmlContent = i;
    }));
  }
  render() {
    return this.loading ? y`
      <wy-empty><wy-spinner></wy-spinner></wy-empty>
    ` : this.html ? this.code ? y` <div class="wy-content-code wy-code">${no(this.textOrHtmlContent)}</div> ` : y`
            <div class="wy-document wy-light">
              <div class="wy-content-html">${no(this.textOrHtmlContent)}</div>
            </div>
          ` : this.code ? y` <div class="wy-content-code">${this.textOrHtmlContent}</div> ` : y`
          <div class="wy-document wy-light">
            <pre class="wy-content-text">${this.textOrHtmlContent}</pre>
          </div>
        `;
  }
}, c(na, "WyPreviewText"), na);
mr.styles = [
  rt,
  ki,
  vt`
      :host {
        display: contents;
      }
    `
];
mo([
  Kt({ context: ne, subscribe: !0 }),
  W()
], mr.prototype, "weavyContext", 2);
mo([
  v()
], mr.prototype, "src", 2);
mo([
  v({ type: Boolean })
], mr.prototype, "html", 2);
mo([
  v({ type: Boolean })
], mr.prototype, "code", 2);
mo([
  W()
], mr.prototype, "textOrHtmlContent", 2);
mo([
  W()
], mr.prototype, "loading", 2);
mr = mo([
  Q("wy-preview-text")
], mr);
var h9 = Object.defineProperty, u9 = Object.getOwnPropertyDescriptor, _d = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? u9(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && h9(t, i, n), n;
}, "__decorateClass$P"), oa;
let co = (oa = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  registerLoading(t) {
    var i;
    if ((i = this.unregisterLoading) == null || i.call(this), t) {
      this.embedElement = t, t.classList.add("wy-loading");
      const r = window.setTimeout(() => {
        t.classList.add("wy-fallback");
      }, 2500), n = /* @__PURE__ */ c((s) => {
        const a = s.target;
        a.tagName === "OBJECT" && a.classList.contains("wy-loading") && !a.classList.contains("wy-loaded") && (a.classList.add("wy-loaded"), window.clearTimeout(r));
      }, "embedLoaded");
      t.addEventListener("load", n, !0), this.unregisterLoading = () => {
        this.embedElement && (t.removeEventListener("load", n, !0), window.clearTimeout(r), this.embedElement = void 0);
      };
    }
  }
  render() {
    return y`
      <object title=${C("Preview")} ${it(this.registerLoading)} class="wy-content-iframe" data=${this.src}></object>
      <wy-spinner overlay></wy-spinner>
      <wy-preview-icon
        src=${this.src}
        icon=${this.icon}
        provider=${wt(this.provider)}
        class="wy-content-iframe-fallback"></wy-preview-icon>
    `;
  }
  disconnectedCallback() {
    var t;
    (t = this.unregisterLoading) == null || t.call(this), super.disconnectedCallback();
  }
}, c(oa, "WyPreviewEmbed"), oa);
co.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
_d([
  v()
], co.prototype, "src", 2);
_d([
  v()
], co.prototype, "name", 2);
_d([
  v()
], co.prototype, "icon", 2);
_d([
  v()
], co.prototype, "provider", 2);
co = _d([
  Q("wy-preview-embed"),
  st()
], co);
var ul = {};
ul.d = (o, t) => {
  for (var i in t)
    ul.o(t, i) && !ul.o(o, i) && Object.defineProperty(o, i, { enumerable: !0, get: t[i] });
};
ul.o = (o, t) => Object.prototype.hasOwnProperty.call(o, t);
var Nt = globalThis.pdfjsViewer = {};
ul.d(Nt, {
  AnnotationLayerBuilder: /* @__PURE__ */ c(() => (
    /* reexport */
    Sh
  ), "AnnotationLayerBuilder"),
  DownloadManager: /* @__PURE__ */ c(() => (
    /* reexport */
    ky
  ), "DownloadManager"),
  EventBus: /* @__PURE__ */ c(() => (
    /* reexport */
    Lh
  ), "EventBus"),
  FindState: /* @__PURE__ */ c(() => (
    /* reexport */
    Sr
  ), "FindState"),
  GenericL10n: /* @__PURE__ */ c(() => (
    /* reexport */
    Tc
  ), "GenericL10n"),
  LinkTarget: /* @__PURE__ */ c(() => (
    /* reexport */
    $n
  ), "LinkTarget"),
  PDFFindController: /* @__PURE__ */ c(() => (
    /* reexport */
    py
  ), "PDFFindController"),
  PDFHistory: /* @__PURE__ */ c(() => (
    /* reexport */
    Iy
  ), "PDFHistory"),
  PDFLinkService: /* @__PURE__ */ c(() => (
    /* reexport */
    _h
  ), "PDFLinkService"),
  PDFPageView: /* @__PURE__ */ c(() => (
    /* reexport */
    Oh
  ), "PDFPageView"),
  PDFScriptingManager: /* @__PURE__ */ c(() => (
    /* reexport */
    ew
  ), "PDFScriptingManager"),
  PDFSinglePageViewer: /* @__PURE__ */ c(() => (
    /* reexport */
    cw
  ), "PDFSinglePageViewer"),
  PDFViewer: /* @__PURE__ */ c(() => (
    /* reexport */
    Dh
  ), "PDFViewer"),
  ProgressBar: /* @__PURE__ */ c(() => (
    /* reexport */
    uy
  ), "ProgressBar"),
  RenderingStates: /* @__PURE__ */ c(() => (
    /* reexport */
    Ht
  ), "RenderingStates"),
  ScrollMode: /* @__PURE__ */ c(() => (
    /* reexport */
    gt
  ), "ScrollMode"),
  SimpleLinkService: /* @__PURE__ */ c(() => (
    /* reexport */
    Ll
  ), "SimpleLinkService"),
  SpreadMode: /* @__PURE__ */ c(() => (
    /* reexport */
    Pe
  ), "SpreadMode"),
  StructTreeLayerBuilder: /* @__PURE__ */ c(() => (
    /* reexport */
    zh
  ), "StructTreeLayerBuilder"),
  TextLayerBuilder: /* @__PURE__ */ c(() => (
    /* reexport */
    Rh
  ), "TextLayerBuilder"),
  XfaLayerBuilder: /* @__PURE__ */ c(() => (
    /* reexport */
    Ih
  ), "XfaLayerBuilder"),
  parseQueryString: /* @__PURE__ */ c(() => (
    /* reexport */
    vu
  ), "parseQueryString")
});
const p9 = "auto", S1 = 1, Km = 1.1, y9 = 0.1, w9 = 10, wp = 0, f9 = 1.25, Gm = 40, Zm = 5, Ht = {
  INITIAL: 0,
  RUNNING: 1,
  PAUSED: 2,
  FINISHED: 3
}, Yo = {
  UNKNOWN: 0,
  NORMAL: 1,
  CHANGING: 2,
  FULLSCREEN: 3
}, Di = {
  DISABLE: 0,
  ENABLE: 1,
  ENABLE_PERMISSIONS: 2
}, gt = {
  UNKNOWN: -1,
  VERTICAL: 0,
  HORIZONTAL: 1,
  WRAPPED: 2,
  PAGE: 3
}, Pe = {
  UNKNOWN: -1,
  NONE: 0,
  ODD: 1,
  EVEN: 2
}, xf = class xf {
  constructor() {
    const t = window.devicePixelRatio || 1;
    this.sx = t, this.sy = t;
  }
  get scaled() {
    return this.sx !== 1 || this.sy !== 1;
  }
};
c(xf, "OutputScale");
let hy = xf;
function L1(o, t, i = !1) {
  let r = o.offsetParent;
  if (!r) {
    console.error("offsetParent is not set -- cannot scroll");
    return;
  }
  let n = o.offsetTop + o.clientTop, s = o.offsetLeft + o.clientLeft;
  for (; r.clientHeight === r.scrollHeight && r.clientWidth === r.scrollWidth || i && (r.classList.contains("markedContent") || getComputedStyle(r).overflow === "hidden"); )
    if (n += r.offsetTop, s += r.offsetLeft, r = r.offsetParent, !r)
      return;
  t && (t.top !== void 0 && (n += t.top), t.left !== void 0 && (s += t.left, r.scrollLeft = s)), r.scrollTop = n;
}
c(L1, "scrollIntoView");
function m9(o, t, i = void 0) {
  const r = /* @__PURE__ */ c(function(a) {
    s || (s = window.requestAnimationFrame(/* @__PURE__ */ c(function() {
      s = null;
      const d = o.scrollLeft, h = n.lastX;
      d !== h && (n.right = d > h), n.lastX = d;
      const w = o.scrollTop, m = n.lastY;
      w !== m && (n.down = w > m), n.lastY = w, t(n);
    }, "viewAreaElementScrolled")));
  }, "debounceScroll"), n = {
    right: !0,
    down: !0,
    lastX: o.scrollLeft,
    lastY: o.scrollTop,
    _eventHandler: r
  };
  let s = null;
  return o.addEventListener("scroll", r, {
    useCapture: !0,
    signal: i
  }), i == null || i.addEventListener("abort", () => window.cancelAnimationFrame(s), {
    once: !0
  }), n;
}
c(m9, "watchScroll");
function vu(o) {
  const t = /* @__PURE__ */ new Map();
  for (const [i, r] of new URLSearchParams(o))
    t.set(i.toLowerCase(), r);
  return t;
}
c(vu, "parseQueryString");
const Ym = /[\x00-\x1F]/g;
function Eh(o, t = !1) {
  return Ym.test(o) ? t ? o.replaceAll(Ym, (i) => i === "\0" ? "" : " ") : o.replaceAll("\0", "") : o;
}
c(Eh, "removeNullCharacters");
function Sl(o, t, i = 0) {
  let r = i, n = o.length - 1;
  if (n < 0 || !t(o[n]))
    return o.length;
  if (t(o[r]))
    return r;
  for (; r < n; ) {
    const s = r + n >> 1, a = o[s];
    t(a) ? n = s : r = s + 1;
  }
  return r;
}
c(Sl, "binarySearchFirstItem");
function Xm(o) {
  if (Math.floor(o) === o)
    return [o, 1];
  const t = 1 / o, i = 8;
  if (t > i)
    return [1, i];
  if (Math.floor(t) === t)
    return [1, t];
  const r = o > 1 ? t : o;
  let n = 0, s = 1, a = 1, l = 1;
  for (; ; ) {
    const h = n + a, w = s + l;
    if (w > i)
      break;
    r <= h / w ? (a = h, l = w) : (n = h, s = w);
  }
  let d;
  return r - n / s < a / l - r ? d = r === o ? [n, s] : [s, n] : d = r === o ? [a, l] : [l, a], d;
}
c(Xm, "approximateFraction");
function Fd(o, t) {
  return o - o % t;
}
c(Fd, "floorToDivide");
function v9(o, t, i) {
  if (o < 2)
    return o;
  let r = t[o].div, n = r.offsetTop + r.clientTop;
  n >= i && (r = t[o - 1].div, n = r.offsetTop + r.clientTop);
  for (let s = o - 2; s >= 0 && (r = t[s].div, !(r.offsetTop + r.clientTop + r.clientHeight <= n)); --s)
    o = s;
  return o;
}
c(v9, "backtrackBeforeAllVisibleElements");
function g9({
  scrollEl: o,
  views: t,
  sortByVisibility: i = !1,
  horizontal: r = !1,
  rtl: n = !1
}) {
  const s = o.scrollTop, a = s + o.clientHeight, l = o.scrollLeft, d = l + o.clientWidth;
  function h(S) {
    const _ = S.div;
    return _.offsetTop + _.clientTop + _.clientHeight > s;
  }
  c(h, "isElementBottomAfterViewTop");
  function w(S) {
    const _ = S.div, V = _.offsetLeft + _.clientLeft, I = V + _.clientWidth;
    return n ? V < d : I > l;
  }
  c(w, "isElementNextAfterViewHorizontally");
  const m = [], f = /* @__PURE__ */ new Set(), b = t.length;
  let g = Sl(t, r ? w : h);
  g > 0 && g < b && !r && (g = v9(g, t, s));
  let $ = r ? d : -1;
  for (let S = g; S < b; S++) {
    const _ = t[S], V = _.div, I = V.offsetLeft + V.clientLeft, D = V.offsetTop + V.clientTop, z = V.clientWidth, F = V.clientHeight, A = I + z, N = D + F;
    if ($ === -1)
      N >= a && ($ = N);
    else if ((r ? I : D) > $)
      break;
    if (N <= s || D >= a || A <= l || I >= d)
      continue;
    const G = Math.max(0, s - D) + Math.max(0, N - a), et = Math.max(0, l - I) + Math.max(0, A - d), lt = (F - G) / F, at = (z - et) / z, Ae = lt * at * 100 | 0;
    m.push({
      id: _.id,
      x: I,
      y: D,
      view: _,
      percent: Ae,
      widthPercent: at * 100 | 0
    }), f.add(_.id);
  }
  const O = m[0], k = m.at(-1);
  return i && m.sort(function(S, _) {
    const V = S.percent - _.percent;
    return Math.abs(V) > 1e-3 ? -V : S.id - _.id;
  }), {
    first: O,
    last: k,
    views: m,
    ids: f
  };
}
c(g9, "getVisibleElements");
function M1(o) {
  return Number.isInteger(o) && o % 90 === 0;
}
c(M1, "isValidRotation");
function b9(o) {
  return Number.isInteger(o) && Object.values(gt).includes(o) && o !== gt.UNKNOWN;
}
c(b9, "isValidScrollMode");
function x9(o) {
  return Number.isInteger(o) && Object.values(Pe).includes(o) && o !== Pe.UNKNOWN;
}
c(x9, "isValidSpreadMode");
function Jm(o) {
  return o.width <= o.height;
}
c(Jm, "isPortraitOrientation");
new Promise(function(o) {
  window.requestAnimationFrame(o);
});
const C9 = document.documentElement.style;
function k9(o, t, i) {
  return Math.min(Math.max(o, t), i);
}
c(k9, "clamp");
var Ur, Dn, jr, sa, Fn;
const Cf = class Cf {
  constructor(t) {
    T(this, Ur, null);
    T(this, Dn, null);
    T(this, jr, 0);
    T(this, sa, null);
    T(this, Fn, !0);
    E(this, Ur, t.classList), E(this, sa, t.style);
  }
  get percent() {
    return u(this, jr);
  }
  set percent(t) {
    if (E(this, jr, k9(t, 0, 100)), isNaN(t)) {
      u(this, Ur).add("indeterminate");
      return;
    }
    u(this, Ur).remove("indeterminate"), u(this, sa).setProperty("--progressBar-percent", `${u(this, jr)}%`);
  }
  setWidth(t) {
    if (!t)
      return;
    const r = t.parentNode.offsetWidth - t.offsetWidth;
    r > 0 && u(this, sa).setProperty("--progressBar-end-offset", `${r}px`);
  }
  setDisableAutoFetch(t = 5e3) {
    u(this, jr) === 100 || isNaN(u(this, jr)) || (u(this, Dn) && clearTimeout(u(this, Dn)), this.show(), E(this, Dn, setTimeout(() => {
      E(this, Dn, null), this.hide();
    }, t)));
  }
  hide() {
    u(this, Fn) && (E(this, Fn, !1), u(this, Ur).add("hidden"));
  }
  show() {
    u(this, Fn) || (E(this, Fn, !0), u(this, Ur).remove("hidden"));
  }
};
Ur = new WeakMap(), Dn = new WeakMap(), jr = new WeakMap(), sa = new WeakMap(), Fn = new WeakMap(), c(Cf, "ProgressBar");
let uy = Cf;
function $9(o) {
  let t = gt.VERTICAL, i = Pe.NONE;
  switch (o) {
    case "SinglePage":
      t = gt.PAGE;
      break;
    case "OneColumn":
      break;
    case "TwoPageLeft":
      t = gt.PAGE;
    case "TwoColumnLeft":
      i = Pe.ODD;
      break;
    case "TwoPageRight":
      t = gt.PAGE;
    case "TwoColumnRight":
      i = Pe.EVEN;
      break;
  }
  return {
    scrollMode: t,
    spreadMode: i
  };
}
c($9, "apiPageLayoutToViewerModes");
const yi = {
  SPACE: 0,
  ALPHA_LETTER: 1,
  PUNCT: 2,
  HAN_LETTER: 3,
  KATAKANA_LETTER: 4,
  HIRAGANA_LETTER: 5,
  HALFWIDTH_KATAKANA_LETTER: 6,
  THAI_LETTER: 7
};
function E9(o) {
  return o < 11904;
}
c(E9, "isAlphabeticalScript");
function _9(o) {
  return (o & 65408) === 0;
}
c(_9, "isAscii");
function P9(o) {
  return o >= 97 && o <= 122 || o >= 65 && o <= 90;
}
c(P9, "isAsciiAlpha");
function S9(o) {
  return o >= 48 && o <= 57;
}
c(S9, "isAsciiDigit");
function L9(o) {
  return o === 32 || o === 9 || o === 13 || o === 10;
}
c(L9, "isAsciiSpace");
function M9(o) {
  return o >= 13312 && o <= 40959 || o >= 63744 && o <= 64255;
}
c(M9, "isHan");
function T9(o) {
  return o >= 12448 && o <= 12543;
}
c(T9, "isKatakana");
function A9(o) {
  return o >= 12352 && o <= 12447;
}
c(A9, "isHiragana");
function z9(o) {
  return o >= 65376 && o <= 65439;
}
c(z9, "isHalfwidthKatakana");
function R9(o) {
  return (o & 65408) === 3584;
}
c(R9, "isThai");
function Nd(o) {
  return E9(o) ? _9(o) ? L9(o) ? yi.SPACE : P9(o) || S9(o) || o === 95 ? yi.ALPHA_LETTER : yi.PUNCT : R9(o) ? yi.THAI_LETTER : o === 160 ? yi.SPACE : yi.ALPHA_LETTER : M9(o) ? yi.HAN_LETTER : T9(o) ? yi.KATAKANA_LETTER : A9(o) ? yi.HIRAGANA_LETTER : z9(o) ? yi.HALFWIDTH_KATAKANA_LETTER : yi.ALPHA_LETTER;
}
c(Nd, "getCharacterType");
let tv;
function I9() {
  return tv || (tv = " ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"), tv;
}
c(I9, "getNormalizeWithNFKC");
const Sr = {
  FOUND: 0,
  NOT_FOUND: 1,
  WRAPPED: 2,
  PENDING: 3
}, O9 = 250, D9 = -50, F9 = -400, ev = {
  "‐": "-",
  "‘": "'",
  "’": "'",
  "‚": "'",
  "‛": "'",
  "“": '"',
  "”": '"',
  "„": '"',
  "‟": '"',
  "¼": "1/4",
  "½": "1/2",
  "¾": "3/4"
}, iv = /* @__PURE__ */ new Set([12441, 12442, 2381, 2509, 2637, 2765, 2893, 3021, 3149, 3277, 3387, 3388, 3405, 3530, 3642, 3770, 3972, 4153, 4154, 5908, 5940, 6098, 6752, 6980, 7082, 7083, 7154, 7155, 11647, 43014, 43052, 43204, 43347, 43456, 43766, 44013, 3158, 3953, 3954, 3962, 3963, 3964, 3965, 3968, 3956]);
let rv;
const N9 = new RegExp("\\p{M}+", "gu"), V9 = new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})", "gu"), H9 = new RegExp("([^\\p{M}])\\p{M}*$", "u"), B9 = new RegExp("^\\p{M}*([^\\p{M}])", "u"), U9 = /[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g, nv = /* @__PURE__ */ new Map(), j9 = "[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]", ov = /* @__PURE__ */ new Map();
let fp = null, mp = null;
function vp(o) {
  const t = [];
  let i;
  for (; (i = U9.exec(o)) !== null; ) {
    let {
      index: b
    } = i;
    for (const g of i[0]) {
      let $ = nv.get(g);
      $ || ($ = g.normalize("NFD").length, nv.set(g, $)), t.push([$, b++]);
    }
  }
  let r;
  if (t.length === 0 && fp)
    r = fp;
  else if (t.length > 0 && mp)
    r = mp;
  else {
    const b = Object.keys(ev).join(""), g = I9(), k = `([${b}])|([${g}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;
    t.length === 0 ? r = fp = new RegExp(k + "|(\\u0000)", "gum") : r = mp = new RegExp(k + `|(${j9})`, "gum");
  }
  const n = [];
  for (; (i = N9.exec(o)) !== null; )
    n.push([i[0].length, i.index]);
  let s = o.normalize("NFD");
  const a = [[0, 0]];
  let l = 0, d = 0, h = 0, w = 0, m = 0, f = !1;
  return s = s.replace(r, (b, g, $, O, k, S, _, V, I, D) => {
    var z, F, A;
    if (D -= w, g) {
      const N = ev[g], G = N.length;
      for (let et = 1; et < G; et++)
        a.push([D - h + et, h - et]);
      return h -= G - 1, N;
    }
    if ($) {
      let N = ov.get($);
      N || (N = $.normalize("NFKC"), ov.set($, N));
      const G = N.length;
      for (let et = 1; et < G; et++)
        a.push([D - h + et, h - et]);
      return h -= G - 1, N;
    }
    if (O)
      return f = !0, D + m === ((z = n[l]) == null ? void 0 : z[1]) ? ++l : (a.push([D - 1 - h + 1, h - 1]), h -= 1, w += 1), a.push([D - h + 1, h]), w += 1, m += 1, O.charAt(0);
    if (k) {
      const N = k.endsWith(`
`), G = N ? k.length - 2 : k.length;
      f = !0;
      let et = G;
      D + m === ((F = n[l]) == null ? void 0 : F[1]) && (et -= n[l][0], ++l);
      for (let lt = 1; lt <= et; lt++)
        a.push([D - 1 - h + lt, h - lt]);
      return h -= et, w += et, N ? (D += G - 1, a.push([D - h + 1, 1 + h]), h += 1, w += 1, m += 1, k.slice(0, G)) : k;
    }
    if (S) {
      const N = S.length - 2;
      return a.push([D - h + N, 1 + h]), h += 1, w += 1, m += 1, S.slice(0, -2);
    }
    if (_) {
      const N = _.length - 1;
      return a.push([D - h + N, h]), w += 1, m += 1, _.slice(0, -1);
    }
    if (V)
      return a.push([D - h + 1, h - 1]), h -= 1, w += 1, m += 1, " ";
    if (D + m === ((A = t[d]) == null ? void 0 : A[1])) {
      const N = t[d][0] - 1;
      ++d;
      for (let G = 1; G <= N; G++)
        a.push([D - (h - G), h - G]);
      h -= N, w += N;
    }
    return I;
  }), a.push([s.length, h]), [s, a, f];
}
c(vp, "normalize");
function W9(o, t, i) {
  if (!o)
    return [t, i];
  const r = t, n = t + i - 1;
  let s = Sl(o, (w) => w[0] >= r);
  o[s][0] > r && --s;
  let a = Sl(o, (w) => w[0] >= n, s);
  o[a][0] > n && --a;
  const l = r + o[s][1], h = n + o[a][1] + 1 - l;
  return [l, h];
}
c(W9, "getOriginalIndex");
var he, aa, Nn, X, T1, yy, wy, A1, z1, R1, fy, I1, O1, jd, rl, Lo, D1, my, vy, Wd, F1, gy, by, nl;
const kf = class kf {
  constructor({
    linkService: t,
    eventBus: i,
    updateMatchesCountOnProgress: r = !0
  }) {
    T(this, X);
    T(this, he, null);
    T(this, aa, !0);
    T(this, Nn, 0);
    this._linkService = t, this._eventBus = i, E(this, aa, r), this.onIsPageVisible = null, P(this, X, yy).call(this), i._on("find", P(this, X, T1).bind(this)), i._on("findbarclose", P(this, X, F1).bind(this));
  }
  get highlightMatches() {
    return this._highlightMatches;
  }
  get pageMatches() {
    return this._pageMatches;
  }
  get pageMatchesLength() {
    return this._pageMatchesLength;
  }
  get selected() {
    return this._selected;
  }
  get state() {
    return u(this, he);
  }
  setDocument(t) {
    this._pdfDocument && P(this, X, yy).call(this), t && (this._pdfDocument = t, this._firstPageCapability.resolve());
  }
  scrollMatchIntoView({
    element: t = null,
    selectedLeft: i = 0,
    pageIndex: r = -1,
    matchIndex: n = -1
  }) {
    if (!this._scrollMatches || !t)
      return;
    if (n === -1 || n !== this._selected.matchIdx)
      return;
    if (r === -1 || r !== this._selected.pageIdx)
      return;
    this._scrollMatches = !1;
    const s = {
      top: D9,
      left: i + F9
    };
    L1(t, s, !0);
  }
};
he = new WeakMap(), aa = new WeakMap(), Nn = new WeakMap(), X = new WeakSet(), T1 = /* @__PURE__ */ c(function(t) {
  if (!t)
    return;
  const i = this._pdfDocument, {
    type: r
  } = t;
  (u(this, he) === null || P(this, X, A1).call(this, t)) && (this._dirtyMatch = !0), E(this, he, t), r !== "highlightallchange" && P(this, X, nl).call(this, Sr.PENDING), this._firstPageCapability.promise.then(() => {
    if (!this._pdfDocument || i && this._pdfDocument !== i)
      return;
    P(this, X, O1).call(this);
    const n = !this._highlightMatches, s = !!this._findTimeout;
    this._findTimeout && (clearTimeout(this._findTimeout), this._findTimeout = null), r ? this._dirtyMatch ? P(this, X, Lo).call(this) : r === "again" ? (P(this, X, Lo).call(this), n && u(this, he).highlightAll && P(this, X, rl).call(this)) : r === "highlightallchange" ? (s ? P(this, X, Lo).call(this) : this._highlightMatches = !0, P(this, X, rl).call(this)) : P(this, X, Lo).call(this) : this._findTimeout = setTimeout(() => {
      P(this, X, Lo).call(this), this._findTimeout = null;
    }, O9);
  });
}, "#onFind"), yy = /* @__PURE__ */ c(function() {
  this._highlightMatches = !1, this._scrollMatches = !1, this._pdfDocument = null, this._pageMatches = [], this._pageMatchesLength = [], E(this, Nn, 0), E(this, he, null), this._selected = {
    pageIdx: -1,
    matchIdx: -1
  }, this._offset = {
    pageIdx: null,
    matchIdx: null,
    wrapped: !1
  }, this._extractTextPromises = [], this._pageContents = [], this._pageDiffs = [], this._hasDiacritics = [], this._matchesCountTotal = 0, this._pagesToSearch = null, this._pendingFindMatches = /* @__PURE__ */ new Set(), this._resumePageIdx = null, this._dirtyMatch = !1, clearTimeout(this._findTimeout), this._findTimeout = null, this._firstPageCapability = Promise.withResolvers();
}, "#reset"), wy = /* @__PURE__ */ c(function() {
  const {
    query: t
  } = u(this, he);
  return typeof t == "string" ? (t !== this._rawQuery && (this._rawQuery = t, [this._normalizedQuery] = vp(t)), this._normalizedQuery) : (t || []).filter((i) => !!i).map((i) => vp(i)[0]);
}, "#query"), A1 = /* @__PURE__ */ c(function(t) {
  var a;
  const i = t.query, r = u(this, he).query, n = typeof i;
  if (n !== typeof r)
    return !0;
  if (n === "string") {
    if (i !== r)
      return !0;
  } else if (JSON.stringify(i) !== JSON.stringify(r))
    return !0;
  switch (t.type) {
    case "again":
      const l = this._selected.pageIdx + 1, d = this._linkService;
      return l >= 1 && l <= d.pagesCount && l !== d.page && !(((a = this.onIsPageVisible) == null ? void 0 : a.call(this, l)) ?? !0);
    case "highlightallchange":
      return !1;
  }
  return !0;
}, "#shouldDirtyMatch"), z1 = /* @__PURE__ */ c(function(t, i, r) {
  let n = t.slice(0, i).match(H9);
  if (n) {
    const s = t.charCodeAt(i), a = n[1].charCodeAt(0);
    if (Nd(s) === Nd(a))
      return !1;
  }
  if (n = t.slice(i + r).match(B9), n) {
    const s = t.charCodeAt(i + r - 1), a = n[1].charCodeAt(0);
    if (Nd(s) === Nd(a))
      return !1;
  }
  return !0;
}, "#isEntireWord"), R1 = /* @__PURE__ */ c(function(t, i, r, n) {
  const s = this._pageMatches[r] = [], a = this._pageMatchesLength[r] = [];
  if (!t)
    return;
  const l = this._pageDiffs[r];
  let d;
  for (; (d = t.exec(n)) !== null; ) {
    if (i && !P(this, X, z1).call(this, n, d.index, d[0].length))
      continue;
    const [h, w] = W9(l, d.index, d[0].length);
    w && (s.push(h), a.push(w));
  }
}, "#calculateRegExpMatch"), fy = /* @__PURE__ */ c(function(t, i) {
  const {
    matchDiacritics: r
  } = u(this, he);
  let n = !1;
  t = t.replaceAll(V9, (a, l, d, h, w, m) => l ? `[ ]*\\${l}[ ]*` : d ? `[ ]*${d}[ ]*` : h ? "[ ]+" : r ? w || m : w ? iv.has(w.charCodeAt(0)) ? w : "" : i ? (n = !0, `${m}\\p{M}*`) : m);
  const s = "[ ]*";
  return t.endsWith(s) && (t = t.slice(0, t.length - s.length)), r && i && (rv || (rv = String.fromCharCode(...iv)), n = !0, t = `${t}(?=[${rv}]|[^\\p{M}]|$)`), [n, t];
}, "#convertToRegExpString"), I1 = /* @__PURE__ */ c(function(t) {
  let i = u(this, X, wy);
  if (i.length === 0)
    return;
  const {
    caseSensitive: r,
    entireWord: n
  } = u(this, he), s = this._pageContents[t], a = this._hasDiacritics[t];
  let l = !1;
  typeof i == "string" ? [l, i] = P(this, X, fy).call(this, i, a) : i = i.sort().reverse().map((w) => {
    const [m, f] = P(this, X, fy).call(this, w, a);
    return l || (l = m), `(${f})`;
  }).join("|");
  const d = `g${l ? "u" : ""}${r ? "" : "i"}`;
  i = i ? new RegExp(i, d) : null, P(this, X, R1).call(this, i, n, t, s), u(this, he).highlightAll && P(this, X, jd).call(this, t), this._resumePageIdx === t && (this._resumePageIdx = null, P(this, X, my).call(this));
  const h = this._pageMatches[t].length;
  this._matchesCountTotal += h, u(this, aa) ? h > 0 && P(this, X, by).call(this) : ++Xc(this, Nn)._ === this._linkService.pagesCount && P(this, X, by).call(this);
}, "#calculateMatch"), O1 = /* @__PURE__ */ c(function() {
  if (this._extractTextPromises.length > 0)
    return;
  let t = Promise.resolve();
  const i = {
    disableNormalization: !0
  };
  for (let r = 0, n = this._linkService.pagesCount; r < n; r++) {
    const {
      promise: s,
      resolve: a
    } = Promise.withResolvers();
    this._extractTextPromises[r] = s, t = t.then(() => this._pdfDocument.getPage(r + 1).then((l) => l.getTextContent(i)).then((l) => {
      const d = [];
      for (const h of l.items)
        d.push(h.str), h.hasEOL && d.push(`
`);
      [this._pageContents[r], this._pageDiffs[r], this._hasDiacritics[r]] = vp(d.join("")), a();
    }, (l) => {
      console.error(`Unable to get text content for page ${r + 1}`, l), this._pageContents[r] = "", this._pageDiffs[r] = null, this._hasDiacritics[r] = !1, a();
    }));
  }
}, "#extractText"), jd = /* @__PURE__ */ c(function(t) {
  this._scrollMatches && this._selected.pageIdx === t && (this._linkService.page = t + 1), this._eventBus.dispatch("updatetextlayermatches", {
    source: this,
    pageIndex: t
  });
}, "#updatePage"), rl = /* @__PURE__ */ c(function() {
  this._eventBus.dispatch("updatetextlayermatches", {
    source: this,
    pageIndex: -1
  });
}, "#updateAllPages"), Lo = /* @__PURE__ */ c(function() {
  const t = u(this, he).findPrevious, i = this._linkService.page - 1, r = this._linkService.pagesCount;
  if (this._highlightMatches = !0, this._dirtyMatch) {
    this._dirtyMatch = !1, this._selected.pageIdx = this._selected.matchIdx = -1, this._offset.pageIdx = i, this._offset.matchIdx = null, this._offset.wrapped = !1, this._resumePageIdx = null, this._pageMatches.length = 0, this._pageMatchesLength.length = 0, E(this, Nn, 0), this._matchesCountTotal = 0, P(this, X, rl).call(this);
    for (let a = 0; a < r; a++)
      this._pendingFindMatches.has(a) || (this._pendingFindMatches.add(a), this._extractTextPromises[a].then(() => {
        this._pendingFindMatches.delete(a), P(this, X, I1).call(this, a);
      }));
  }
  if (u(this, X, wy).length === 0) {
    P(this, X, nl).call(this, Sr.FOUND);
    return;
  }
  if (this._resumePageIdx)
    return;
  const s = this._offset;
  if (this._pagesToSearch = r, s.matchIdx !== null) {
    const a = this._pageMatches[s.pageIdx].length;
    if (!t && s.matchIdx + 1 < a || t && s.matchIdx > 0) {
      s.matchIdx = t ? s.matchIdx - 1 : s.matchIdx + 1, P(this, X, Wd).call(this, !0);
      return;
    }
    P(this, X, vy).call(this, t);
  }
  P(this, X, my).call(this);
}, "#nextMatch"), D1 = /* @__PURE__ */ c(function(t) {
  const i = this._offset, r = t.length, n = u(this, he).findPrevious;
  return r ? (i.matchIdx = n ? r - 1 : 0, P(this, X, Wd).call(this, !0), !0) : (P(this, X, vy).call(this, n), i.wrapped && (i.matchIdx = null, this._pagesToSearch < 0) ? (P(this, X, Wd).call(this, !1), !0) : !1);
}, "#matchesReady"), my = /* @__PURE__ */ c(function() {
  this._resumePageIdx !== null && console.error("There can only be one pending page.");
  let t = null;
  do {
    const i = this._offset.pageIdx;
    if (t = this._pageMatches[i], !t) {
      this._resumePageIdx = i;
      break;
    }
  } while (!P(this, X, D1).call(this, t));
}, "#nextPageMatch"), vy = /* @__PURE__ */ c(function(t) {
  const i = this._offset, r = this._linkService.pagesCount;
  i.pageIdx = t ? i.pageIdx - 1 : i.pageIdx + 1, i.matchIdx = null, this._pagesToSearch--, (i.pageIdx >= r || i.pageIdx < 0) && (i.pageIdx = t ? r - 1 : 0, i.wrapped = !0);
}, "#advanceOffsetPage"), Wd = /* @__PURE__ */ c(function(t = !1) {
  let i = Sr.NOT_FOUND;
  const r = this._offset.wrapped;
  if (this._offset.wrapped = !1, t) {
    const n = this._selected.pageIdx;
    this._selected.pageIdx = this._offset.pageIdx, this._selected.matchIdx = this._offset.matchIdx, i = r ? Sr.WRAPPED : Sr.FOUND, n !== -1 && n !== this._selected.pageIdx && P(this, X, jd).call(this, n);
  }
  P(this, X, nl).call(this, i, u(this, he).findPrevious), this._selected.pageIdx !== -1 && (this._scrollMatches = !0, P(this, X, jd).call(this, this._selected.pageIdx));
}, "#updateMatch"), F1 = /* @__PURE__ */ c(function(t) {
  const i = this._pdfDocument;
  this._firstPageCapability.promise.then(() => {
    !this._pdfDocument || i && this._pdfDocument !== i || (this._findTimeout && (clearTimeout(this._findTimeout), this._findTimeout = null), this._resumePageIdx && (this._resumePageIdx = null, this._dirtyMatch = !0), P(this, X, nl).call(this, Sr.FOUND), this._highlightMatches = !1, P(this, X, rl).call(this));
  });
}, "#onFindBarClose"), gy = /* @__PURE__ */ c(function() {
  var s;
  const {
    pageIdx: t,
    matchIdx: i
  } = this._selected;
  let r = 0, n = this._matchesCountTotal;
  if (i !== -1) {
    for (let a = 0; a < t; a++)
      r += ((s = this._pageMatches[a]) == null ? void 0 : s.length) || 0;
    r += i + 1;
  }
  return (r < 1 || r > n) && (r = n = 0), {
    current: r,
    total: n
  };
}, "#requestMatchesCount"), by = /* @__PURE__ */ c(function() {
  this._eventBus.dispatch("updatefindmatchescount", {
    source: this,
    matchesCount: P(this, X, gy).call(this)
  });
}, "#updateUIResultsCount"), nl = /* @__PURE__ */ c(function(t, i = !1) {
  var r, n;
  !u(this, aa) && (u(this, Nn) !== this._linkService.pagesCount || t === Sr.PENDING) || this._eventBus.dispatch("updatefindcontrolstate", {
    source: this,
    state: t,
    previous: i,
    entireWord: ((r = u(this, he)) == null ? void 0 : r.entireWord) ?? null,
    matchesCount: P(this, X, gy).call(this),
    rawQuery: ((n = u(this, he)) == null ? void 0 : n.query) ?? null
  });
}, "#updateUIState"), c(kf, "PDFFindController");
let py = kf;
const q9 = "noopener noreferrer nofollow", $n = {
  NONE: 0,
  SELF: 1,
  BLANK: 2,
  PARENT: 3,
  TOP: 4
};
var ru, N1;
const wl = class wl {
  constructor({
    eventBus: t,
    externalLinkTarget: i = null,
    externalLinkRel: r = null,
    ignoreDestinationZoom: n = !1
  } = {}) {
    sp(this, "externalLinkEnabled", !0);
    this.eventBus = t, this.externalLinkTarget = i, this.externalLinkRel = r, this._ignoreDestinationZoom = n, this.baseUrl = null, this.pdfDocument = null, this.pdfViewer = null, this.pdfHistory = null;
  }
  setDocument(t, i = null) {
    this.baseUrl = i, this.pdfDocument = t;
  }
  setViewer(t) {
    this.pdfViewer = t;
  }
  setHistory(t) {
    this.pdfHistory = t;
  }
  get pagesCount() {
    return this.pdfDocument ? this.pdfDocument.numPages : 0;
  }
  get page() {
    return this.pdfDocument ? this.pdfViewer.currentPageNumber : 1;
  }
  set page(t) {
    this.pdfDocument && (this.pdfViewer.currentPageNumber = t);
  }
  get rotation() {
    return this.pdfDocument ? this.pdfViewer.pagesRotation : 0;
  }
  set rotation(t) {
    this.pdfDocument && (this.pdfViewer.pagesRotation = t);
  }
  get isInPresentationMode() {
    return this.pdfDocument ? this.pdfViewer.isInPresentationMode : !1;
  }
  async goToDestination(t) {
    if (!this.pdfDocument)
      return;
    let i, r, n;
    if (typeof t == "string" ? (i = t, r = await this.pdfDocument.getDestination(t)) : (i = null, r = await t), !Array.isArray(r)) {
      console.error(`goToDestination: "${r}" is not a valid destination array, for dest="${t}".`);
      return;
    }
    const [s] = r;
    if (s && typeof s == "object") {
      if (n = this.pdfDocument.cachedPageNumber(s), !n)
        try {
          n = await this.pdfDocument.getPageIndex(s) + 1;
        } catch {
          console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${t}".`);
          return;
        }
    } else Number.isInteger(s) && (n = s + 1);
    if (!n || n < 1 || n > this.pagesCount) {
      console.error(`goToDestination: "${n}" is not a valid page number, for dest="${t}".`);
      return;
    }
    this.pdfHistory && (this.pdfHistory.pushCurrentPosition(), this.pdfHistory.push({
      namedDest: i,
      explicitDest: r,
      pageNumber: n
    })), this.pdfViewer.scrollPageIntoView({
      pageNumber: n,
      destArray: r,
      ignoreDestinationZoom: this._ignoreDestinationZoom
    });
  }
  goToPage(t) {
    if (!this.pdfDocument)
      return;
    const i = typeof t == "string" && this.pdfViewer.pageLabelToPageNumber(t) || t | 0;
    if (!(Number.isInteger(i) && i > 0 && i <= this.pagesCount)) {
      console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`);
      return;
    }
    this.pdfHistory && (this.pdfHistory.pushCurrentPosition(), this.pdfHistory.pushPage(i)), this.pdfViewer.scrollPageIntoView({
      pageNumber: i
    });
  }
  addLinkAttributes(t, i, r = !1) {
    if (!i || typeof i != "string")
      throw new Error('A valid "url" parameter must provided.');
    const n = r ? $n.BLANK : this.externalLinkTarget, s = this.externalLinkRel;
    this.externalLinkEnabled ? t.href = t.title = i : (t.href = "", t.title = `Disabled: ${i}`, t.onclick = () => !1);
    let a = "";
    switch (n) {
      case $n.NONE:
        break;
      case $n.SELF:
        a = "_self";
        break;
      case $n.BLANK:
        a = "_blank";
        break;
      case $n.PARENT:
        a = "_parent";
        break;
      case $n.TOP:
        a = "_top";
        break;
    }
    t.target = a, t.rel = typeof s == "string" ? s : q9;
  }
  getDestinationHash(t) {
    if (typeof t == "string") {
      if (t.length > 0)
        return this.getAnchorUrl("#" + escape(t));
    } else if (Array.isArray(t)) {
      const i = JSON.stringify(t);
      if (i.length > 0)
        return this.getAnchorUrl("#" + escape(i));
    }
    return this.getAnchorUrl("");
  }
  getAnchorUrl(t) {
    return this.baseUrl ? this.baseUrl + t : t;
  }
  setHash(t) {
    var n;
    if (!this.pdfDocument)
      return;
    let i, r;
    if (t.includes("=")) {
      const s = vu(t);
      if (s.has("search")) {
        const a = s.get("search").replaceAll('"', ""), l = s.get("phrase") === "true";
        this.eventBus.dispatch("findfromurlhash", {
          source: this,
          query: l ? a : a.match(/\S+/g)
        });
      }
      if (s.has("page") && (i = s.get("page") | 0 || 1), s.has("zoom")) {
        const a = s.get("zoom").split(","), l = a[0], d = parseFloat(l);
        l.includes("Fit") ? l === "Fit" || l === "FitB" ? r = [null, {
          name: l
        }] : l === "FitH" || l === "FitBH" || l === "FitV" || l === "FitBV" ? r = [null, {
          name: l
        }, a.length > 1 ? a[1] | 0 : null] : l === "FitR" ? a.length !== 5 ? console.error('PDFLinkService.setHash: Not enough parameters for "FitR".') : r = [null, {
          name: l
        }, a[1] | 0, a[2] | 0, a[3] | 0, a[4] | 0] : console.error(`PDFLinkService.setHash: "${l}" is not a valid zoom value.`) : r = [null, {
          name: "XYZ"
        }, a.length > 1 ? a[1] | 0 : null, a.length > 2 ? a[2] | 0 : null, d ? d / 100 : l];
      }
      r ? this.pdfViewer.scrollPageIntoView({
        pageNumber: i || this.page,
        destArray: r,
        allowNegativeOffset: !0
      }) : i && (this.page = i), s.has("pagemode") && this.eventBus.dispatch("pagemode", {
        source: this,
        mode: s.get("pagemode")
      }), s.has("nameddest") && this.goToDestination(s.get("nameddest"));
      return;
    }
    r = unescape(t);
    try {
      r = JSON.parse(r), Array.isArray(r) || (r = r.toString());
    } catch {
    }
    if (typeof r == "string" || P(n = wl, ru, N1).call(n, r)) {
      this.goToDestination(r);
      return;
    }
    console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`);
  }
  executeNamedAction(t) {
    var i, r;
    if (this.pdfDocument) {
      switch (t) {
        case "GoBack":
          (i = this.pdfHistory) == null || i.back();
          break;
        case "GoForward":
          (r = this.pdfHistory) == null || r.forward();
          break;
        case "NextPage":
          this.pdfViewer.nextPage();
          break;
        case "PrevPage":
          this.pdfViewer.previousPage();
          break;
        case "LastPage":
          this.page = this.pagesCount;
          break;
        case "FirstPage":
          this.page = 1;
          break;
      }
      this.eventBus.dispatch("namedaction", {
        source: this,
        action: t
      });
    }
  }
  async executeSetOCGState(t) {
    if (!this.pdfDocument)
      return;
    const i = this.pdfDocument, r = await this.pdfViewer.optionalContentConfigPromise;
    i === this.pdfDocument && (r.setOCGState(t), this.pdfViewer.optionalContentConfigPromise = Promise.resolve(r));
  }
};
ru = new WeakSet(), N1 = /* @__PURE__ */ c(function(t) {
  if (!Array.isArray(t) || t.length < 2)
    return !1;
  const [i, r, ...n] = t;
  if (!(typeof i == "object" && Number.isInteger(i == null ? void 0 : i.num) && Number.isInteger(i == null ? void 0 : i.gen)) && !Number.isInteger(i) || !(typeof r == "object" && typeof (r == null ? void 0 : r.name) == "string"))
    return !1;
  const s = n.length;
  let a = !0;
  switch (r.name) {
    case "XYZ":
      if (s < 2 || s > 3)
        return !1;
      break;
    case "Fit":
    case "FitB":
      return s === 0;
    case "FitH":
    case "FitBH":
    case "FitV":
    case "FitBV":
      if (s > 1)
        return !1;
      break;
    case "FitR":
      if (s !== 4)
        return !1;
      a = !1;
      break;
    default:
      return !1;
  }
  for (const l of n)
    if (!(typeof l == "number" || a && l === null))
      return !1;
  return !0;
}, "#isValidExplicitDest"), T(wl, ru), c(wl, "PDFLinkService");
let _h = wl;
const $f = class $f extends _h {
  setDocument(t, i = null) {
  }
};
c($f, "SimpleLinkService");
let Ll = $f;
const {
  AbortException: Q9,
  AnnotationEditorLayer: K9,
  AnnotationEditorParamsType: hE,
  AnnotationEditorType: wi,
  AnnotationEditorUIManager: G9,
  AnnotationLayer: Z9,
  AnnotationMode: ar,
  build: uE,
  CMapCompressionType: pE,
  ColorPicker: yE,
  createValidAbsoluteUrl: Y9,
  DOMSVGFactory: wE,
  DrawLayer: X9,
  FeatureTest: fE,
  fetchData: sv,
  getDocument: mE,
  getFilenameFromUrl: vE,
  getPdfFilenameFromUrl: J9,
  getXfaPageViewport: gE,
  GlobalWorkerOptions: bE,
  ImageKind: xE,
  InvalidPDFException: CE,
  isDataScheme: kE,
  isPdfFile: t3,
  MissingPDFException: $E,
  noContextMenu: EE,
  normalizeUnicode: e3,
  OPS: _E,
  PasswordResponses: PE,
  PDFDataRangeTransport: SE,
  PDFDateString: LE,
  PDFWorker: ME,
  PermissionFlag: Vd,
  PixelsPerInch: tr,
  RenderingCancelledException: xy,
  setLayerDimensions: i3,
  shadow: Ph,
  TextLayer: r3,
  UnexpectedResponseException: TE,
  Util: AE,
  VerbosityLevel: zE,
  version: av,
  XfaLayer: gp
} = globalThis.pdfjsLib;
var Gl, Wr, Zl, Cy;
const Ef = class Ef {
  constructor({
    pdfPage: t,
    linkService: i,
    downloadManager: r,
    annotationStorage: n = null,
    imageResourcesPath: s = "",
    renderForms: a = !0,
    enableScripting: l = !1,
    hasJSActionsPromise: d = null,
    fieldObjectsPromise: h = null,
    annotationCanvasMap: w = null,
    accessibilityManager: m = null,
    annotationEditorUIManager: f = null,
    onAppend: b = null
  }) {
    T(this, Zl);
    T(this, Gl, null);
    T(this, Wr, null);
    this.pdfPage = t, this.linkService = i, this.downloadManager = r, this.imageResourcesPath = s, this.renderForms = a, this.annotationStorage = n, this.enableScripting = l, this._hasJSActionsPromise = d || Promise.resolve(!1), this._fieldObjectsPromise = h || Promise.resolve(null), this._annotationCanvasMap = w, this._accessibilityManager = m, this._annotationEditorUIManager = f, E(this, Gl, b), this.annotationLayer = null, this.div = null, this._cancelled = !1, this._eventBus = i.eventBus;
  }
  async render(t, i = "display") {
    var l, d;
    if (this.div) {
      if (this._cancelled || !this.annotationLayer)
        return;
      this.annotationLayer.update({
        viewport: t.clone({
          dontFlip: !0
        })
      });
      return;
    }
    const [r, n, s] = await Promise.all([this.pdfPage.getAnnotations({
      intent: i
    }), this._hasJSActionsPromise, this._fieldObjectsPromise]);
    if (this._cancelled)
      return;
    const a = this.div = document.createElement("div");
    if (a.className = "annotationLayer", (l = u(this, Gl)) == null || l.call(this, a), r.length === 0) {
      this.hide();
      return;
    }
    this.annotationLayer = new Z9({
      div: a,
      accessibilityManager: this._accessibilityManager,
      annotationCanvasMap: this._annotationCanvasMap,
      annotationEditorUIManager: this._annotationEditorUIManager,
      page: this.pdfPage,
      viewport: t.clone({
        dontFlip: !0
      })
    }), await this.annotationLayer.render({
      annotations: r,
      imageResourcesPath: this.imageResourcesPath,
      renderForms: this.renderForms,
      linkService: this.linkService,
      downloadManager: this.downloadManager,
      annotationStorage: this.annotationStorage,
      enableScripting: this.enableScripting,
      hasJSActions: n,
      fieldObjects: s
    }), this.linkService.isInPresentationMode && P(this, Zl, Cy).call(this, Yo.FULLSCREEN), u(this, Wr) || (E(this, Wr, new AbortController()), (d = this._eventBus) == null || d._on("presentationmodechanged", (h) => {
      P(this, Zl, Cy).call(this, h.state);
    }, {
      signal: u(this, Wr).signal
    }));
  }
  cancel() {
    var t;
    this._cancelled = !0, (t = u(this, Wr)) == null || t.abort(), E(this, Wr, null);
  }
  hide() {
    this.div && (this.div.hidden = !0);
  }
  hasEditableAnnotations() {
    var t;
    return !!((t = this.annotationLayer) != null && t.hasEditableAnnotations());
  }
};
Gl = new WeakMap(), Wr = new WeakMap(), Zl = new WeakSet(), Cy = /* @__PURE__ */ c(function(t) {
  if (!this.div)
    return;
  let i = !1;
  switch (t) {
    case Yo.FULLSCREEN:
      i = !0;
      break;
    case Yo.NORMAL:
      break;
    default:
      return;
  }
  for (const r of this.div.childNodes)
    r.hasAttribute("data-internal-link") || (r.inert = i);
}, "#updatePresentationModeState"), c(Ef, "AnnotationLayerBuilder");
let Sh = Ef;
function cv(o, t) {
  const i = document.createElement("a");
  if (!i.click)
    throw new Error('DownloadManager: "a.click()" is not supported.');
  i.href = o, i.target = "_parent", "download" in i && (i.download = t), (document.body || document.documentElement).append(i), i.click(), i.remove();
}
c(cv, "download");
var ww;
const _f = class _f {
  constructor() {
    T(this, ww, /* @__PURE__ */ new WeakMap());
  }
  downloadData(t, i, r) {
    const n = URL.createObjectURL(new Blob([t], {
      type: r
    }));
    cv(n, i);
  }
  openOrDownloadData(t, i, r = null) {
    const s = t3(i) ? "application/pdf" : "";
    return this.downloadData(t, i, s), !1;
  }
  download(t, i, r, n) {
    let s;
    if (t)
      s = URL.createObjectURL(new Blob([t], {
        type: "application/pdf"
      }));
    else {
      if (!Y9(i, "http://example.com")) {
        console.error(`download - not a valid URL: ${i}`);
        return;
      }
      s = i + "#pdfjs.action=download";
    }
    cv(s, r);
  }
};
ww = new WeakMap(), c(_f, "DownloadManager");
let ky = _f;
const lv = {
  EVENT: "event",
  TIMEOUT: "timeout"
};
async function n3({
  target: o,
  name: t,
  delay: i = 0
}) {
  if (typeof o != "object" || !(t && typeof t == "string") || !(Number.isInteger(i) && i >= 0))
    throw new Error("waitOnEventOrTimeout - invalid parameters.");
  const {
    promise: r,
    resolve: n
  } = Promise.withResolvers(), s = new AbortController();
  function a(h) {
    s.abort(), clearTimeout(d), n(h);
  }
  c(a, "handler");
  const l = o instanceof Lh ? "_on" : "addEventListener";
  o[l](t, a.bind(null, lv.EVENT), {
    signal: s.signal
  });
  const d = setTimeout(a.bind(null, lv.TIMEOUT), i);
  return r;
}
c(n3, "waitOnEventOrTimeout");
var ca;
const Pf = class Pf {
  constructor() {
    T(this, ca, /* @__PURE__ */ Object.create(null));
  }
  on(t, i, r = null) {
    this._on(t, i, {
      external: !0,
      once: r == null ? void 0 : r.once,
      signal: r == null ? void 0 : r.signal
    });
  }
  off(t, i, r = null) {
    this._off(t, i);
  }
  dispatch(t, i) {
    const r = u(this, ca)[t];
    if (!r || r.length === 0)
      return;
    let n;
    for (const {
      listener: s,
      external: a,
      once: l
    } of r.slice(0)) {
      if (l && this._off(t, s), a) {
        (n || (n = [])).push(s);
        continue;
      }
      s(i);
    }
    if (n) {
      for (const s of n)
        s(i);
      n = null;
    }
  }
  _on(t, i, r = null) {
    var a;
    let n = null;
    if ((r == null ? void 0 : r.signal) instanceof AbortSignal) {
      const {
        signal: l
      } = r;
      if (l.aborted) {
        console.error("Cannot use an `aborted` signal.");
        return;
      }
      const d = /* @__PURE__ */ c(() => this._off(t, i), "onAbort");
      n = /* @__PURE__ */ c(() => l.removeEventListener("abort", d), "rmAbort"), l.addEventListener("abort", d);
    }
    ((a = u(this, ca))[t] || (a[t] = [])).push({
      listener: i,
      external: (r == null ? void 0 : r.external) === !0,
      once: (r == null ? void 0 : r.once) === !0,
      rmAbort: n
    });
  }
  _off(t, i, r = null) {
    var s;
    const n = u(this, ca)[t];
    if (n)
      for (let a = 0, l = n.length; a < l; a++) {
        const d = n[a];
        if (d.listener === i) {
          (s = d.rmAbort) == null || s.call(d), n.splice(a, 1);
          return;
        }
      }
  }
};
ca = new WeakMap(), c(Pf, "EventBus");
let Lh = Pf;
const Sf = class Sf {
  constructor(t) {
    this.value = t;
  }
  valueOf() {
    return this.value;
  }
};
c(Sf, "FluentType");
let Lc = Sf;
const Lf = class Lf extends Lc {
  constructor(t = "???") {
    super(t);
  }
  toString(t) {
    return `{${this.value}}`;
  }
};
c(Lf, "FluentNone");
let jt = Lf;
const Mf = class Mf extends Lc {
  constructor(t, i = {}) {
    super(t), this.opts = i;
  }
  toString(t) {
    try {
      return t.memoizeIntlObject(Intl.NumberFormat, this.opts).format(this.value);
    } catch (i) {
      return t.reportError(i), this.value.toString(10);
    }
  }
};
c(Mf, "FluentNumber");
let bi = Mf;
const Tf = class Tf extends Lc {
  constructor(t, i = {}) {
    super(t), this.opts = i;
  }
  toString(t) {
    try {
      return t.memoizeIntlObject(Intl.DateTimeFormat, this.opts).format(this.value);
    } catch (i) {
      return t.reportError(i), new Date(this.value).toISOString();
    }
  }
};
c(Tf, "FluentDateTime");
let eo = Tf;
const dv = 100, o3 = "⁨", s3 = "⁩";
function a3(o, t, i) {
  if (i === t || i instanceof bi && t instanceof bi && i.value === t.value)
    return !0;
  if (t instanceof bi && typeof i == "string") {
    let r = o.memoizeIntlObject(Intl.PluralRules, t.opts).select(t.value);
    if (i === r)
      return !0;
  }
  return !1;
}
c(a3, "match");
function hv(o, t, i) {
  return t[i] ? Mc(o, t[i].value) : (o.reportError(new RangeError("No default")), new jt());
}
c(hv, "getDefault");
function $y(o, t) {
  const i = [], r = /* @__PURE__ */ Object.create(null);
  for (const n of t)
    n.type === "narg" ? r[n.name] = Ml(o, n.value) : i.push(Ml(o, n));
  return {
    positional: i,
    named: r
  };
}
c($y, "getArguments");
function Ml(o, t) {
  switch (t.type) {
    case "str":
      return t.value;
    case "num":
      return new bi(t.value, {
        minimumFractionDigits: t.precision
      });
    case "var":
      return c3(o, t);
    case "mesg":
      return l3(o, t);
    case "term":
      return d3(o, t);
    case "func":
      return h3(o, t);
    case "select":
      return u3(o, t);
    default:
      return new jt();
  }
}
c(Ml, "resolveExpression");
function c3(o, {
  name: t
}) {
  let i;
  if (o.params)
    if (Object.prototype.hasOwnProperty.call(o.params, t))
      i = o.params[t];
    else
      return new jt(`$${t}`);
  else if (o.args && Object.prototype.hasOwnProperty.call(o.args, t))
    i = o.args[t];
  else
    return o.reportError(new ReferenceError(`Unknown variable: $${t}`)), new jt(`$${t}`);
  if (i instanceof Lc)
    return i;
  switch (typeof i) {
    case "string":
      return i;
    case "number":
      return new bi(i);
    case "object":
      if (i instanceof Date)
        return new eo(i.getTime());
    default:
      return o.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof i}`)), new jt(`$${t}`);
  }
}
c(c3, "resolveVariableReference");
function l3(o, {
  name: t,
  attr: i
}) {
  const r = o.bundle._messages.get(t);
  if (!r)
    return o.reportError(new ReferenceError(`Unknown message: ${t}`)), new jt(t);
  if (i) {
    const n = r.attributes[i];
    return n ? Mc(o, n) : (o.reportError(new ReferenceError(`Unknown attribute: ${i}`)), new jt(`${t}.${i}`));
  }
  return r.value ? Mc(o, r.value) : (o.reportError(new ReferenceError(`No value: ${t}`)), new jt(t));
}
c(l3, "resolveMessageReference");
function d3(o, {
  name: t,
  attr: i,
  args: r
}) {
  const n = `-${t}`, s = o.bundle._terms.get(n);
  if (!s)
    return o.reportError(new ReferenceError(`Unknown term: ${n}`)), new jt(n);
  if (i) {
    const l = s.attributes[i];
    if (l) {
      o.params = $y(o, r).named;
      const d = Mc(o, l);
      return o.params = null, d;
    }
    return o.reportError(new ReferenceError(`Unknown attribute: ${i}`)), new jt(`${n}.${i}`);
  }
  o.params = $y(o, r).named;
  const a = Mc(o, s.value);
  return o.params = null, a;
}
c(d3, "resolveTermReference");
function h3(o, {
  name: t,
  args: i
}) {
  let r = o.bundle._functions[t];
  if (!r)
    return o.reportError(new ReferenceError(`Unknown function: ${t}()`)), new jt(`${t}()`);
  if (typeof r != "function")
    return o.reportError(new TypeError(`Function ${t}() is not callable`)), new jt(`${t}()`);
  try {
    let n = $y(o, i);
    return r(n.positional, n.named);
  } catch (n) {
    return o.reportError(n), new jt(`${t}()`);
  }
}
c(h3, "resolveFunctionReference");
function u3(o, {
  selector: t,
  variants: i,
  star: r
}) {
  let n = Ml(o, t);
  if (n instanceof jt)
    return hv(o, i, r);
  for (const s of i) {
    const a = Ml(o, s.key);
    if (a3(o, n, a))
      return Mc(o, s.value);
  }
  return hv(o, i, r);
}
c(u3, "resolveSelectExpression");
function V1(o, t) {
  if (o.dirty.has(t))
    return o.reportError(new RangeError("Cyclic reference")), new jt();
  o.dirty.add(t);
  const i = [], r = o.bundle._useIsolating && t.length > 1;
  for (const n of t) {
    if (typeof n == "string") {
      i.push(o.bundle._transform(n));
      continue;
    }
    if (o.placeables++, o.placeables > dv)
      throw o.dirty.delete(t), new RangeError(`Too many placeables expanded: ${o.placeables}, max allowed is ${dv}`);
    r && i.push(o3), i.push(Ml(o, n).toString(o)), r && i.push(s3);
  }
  return o.dirty.delete(t), i.join("");
}
c(V1, "resolveComplexPattern");
function Mc(o, t) {
  return typeof t == "string" ? o.bundle._transform(t) : V1(o, t);
}
c(Mc, "resolvePattern");
const Af = class Af {
  constructor(t, i, r) {
    this.dirty = /* @__PURE__ */ new WeakSet(), this.params = null, this.placeables = 0, this.bundle = t, this.errors = i, this.args = r;
  }
  reportError(t) {
    if (!this.errors || !(t instanceof Error))
      throw t;
    this.errors.push(t);
  }
  memoizeIntlObject(t, i) {
    let r = this.bundle._intls.get(t);
    r || (r = {}, this.bundle._intls.set(t, r));
    let n = JSON.stringify(i);
    return r[n] || (r[n] = new t(this.bundle.locales, i)), r[n];
  }
};
c(Af, "Scope");
let Ey = Af;
function Mh(o, t) {
  const i = /* @__PURE__ */ Object.create(null);
  for (const [r, n] of Object.entries(o))
    t.includes(r) && (i[r] = n.valueOf());
  return i;
}
c(Mh, "values");
const uv = ["unitDisplay", "currencyDisplay", "useGrouping", "minimumIntegerDigits", "minimumFractionDigits", "maximumFractionDigits", "minimumSignificantDigits", "maximumSignificantDigits"];
function p3(o, t) {
  let i = o[0];
  if (i instanceof jt)
    return new jt(`NUMBER(${i.valueOf()})`);
  if (i instanceof bi)
    return new bi(i.valueOf(), {
      ...i.opts,
      ...Mh(t, uv)
    });
  if (i instanceof eo)
    return new bi(i.valueOf(), {
      ...Mh(t, uv)
    });
  throw new TypeError("Invalid argument to NUMBER");
}
c(p3, "NUMBER");
const pv = ["dateStyle", "timeStyle", "fractionalSecondDigits", "dayPeriod", "hour12", "weekday", "era", "year", "month", "day", "hour", "minute", "second", "timeZoneName"];
function y3(o, t) {
  let i = o[0];
  if (i instanceof jt)
    return new jt(`DATETIME(${i.valueOf()})`);
  if (i instanceof eo)
    return new eo(i.valueOf(), {
      ...i.opts,
      ...Mh(t, pv)
    });
  if (i instanceof bi)
    return new eo(i.valueOf(), {
      ...Mh(t, pv)
    });
  throw new TypeError("Invalid argument to DATETIME");
}
c(y3, "DATETIME");
const yv = /* @__PURE__ */ new Map();
function w3(o) {
  const t = Array.isArray(o) ? o.join(" ") : o;
  let i = yv.get(t);
  return i === void 0 && (i = /* @__PURE__ */ new Map(), yv.set(t, i)), i;
}
c(w3, "getMemoizerForLocale");
const zf = class zf {
  constructor(t, {
    functions: i,
    useIsolating: r = !0,
    transform: n = /* @__PURE__ */ c((s) => s, "transform")
  } = {}) {
    this._terms = /* @__PURE__ */ new Map(), this._messages = /* @__PURE__ */ new Map(), this.locales = Array.isArray(t) ? t : [t], this._functions = {
      NUMBER: p3,
      DATETIME: y3,
      ...i
    }, this._useIsolating = r, this._transform = n, this._intls = w3(t);
  }
  hasMessage(t) {
    return this._messages.has(t);
  }
  getMessage(t) {
    return this._messages.get(t);
  }
  addResource(t, {
    allowOverrides: i = !1
  } = {}) {
    const r = [];
    for (let n = 0; n < t.body.length; n++) {
      let s = t.body[n];
      if (s.id.startsWith("-")) {
        if (i === !1 && this._terms.has(s.id)) {
          r.push(new Error(`Attempt to override an existing term: "${s.id}"`));
          continue;
        }
        this._terms.set(s.id, s);
      } else {
        if (i === !1 && this._messages.has(s.id)) {
          r.push(new Error(`Attempt to override an existing message: "${s.id}"`));
          continue;
        }
        this._messages.set(s.id, s);
      }
    }
    return r;
  }
  formatPattern(t, i = null, r = null) {
    if (typeof t == "string")
      return this._transform(t);
    let n = new Ey(this, r, i);
    try {
      return V1(n, t).toString(n);
    } catch (s) {
      if (n.errors && s instanceof Error)
        return n.errors.push(s), new jt().toString(n);
      throw s;
    }
  }
};
c(zf, "FluentBundle");
let _y = zf;
const bp = /^(-?[a-zA-Z][\w-]*) *= */gm, wv = /\.([a-zA-Z][\w-]*) *= */y, f3 = /\*?\[/y, xp = /(-?[0-9]+(?:\.([0-9]+))?)/y, m3 = /([a-zA-Z][\w-]*)/y, fv = /([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y, v3 = /^[A-Z][A-Z0-9_-]*$/, Hd = /([^{}\n\r]+)/y, g3 = /([^\\"\n\r]*)/y, mv = /\\([\\"])/y, vv = /\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y, b3 = /^\n+/, gv = / +$/, x3 = / *\r?\n/g, C3 = /( *)$/, k3 = /{\s*/y, bv = /\s*}/y, $3 = /\[\s*/y, E3 = /\s*] */y, _3 = /\s*\(\s*/y, P3 = /\s*->\s*/y, S3 = /\s*:\s*/y, L3 = /\s*,?\s*/y, M3 = /\s+/y, Rf = class Rf {
  constructor(t) {
    this.body = [], bp.lastIndex = 0;
    let i = 0;
    for (; ; ) {
      let A = bp.exec(t);
      if (A === null)
        break;
      i = bp.lastIndex;
      try {
        this.body.push(d(A[1]));
      } catch (N) {
        if (N instanceof SyntaxError)
          continue;
        throw N;
      }
    }
    function r(A) {
      return A.lastIndex = i, A.test(t);
    }
    c(r, "test");
    function n(A, N) {
      if (t[i] === A)
        return i++, !0;
      if (N)
        throw new N(`Expected ${A}`);
      return !1;
    }
    c(n, "consumeChar");
    function s(A, N) {
      if (r(A))
        return i = A.lastIndex, !0;
      if (N)
        throw new N(`Expected ${A.toString()}`);
      return !1;
    }
    c(s, "consumeToken");
    function a(A) {
      A.lastIndex = i;
      let N = A.exec(t);
      if (N === null)
        throw new SyntaxError(`Expected ${A.toString()}`);
      return i = A.lastIndex, N;
    }
    c(a, "match");
    function l(A) {
      return a(A)[1];
    }
    c(l, "match1");
    function d(A) {
      let N = w(), G = h();
      if (N === null && Object.keys(G).length === 0)
        throw new SyntaxError("Expected message value or attributes");
      return {
        id: A,
        value: N,
        attributes: G
      };
    }
    c(d, "parseMessage");
    function h() {
      let A = /* @__PURE__ */ Object.create(null);
      for (; r(wv); ) {
        let N = l(wv), G = w();
        if (G === null)
          throw new SyntaxError("Expected attribute value");
        A[N] = G;
      }
      return A;
    }
    c(h, "parseAttributes");
    function w() {
      let A;
      if (r(Hd) && (A = l(Hd)), t[i] === "{" || t[i] === "}")
        return m(A ? [A] : [], 1 / 0);
      let N = D();
      return N ? A ? m([A, N], N.length) : (N.value = z(N.value, b3), m([N], N.length)) : A ? z(A, gv) : null;
    }
    c(w, "parsePattern");
    function m(A = [], N) {
      for (; ; ) {
        if (r(Hd)) {
          A.push(l(Hd));
          continue;
        }
        if (t[i] === "{") {
          A.push(f());
          continue;
        }
        if (t[i] === "}")
          throw new SyntaxError("Unbalanced closing brace");
        let at = D();
        if (at) {
          A.push(at), N = Math.min(N, at.length);
          continue;
        }
        break;
      }
      let G = A.length - 1, et = A[G];
      typeof et == "string" && (A[G] = z(et, gv));
      let lt = [];
      for (let at of A)
        at instanceof Th && (at = at.value.slice(0, at.value.length - N)), at && lt.push(at);
      return lt;
    }
    c(m, "parsePatternElements");
    function f() {
      s(k3, SyntaxError);
      let A = b();
      if (s(bv))
        return A;
      if (s(P3)) {
        let N = O();
        return s(bv, SyntaxError), {
          type: "select",
          selector: A,
          ...N
        };
      }
      throw new SyntaxError("Unclosed placeable");
    }
    c(f, "parsePlaceable");
    function b() {
      if (t[i] === "{")
        return f();
      if (r(fv)) {
        let [, A, N, G = null] = a(fv);
        if (A === "$")
          return {
            type: "var",
            name: N
          };
        if (s(_3)) {
          let et = g();
          if (A === "-")
            return {
              type: "term",
              name: N,
              attr: G,
              args: et
            };
          if (v3.test(N))
            return {
              type: "func",
              name: N,
              args: et
            };
          throw new SyntaxError("Function names must be all upper-case");
        }
        return A === "-" ? {
          type: "term",
          name: N,
          attr: G,
          args: []
        } : {
          type: "mesg",
          name: N,
          attr: G
        };
      }
      return S();
    }
    c(b, "parseInlineExpression");
    function g() {
      let A = [];
      for (; ; ) {
        switch (t[i]) {
          case ")":
            return i++, A;
          case void 0:
            throw new SyntaxError("Unclosed argument list");
        }
        A.push($()), s(L3);
      }
    }
    c(g, "parseArguments");
    function $() {
      let A = b();
      return A.type !== "mesg" ? A : s(S3) ? {
        type: "narg",
        name: A.name,
        value: S()
      } : A;
    }
    c($, "parseArgument");
    function O() {
      let A = [], N = 0, G;
      for (; r(f3); ) {
        n("*") && (G = N);
        let et = k(), lt = w();
        if (lt === null)
          throw new SyntaxError("Expected variant value");
        A[N++] = {
          key: et,
          value: lt
        };
      }
      if (N === 0)
        return null;
      if (G === void 0)
        throw new SyntaxError("Expected default variant");
      return {
        variants: A,
        star: G
      };
    }
    c(O, "parseVariants");
    function k() {
      s($3, SyntaxError);
      let A;
      return r(xp) ? A = _() : A = {
        type: "str",
        value: l(m3)
      }, s(E3, SyntaxError), A;
    }
    c(k, "parseVariantKey");
    function S() {
      if (r(xp))
        return _();
      if (t[i] === '"')
        return V();
      throw new SyntaxError("Invalid expression");
    }
    c(S, "parseLiteral");
    function _() {
      let [, A, N = ""] = a(xp), G = N.length;
      return {
        type: "num",
        value: parseFloat(A),
        precision: G
      };
    }
    c(_, "parseNumberLiteral");
    function V() {
      n('"', SyntaxError);
      let A = "";
      for (; ; ) {
        if (A += l(g3), t[i] === "\\") {
          A += I();
          continue;
        }
        if (n('"'))
          return {
            type: "str",
            value: A
          };
        throw new SyntaxError("Unclosed string literal");
      }
    }
    c(V, "parseStringLiteral");
    function I() {
      if (r(mv))
        return l(mv);
      if (r(vv)) {
        let [, A, N] = a(vv), G = parseInt(A || N, 16);
        return G <= 55295 || 57344 <= G ? String.fromCodePoint(G) : "�";
      }
      throw new SyntaxError("Unknown escape sequence");
    }
    c(I, "parseEscapeSequence");
    function D() {
      let A = i;
      switch (s(M3), t[i]) {
        case ".":
        case "[":
        case "*":
        case "}":
        case void 0:
          return !1;
        case "{":
          return F(t.slice(A, i));
      }
      return t[i - 1] === " " ? F(t.slice(A, i)) : !1;
    }
    c(D, "parseIndent");
    function z(A, N) {
      return A.replace(N, "");
    }
    c(z, "trim");
    function F(A) {
      let N = A.replace(x3, `
`), G = C3.exec(A)[1].length;
      return new Th(N, G);
    }
    c(F, "makeIndent");
  }
};
c(Rf, "FluentResource");
let Py = Rf;
const If = class If {
  constructor(t, i) {
    this.value = t, this.length = i;
  }
};
c(If, "Indent");
let Th = If;
const T3 = /<|&#?\w+;/, A3 = {
  "http://www.w3.org/1999/xhtml": ["em", "strong", "small", "s", "cite", "q", "dfn", "abbr", "data", "time", "code", "var", "samp", "kbd", "sub", "sup", "i", "b", "u", "mark", "bdi", "bdo", "span", "br", "wbr"]
}, z3 = {
  "http://www.w3.org/1999/xhtml": {
    global: ["title", "aria-label", "aria-valuetext"],
    a: ["download"],
    area: ["download", "alt"],
    input: ["alt", "placeholder"],
    menuitem: ["label"],
    menu: ["label"],
    optgroup: ["label"],
    option: ["label"],
    track: ["label"],
    img: ["alt"],
    textarea: ["placeholder"],
    th: ["abbr"]
  },
  "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul": {
    global: ["accesskey", "aria-label", "aria-valuetext", "label", "title", "tooltiptext"],
    description: ["value"],
    key: ["key", "keycode"],
    label: ["value"],
    textbox: ["placeholder", "value"]
  }
};
function R3(o, t) {
  const {
    value: i
  } = t;
  if (typeof i == "string")
    if (o.localName === "title" && o.namespaceURI === "http://www.w3.org/1999/xhtml")
      o.textContent = i;
    else if (!T3.test(i))
      o.textContent = i;
    else {
      const r = o.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml", "template");
      r.innerHTML = i, I3(r.content, o);
    }
  H1(t, o);
}
c(R3, "translateElement");
function I3(o, t) {
  for (const i of o.childNodes)
    if (i.nodeType !== i.TEXT_NODE) {
      if (i.hasAttribute("data-l10n-name")) {
        const r = D3(t, i);
        o.replaceChild(r, i);
        continue;
      }
      if (N3(i)) {
        const r = F3(i);
        o.replaceChild(r, i);
        continue;
      }
      console.warn(`An element of forbidden type "${i.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`), o.replaceChild(Sy(i), i);
    }
  t.textContent = "", t.appendChild(o);
}
c(I3, "overlayChildNodes");
function O3(o, t) {
  if (!o)
    return !1;
  for (let i of o)
    if (i.name === t)
      return !0;
  return !1;
}
c(O3, "hasAttribute");
function H1(o, t) {
  const i = t.hasAttribute("data-l10n-attrs") ? t.getAttribute("data-l10n-attrs").split(",").map((r) => r.trim()) : null;
  for (const r of Array.from(t.attributes))
    xv(r.name, t, i) && !O3(o.attributes, r.name) && t.removeAttribute(r.name);
  if (o.attributes)
    for (const r of Array.from(o.attributes))
      xv(r.name, t, i) && t.getAttribute(r.name) !== r.value && t.setAttribute(r.name, r.value);
}
c(H1, "overlayAttributes");
function D3(o, t) {
  const i = t.getAttribute("data-l10n-name"), r = o.querySelector(`[data-l10n-name="${i}"]`);
  if (!r)
    return console.warn(`An element named "${i}" wasn't found in the source.`), Sy(t);
  if (r.localName !== t.localName)
    return console.warn(`An element named "${i}" was found in the translation but its type ${t.localName} didn't match the element found in the source (${r.localName}).`), Sy(t);
  o.removeChild(r);
  const n = r.cloneNode(!1);
  return B1(t, n);
}
c(D3, "getNodeForNamedElement");
function F3(o) {
  const t = o.ownerDocument.createElement(o.localName);
  return B1(o, t);
}
c(F3, "createSanitizedElement");
function Sy(o) {
  return o.ownerDocument.createTextNode(o.textContent);
}
c(Sy, "createTextNodeFromTextContent");
function N3(o) {
  const t = A3[o.namespaceURI];
  return t && t.includes(o.localName);
}
c(N3, "isElementAllowed");
function xv(o, t, i = null) {
  if (i && i.includes(o))
    return !0;
  const r = z3[t.namespaceURI];
  if (!r)
    return !1;
  const n = o.toLowerCase(), s = t.localName;
  if (r.global.includes(n))
    return !0;
  if (!r[s])
    return !1;
  if (r[s].includes(n))
    return !0;
  if (t.namespaceURI === "http://www.w3.org/1999/xhtml" && s === "input" && n === "value") {
    const a = t.type.toLowerCase();
    if (a === "submit" || a === "button" || a === "reset")
      return !0;
  }
  return !1;
}
c(xv, "isAttrNameLocalizable");
function B1(o, t) {
  return t.textContent = o.textContent, H1(o, t), t;
}
c(B1, "shallowPopulateUsing");
const Of = class Of extends Array {
  static from(t) {
    return t instanceof this ? t : new this(t);
  }
};
c(Of, "CachedIterable");
let Ly = Of;
const Df = class Df extends Ly {
  constructor(t) {
    if (super(), Symbol.asyncIterator in Object(t))
      this.iterator = t[Symbol.asyncIterator]();
    else if (Symbol.iterator in Object(t))
      this.iterator = t[Symbol.iterator]();
    else
      throw new TypeError("Argument must implement the iteration protocol.");
  }
  [Symbol.asyncIterator]() {
    const t = this;
    let i = 0;
    return {
      async next() {
        return t.length <= i && t.push(t.iterator.next()), t[i++];
      }
    };
  }
  async touchNext(t = 1) {
    let i = 0;
    for (; i++ < t; ) {
      const r = this[this.length - 1];
      if (r && (await r).done)
        break;
      this.push(this.iterator.next());
    }
    return this[this.length - 1];
  }
};
c(Df, "CachedAsyncIterable");
let My = Df;
const Ff = class Ff {
  constructor(t = [], i) {
    this.resourceIds = t, this.generateBundles = i, this.onChange(!0);
  }
  addResourceIds(t, i = !1) {
    return this.resourceIds.push(...t), this.onChange(i), this.resourceIds.length;
  }
  removeResourceIds(t) {
    return this.resourceIds = this.resourceIds.filter((i) => !t.includes(i)), this.onChange(), this.resourceIds.length;
  }
  async formatWithFallback(t, i) {
    const r = [];
    let n = !1;
    for await (const s of this.bundles) {
      n = !0;
      const a = B3(i, s, t, r);
      if (a.size === 0)
        break;
      if (typeof console < "u") {
        const l = s.locales[0], d = Array.from(a).join(", ");
        console.warn(`[fluent] Missing translations in ${l}: ${d}`);
      }
    }
    return !n && typeof console < "u" && console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(t)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`), r;
  }
  formatMessages(t) {
    return this.formatWithFallback(t, H3);
  }
  formatValues(t) {
    return this.formatWithFallback(t, V3);
  }
  async formatValue(t, i) {
    const [r] = await this.formatValues([{
      id: t,
      args: i
    }]);
    return r;
  }
  handleEvent() {
    this.onChange();
  }
  onChange(t = !1) {
    this.bundles = My.from(this.generateBundles(this.resourceIds)), t && this.bundles.touchNext(2);
  }
};
c(Ff, "Localization");
let Ty = Ff;
function V3(o, t, i, r) {
  return i.value ? o.formatPattern(i.value, r, t) : null;
}
c(V3, "valueFromBundle");
function H3(o, t, i, r) {
  const n = {
    value: null,
    attributes: null
  };
  i.value && (n.value = o.formatPattern(i.value, r, t));
  let s = Object.keys(i.attributes);
  if (s.length > 0) {
    n.attributes = new Array(s.length);
    for (let [a, l] of s.entries()) {
      let d = o.formatPattern(i.attributes[l], r, t);
      n.attributes[a] = {
        name: l,
        value: d
      };
    }
  }
  return n;
}
c(H3, "messageFromBundle");
function B3(o, t, i, r) {
  const n = [], s = /* @__PURE__ */ new Set();
  return i.forEach(({
    id: a,
    args: l
  }, d) => {
    if (r[d] !== void 0)
      return;
    let h = t.getMessage(a);
    if (h) {
      if (n.length = 0, r[d] = o(t, n, h, l), n.length > 0 && typeof console < "u") {
        const w = t.locales[0], m = n.join(", ");
        console.warn(`[fluent][resolver] errors in ${w}/${a}: ${m}.`);
      }
    } else
      s.add(a);
  }), s;
}
c(B3, "keysFromBundle");
const En = "data-l10n-id", tl = "data-l10n-args", U3 = `[${En}]`, Nf = class Nf extends Ty {
  constructor(t, i) {
    super(t, i), this.roots = /* @__PURE__ */ new Set(), this.pendingrAF = null, this.pendingElements = /* @__PURE__ */ new Set(), this.windowElement = null, this.mutationObserver = null, this.observerConfig = {
      attributes: !0,
      characterData: !1,
      childList: !0,
      subtree: !0,
      attributeFilter: [En, tl]
    };
  }
  onChange(t = !1) {
    super.onChange(t), this.roots && this.translateRoots();
  }
  setAttributes(t, i, r) {
    return t.setAttribute(En, i), r ? t.setAttribute(tl, JSON.stringify(r)) : t.removeAttribute(tl), t;
  }
  getAttributes(t) {
    return {
      id: t.getAttribute(En),
      args: JSON.parse(t.getAttribute(tl) || null)
    };
  }
  connectRoot(t) {
    for (const i of this.roots)
      if (i === t || i.contains(t) || t.contains(i))
        throw new Error("Cannot add a root that overlaps with existing root.");
    if (this.windowElement) {
      if (this.windowElement !== t.ownerDocument.defaultView)
        throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`);
    } else
      this.windowElement = t.ownerDocument.defaultView, this.mutationObserver = new this.windowElement.MutationObserver((i) => this.translateMutations(i));
    this.roots.add(t), this.mutationObserver.observe(t, this.observerConfig);
  }
  disconnectRoot(t) {
    return this.roots.delete(t), this.pauseObserving(), this.roots.size === 0 ? (this.mutationObserver = null, this.windowElement && this.pendingrAF && this.windowElement.cancelAnimationFrame(this.pendingrAF), this.windowElement = null, this.pendingrAF = null, this.pendingElements.clear(), !0) : (this.resumeObserving(), !1);
  }
  translateRoots() {
    const t = Array.from(this.roots);
    return Promise.all(t.map((i) => this.translateFragment(i)));
  }
  pauseObserving() {
    this.mutationObserver && (this.translateMutations(this.mutationObserver.takeRecords()), this.mutationObserver.disconnect());
  }
  resumeObserving() {
    if (this.mutationObserver)
      for (const t of this.roots)
        this.mutationObserver.observe(t, this.observerConfig);
  }
  translateMutations(t) {
    for (const i of t)
      switch (i.type) {
        case "attributes":
          i.target.hasAttribute("data-l10n-id") && this.pendingElements.add(i.target);
          break;
        case "childList":
          for (const r of i.addedNodes)
            if (r.nodeType === r.ELEMENT_NODE)
              if (r.childElementCount)
                for (const n of this.getTranslatables(r))
                  this.pendingElements.add(n);
              else r.hasAttribute(En) && this.pendingElements.add(r);
          break;
      }
    this.pendingElements.size > 0 && this.pendingrAF === null && (this.pendingrAF = this.windowElement.requestAnimationFrame(() => {
      this.translateElements(Array.from(this.pendingElements)), this.pendingElements.clear(), this.pendingrAF = null;
    }));
  }
  translateFragment(t) {
    return this.translateElements(this.getTranslatables(t));
  }
  async translateElements(t) {
    if (!t.length)
      return;
    const i = t.map(this.getKeysForElement), r = await this.formatMessages(i);
    return this.applyTranslations(t, r);
  }
  applyTranslations(t, i) {
    this.pauseObserving();
    for (let r = 0; r < t.length; r++)
      i[r] !== void 0 && R3(t[r], i[r]);
    this.resumeObserving();
  }
  getTranslatables(t) {
    const i = Array.from(t.querySelectorAll(U3));
    return typeof t.hasAttribute == "function" && t.hasAttribute(En) && i.push(t), i;
  }
  getKeysForElement(t) {
    return {
      id: t.getAttribute(En),
      args: JSON.parse(t.getAttribute(tl) || null)
    };
  }
};
c(Nf, "DOMLocalization");
let Ay = Nf;
var Yl, la, da, Ke, Ic, U1, j1;
const qo = class qo {
  constructor({
    lang: t,
    isRTL: i
  }, r = null) {
    T(this, Yl);
    T(this, la, /* @__PURE__ */ new Set());
    T(this, da);
    T(this, Ke);
    var n, s;
    E(this, da, P(n = qo, Ic, U1).call(n, t)), E(this, Ke, r), E(this, Yl, i ?? P(s = qo, Ic, j1).call(s, u(this, da)) ? "rtl" : "ltr");
  }
  _setL10n(t) {
    E(this, Ke, t);
  }
  getLanguage() {
    return u(this, da);
  }
  getDirection() {
    return u(this, Yl);
  }
  async get(t, i = null, r) {
    if (Array.isArray(t))
      return t = t.map((a) => ({
        id: a
      })), (await u(this, Ke).formatMessages(t)).map((a) => a.value);
    const n = await u(this, Ke).formatMessages([{
      id: t,
      args: i
    }]);
    return (n == null ? void 0 : n[0].value) || r;
  }
  async translate(t) {
    u(this, la).add(t);
    try {
      u(this, Ke).connectRoot(t), await u(this, Ke).translateRoots();
    } catch {
    }
  }
  async destroy() {
    for (const t of u(this, la))
      u(this, Ke).disconnectRoot(t);
    u(this, la).clear(), u(this, Ke).pauseObserving();
  }
  pause() {
    u(this, Ke).pauseObserving();
  }
  resume() {
    u(this, Ke).resumeObserving();
  }
};
Yl = new WeakMap(), la = new WeakMap(), da = new WeakMap(), Ke = new WeakMap(), Ic = new WeakSet(), U1 = /* @__PURE__ */ c(function(t) {
  return t = (t == null ? void 0 : t.toLowerCase()) || "en-us", {
    en: "en-us",
    es: "es-es",
    fy: "fy-nl",
    ga: "ga-ie",
    gu: "gu-in",
    hi: "hi-in",
    hy: "hy-am",
    nb: "nb-no",
    ne: "ne-np",
    nn: "nn-no",
    pa: "pa-in",
    pt: "pt-pt",
    sv: "sv-se",
    zh: "zh-cn"
  }[t] || t;
}, "#fixupLangCode"), j1 = /* @__PURE__ */ c(function(t) {
  const i = t.split("-", 1)[0];
  return ["ar", "he", "fa", "ps", "ur"].includes(i);
}, "#isRTL"), T(qo, Ic), c(qo, "L10n");
let zy = qo;
function Cv(o, t) {
  const i = new Py(t), r = new _y(o), n = r.addResource(i);
  return n.length && console.error("L10n errors", n), r;
}
c(Cv, "createBundle");
var Je, W1, q1, Q1, K1, Ry;
const Ar = class Ar extends zy {
  constructor(t) {
    super({
      lang: t
    });
    const i = t ? P(Ar, Je, W1).bind(Ar, "en-us", this.getLanguage()) : P(Ar, Je, K1).bind(Ar, this.getLanguage());
    this._setL10n(new Ay([], i));
  }
};
Je = new WeakSet(), W1 = /* @__PURE__ */ c(async function* (t, i) {
  const {
    baseURL: r,
    paths: n
  } = await P(this, Je, Q1).call(this), s = [i];
  if (t !== i) {
    const a = i.split("-", 1)[0];
    a !== i && s.push(a), s.push(t);
  }
  for (const a of s) {
    const l = await P(this, Je, q1).call(this, a, r, n);
    l ? yield l : a === "en-us" && (yield P(this, Je, Ry).call(this, a));
  }
}, "#generateBundles"), q1 = /* @__PURE__ */ c(async function(t, i, r) {
  const n = r[t];
  if (!n)
    return null;
  const s = new URL(n, i), a = await sv(s, "text");
  return Cv(t, a);
}, "#createBundle"), Q1 = /* @__PURE__ */ c(async function() {
  try {
    const {
      href: t
    } = document.querySelector('link[type="application/l10n"]'), i = await sv(t, "json");
    return {
      baseURL: t.replace(/[^/]*$/, "") || "./",
      paths: i
    };
  } catch {
  }
  return {
    baseURL: "./",
    paths: /* @__PURE__ */ Object.create(null)
  };
}, "#getPaths"), K1 = /* @__PURE__ */ c(async function* (t) {
  yield P(this, Je, Ry).call(this, t);
}, "#generateBundlesFallback"), Ry = /* @__PURE__ */ c(async function(t) {
  return Cv(t, `pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties…
pdfjs-document-properties-button-label = Document Properties…
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)
pdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-string = { $date }, { $time }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing…
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document…
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-string = { $date }, { $time }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-free-text =
    .aria-label = Text Editor
pdfjs-free-text-default-content = Start typing…
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, “A young man sits down at a table to eat a meal”
pdfjs-editor-resizer-label-top-left = Top left corner — resize
pdfjs-editor-resizer-label-top-middle = Top middle — resize
pdfjs-editor-resizer-label-top-right = Top right corner — resize
pdfjs-editor-resizer-label-middle-right = Middle right — resize
pdfjs-editor-resizer-label-bottom-right = Bottom right corner — resize
pdfjs-editor-resizer-label-bottom-middle = Bottom middle — resize
pdfjs-editor-resizer-label-bottom-left = Bottom left corner — resize
pdfjs-editor-resizer-label-middle-left = Middle left — resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all`);
}, "#createBundleFallback"), T(Ar, Je), c(Ar, "genericl10n_GenericL10n");
let Tc = Ar;
const j3 = 1e3, W3 = 50, q3 = 1e3;
function Cp() {
  return document.location.hash;
}
c(Cp, "getCurrentHash");
var qr, ht, Xi, qd, Qd, ol, Kd, Oy, G1, Z1, Dy, Y1, X1;
const Vf = class Vf {
  constructor({
    linkService: t,
    eventBus: i
  }) {
    T(this, ht);
    T(this, qr, null);
    this.linkService = t, this.eventBus = i, this._initialized = !1, this._fingerprint = "", this.reset(), this.eventBus._on("pagesinit", () => {
      this._isPagesLoaded = !1, this.eventBus._on("pagesloaded", (r) => {
        this._isPagesLoaded = !!r.pagesCount;
      }, {
        once: !0
      });
    });
  }
  initialize({
    fingerprint: t,
    resetHistory: i = !1,
    updateUrl: r = !1
  }) {
    if (!t || typeof t != "string") {
      console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');
      return;
    }
    this._initialized && this.reset();
    const n = this._fingerprint !== "" && this._fingerprint !== t;
    this._fingerprint = t, this._updateUrl = r === !0, this._initialized = !0, P(this, ht, Y1).call(this);
    const s = window.history.state;
    if (this._popStateInProgress = !1, this._blockHashChange = 0, this._currentHash = Cp(), this._numPositionUpdates = 0, this._uid = this._maxUid = 0, this._destination = null, this._position = null, !P(this, ht, ol).call(this, s, !0) || i) {
      const {
        hash: l,
        page: d,
        rotation: h
      } = P(this, ht, Oy).call(this, !0);
      if (!l || n || i) {
        P(this, ht, Xi).call(this, null, !0);
        return;
      }
      P(this, ht, Xi).call(this, {
        hash: l,
        page: d,
        rotation: h
      }, !0);
      return;
    }
    const a = s.destination;
    P(this, ht, Kd).call(this, a, s.uid, !0), a.rotation !== void 0 && (this._initialRotation = a.rotation), a.dest ? (this._initialBookmark = JSON.stringify(a.dest), this._destination.page = null) : a.hash ? this._initialBookmark = a.hash : a.page && (this._initialBookmark = `page=${a.page}`);
  }
  reset() {
    this._initialized && (P(this, ht, Dy).call(this), this._initialized = !1, P(this, ht, X1).call(this)), this._updateViewareaTimeout && (clearTimeout(this._updateViewareaTimeout), this._updateViewareaTimeout = null), this._initialBookmark = null, this._initialRotation = null;
  }
  push({
    namedDest: t = null,
    explicitDest: i,
    pageNumber: r
  }) {
    if (!this._initialized)
      return;
    if (t && typeof t != "string") {
      console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);
      return;
    } else if (Array.isArray(i)) {
      if (!P(this, ht, Qd).call(this, r) && (r !== null || this._destination)) {
        console.error(`PDFHistory.push: "${r}" is not a valid pageNumber parameter.`);
        return;
      }
    } else {
      console.error(`PDFHistory.push: "${i}" is not a valid explicitDest parameter.`);
      return;
    }
    const n = t || JSON.stringify(i);
    if (!n)
      return;
    let s = !1;
    if (this._destination && (Q3(this._destination.hash, n) || K3(this._destination.dest, i))) {
      if (this._destination.page)
        return;
      s = !0;
    }
    this._popStateInProgress && !s || (P(this, ht, Xi).call(this, {
      dest: i,
      hash: n,
      page: r,
      rotation: this.linkService.rotation
    }, s), this._popStateInProgress || (this._popStateInProgress = !0, Promise.resolve().then(() => {
      this._popStateInProgress = !1;
    })));
  }
  pushPage(t) {
    var i;
    if (this._initialized) {
      if (!P(this, ht, Qd).call(this, t)) {
        console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`);
        return;
      }
      ((i = this._destination) == null ? void 0 : i.page) !== t && (this._popStateInProgress || (P(this, ht, Xi).call(this, {
        dest: null,
        hash: `page=${t}`,
        page: t,
        rotation: this.linkService.rotation
      }), this._popStateInProgress || (this._popStateInProgress = !0, Promise.resolve().then(() => {
        this._popStateInProgress = !1;
      }))));
    }
  }
  pushCurrentPosition() {
    !this._initialized || this._popStateInProgress || P(this, ht, qd).call(this);
  }
  back() {
    if (!this._initialized || this._popStateInProgress)
      return;
    const t = window.history.state;
    P(this, ht, ol).call(this, t) && t.uid > 0 && window.history.back();
  }
  forward() {
    if (!this._initialized || this._popStateInProgress)
      return;
    const t = window.history.state;
    P(this, ht, ol).call(this, t) && t.uid < this._maxUid && window.history.forward();
  }
  get popStateInProgress() {
    return this._initialized && (this._popStateInProgress || this._blockHashChange > 0);
  }
  get initialBookmark() {
    return this._initialized ? this._initialBookmark : null;
  }
  get initialRotation() {
    return this._initialized ? this._initialRotation : null;
  }
};
qr = new WeakMap(), ht = new WeakSet(), Xi = /* @__PURE__ */ c(function(t, i = !1) {
  const r = i || !this._destination, n = {
    fingerprint: this._fingerprint,
    uid: r ? this._uid : this._uid + 1,
    destination: t
  };
  P(this, ht, Kd).call(this, t, n.uid);
  let s;
  if (this._updateUrl && (t != null && t.hash)) {
    const a = document.location.href.split("#", 1)[0];
    a.startsWith("file://") || (s = `${a}#${t.hash}`);
  }
  r ? window.history.replaceState(n, "", s) : window.history.pushState(n, "", s);
}, "#pushOrReplaceState"), qd = /* @__PURE__ */ c(function(t = !1) {
  if (!this._position)
    return;
  let i = this._position;
  if (t && (i = Object.assign(/* @__PURE__ */ Object.create(null), this._position), i.temporary = !0), !this._destination) {
    P(this, ht, Xi).call(this, i);
    return;
  }
  if (this._destination.temporary) {
    P(this, ht, Xi).call(this, i, !0);
    return;
  }
  if (this._destination.hash === i.hash || !this._destination.page && this._numPositionUpdates <= W3)
    return;
  let r = !1;
  if (this._destination.page >= i.first && this._destination.page <= i.page) {
    if (this._destination.dest !== void 0 || !this._destination.first)
      return;
    r = !0;
  }
  P(this, ht, Xi).call(this, i, r);
}, "#tryPushCurrentPosition"), Qd = /* @__PURE__ */ c(function(t) {
  return Number.isInteger(t) && t > 0 && t <= this.linkService.pagesCount;
}, "#isValidPage"), ol = /* @__PURE__ */ c(function(t, i = !1) {
  if (!t)
    return !1;
  if (t.fingerprint !== this._fingerprint)
    if (i) {
      if (typeof t.fingerprint != "string" || t.fingerprint.length !== this._fingerprint.length)
        return !1;
      const [r] = performance.getEntriesByType("navigation");
      if ((r == null ? void 0 : r.type) !== "reload")
        return !1;
    } else
      return !1;
  return !(!Number.isInteger(t.uid) || t.uid < 0 || t.destination === null || typeof t.destination != "object");
}, "#isValidState"), Kd = /* @__PURE__ */ c(function(t, i, r = !1) {
  this._updateViewareaTimeout && (clearTimeout(this._updateViewareaTimeout), this._updateViewareaTimeout = null), r && (t != null && t.temporary) && delete t.temporary, this._destination = t, this._uid = i, this._maxUid = Math.max(this._maxUid, i), this._numPositionUpdates = 0;
}, "#updateInternalState"), Oy = /* @__PURE__ */ c(function(t = !1) {
  const i = unescape(Cp()).substring(1), r = vu(i), n = r.get("nameddest") || "";
  let s = r.get("page") | 0;
  return (!P(this, ht, Qd).call(this, s) || t && n.length > 0) && (s = null), {
    hash: i,
    page: s,
    rotation: this.linkService.rotation
  };
}, "#parseCurrentHash"), G1 = /* @__PURE__ */ c(function({
  location: t
}) {
  this._updateViewareaTimeout && (clearTimeout(this._updateViewareaTimeout), this._updateViewareaTimeout = null), this._position = {
    hash: t.pdfOpenParams.substring(1),
    page: this.linkService.page,
    first: t.pageNumber,
    rotation: t.rotation
  }, !this._popStateInProgress && (this._isPagesLoaded && this._destination && !this._destination.page && this._numPositionUpdates++, this._updateViewareaTimeout = setTimeout(() => {
    this._popStateInProgress || P(this, ht, qd).call(this, !0), this._updateViewareaTimeout = null;
  }, q3));
}, "#updateViewarea"), Z1 = /* @__PURE__ */ c(function({
  state: t
}) {
  const i = Cp(), r = this._currentHash !== i;
  if (this._currentHash = i, !t) {
    this._uid++;
    const {
      hash: s,
      page: a,
      rotation: l
    } = P(this, ht, Oy).call(this);
    P(this, ht, Xi).call(this, {
      hash: s,
      page: a,
      rotation: l
    }, !0);
    return;
  }
  if (!P(this, ht, ol).call(this, t))
    return;
  this._popStateInProgress = !0, r && (this._blockHashChange++, n3({
    target: window,
    name: "hashchange",
    delay: j3
  }).then(() => {
    this._blockHashChange--;
  }));
  const n = t.destination;
  P(this, ht, Kd).call(this, n, t.uid, !0), M1(n.rotation) && (this.linkService.rotation = n.rotation), n.dest ? this.linkService.goToDestination(n.dest) : n.hash ? this.linkService.setHash(n.hash) : n.page && (this.linkService.page = n.page), Promise.resolve().then(() => {
    this._popStateInProgress = !1;
  });
}, "#popState"), Dy = /* @__PURE__ */ c(function() {
  (!this._destination || this._destination.temporary) && P(this, ht, qd).call(this);
}, "#pageHide"), Y1 = /* @__PURE__ */ c(function() {
  if (u(this, qr))
    return;
  E(this, qr, new AbortController());
  const {
    signal: t
  } = u(this, qr);
  this.eventBus._on("updateviewarea", P(this, ht, G1).bind(this), {
    signal: t
  }), window.addEventListener("popstate", P(this, ht, Z1).bind(this), {
    signal: t
  }), window.addEventListener("pagehide", P(this, ht, Dy).bind(this), {
    signal: t
  });
}, "#bindEvents"), X1 = /* @__PURE__ */ c(function() {
  var t;
  (t = u(this, qr)) == null || t.abort(), E(this, qr, null);
}, "#unbindEvents"), c(Vf, "PDFHistory");
let Iy = Vf;
function Q3(o, t) {
  return typeof o != "string" || typeof t != "string" ? !1 : o === t || vu(o).get("nameddest") === t;
}
c(Q3, "isDestHashesEqual");
function K3(o, t) {
  function i(r, n) {
    if (typeof r != typeof n || Array.isArray(r) || Array.isArray(n))
      return !1;
    if (r !== null && typeof r == "object" && n !== null) {
      if (Object.keys(r).length !== Object.keys(n).length)
        return !1;
      for (const s in r)
        if (!i(r[s], n[s]))
          return !1;
      return !0;
    }
    return r === n || Number.isNaN(r) && Number.isNaN(n);
  }
  if (c(i, "isEntryEqual"), !(Array.isArray(o) && Array.isArray(t)) || o.length !== t.length)
    return !1;
  for (let r = 0, n = o.length; r < n; r++)
    if (!i(o[r], t[r]))
      return !1;
  return !0;
}
c(K3, "isDestArraysEqual");
var Xl, Jl, td, ed, ha;
const Hf = class Hf {
  constructor(t) {
    T(this, Xl, null);
    T(this, Jl, null);
    T(this, td, null);
    T(this, ed, null);
    T(this, ha);
    this.pdfPage = t.pdfPage, this.accessibilityManager = t.accessibilityManager, this.l10n = t.l10n, this.l10n || (this.l10n = new Tc()), this.annotationEditorLayer = null, this.div = null, this._cancelled = !1, E(this, ha, t.uiManager), E(this, Xl, t.annotationLayer || null), E(this, ed, t.textLayer || null), E(this, Jl, t.drawLayer || null), E(this, td, t.onAppend || null);
  }
  async render(t, i = "display") {
    var a;
    if (i !== "display" || this._cancelled)
      return;
    const r = t.clone({
      dontFlip: !0
    });
    if (this.div) {
      this.annotationEditorLayer.update({
        viewport: r
      }), this.show();
      return;
    }
    const n = this.div = document.createElement("div");
    n.className = "annotationEditorLayer", n.hidden = !0, n.dir = u(this, ha).direction, (a = u(this, td)) == null || a.call(this, n), this.annotationEditorLayer = new K9({
      uiManager: u(this, ha),
      div: n,
      accessibilityManager: this.accessibilityManager,
      pageIndex: this.pdfPage.pageNumber - 1,
      l10n: this.l10n,
      viewport: r,
      annotationLayer: u(this, Xl),
      textLayer: u(this, ed),
      drawLayer: u(this, Jl)
    });
    const s = {
      viewport: r,
      div: n,
      annotations: null,
      intent: i
    };
    this.annotationEditorLayer.render(s), this.show();
  }
  cancel() {
    this._cancelled = !0, this.div && this.annotationEditorLayer.destroy();
  }
  hide() {
    this.div && (this.div.hidden = !0);
  }
  show() {
    !this.div || this.annotationEditorLayer.isInvisible || (this.div.hidden = !1);
  }
};
Xl = new WeakMap(), Jl = new WeakMap(), td = new WeakMap(), ed = new WeakMap(), ha = new WeakMap(), c(Hf, "AnnotationEditorLayerBuilder");
let Fy = Hf;
{
  var Ah = /* @__PURE__ */ new Map();
  const o = navigator.userAgent || "", t = navigator.platform || "", i = navigator.maxTouchPoints || 1, r = /Android/.test(o), n = /\b(iPad|iPhone|iPod)(?=;)/.test(o) || t === "MacIntel" && i > 1;
  (function() {
    (n || r) && Ah.set("maxCanvasPixels", 5242880);
  })(), function() {
    r && Ah.set("useSystemFonts", !1);
  }();
}
const j = {
  BROWSER: 1,
  VIEWER: 2,
  API: 4,
  WORKER: 8,
  EVENT_DISPATCH: 16,
  PREFERENCE: 128
}, Ny = {
  BOOLEAN: 1,
  NUMBER: 2,
  OBJECT: 4,
  STRING: 8,
  UNDEFINED: 16
}, sn = {
  allowedGlobalEvents: {
    value: null,
    kind: j.BROWSER
  },
  canvasMaxAreaInBytes: {
    value: -1,
    kind: j.BROWSER + j.API
  },
  isInAutomation: {
    value: !1,
    kind: j.BROWSER
  },
  localeProperties: {
    value: {
      lang: navigator.language || "en-US"
    },
    kind: j.BROWSER
  },
  nimbusDataStr: {
    value: "",
    kind: j.BROWSER
  },
  supportsCaretBrowsingMode: {
    value: !1,
    kind: j.BROWSER
  },
  supportsDocumentFonts: {
    value: !0,
    kind: j.BROWSER
  },
  supportsIntegratedFind: {
    value: !1,
    kind: j.BROWSER
  },
  supportsMouseWheelZoomCtrlKey: {
    value: !0,
    kind: j.BROWSER
  },
  supportsMouseWheelZoomMetaKey: {
    value: !0,
    kind: j.BROWSER
  },
  supportsPinchToZoom: {
    value: !0,
    kind: j.BROWSER
  },
  toolbarDensity: {
    value: 0,
    kind: j.BROWSER + j.EVENT_DISPATCH
  },
  altTextLearnMoreUrl: {
    value: "",
    kind: j.VIEWER + j.PREFERENCE
  },
  annotationEditorMode: {
    value: 0,
    kind: j.VIEWER + j.PREFERENCE
  },
  annotationMode: {
    value: 2,
    kind: j.VIEWER + j.PREFERENCE
  },
  cursorToolOnLoad: {
    value: 0,
    kind: j.VIEWER + j.PREFERENCE
  },
  debuggerSrc: {
    value: "./debugger.mjs",
    kind: j.VIEWER
  },
  defaultZoomDelay: {
    value: 400,
    kind: j.VIEWER + j.PREFERENCE
  },
  defaultZoomValue: {
    value: "",
    kind: j.VIEWER + j.PREFERENCE
  },
  disableHistory: {
    value: !1,
    kind: j.VIEWER
  },
  disablePageLabels: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  enableAltText: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  enableGuessAltText: {
    value: !0,
    kind: j.VIEWER + j.PREFERENCE
  },
  enableHighlightEditor: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  enableHighlightFloatingButton: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  enablePermissions: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  enablePrintAutoRotate: {
    value: !0,
    kind: j.VIEWER + j.PREFERENCE
  },
  enableScripting: {
    value: !0,
    kind: j.VIEWER + j.PREFERENCE
  },
  enableUpdatedAddImage: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  externalLinkRel: {
    value: "noopener noreferrer nofollow",
    kind: j.VIEWER
  },
  externalLinkTarget: {
    value: 0,
    kind: j.VIEWER + j.PREFERENCE
  },
  highlightEditorColors: {
    value: "yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",
    kind: j.VIEWER + j.PREFERENCE
  },
  historyUpdateUrl: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  ignoreDestinationZoom: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  imageResourcesPath: {
    value: "./images/",
    kind: j.VIEWER
  },
  maxCanvasPixels: {
    value: 2 ** 25,
    kind: j.VIEWER
  },
  forcePageColors: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  pageColorsBackground: {
    value: "Canvas",
    kind: j.VIEWER + j.PREFERENCE
  },
  pageColorsForeground: {
    value: "CanvasText",
    kind: j.VIEWER + j.PREFERENCE
  },
  pdfBugEnabled: {
    value: !1,
    kind: j.VIEWER + j.PREFERENCE
  },
  printResolution: {
    value: 150,
    kind: j.VIEWER
  },
  sidebarViewOnLoad: {
    value: -1,
    kind: j.VIEWER + j.PREFERENCE
  },
  scrollModeOnLoad: {
    value: -1,
    kind: j.VIEWER + j.PREFERENCE
  },
  spreadModeOnLoad: {
    value: -1,
    kind: j.VIEWER + j.PREFERENCE
  },
  textLayerMode: {
    value: 1,
    kind: j.VIEWER + j.PREFERENCE
  },
  viewOnLoad: {
    value: 0,
    kind: j.VIEWER + j.PREFERENCE
  },
  cMapPacked: {
    value: !0,
    kind: j.API
  },
  cMapUrl: {
    value: "../web/cmaps/",
    kind: j.API
  },
  disableAutoFetch: {
    value: !1,
    kind: j.API + j.PREFERENCE
  },
  disableFontFace: {
    value: !1,
    kind: j.API + j.PREFERENCE
  },
  disableRange: {
    value: !1,
    kind: j.API + j.PREFERENCE
  },
  disableStream: {
    value: !1,
    kind: j.API + j.PREFERENCE
  },
  docBaseUrl: {
    value: "",
    kind: j.API
  },
  enableHWA: {
    value: !0,
    kind: j.API + j.VIEWER + j.PREFERENCE
  },
  enableXfa: {
    value: !0,
    kind: j.API + j.PREFERENCE
  },
  fontExtraProperties: {
    value: !1,
    kind: j.API
  },
  isEvalSupported: {
    value: !0,
    kind: j.API
  },
  isOffscreenCanvasSupported: {
    value: !0,
    kind: j.API
  },
  maxImageSize: {
    value: -1,
    kind: j.API
  },
  pdfBug: {
    value: !1,
    kind: j.API
  },
  standardFontDataUrl: {
    value: "../web/standard_fonts/",
    kind: j.API
  },
  useSystemFonts: {
    value: void 0,
    kind: j.API,
    type: Ny.BOOLEAN + Ny.UNDEFINED
  },
  verbosity: {
    value: 1,
    kind: j.API
  },
  workerPort: {
    value: null,
    kind: j.WORKER
  },
  workerSrc: {
    value: "../build/pdf.worker.mjs",
    kind: j.WORKER
  }
};
sn.defaultUrl = {
  value: "compressed.tracemonkey-pldi-09.pdf",
  kind: j.VIEWER
}, sn.sandboxBundleSrc = {
  value: "../build/pdf.sandbox.mjs",
  kind: j.VIEWER
}, sn.viewerCssTheme = {
  value: 0,
  kind: j.VIEWER + j.PREFERENCE
};
sn.disablePreferences = {
  value: !1,
  kind: j.VIEWER
};
const Pn = /* @__PURE__ */ new Map();
for (const [o, t] of Ah)
  Pn.set(o, t);
const nu = class nu {
  constructor() {
    throw new Error("Cannot initialize AppOptions.");
  }
  static get(t) {
    var i;
    return Pn.has(t) ? Pn.get(t) : (i = sn[t]) == null ? void 0 : i.value;
  }
  static getAll(t = null, i = !1) {
    const r = /* @__PURE__ */ Object.create(null);
    for (const n in sn) {
      const s = sn[n];
      t && !(t & s.kind) || (r[n] = !i && Pn.has(n) ? Pn.get(n) : s.value);
    }
    return r;
  }
  static set(t, i) {
    this.setAll({
      [t]: i
    });
  }
  static setAll(t, i = !1) {
    let r;
    for (const n in t) {
      const s = sn[n], a = t[n];
      if (!s || !(typeof a == typeof s.value || Ny[(typeof a).toUpperCase()] & s.type))
        continue;
      const {
        kind: l
      } = s;
      i && !(l & j.BROWSER || l & j.PREFERENCE) || (this.eventBus && l & j.EVENT_DISPATCH && (r || (r = /* @__PURE__ */ new Map())).set(n, a), Pn.set(n, a));
    }
    if (r)
      for (const [n, s] of r)
        this.eventBus.dispatch(n.toLowerCase(), {
          source: this,
          value: s
        });
  }
};
c(nu, "AppOptions"), sp(nu, "eventBus");
let Tl = nu;
Tl._checkDisablePreferences = () => {
  if (Tl.get("disablePreferences"))
    return !0;
  for (const [o] of Pn)
    if (!Ah.has(o)) {
      console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.');
      break;
    }
  return !1;
};
var zi;
const Bf = class Bf {
  constructor(t) {
    T(this, zi, null);
    this.pageIndex = t.pageIndex;
  }
  async render(t = "display") {
    t !== "display" || u(this, zi) || this._cancelled || E(this, zi, new X9({
      pageIndex: this.pageIndex
    }));
  }
  cancel() {
    this._cancelled = !0, u(this, zi) && (u(this, zi).destroy(), E(this, zi, null));
  }
  setParent(t) {
    var i;
    (i = u(this, zi)) == null || i.setParent(t);
  }
  getDrawLayer() {
    return u(this, zi);
  }
};
zi = new WeakMap(), c(Bf, "DrawLayerBuilder");
let Vy = Bf;
const kv = {
  Document: null,
  DocumentFragment: null,
  Part: "group",
  Sect: "group",
  Div: "group",
  Aside: "note",
  NonStruct: "none",
  P: null,
  H: "heading",
  Title: null,
  FENote: "note",
  Sub: "group",
  Lbl: null,
  Span: null,
  Em: null,
  Strong: null,
  Link: "link",
  Annot: "note",
  Form: "form",
  Ruby: null,
  RB: null,
  RT: null,
  RP: null,
  Warichu: null,
  WT: null,
  WP: null,
  L: "list",
  LI: "listitem",
  LBody: null,
  Table: "table",
  TR: "row",
  TH: "columnheader",
  TD: "cell",
  THead: "columnheader",
  TBody: null,
  TFoot: null,
  Caption: null,
  Figure: "figure",
  Formula: null,
  Artifact: null
}, G3 = /^H(\d+)$/;
var ii, fn, Hy, By;
const Uf = class Uf {
  constructor() {
    T(this, fn);
    T(this, ii);
  }
  get renderingDone() {
    return u(this, ii) !== void 0;
  }
  render(t) {
    if (u(this, ii) !== void 0)
      return u(this, ii);
    const i = P(this, fn, By).call(this, t);
    return i == null || i.classList.add("structTree"), E(this, ii, i);
  }
  hide() {
    u(this, ii) && !u(this, ii).hidden && (u(this, ii).hidden = !0);
  }
  show() {
    var t;
    (t = u(this, ii)) != null && t.hidden && (u(this, ii).hidden = !1);
  }
};
ii = new WeakMap(), fn = new WeakSet(), Hy = /* @__PURE__ */ c(function(t, i) {
  const {
    alt: r,
    id: n,
    lang: s
  } = t;
  r !== void 0 && i.setAttribute("aria-label", Eh(r)), n !== void 0 && i.setAttribute("aria-owns", n), s !== void 0 && i.setAttribute("lang", Eh(s, !0));
}, "#setAttributes"), By = /* @__PURE__ */ c(function(t) {
  if (!t)
    return null;
  const i = document.createElement("span");
  if ("role" in t) {
    const {
      role: r
    } = t, n = r.match(G3);
    n ? (i.setAttribute("role", "heading"), i.setAttribute("aria-level", n[1])) : kv[r] && i.setAttribute("role", kv[r]);
  }
  if (P(this, fn, Hy).call(this, t, i), t.children)
    if (t.children.length === 1 && "id" in t.children[0])
      P(this, fn, Hy).call(this, t.children[0], i);
    else
      for (const r of t.children)
        i.append(P(this, fn, By).call(this, r));
  return i;
}, "#walk"), c(Uf, "StructTreeLayerBuilder");
let zh = Uf;
var ir, ri, rr, Qr, ua, Gd, id, jy;
const Ln = class Ln {
  constructor() {
    T(this, id);
    T(this, ir, !1);
    T(this, ri, null);
    T(this, rr, /* @__PURE__ */ new Map());
    T(this, Qr, /* @__PURE__ */ new Map());
  }
  setTextMapping(t) {
    E(this, ri, t);
  }
  enable() {
    if (u(this, ir))
      throw new Error("TextAccessibilityManager is already enabled.");
    if (!u(this, ri))
      throw new Error("Text divs and strings have not been set.");
    if (E(this, ir, !0), E(this, ri, u(this, ri).slice()), u(this, ri).sort(P(Ln, ua, Gd)), u(this, rr).size > 0) {
      const t = u(this, ri);
      for (const [i, r] of u(this, rr)) {
        if (!document.getElementById(i)) {
          u(this, rr).delete(i);
          continue;
        }
        P(this, id, jy).call(this, i, t[r]);
      }
    }
    for (const [t, i] of u(this, Qr))
      this.addPointerInTextLayer(t, i);
    u(this, Qr).clear();
  }
  disable() {
    u(this, ir) && (u(this, Qr).clear(), E(this, ri, null), E(this, ir, !1));
  }
  removePointerInTextLayer(t) {
    if (!u(this, ir)) {
      u(this, Qr).delete(t);
      return;
    }
    const i = u(this, ri);
    if (!i || i.length === 0)
      return;
    const {
      id: r
    } = t, n = u(this, rr).get(r);
    if (n === void 0)
      return;
    const s = i[n];
    u(this, rr).delete(r);
    let a = s.getAttribute("aria-owns");
    a != null && a.includes(r) && (a = a.split(" ").filter((l) => l !== r).join(" "), a ? s.setAttribute("aria-owns", a) : (s.removeAttribute("aria-owns"), s.setAttribute("role", "presentation")));
  }
  addPointerInTextLayer(t, i) {
    const {
      id: r
    } = t;
    if (!r)
      return null;
    if (!u(this, ir))
      return u(this, Qr).set(t, i), null;
    i && this.removePointerInTextLayer(t);
    const n = u(this, ri);
    if (!n || n.length === 0)
      return null;
    const s = Sl(n, (h) => {
      var w;
      return P(w = Ln, ua, Gd).call(w, t, h) < 0;
    }), a = Math.max(0, s - 1), l = n[a];
    P(this, id, jy).call(this, r, l), u(this, rr).set(r, a);
    const d = l.parentNode;
    return d != null && d.classList.contains("markedContent") ? d.id : null;
  }
  moveElementInDOM(t, i, r, n) {
    const s = this.addPointerInTextLayer(r, n);
    if (!t.hasChildNodes())
      return t.append(i), s;
    const a = Array.from(t.childNodes).filter((h) => h !== i);
    if (a.length === 0)
      return s;
    const l = r || i, d = Sl(a, (h) => {
      var w;
      return P(w = Ln, ua, Gd).call(w, l, h) < 0;
    });
    return d === 0 ? a[0].before(i) : a[d - 1].after(i), s;
  }
};
ir = new WeakMap(), ri = new WeakMap(), rr = new WeakMap(), Qr = new WeakMap(), ua = new WeakSet(), Gd = /* @__PURE__ */ c(function(t, i) {
  const r = t.getBoundingClientRect(), n = i.getBoundingClientRect();
  if (r.width === 0 && r.height === 0)
    return 1;
  if (n.width === 0 && n.height === 0)
    return -1;
  const s = r.y, a = r.y + r.height, l = r.y + r.height / 2, d = n.y, h = n.y + n.height, w = n.y + n.height / 2;
  if (l <= d && w >= a)
    return -1;
  if (w <= s && l >= h)
    return 1;
  const m = r.x + r.width / 2, f = n.x + n.width / 2;
  return m - f;
}, "#compareElementPositions"), id = new WeakSet(), jy = /* @__PURE__ */ c(function(t, i) {
  const r = i.getAttribute("aria-owns");
  r != null && r.includes(t) || i.setAttribute("aria-owns", r ? `${r} ${t}` : t), i.removeAttribute("role");
}, "#addIdToAriaOwns"), T(Ln, ua), c(Ln, "TextAccessibilityManager");
let Uy = Ln;
var Kr;
const jf = class jf {
  constructor({
    findController: t,
    eventBus: i,
    pageIndex: r
  }) {
    T(this, Kr, null);
    this.findController = t, this.matches = [], this.eventBus = i, this.pageIdx = r, this.textDivs = null, this.textContentItemsStr = null, this.enabled = !1;
  }
  setTextMapping(t, i) {
    this.textDivs = t, this.textContentItemsStr = i;
  }
  enable() {
    if (!this.textDivs || !this.textContentItemsStr)
      throw new Error("Text divs and strings have not been set.");
    if (this.enabled)
      throw new Error("TextHighlighter is already enabled.");
    this.enabled = !0, u(this, Kr) || (E(this, Kr, new AbortController()), this.eventBus._on("updatetextlayermatches", (t) => {
      (t.pageIndex === this.pageIdx || t.pageIndex === -1) && this._updateMatches();
    }, {
      signal: u(this, Kr).signal
    })), this._updateMatches();
  }
  disable() {
    var t;
    this.enabled && (this.enabled = !1, (t = u(this, Kr)) == null || t.abort(), E(this, Kr, null), this._updateMatches(!0));
  }
  _convertMatches(t, i) {
    if (!t)
      return [];
    const {
      textContentItemsStr: r
    } = this;
    let n = 0, s = 0;
    const a = r.length - 1, l = [];
    for (let d = 0, h = t.length; d < h; d++) {
      let w = t[d];
      for (; n !== a && w >= s + r[n].length; )
        s += r[n].length, n++;
      n === r.length && console.error("Could not find a matching mapping");
      const m = {
        begin: {
          divIdx: n,
          offset: w - s
        }
      };
      for (w += i[d]; n !== a && w > s + r[n].length; )
        s += r[n].length, n++;
      m.end = {
        divIdx: n,
        offset: w - s
      }, l.push(m);
    }
    return l;
  }
  _renderMatches(t) {
    if (t.length === 0)
      return;
    const {
      findController: i,
      pageIdx: r
    } = this, {
      textContentItemsStr: n,
      textDivs: s
    } = this, a = r === i.selected.pageIdx, l = i.selected.matchIdx, d = i.state.highlightAll;
    let h = null;
    const w = {
      divIdx: -1,
      offset: void 0
    };
    function m(k, S) {
      const _ = k.divIdx;
      return s[_].textContent = "", f(_, 0, k.offset, S);
    }
    c(m, "beginText");
    function f(k, S, _, V) {
      let I = s[k];
      if (I.nodeType === Node.TEXT_NODE) {
        const F = document.createElement("span");
        I.before(F), F.append(I), s[k] = F, I = F;
      }
      const D = n[k].substring(S, _), z = document.createTextNode(D);
      if (V) {
        const F = document.createElement("span");
        return F.className = `${V} appended`, F.append(z), I.append(F), V.includes("selected") ? F.offsetLeft : 0;
      }
      return I.append(z), 0;
    }
    c(f, "appendTextToDiv");
    let b = l, g = b + 1;
    if (d)
      b = 0, g = t.length;
    else if (!a)
      return;
    let $ = -1, O = -1;
    for (let k = b; k < g; k++) {
      const S = t[k], _ = S.begin;
      if (_.divIdx === $ && _.offset === O)
        continue;
      $ = _.divIdx, O = _.offset;
      const V = S.end, I = a && k === l, D = I ? " selected" : "";
      let z = 0;
      if (!h || _.divIdx !== h.divIdx ? (h !== null && f(h.divIdx, h.offset, w.offset), m(_)) : f(h.divIdx, h.offset, _.offset), _.divIdx === V.divIdx)
        z = f(_.divIdx, _.offset, V.offset, "highlight" + D);
      else {
        z = f(_.divIdx, _.offset, w.offset, "highlight begin" + D);
        for (let F = _.divIdx + 1, A = V.divIdx; F < A; F++)
          s[F].className = "highlight middle" + D;
        m(V, "highlight end" + D);
      }
      h = V, I && i.scrollMatchIntoView({
        element: s[_.divIdx],
        selectedLeft: z,
        pageIndex: r,
        matchIndex: l
      });
    }
    h && f(h.divIdx, h.offset, w.offset);
  }
  _updateMatches(t = !1) {
    if (!this.enabled && !t)
      return;
    const {
      findController: i,
      matches: r,
      pageIdx: n
    } = this, {
      textContentItemsStr: s,
      textDivs: a
    } = this;
    let l = -1;
    for (const w of r) {
      const m = Math.max(l, w.begin.divIdx);
      for (let f = m, b = w.end.divIdx; f <= b; f++) {
        const g = a[f];
        g.textContent = s[f], g.className = "";
      }
      l = w.end.divIdx + 1;
    }
    if (!(i != null && i.highlightMatches) || t)
      return;
    const d = i.pageMatches[n] || null, h = i.pageMatchesLength[n] || null;
    this.matches = this._convertMatches(d, h), this._renderMatches(this.matches);
  }
};
Kr = new WeakMap(), c(jf, "TextHighlighter");
let Wy = jf;
var rd, nd, Vn, Ri, ni, Gr, ou, J1, Oc, t0, e0;
const Ji = class Ji {
  constructor({
    pdfPage: t,
    highlighter: i = null,
    accessibilityManager: r = null,
    enablePermissions: n = !1,
    onAppend: s = null
  }) {
    T(this, ou);
    T(this, rd, !1);
    T(this, nd, null);
    T(this, Vn, !1);
    T(this, Ri, null);
    this.pdfPage = t, this.highlighter = i, this.accessibilityManager = r, E(this, rd, n === !0), E(this, nd, s), this.div = document.createElement("div"), this.div.tabIndex = 0, this.div.className = "textLayer";
  }
  async render(t, i = null) {
    var a, l, d, h, w;
    if (u(this, Vn) && u(this, Ri)) {
      u(this, Ri).update({
        viewport: t,
        onBefore: this.hide.bind(this)
      }), this.show();
      return;
    }
    this.cancel(), E(this, Ri, new r3({
      textContentSource: this.pdfPage.streamTextContent(i || {
        includeMarkedContent: !0,
        disableNormalization: !0
      }),
      container: this.div,
      viewport: t
    }));
    const {
      textDivs: r,
      textContentItemsStr: n
    } = u(this, Ri);
    (a = this.highlighter) == null || a.setTextMapping(r, n), (l = this.accessibilityManager) == null || l.setTextMapping(r), await u(this, Ri).render(), E(this, Vn, !0);
    const s = document.createElement("div");
    s.className = "endOfContent", this.div.append(s), P(this, ou, J1).call(this, s), (d = u(this, nd)) == null || d.call(this, this.div), (h = this.highlighter) == null || h.enable(), (w = this.accessibilityManager) == null || w.enable();
  }
  hide() {
    var t;
    !this.div.hidden && u(this, Vn) && ((t = this.highlighter) == null || t.disable(), this.div.hidden = !0);
  }
  show() {
    var t;
    this.div.hidden && u(this, Vn) && (this.div.hidden = !1, (t = this.highlighter) == null || t.enable());
  }
  cancel() {
    var t, i, r, n;
    (t = u(this, Ri)) == null || t.cancel(), E(this, Ri, null), (i = this.highlighter) == null || i.disable(), (r = this.accessibilityManager) == null || r.disable(), P(n = Ji, Oc, t0).call(n, this.div);
  }
};
rd = new WeakMap(), nd = new WeakMap(), Vn = new WeakMap(), Ri = new WeakMap(), ni = new WeakMap(), Gr = new WeakMap(), ou = new WeakSet(), J1 = /* @__PURE__ */ c(function(t) {
  var r;
  const {
    div: i
  } = this;
  i.addEventListener("mousedown", (n) => {
    t.classList.add("active");
  }), i.addEventListener("copy", (n) => {
    if (!u(this, rd)) {
      const s = document.getSelection();
      n.clipboardData.setData("text/plain", Eh(e3(s.toString())));
    }
    n.preventDefault(), n.stopPropagation();
  }), u(Ji, ni).set(i, t), P(r = Ji, Oc, e0).call(r);
}, "#bindMouse"), Oc = new WeakSet(), t0 = /* @__PURE__ */ c(function(t) {
  var i;
  u(this, ni).delete(t), u(this, ni).size === 0 && ((i = u(this, Gr)) == null || i.abort(), E(this, Gr, null));
}, "#removeGlobalSelectionListener"), e0 = /* @__PURE__ */ c(function() {
  if (u(this, Gr))
    return;
  E(this, Gr, new AbortController());
  const {
    signal: t
  } = u(this, Gr), i = /* @__PURE__ */ c((s, a) => {
    a.append(s), s.style.width = "", s.style.height = "", s.classList.remove("active");
  }, "reset");
  document.addEventListener("pointerup", () => {
    u(this, ni).forEach(i);
  }, {
    signal: t
  });
  var r, n;
  document.addEventListener("selectionchange", () => {
    const s = document.getSelection();
    if (s.rangeCount === 0) {
      u(this, ni).forEach(i);
      return;
    }
    const a = /* @__PURE__ */ new Set();
    for (let f = 0; f < s.rangeCount; f++) {
      const b = s.getRangeAt(f);
      for (const g of u(this, ni).keys())
        !a.has(g) && b.intersectsNode(g) && a.add(g);
    }
    for (const [f, b] of u(this, ni))
      a.has(f) ? b.classList.add("active") : i(b, f);
    if (r ?? (r = getComputedStyle(u(this, ni).values().next().value).getPropertyValue("-moz-user-select") === "none"), r)
      return;
    const l = s.getRangeAt(0), d = n && (l.compareBoundaryPoints(Range.END_TO_END, n) === 0 || l.compareBoundaryPoints(Range.START_TO_END, n) === 0);
    let h = d ? l.startContainer : l.endContainer;
    h.nodeType === Node.TEXT_NODE && (h = h.parentNode);
    const w = h.parentElement.closest(".textLayer"), m = u(this, ni).get(w);
    m && (m.style.width = w.style.width, m.style.height = w.style.height, h.parentElement.insertBefore(m, d ? h : h.nextSibling)), n = l.cloneRange();
  }, {
    signal: t
  });
}, "#enableGlobalSelectionListener"), T(Ji, Oc), c(Ji, "TextLayerBuilder"), T(Ji, ni, /* @__PURE__ */ new Map()), T(Ji, Gr, null);
let Rh = Ji;
const Wf = class Wf {
  constructor({
    pdfPage: t,
    annotationStorage: i = null,
    linkService: r,
    xfaHtml: n = null
  }) {
    this.pdfPage = t, this.annotationStorage = i, this.linkService = r, this.xfaHtml = n, this.div = null, this._cancelled = !1;
  }
  async render(t, i = "display") {
    if (i === "print") {
      const s = {
        viewport: t.clone({
          dontFlip: !0
        }),
        div: this.div,
        xfaHtml: this.xfaHtml,
        annotationStorage: this.annotationStorage,
        linkService: this.linkService,
        intent: i
      };
      return this.div = document.createElement("div"), s.div = this.div, gp.render(s);
    }
    const r = await this.pdfPage.getXfa();
    if (this._cancelled || !r)
      return {
        textDivs: []
      };
    const n = {
      viewport: t.clone({
        dontFlip: !0
      }),
      div: this.div,
      xfaHtml: r,
      annotationStorage: this.annotationStorage,
      linkService: this.linkService,
      intent: i
    };
    return this.div ? gp.update(n) : (this.div = document.createElement("div"), n.div = this.div, gp.render(n));
  }
  cancel() {
    this._cancelled = !0;
  }
  hide() {
    this.div && (this.div.hidden = !0);
  }
};
c(Wf, "XfaLayerBuilder");
let Ih = Wf;
const Z3 = {
  annotationEditorUIManager: null,
  annotationStorage: null,
  downloadManager: null,
  enableScripting: !1,
  fieldObjectsPromise: null,
  findController: null,
  hasJSActionsPromise: null,
  get linkService() {
    return new Ll();
  }
}, Y3 = /* @__PURE__ */ new Map([["canvasWrapper", 0], ["textLayer", 1], ["annotationLayer", 2], ["annotationEditorLayer", 3], ["xfaLayer", 3]]);
var Hn, od, Bn, sd, Zr, Yr, ad, Un, pa, ya, nr, jn, Xr, yt, Mo, Zd, sl, qy, Qy, Ky, Gy, Zy, i0, r0, Yy;
const qf = class qf {
  constructor(t) {
    T(this, yt);
    T(this, Hn, ar.ENABLE_FORMS);
    T(this, od, !1);
    T(this, Bn, !1);
    T(this, sd, !1);
    T(this, Zr, null);
    T(this, Yr, null);
    T(this, ad, null);
    T(this, Un, null);
    T(this, pa, Ht.INITIAL);
    T(this, ya, Di.ENABLE);
    T(this, nr, {
      directDrawing: !0,
      initialOptionalContent: !0,
      regularAnnotations: !0
    });
    T(this, jn, /* @__PURE__ */ new WeakMap());
    T(this, Xr, [null, null, null, null]);
    var s;
    const i = t.container, r = t.defaultViewport;
    this.id = t.id, this.renderingId = "page" + this.id, E(this, Zr, t.layerProperties || Z3), this.pdfPage = null, this.pageLabel = null, this.rotation = 0, this.scale = t.scale || S1, this.viewport = r, this.pdfPageRotate = r.rotation, this._optionalContentConfigPromise = t.optionalContentConfigPromise || null, E(this, ya, t.textLayerMode ?? Di.ENABLE), E(this, Hn, t.annotationMode ?? ar.ENABLE_FORMS), this.imageResourcesPath = t.imageResourcesPath || "", this.maxCanvasPixels = t.maxCanvasPixels ?? Tl.get("maxCanvasPixels"), this.pageColors = t.pageColors || null, E(this, od, t.enableHWA || !1), this.eventBus = t.eventBus, this.renderingQueue = t.renderingQueue, this.l10n = t.l10n, this.l10n || (this.l10n = new Tc()), this.renderTask = null, this.resume = null, this._isStandalone = !((s = this.renderingQueue) != null && s.hasViewer()), this._container = i, this._annotationCanvasMap = null, this.annotationLayer = null, this.annotationEditorLayer = null, this.textLayer = null, this.zoomLayer = null, this.xfaLayer = null, this.structTreeLayer = null, this.drawLayer = null;
    const n = document.createElement("div");
    if (n.className = "page", n.setAttribute("data-page-number", this.id), n.setAttribute("role", "region"), n.setAttribute("data-l10n-id", "pdfjs-page-landmark"), n.setAttribute("data-l10n-args", JSON.stringify({
      page: this.id
    })), this.div = n, P(this, yt, Zd).call(this), i == null || i.append(n), this._isStandalone) {
      i == null || i.style.setProperty("--scale-factor", this.scale * tr.PDF_TO_CSS_UNITS);
      const {
        optionalContentConfigPromise: a
      } = t;
      a && a.then((l) => {
        a === this._optionalContentConfigPromise && (u(this, nr).initialOptionalContent = l.hasInitialVisibility);
      }), t.l10n || this.l10n.translate(this.div);
    }
  }
  get renderingState() {
    return u(this, pa);
  }
  set renderingState(t) {
    if (t !== u(this, pa))
      switch (E(this, pa, t), u(this, Yr) && (clearTimeout(u(this, Yr)), E(this, Yr, null)), t) {
        case Ht.PAUSED:
          this.div.classList.remove("loading");
          break;
        case Ht.RUNNING:
          this.div.classList.add("loadingIcon"), E(this, Yr, setTimeout(() => {
            this.div.classList.add("loading"), E(this, Yr, null);
          }, 0));
          break;
        case Ht.INITIAL:
        case Ht.FINISHED:
          this.div.classList.remove("loadingIcon", "loading");
          break;
      }
  }
  setPdfPage(t) {
    var r, n, s, a;
    this._isStandalone && (((r = this.pageColors) == null ? void 0 : r.foreground) === "CanvasText" || ((n = this.pageColors) == null ? void 0 : n.background) === "Canvas") && ((s = this._container) == null || s.style.setProperty("--hcm-highlight-filter", t.filterFactory.addHighlightHCMFilter("highlight", "CanvasText", "Canvas", "HighlightText", "Highlight")), (a = this._container) == null || a.style.setProperty("--hcm-highlight-selected-filter", t.filterFactory.addHighlightHCMFilter("highlight_selected", "CanvasText", "Canvas", "HighlightText", "Highlight"))), this.pdfPage = t, this.pdfPageRotate = t.rotate;
    const i = (this.rotation + this.pdfPageRotate) % 360;
    this.viewport = t.getViewport({
      scale: this.scale * tr.PDF_TO_CSS_UNITS,
      rotation: i
    }), P(this, yt, Zd).call(this), this.reset();
  }
  destroy() {
    var t;
    this.reset(), (t = this.pdfPage) == null || t.cleanup();
  }
  hasEditableAnnotations() {
    var t;
    return !!((t = this.annotationLayer) != null && t.hasEditableAnnotations());
  }
  get _textHighlighter() {
    return Ph(this, "_textHighlighter", new Wy({
      pageIndex: this.id - 1,
      eventBus: this.eventBus,
      findController: u(this, Zr).findController
    }));
  }
  _resetZoomLayer(t = !1) {
    if (!this.zoomLayer)
      return;
    const i = this.zoomLayer.firstChild;
    u(this, jn).delete(i), i.width = 0, i.height = 0, t && this.zoomLayer.remove(), this.zoomLayer = null;
  }
  reset({
    keepZoomLayer: t = !1,
    keepAnnotationLayer: i = !1,
    keepAnnotationEditorLayer: r = !1,
    keepXfaLayer: n = !1,
    keepTextLayer: s = !1
  } = {}) {
    var b, g, $, O, k;
    this.cancelRendering({
      keepAnnotationLayer: i,
      keepAnnotationEditorLayer: r,
      keepXfaLayer: n,
      keepTextLayer: s
    }), this.renderingState = Ht.INITIAL;
    const a = this.div, l = a.childNodes, d = t && this.zoomLayer || null, h = i && ((b = this.annotationLayer) == null ? void 0 : b.div) || null, w = r && ((g = this.annotationEditorLayer) == null ? void 0 : g.div) || null, m = n && (($ = this.xfaLayer) == null ? void 0 : $.div) || null, f = s && ((O = this.textLayer) == null ? void 0 : O.div) || null;
    for (let S = l.length - 1; S >= 0; S--) {
      const _ = l[S];
      switch (_) {
        case d:
        case h:
        case w:
        case m:
        case f:
          continue;
      }
      _.remove();
      const V = u(this, Xr).indexOf(_);
      V >= 0 && (u(this, Xr)[V] = null);
    }
    a.removeAttribute("data-loaded"), h && this.annotationLayer.hide(), w && this.annotationEditorLayer.hide(), m && this.xfaLayer.hide(), f && this.textLayer.hide(), (k = this.structTreeLayer) == null || k.hide(), d || (this.canvas && (u(this, jn).delete(this.canvas), this.canvas.width = 0, this.canvas.height = 0, delete this.canvas), this._resetZoomLayer());
  }
  toggleEditingMode(t) {
    this.hasEditableAnnotations() && (E(this, sd, t), this.reset({
      keepZoomLayer: !0,
      keepAnnotationLayer: !0,
      keepAnnotationEditorLayer: !0,
      keepXfaLayer: !0,
      keepTextLayer: !0
    }));
  }
  update({
    scale: t = 0,
    rotation: i = null,
    optionalContentConfigPromise: r = null,
    drawingDelay: n = -1
  }) {
    var a;
    this.scale = t || this.scale, typeof i == "number" && (this.rotation = i), r instanceof Promise && (this._optionalContentConfigPromise = r, r.then((l) => {
      r === this._optionalContentConfigPromise && (u(this, nr).initialOptionalContent = l.hasInitialVisibility);
    })), u(this, nr).directDrawing = !0;
    const s = (this.rotation + this.pdfPageRotate) % 360;
    if (this.viewport = this.viewport.clone({
      scale: this.scale * tr.PDF_TO_CSS_UNITS,
      rotation: s
    }), P(this, yt, Zd).call(this), this._isStandalone && ((a = this._container) == null || a.style.setProperty("--scale-factor", this.viewport.scale)), this.canvas) {
      let l = !1;
      if (u(this, Bn)) {
        if (this.maxCanvasPixels === 0)
          l = !0;
        else if (this.maxCanvasPixels > 0) {
          const {
            width: h,
            height: w
          } = this.viewport, {
            sx: m,
            sy: f
          } = this.outputScale;
          l = (Math.floor(h) * m | 0) * (Math.floor(w) * f | 0) > this.maxCanvasPixels;
        }
      }
      const d = n >= 0 && n < 1e3;
      if (d || l) {
        if (d && !l && this.renderingState !== Ht.FINISHED && (this.cancelRendering({
          keepZoomLayer: !0,
          keepAnnotationLayer: !0,
          keepAnnotationEditorLayer: !0,
          keepXfaLayer: !0,
          keepTextLayer: !0,
          cancelExtraDelay: n
        }), this.renderingState = Ht.FINISHED, u(this, nr).directDrawing = !1), this.cssTransform({
          target: this.canvas,
          redrawAnnotationLayer: !0,
          redrawAnnotationEditorLayer: !0,
          redrawXfaLayer: !0,
          redrawTextLayer: !d,
          hideTextLayer: d
        }), d)
          return;
        this.eventBus.dispatch("pagerendered", {
          source: this,
          pageNumber: this.id,
          cssTransform: !0,
          timestamp: performance.now(),
          error: u(this, Un)
        });
        return;
      }
      !this.zoomLayer && !this.canvas.hidden && (this.zoomLayer = this.canvas.parentNode, this.zoomLayer.style.position = "absolute");
    }
    this.zoomLayer && this.cssTransform({
      target: this.zoomLayer.firstChild
    }), this.reset({
      keepZoomLayer: !0,
      keepAnnotationLayer: !0,
      keepAnnotationEditorLayer: !0,
      keepXfaLayer: !0,
      keepTextLayer: !0
    });
  }
  cancelRendering({
    keepAnnotationLayer: t = !1,
    keepAnnotationEditorLayer: i = !1,
    keepXfaLayer: r = !1,
    keepTextLayer: n = !1,
    cancelExtraDelay: s = 0
  } = {}) {
    var a;
    this.renderTask && (this.renderTask.cancel(s), this.renderTask = null), this.resume = null, this.textLayer && (!n || !this.textLayer.div) && (this.textLayer.cancel(), this.textLayer = null), this.structTreeLayer && !this.textLayer && (this.structTreeLayer = null), this.annotationLayer && (!t || !this.annotationLayer.div) && (this.annotationLayer.cancel(), this.annotationLayer = null, this._annotationCanvasMap = null), this.annotationEditorLayer && (!i || !this.annotationEditorLayer.div) && (this.drawLayer && (this.drawLayer.cancel(), this.drawLayer = null), this.annotationEditorLayer.cancel(), this.annotationEditorLayer = null), this.xfaLayer && (!r || !this.xfaLayer.div) && (this.xfaLayer.cancel(), this.xfaLayer = null, (a = this._textHighlighter) == null || a.disable());
  }
  cssTransform({
    target: t,
    redrawAnnotationLayer: i = !1,
    redrawAnnotationEditorLayer: r = !1,
    redrawXfaLayer: n = !1,
    redrawTextLayer: s = !1,
    hideTextLayer: a = !1
  }) {
    var d;
    if (!t.hasAttribute("zooming")) {
      t.setAttribute("zooming", !0);
      const {
        style: h
      } = t;
      h.width = h.height = "";
    }
    const l = u(this, jn).get(t);
    if (this.viewport !== l) {
      const h = this.viewport.rotation - l.rotation, w = Math.abs(h);
      let m = 1, f = 1;
      if (w === 90 || w === 270) {
        const {
          width: b,
          height: g
        } = this.viewport;
        m = g / b, f = b / g;
      }
      t.style.transform = `rotate(${h}deg) scale(${m}, ${f})`;
    }
    i && this.annotationLayer && P(this, yt, qy).call(this), r && this.annotationEditorLayer && (this.drawLayer && P(this, yt, Ky).call(this), P(this, yt, Qy).call(this)), n && this.xfaLayer && P(this, yt, Gy).call(this), this.textLayer && (a ? (this.textLayer.hide(), (d = this.structTreeLayer) == null || d.hide()) : s && P(this, yt, Zy).call(this));
  }
  get width() {
    return this.viewport.width;
  }
  get height() {
    return this.viewport.height;
  }
  getPagePoint(t, i) {
    return this.viewport.convertToPdfPoint(t, i);
  }
  async draw() {
    this.renderingState !== Ht.INITIAL && (console.error("Must be in new state before drawing"), this.reset());
    const {
      div: t,
      l10n: i,
      pageColors: r,
      pdfPage: n,
      viewport: s
    } = this;
    if (!n)
      throw this.renderingState = Ht.FINISHED, new Error("pdfPage is not loaded");
    this.renderingState = Ht.RUNNING;
    const a = document.createElement("div");
    if (a.classList.add("canvasWrapper"), P(this, yt, Mo).call(this, a, "canvasWrapper"), !this.textLayer && u(this, ya) !== Di.DISABLE && !n.isPureXfa && (this._accessibilityManager || (this._accessibilityManager = new Uy()), this.textLayer = new Rh({
      pdfPage: n,
      highlighter: this._textHighlighter,
      accessibilityManager: this._accessibilityManager,
      enablePermissions: u(this, ya) === Di.ENABLE_PERMISSIONS,
      onAppend: /* @__PURE__ */ c((D) => {
        this.l10n.pause(), P(this, yt, Mo).call(this, D, "textLayer"), this.l10n.resume();
      }, "onAppend")
    })), !this.annotationLayer && u(this, Hn) !== ar.DISABLE) {
      const {
        annotationStorage: D,
        annotationEditorUIManager: z,
        downloadManager: F,
        enableScripting: A,
        fieldObjectsPromise: N,
        hasJSActionsPromise: G,
        linkService: et
      } = u(this, Zr);
      this._annotationCanvasMap || (this._annotationCanvasMap = /* @__PURE__ */ new Map()), this.annotationLayer = new Sh({
        pdfPage: n,
        annotationStorage: D,
        imageResourcesPath: this.imageResourcesPath,
        renderForms: u(this, Hn) === ar.ENABLE_FORMS,
        linkService: et,
        downloadManager: F,
        enableScripting: A,
        hasJSActionsPromise: G,
        fieldObjectsPromise: N,
        annotationCanvasMap: this._annotationCanvasMap,
        accessibilityManager: this._accessibilityManager,
        annotationEditorUIManager: z,
        onAppend: /* @__PURE__ */ c((lt) => {
          P(this, yt, Mo).call(this, lt, "annotationLayer");
        }, "onAppend")
      });
    }
    const l = /* @__PURE__ */ c((D) => {
      if (f == null || f(!1), this.renderingQueue && !this.renderingQueue.isHighestPriority(this)) {
        this.renderingState = Ht.PAUSED, this.resume = () => {
          this.renderingState = Ht.RUNNING, D();
        };
        return;
      }
      D();
    }, "renderContinueCallback"), {
      width: d,
      height: h
    } = s, w = document.createElement("canvas");
    w.setAttribute("role", "presentation"), w.hidden = !0;
    const m = !!(r != null && r.background && (r != null && r.foreground));
    let f = /* @__PURE__ */ c((D) => {
      (!m || D) && (w.hidden = !1, f = null);
    }, "showCanvas");
    a.append(w), this.canvas = w;
    const b = w.getContext("2d", {
      alpha: !1,
      willReadFrequently: !u(this, od)
    }), g = this.outputScale = new hy();
    if (this.maxCanvasPixels === 0) {
      const D = 1 / this.scale;
      g.sx *= D, g.sy *= D, E(this, Bn, !0);
    } else if (this.maxCanvasPixels > 0) {
      const D = d * h, z = Math.sqrt(this.maxCanvasPixels / D);
      g.sx > z || g.sy > z ? (g.sx = z, g.sy = z, E(this, Bn, !0)) : E(this, Bn, !1);
    }
    const $ = Xm(g.sx), O = Xm(g.sy);
    w.width = Fd(d * g.sx, $[0]), w.height = Fd(h * g.sy, O[0]);
    const {
      style: k
    } = w;
    k.width = Fd(d, $[1]) + "px", k.height = Fd(h, O[1]) + "px", u(this, jn).set(w, s);
    const S = g.scaled ? [g.sx, 0, 0, g.sy, 0, 0] : null, _ = {
      canvasContext: b,
      transform: S,
      viewport: s,
      annotationMode: u(this, Hn),
      optionalContentConfigPromise: this._optionalContentConfigPromise,
      annotationCanvasMap: this._annotationCanvasMap,
      pageColors: r,
      isEditing: u(this, sd)
    }, V = this.renderTask = n.render(_);
    V.onContinue = l;
    const I = V.promise.then(async () => {
      var z;
      f == null || f(!0), await P(this, yt, Yy).call(this, V), P(this, yt, Zy).call(this), this.annotationLayer && await P(this, yt, qy).call(this);
      const {
        annotationEditorUIManager: D
      } = u(this, Zr);
      D && (this.drawLayer || (this.drawLayer = new Vy({
        pageIndex: this.id
      })), await P(this, yt, Ky).call(this), this.drawLayer.setParent(a), this.annotationEditorLayer || (this.annotationEditorLayer = new Fy({
        uiManager: D,
        pdfPage: n,
        l10n: i,
        accessibilityManager: this._accessibilityManager,
        annotationLayer: (z = this.annotationLayer) == null ? void 0 : z.annotationLayer,
        textLayer: this.textLayer,
        drawLayer: this.drawLayer.getDrawLayer(),
        onAppend: /* @__PURE__ */ c((F) => {
          P(this, yt, Mo).call(this, F, "annotationEditorLayer");
        }, "onAppend")
      })), P(this, yt, Qy).call(this));
    }, (D) => (D instanceof xy || f == null || f(!0), P(this, yt, Yy).call(this, V, D)));
    if (n.isPureXfa) {
      if (!this.xfaLayer) {
        const {
          annotationStorage: D,
          linkService: z
        } = u(this, Zr);
        this.xfaLayer = new Ih({
          pdfPage: n,
          annotationStorage: D,
          linkService: z
        });
      }
      P(this, yt, Gy).call(this);
    }
    return t.setAttribute("data-loaded", !0), this.eventBus.dispatch("pagerender", {
      source: this,
      pageNumber: this.id
    }), I;
  }
  setPageLabel(t) {
    this.pageLabel = typeof t == "string" ? t : null, this.div.setAttribute("data-l10n-args", JSON.stringify({
      page: this.pageLabel ?? this.id
    })), this.pageLabel !== null ? this.div.setAttribute("data-page-label", this.pageLabel) : this.div.removeAttribute("data-page-label");
  }
  get thumbnailCanvas() {
    const {
      directDrawing: t,
      initialOptionalContent: i,
      regularAnnotations: r
    } = u(this, nr);
    return t && i && r ? this.canvas : null;
  }
};
Hn = new WeakMap(), od = new WeakMap(), Bn = new WeakMap(), sd = new WeakMap(), Zr = new WeakMap(), Yr = new WeakMap(), ad = new WeakMap(), Un = new WeakMap(), pa = new WeakMap(), ya = new WeakMap(), nr = new WeakMap(), jn = new WeakMap(), Xr = new WeakMap(), yt = new WeakSet(), Mo = /* @__PURE__ */ c(function(t, i) {
  const r = Y3.get(i), n = u(this, Xr)[r];
  if (u(this, Xr)[r] = t, n) {
    n.replaceWith(t);
    return;
  }
  for (let s = r - 1; s >= 0; s--) {
    const a = u(this, Xr)[s];
    if (a) {
      a.after(t);
      return;
    }
  }
  this.div.prepend(t);
}, "#addLayer"), Zd = /* @__PURE__ */ c(function() {
  const {
    viewport: t
  } = this;
  if (this.pdfPage) {
    if (u(this, ad) === t.rotation)
      return;
    E(this, ad, t.rotation);
  }
  i3(this.div, t, !0, !1);
}, "#setDimensions"), sl = /* @__PURE__ */ c(function(t, i) {
  this.eventBus.dispatch(t, {
    source: this,
    pageNumber: this.id,
    error: i
  });
}, "#dispatchLayerRendered"), qy = /* @__PURE__ */ c(async function() {
  let t = null;
  try {
    await this.annotationLayer.render(this.viewport, "display");
  } catch (i) {
    console.error(`#renderAnnotationLayer: "${i}".`), t = i;
  } finally {
    P(this, yt, sl).call(this, "annotationlayerrendered", t);
  }
}, "#renderAnnotationLayer"), Qy = /* @__PURE__ */ c(async function() {
  let t = null;
  try {
    await this.annotationEditorLayer.render(this.viewport, "display");
  } catch (i) {
    console.error(`#renderAnnotationEditorLayer: "${i}".`), t = i;
  } finally {
    P(this, yt, sl).call(this, "annotationeditorlayerrendered", t);
  }
}, "#renderAnnotationEditorLayer"), Ky = /* @__PURE__ */ c(async function() {
  try {
    await this.drawLayer.render("display");
  } catch (t) {
    console.error(`#renderDrawLayer: "${t}".`);
  }
}, "#renderDrawLayer"), Gy = /* @__PURE__ */ c(async function() {
  var i;
  let t = null;
  try {
    const r = await this.xfaLayer.render(this.viewport, "display");
    r != null && r.textDivs && this._textHighlighter && P(this, yt, r0).call(this, r.textDivs);
  } catch (r) {
    console.error(`#renderXfaLayer: "${r}".`), t = r;
  } finally {
    (i = this.xfaLayer) != null && i.div && (this.l10n.pause(), P(this, yt, Mo).call(this, this.xfaLayer.div, "xfaLayer"), this.l10n.resume()), P(this, yt, sl).call(this, "xfalayerrendered", t);
  }
}, "#renderXfaLayer"), Zy = /* @__PURE__ */ c(async function() {
  if (!this.textLayer)
    return;
  let t = null;
  try {
    await this.textLayer.render(this.viewport);
  } catch (i) {
    if (i instanceof Q9)
      return;
    console.error(`#renderTextLayer: "${i}".`), t = i;
  }
  P(this, yt, sl).call(this, "textlayerrendered", t), P(this, yt, i0).call(this);
}, "#renderTextLayer"), i0 = /* @__PURE__ */ c(async function() {
  var r, n, s;
  if (!this.textLayer)
    return;
  this.structTreeLayer || (this.structTreeLayer = new zh());
  const t = await (this.structTreeLayer.renderingDone ? null : this.pdfPage.getStructTree()), i = (r = this.structTreeLayer) == null ? void 0 : r.render(t);
  i && (this.l10n.pause(), (n = this.canvas) == null || n.append(i), this.l10n.resume()), (s = this.structTreeLayer) == null || s.show();
}, "#renderStructTreeLayer"), r0 = /* @__PURE__ */ c(async function(t) {
  const i = await this.pdfPage.getTextContent(), r = [];
  for (const n of i.items)
    r.push(n.str);
  this._textHighlighter.setTextMapping(t, r), this._textHighlighter.enable();
}, "#buildXfaTextContentItems"), Yy = /* @__PURE__ */ c(async function(t, i = null) {
  if (t === this.renderTask && (this.renderTask = null), i instanceof xy) {
    E(this, Un, null);
    return;
  }
  if (E(this, Un, i), this.renderingState = Ht.FINISHED, this._resetZoomLayer(!0), u(this, nr).regularAnnotations = !t.separateAnnots, this.eventBus.dispatch("pagerendered", {
    source: this,
    pageNumber: this.id,
    cssTransform: !1,
    timestamp: performance.now(),
    error: u(this, Un)
  }), i)
    throw i;
}, "#finishRenderTask"), c(qf, "PDFPageView");
let Oh = qf;
async function X3(o) {
  const t = "", i = t.split("#", 1)[0];
  let {
    info: r,
    metadata: n,
    contentDispositionFilename: s,
    contentLength: a
  } = await o.getMetadata();
  if (!a) {
    const {
      length: l
    } = await o.getDownloadInfo();
    a = l;
  }
  return {
    ...r,
    baseURL: i,
    filesize: a,
    filename: s || J9(t),
    metadata: n == null ? void 0 : n.getRaw(),
    authors: n == null ? void 0 : n.get("dc:creator"),
    numPages: o.numPages,
    URL: t
  };
}
c(X3, "docProperties");
const Qf = class Qf {
  constructor(t) {
    this._ready = new Promise((i, r) => {
      import(
        /* webpackIgnore: true */
        /* @vite-ignore */
        new URL(
          /*webpackIgnore: true*/
          t,
          typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url
        ).href
      ).then((s) => {
        i(s.QuickJSSandbox());
      }).catch(r);
    });
  }
  async createSandbox(t) {
    (await this._ready).create(t);
  }
  async dispatchEventInSandbox(t) {
    const i = await this._ready;
    setTimeout(() => i.dispatchEvent(t), 0);
  }
  async destroySandbox() {
    (await this._ready).nukeSandbox();
  }
};
c(Qf, "GenericScripting");
let Xy = Qf;
var Ii, Wn, cd, qn, Qn, ld, De, or, wa, se, oi, pe, n0, Yd, tw, o0, al;
const Kf = class Kf {
  constructor({
    eventBus: t,
    externalServices: i = null,
    docProperties: r = null
  }) {
    T(this, pe);
    T(this, Ii, null);
    T(this, Wn, null);
    T(this, cd, null);
    T(this, qn, null);
    T(this, Qn, null);
    T(this, ld, null);
    T(this, De, null);
    T(this, or, null);
    T(this, wa, !1);
    T(this, se, null);
    T(this, oi, null);
    E(this, Qn, t), E(this, ld, i), E(this, cd, r);
  }
  setViewer(t) {
    E(this, or, t);
  }
  async setDocument(t) {
    var l;
    if (u(this, De) && await P(this, pe, al).call(this), E(this, De, t), !t)
      return;
    const [i, r, n] = await Promise.all([t.getFieldObjects(), t.getCalculationOrderIds(), t.getJSActions()]);
    if (!i && !n) {
      await P(this, pe, al).call(this);
      return;
    }
    if (t !== u(this, De))
      return;
    try {
      E(this, se, P(this, pe, o0).call(this));
    } catch (d) {
      console.error(`setDocument: "${d.message}".`), await P(this, pe, al).call(this);
      return;
    }
    const s = u(this, Qn);
    E(this, qn, new AbortController());
    const {
      signal: a
    } = u(this, qn);
    s._on("updatefromsandbox", (d) => {
      (d == null ? void 0 : d.source) === window && P(this, pe, n0).call(this, d.detail);
    }, {
      signal: a
    }), s._on("dispatcheventinsandbox", (d) => {
      var h;
      (h = u(this, se)) == null || h.dispatchEventInSandbox(d.detail);
    }, {
      signal: a
    }), s._on("pagechanging", ({
      pageNumber: d,
      previous: h
    }) => {
      d !== h && (P(this, pe, tw).call(this, h), P(this, pe, Yd).call(this, d));
    }, {
      signal: a
    }), s._on("pagerendered", ({
      pageNumber: d
    }) => {
      this._pageOpenPending.has(d) && d === u(this, or).currentPageNumber && P(this, pe, Yd).call(this, d);
    }, {
      signal: a
    }), s._on("pagesdestroy", async () => {
      var d, h;
      await P(this, pe, tw).call(this, u(this, or).currentPageNumber), await ((d = u(this, se)) == null ? void 0 : d.dispatchEventInSandbox({
        id: "doc",
        name: "WillClose"
      })), (h = u(this, Ii)) == null || h.resolve();
    }, {
      signal: a
    });
    try {
      const d = await u(this, cd).call(this, t);
      if (t !== u(this, De))
        return;
      await u(this, se).createSandbox({
        objects: i,
        calculationOrder: r,
        appInfo: {
          platform: navigator.platform,
          language: navigator.language
        },
        docInfo: {
          ...d,
          actions: n
        }
      }), s.dispatch("sandboxcreated", {
        source: this
      });
    } catch (d) {
      console.error(`setDocument: "${d.message}".`), await P(this, pe, al).call(this);
      return;
    }
    await ((l = u(this, se)) == null ? void 0 : l.dispatchEventInSandbox({
      id: "doc",
      name: "Open"
    })), await P(this, pe, Yd).call(this, u(this, or).currentPageNumber, !0), Promise.resolve().then(() => {
      t === u(this, De) && E(this, wa, !0);
    });
  }
  async dispatchWillSave() {
    var t;
    return (t = u(this, se)) == null ? void 0 : t.dispatchEventInSandbox({
      id: "doc",
      name: "WillSave"
    });
  }
  async dispatchDidSave() {
    var t;
    return (t = u(this, se)) == null ? void 0 : t.dispatchEventInSandbox({
      id: "doc",
      name: "DidSave"
    });
  }
  async dispatchWillPrint() {
    var t;
    if (u(this, se)) {
      await ((t = u(this, oi)) == null ? void 0 : t.promise), E(this, oi, Promise.withResolvers());
      try {
        await u(this, se).dispatchEventInSandbox({
          id: "doc",
          name: "WillPrint"
        });
      } catch (i) {
        throw u(this, oi).resolve(), E(this, oi, null), i;
      }
      await u(this, oi).promise;
    }
  }
  async dispatchDidPrint() {
    var t;
    return (t = u(this, se)) == null ? void 0 : t.dispatchEventInSandbox({
      id: "doc",
      name: "DidPrint"
    });
  }
  get destroyPromise() {
    var t;
    return ((t = u(this, Wn)) == null ? void 0 : t.promise) || null;
  }
  get ready() {
    return u(this, wa);
  }
  get _pageOpenPending() {
    return Ph(this, "_pageOpenPending", /* @__PURE__ */ new Set());
  }
  get _visitedPages() {
    return Ph(this, "_visitedPages", /* @__PURE__ */ new Map());
  }
};
Ii = new WeakMap(), Wn = new WeakMap(), cd = new WeakMap(), qn = new WeakMap(), Qn = new WeakMap(), ld = new WeakMap(), De = new WeakMap(), or = new WeakMap(), wa = new WeakMap(), se = new WeakMap(), oi = new WeakMap(), pe = new WeakSet(), n0 = /* @__PURE__ */ c(async function(t) {
  var h, w;
  const i = u(this, or), r = i.isInPresentationMode || i.isChangingPresentationMode, {
    id: n,
    siblings: s,
    command: a,
    value: l
  } = t;
  if (!n) {
    switch (a) {
      case "clear":
        console.clear();
        break;
      case "error":
        console.error(l);
        break;
      case "layout":
        if (!r) {
          const m = $9(l);
          i.spreadMode = m.spreadMode;
        }
        break;
      case "page-num":
        i.currentPageNumber = l + 1;
        break;
      case "print":
        await i.pagesPromise, u(this, Qn).dispatch("print", {
          source: this
        });
        break;
      case "println":
        console.log(l);
        break;
      case "zoom":
        r || (i.currentScaleValue = l);
        break;
      case "SaveAs":
        u(this, Qn).dispatch("download", {
          source: this
        });
        break;
      case "FirstPage":
        i.currentPageNumber = 1;
        break;
      case "LastPage":
        i.currentPageNumber = i.pagesCount;
        break;
      case "NextPage":
        i.nextPage();
        break;
      case "PrevPage":
        i.previousPage();
        break;
      case "ZoomViewIn":
        r || i.increaseScale();
        break;
      case "ZoomViewOut":
        r || i.decreaseScale();
        break;
      case "WillPrintFinished":
        (h = u(this, oi)) == null || h.resolve(), E(this, oi, null);
        break;
    }
    return;
  }
  if (r && t.focus)
    return;
  delete t.id, delete t.siblings;
  const d = s ? [n, ...s] : [n];
  for (const m of d) {
    const f = document.querySelector(`[data-element-id="${m}"]`);
    f ? f.dispatchEvent(new CustomEvent("updatefromsandbox", {
      detail: t
    })) : (w = u(this, De)) == null || w.annotationStorage.setValue(m, t);
  }
}, "#updateFromSandbox"), Yd = /* @__PURE__ */ c(async function(t, i = !1) {
  const r = u(this, De), n = this._visitedPages;
  if (i && E(this, Ii, Promise.withResolvers()), !u(this, Ii))
    return;
  const s = u(this, or).getPageView(t - 1);
  if ((s == null ? void 0 : s.renderingState) !== Ht.FINISHED) {
    this._pageOpenPending.add(t);
    return;
  }
  this._pageOpenPending.delete(t);
  const a = (async () => {
    var d, h;
    const l = await (n.has(t) ? null : (d = s.pdfPage) == null ? void 0 : d.getJSActions());
    r === u(this, De) && await ((h = u(this, se)) == null ? void 0 : h.dispatchEventInSandbox({
      id: "page",
      name: "PageOpen",
      pageNumber: t,
      actions: l
    }));
  })();
  n.set(t, a);
}, "#dispatchPageOpen"), tw = /* @__PURE__ */ c(async function(t) {
  var s;
  const i = u(this, De), r = this._visitedPages;
  if (!u(this, Ii) || this._pageOpenPending.has(t))
    return;
  const n = r.get(t);
  n && (r.set(t, null), await n, i === u(this, De) && await ((s = u(this, se)) == null ? void 0 : s.dispatchEventInSandbox({
    id: "page",
    name: "PageClose",
    pageNumber: t
  })));
}, "#dispatchPageClose"), o0 = /* @__PURE__ */ c(function() {
  if (E(this, Wn, Promise.withResolvers()), u(this, se))
    throw new Error("#initScripting: Scripting already exists.");
  return u(this, ld).createScripting();
}, "#initScripting"), al = /* @__PURE__ */ c(async function() {
  var t, i, r, n;
  if (!u(this, se)) {
    E(this, De, null), (t = u(this, Wn)) == null || t.resolve();
    return;
  }
  u(this, Ii) && (await Promise.race([u(this, Ii).promise, new Promise((s) => {
    setTimeout(s, 1e3);
  })]).catch(() => {
  }), E(this, Ii, null)), E(this, De, null);
  try {
    await u(this, se).destroySandbox();
  } catch {
  }
  (i = u(this, oi)) == null || i.reject(new Error("Scripting destroyed.")), E(this, oi, null), (r = u(this, qn)) == null || r.abort(), E(this, qn, null), this._pageOpenPending.clear(), this._visitedPages.clear(), E(this, se, null), E(this, wa, !1), (n = u(this, Wn)) == null || n.resolve();
}, "#destroyScripting"), c(Kf, "PDFScriptingManager");
let Jy = Kf;
const Gf = class Gf extends Jy {
  constructor(t) {
    t.externalServices || window.addEventListener("updatefromsandbox", (i) => {
      t.eventBus.dispatch("updatefromsandbox", {
        source: window,
        detail: i.detail
      });
    }), t.externalServices || (t.externalServices = {
      createScripting: /* @__PURE__ */ c(() => new Xy(t.sandboxBundleSrc), "createScripting")
    }), t.docProperties || (t.docProperties = (i) => X3(i)), super(t);
  }
};
c(Gf, "PDFScriptingManagerComponents");
let ew = Gf;
const J3 = 3e4, Zf = class Zf {
  constructor() {
    this.pdfViewer = null, this.pdfThumbnailViewer = null, this.onIdle = null, this.highestPriorityPage = null, this.idleTimeout = null, this.printing = !1, this.isThumbnailViewEnabled = !1, Object.defineProperty(this, "hasViewer", {
      value: /* @__PURE__ */ c(() => !!this.pdfViewer, "value")
    });
  }
  setViewer(t) {
    this.pdfViewer = t;
  }
  setThumbnailViewer(t) {
    this.pdfThumbnailViewer = t;
  }
  isHighestPriority(t) {
    return this.highestPriorityPage === t.renderingId;
  }
  renderHighestPriority(t) {
    var i;
    this.idleTimeout && (clearTimeout(this.idleTimeout), this.idleTimeout = null), !this.pdfViewer.forceRendering(t) && (this.isThumbnailViewEnabled && ((i = this.pdfThumbnailViewer) != null && i.forceRendering()) || this.printing || this.onIdle && (this.idleTimeout = setTimeout(this.onIdle.bind(this), J3)));
  }
  getHighestPriority(t, i, r, n = !1) {
    const s = t.views, a = s.length;
    if (a === 0)
      return null;
    for (let m = 0; m < a; m++) {
      const f = s[m].view;
      if (!this.isViewFinished(f))
        return f;
    }
    const l = t.first.id, d = t.last.id;
    if (d - l + 1 > a) {
      const m = t.ids;
      for (let f = 1, b = d - l; f < b; f++) {
        const g = r ? l + f : d - f;
        if (m.has(g))
          continue;
        const $ = i[g - 1];
        if (!this.isViewFinished($))
          return $;
      }
    }
    let h = r ? d : l - 2, w = i[h];
    return w && !this.isViewFinished(w) || n && (h += r ? 1 : -1, w = i[h], w && !this.isViewFinished(w)) ? w : null;
  }
  isViewFinished(t) {
    return t.renderingState === Ht.FINISHED;
  }
  renderView(t) {
    switch (t.renderingState) {
      case Ht.FINISHED:
        return !1;
      case Ht.PAUSED:
        this.highestPriorityPage = t.renderingId, t.resume();
        break;
      case Ht.RUNNING:
        this.highestPriorityPage = t.renderingId;
        break;
      case Ht.INITIAL:
        this.highestPriorityPage = t.renderingId, t.draw().finally(() => {
          this.renderHighestPriority();
        }).catch((i) => {
          i instanceof xy || console.error(`renderView: "${i}"`);
        });
        break;
    }
    return !0;
  }
};
c(Zf, "PDFRenderingQueue");
let iw = Zf;
const $v = 10, Bd = {
  FORCE_SCROLL_MODE_PAGE: 1e4,
  FORCE_LAZY_PAGE_INIT: 5e3,
  PAUSE_EAGER_PAGE_INIT: 250
};
function Ev(o) {
  return Object.values(wi).includes(o) && o !== wi.DISABLE;
}
c(Ev, "isValidAnnotationEditorMode");
var sr, Kn, dd, nw;
const Yf = class Yf {
  constructor(t) {
    T(this, dd);
    T(this, sr, /* @__PURE__ */ new Set());
    T(this, Kn, 0);
    E(this, Kn, t);
  }
  push(t) {
    const i = u(this, sr);
    i.has(t) && i.delete(t), i.add(t), i.size > u(this, Kn) && P(this, dd, nw).call(this);
  }
  resize(t, i = null) {
    E(this, Kn, t);
    const r = u(this, sr);
    if (i) {
      const n = r.size;
      let s = 1;
      for (const a of r)
        if (i.has(a.id) && (r.delete(a), r.add(a)), ++s > n)
          break;
    }
    for (; r.size > u(this, Kn); )
      P(this, dd, nw).call(this);
  }
  has(t) {
    return u(this, sr).has(t);
  }
  [Symbol.iterator]() {
    return u(this, sr).keys();
  }
};
sr = new WeakMap(), Kn = new WeakMap(), dd = new WeakSet(), nw = /* @__PURE__ */ c(function() {
  const t = u(this, sr).keys().next().value;
  t == null || t.destroy(), u(this, sr).delete(t);
}, "#destroyFirstView"), c(Yf, "PDFPageViewBuffer");
let rw = Yf;
var Jr, hd, ud, Oi, _e, Gn, pd, yd, wd, fd, md, tn, vd, en, Zn, fa, rn, ma, gd, va, Yn, nn, ga, ot, s0, a0, c0, cl, Xd, l0, ow, d0, Lr, sw, h0, u0, p0, aw, y0, Jd;
const Xf = class Xf {
  constructor(t) {
    T(this, ot);
    T(this, Jr, null);
    T(this, hd, null);
    T(this, ud, null);
    T(this, Oi, wi.NONE);
    T(this, _e, null);
    T(this, Gn, ar.ENABLE_FORMS);
    T(this, pd, null);
    T(this, yd, !1);
    T(this, wd, !1);
    T(this, fd, !1);
    T(this, md, !1);
    T(this, tn, null);
    T(this, vd, null);
    T(this, en, null);
    T(this, Zn, null);
    T(this, fa, !1);
    T(this, rn, null);
    T(this, ma, !1);
    T(this, gd, 0);
    T(this, va, new ResizeObserver(P(this, ot, y0).bind(this)));
    T(this, Yn, null);
    T(this, nn, null);
    T(this, ga, Di.ENABLE);
    var n, s;
    const i = "4.5.136";
    if (av !== i)
      throw new Error(`The API version "${av}" does not match the Viewer version "${i}".`);
    if (this.container = t.container, this.viewer = t.viewer || t.container.firstElementChild, ((n = this.container) == null ? void 0 : n.tagName) !== "DIV" || ((s = this.viewer) == null ? void 0 : s.tagName) !== "DIV")
      throw new Error("Invalid `container` and/or `viewer` option.");
    if (this.container.offsetParent && getComputedStyle(this.container).position !== "absolute")
      throw new Error("The `container` must be absolutely positioned.");
    u(this, va).observe(this.container), this.eventBus = t.eventBus, this.linkService = t.linkService || new Ll(), this.downloadManager = t.downloadManager || null, this.findController = t.findController || null, E(this, hd, t.altTextManager || null), this.findController && (this.findController.onIsPageVisible = (a) => this._getVisiblePages().ids.has(a)), this._scriptingManager = t.scriptingManager || null, E(this, ga, t.textLayerMode ?? Di.ENABLE), E(this, Gn, t.annotationMode ?? ar.ENABLE_FORMS), E(this, Oi, t.annotationEditorMode ?? wi.NONE), E(this, ud, t.annotationEditorHighlightColors || null), E(this, wd, t.enableHighlightFloatingButton === !0), E(this, md, t.enableUpdatedAddImage === !0), this.imageResourcesPath = t.imageResourcesPath || "", this.enablePrintAutoRotate = t.enablePrintAutoRotate || !1, this.removePageBorders = t.removePageBorders || !1, this.maxCanvasPixels = t.maxCanvasPixels, this.l10n = t.l10n, this.l10n || (this.l10n = new Tc()), E(this, fd, t.enablePermissions || !1), this.pageColors = t.pageColors || null, E(this, vd, t.mlManager || null), E(this, yd, t.enableHWA || !1), this.defaultRenderingQueue = !t.renderingQueue, this.defaultRenderingQueue ? (this.renderingQueue = new iw(), this.renderingQueue.setViewer(this)) : this.renderingQueue = t.renderingQueue;
    const {
      abortSignal: r
    } = t;
    r == null || r.addEventListener("abort", () => {
      u(this, va).disconnect(), E(this, va, null);
    }, {
      once: !0
    }), this.scroll = m9(this.container, this._scrollUpdate.bind(this), r), this.presentationModeState = Yo.UNKNOWN, this._resetView(), this.removePageBorders && this.viewer.classList.add("removePageBorders"), P(this, ot, aw).call(this), this.eventBus._on("thumbnailrendered", ({
      pageNumber: a,
      pdfPage: l
    }) => {
      const d = this._pages[a - 1];
      u(this, Jr).has(d) || l == null || l.cleanup();
    }), t.l10n || this.l10n.translate(this.container);
  }
  get pagesCount() {
    return this._pages.length;
  }
  getPageView(t) {
    return this._pages[t];
  }
  getCachedPageViews() {
    return new Set(u(this, Jr));
  }
  get pageViewsReady() {
    return this._pages.every((t) => t == null ? void 0 : t.pdfPage);
  }
  get renderForms() {
    return u(this, Gn) === ar.ENABLE_FORMS;
  }
  get enableScripting() {
    return !!this._scriptingManager;
  }
  get currentPageNumber() {
    return this._currentPageNumber;
  }
  set currentPageNumber(t) {
    if (!Number.isInteger(t))
      throw new Error("Invalid page number.");
    this.pdfDocument && (this._setCurrentPageNumber(t, !0) || console.error(`currentPageNumber: "${t}" is not a valid page.`));
  }
  _setCurrentPageNumber(t, i = !1) {
    var n;
    if (this._currentPageNumber === t)
      return i && P(this, ot, sw).call(this), !0;
    if (!(0 < t && t <= this.pagesCount))
      return !1;
    const r = this._currentPageNumber;
    return this._currentPageNumber = t, this.eventBus.dispatch("pagechanging", {
      source: this,
      pageNumber: t,
      pageLabel: ((n = this._pageLabels) == null ? void 0 : n[t - 1]) ?? null,
      previous: r
    }), i && P(this, ot, sw).call(this), !0;
  }
  get currentPageLabel() {
    var t;
    return ((t = this._pageLabels) == null ? void 0 : t[this._currentPageNumber - 1]) ?? null;
  }
  set currentPageLabel(t) {
    if (!this.pdfDocument)
      return;
    let i = t | 0;
    if (this._pageLabels) {
      const r = this._pageLabels.indexOf(t);
      r >= 0 && (i = r + 1);
    }
    this._setCurrentPageNumber(i, !0) || console.error(`currentPageLabel: "${t}" is not a valid page.`);
  }
  get currentScale() {
    return this._currentScale !== wp ? this._currentScale : S1;
  }
  set currentScale(t) {
    if (isNaN(t))
      throw new Error("Invalid numeric scale.");
    this.pdfDocument && P(this, ot, Lr).call(this, t, {
      noScroll: !1
    });
  }
  get currentScaleValue() {
    return this._currentScaleValue;
  }
  set currentScaleValue(t) {
    this.pdfDocument && P(this, ot, Lr).call(this, t, {
      noScroll: !1
    });
  }
  get pagesRotation() {
    return this._pagesRotation;
  }
  set pagesRotation(t) {
    if (!M1(t))
      throw new Error("Invalid pages rotation angle.");
    if (!this.pdfDocument || (t %= 360, t < 0 && (t += 360), this._pagesRotation === t))
      return;
    this._pagesRotation = t;
    const i = this._currentPageNumber;
    this.refresh(!0, {
      rotation: t
    }), this._currentScaleValue && P(this, ot, Lr).call(this, this._currentScaleValue, {
      noScroll: !0
    }), this.eventBus.dispatch("rotationchanging", {
      source: this,
      pagesRotation: t,
      pageNumber: i
    }), this.defaultRenderingQueue && this.update();
  }
  get firstPagePromise() {
    return this.pdfDocument ? this._firstPageCapability.promise : null;
  }
  get onePageRendered() {
    return this.pdfDocument ? this._onePageRenderedCapability.promise : null;
  }
  get pagesPromise() {
    return this.pdfDocument ? this._pagesCapability.promise : null;
  }
  get _layerProperties() {
    const t = this;
    return Ph(this, "_layerProperties", {
      get annotationEditorUIManager() {
        return u(t, _e);
      },
      get annotationStorage() {
        var i;
        return (i = t.pdfDocument) == null ? void 0 : i.annotationStorage;
      },
      get downloadManager() {
        return t.downloadManager;
      },
      get enableScripting() {
        return !!t._scriptingManager;
      },
      get fieldObjectsPromise() {
        var i;
        return (i = t.pdfDocument) == null ? void 0 : i.getFieldObjects();
      },
      get findController() {
        return t.findController;
      },
      get hasJSActionsPromise() {
        var i;
        return (i = t.pdfDocument) == null ? void 0 : i.hasJSActions();
      },
      get linkService() {
        return t.linkService;
      }
    });
  }
  async getAllText() {
    const t = [], i = [];
    for (let r = 1, n = this.pdfDocument.numPages; r <= n; ++r) {
      if (u(this, ma))
        return null;
      i.length = 0;
      const s = await this.pdfDocument.getPage(r), {
        items: a
      } = await s.getTextContent();
      for (const l of a)
        l.str && i.push(l.str), l.hasEOL && i.push(`
`);
      t.push(Eh(i.join("")));
    }
    return t.join(`
`);
  }
  setDocument(t) {
    var f, b;
    if (this.pdfDocument && (this.eventBus.dispatch("pagesdestroy", {
      source: this
    }), this._cancelRendering(), this._resetView(), (f = this.findController) == null || f.setDocument(null), (b = this._scriptingManager) == null || b.setDocument(null), u(this, _e) && (u(this, _e).destroy(), E(this, _e, null))), this.pdfDocument = t, !t)
      return;
    const i = t.numPages, r = t.getPage(1), n = t.getOptionalContentConfig({
      intent: "display"
    }), s = u(this, fd) ? t.getPermissions() : Promise.resolve(), {
      eventBus: a,
      pageColors: l,
      viewer: d
    } = this;
    E(this, tn, new AbortController());
    const {
      signal: h
    } = u(this, tn);
    if (i > Bd.FORCE_SCROLL_MODE_PAGE) {
      console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");
      const g = this._scrollMode = gt.PAGE;
      a.dispatch("scrollmodechanged", {
        source: this,
        mode: g
      });
    }
    this._pagesCapability.promise.then(() => {
      a.dispatch("pagesloaded", {
        source: this,
        pagesCount: i
      });
    }, () => {
    });
    const w = /* @__PURE__ */ c((g) => {
      const $ = this._pages[g.pageNumber - 1];
      $ && u(this, Jr).push($);
    }, "onBeforeDraw");
    a._on("pagerender", w, {
      signal: h
    });
    const m = /* @__PURE__ */ c((g) => {
      g.cssTransform || (this._onePageRenderedCapability.resolve({
        timestamp: g.timestamp
      }), a._off("pagerendered", m));
    }, "onAfterDraw");
    a._on("pagerendered", m, {
      signal: h
    }), Promise.all([r, s]).then(([g, $]) => {
      var D;
      if (t !== this.pdfDocument)
        return;
      this._firstPageCapability.resolve(g), this._optionalContentConfigPromise = n;
      const {
        annotationEditorMode: O,
        annotationMode: k,
        textLayerMode: S
      } = P(this, ot, s0).call(this, $);
      if (S !== Di.DISABLE) {
        const z = E(this, rn, document.createElement("div"));
        z.id = "hiddenCopyElement", d.before(z);
      }
      if (O !== wi.DISABLE) {
        const z = O;
        t.isPureXfa ? console.warn("Warning: XFA-editing is not implemented.") : Ev(z) ? (E(this, _e, new G9(this.container, d, u(this, hd), a, t, l, u(this, ud), u(this, wd), u(this, md), u(this, vd))), a.dispatch("annotationeditoruimanager", {
          source: this,
          uiManager: u(this, _e)
        }), z !== wi.NONE && u(this, _e).updateMode(z)) : console.error(`Invalid AnnotationEditor mode: ${z}`);
      }
      const _ = this._scrollMode === gt.PAGE ? null : d, V = this.currentScale, I = g.getViewport({
        scale: V * tr.PDF_TO_CSS_UNITS
      });
      d.style.setProperty("--scale-factor", I.scale), ((l == null ? void 0 : l.foreground) === "CanvasText" || (l == null ? void 0 : l.background) === "Canvas") && (d.style.setProperty("--hcm-highlight-filter", t.filterFactory.addHighlightHCMFilter("highlight", "CanvasText", "Canvas", "HighlightText", "Highlight")), d.style.setProperty("--hcm-highlight-selected-filter", t.filterFactory.addHighlightHCMFilter("highlight_selected", "CanvasText", "Canvas", "HighlightText", "ButtonText")));
      for (let z = 1; z <= i; ++z) {
        const F = new Oh({
          container: _,
          eventBus: a,
          id: z,
          scale: V,
          defaultViewport: I.clone(),
          optionalContentConfigPromise: n,
          renderingQueue: this.renderingQueue,
          textLayerMode: S,
          annotationMode: k,
          imageResourcesPath: this.imageResourcesPath,
          maxCanvasPixels: this.maxCanvasPixels,
          pageColors: l,
          l10n: this.l10n,
          layerProperties: this._layerProperties,
          enableHWA: u(this, yd)
        });
        this._pages.push(F);
      }
      (D = this._pages[0]) == null || D.setPdfPage(g), this._scrollMode === gt.PAGE ? P(this, ot, cl).call(this) : this._spreadMode !== Pe.NONE && this._updateSpreadMode(), P(this, ot, a0).call(this, h).then(async () => {
        var F, A;
        if (t !== this.pdfDocument)
          return;
        if ((F = this.findController) == null || F.setDocument(t), (A = this._scriptingManager) == null || A.setDocument(t), u(this, rn) && document.addEventListener("copy", P(this, ot, c0).bind(this, S), {
          signal: h
        }), u(this, _e) && a.dispatch("annotationeditormodechanged", {
          source: this,
          mode: u(this, Oi)
        }), t.loadingParams.disableAutoFetch || i > Bd.FORCE_LAZY_PAGE_INIT) {
          this._pagesCapability.resolve();
          return;
        }
        let z = i - 1;
        if (z <= 0) {
          this._pagesCapability.resolve();
          return;
        }
        for (let N = 2; N <= i; ++N) {
          const G = t.getPage(N).then((et) => {
            const lt = this._pages[N - 1];
            lt.pdfPage || lt.setPdfPage(et), --z === 0 && this._pagesCapability.resolve();
          }, (et) => {
            console.error(`Unable to get page ${N} to initialize viewer`, et), --z === 0 && this._pagesCapability.resolve();
          });
          N % Bd.PAUSE_EAGER_PAGE_INIT === 0 && await G;
        }
      }), a.dispatch("pagesinit", {
        source: this
      }), t.getMetadata().then(({
        info: z
      }) => {
        t === this.pdfDocument && z.Language && (d.lang = z.Language);
      }), this.defaultRenderingQueue && this.update();
    }).catch((g) => {
      console.error("Unable to initialize viewer", g), this._pagesCapability.reject(g);
    });
  }
  setPageLabels(t) {
    var i;
    if (this.pdfDocument) {
      t ? Array.isArray(t) && this.pdfDocument.numPages === t.length ? this._pageLabels = t : (this._pageLabels = null, console.error("setPageLabels: Invalid page labels.")) : this._pageLabels = null;
      for (let r = 0, n = this._pages.length; r < n; r++)
        this._pages[r].setPageLabel(((i = this._pageLabels) == null ? void 0 : i[r]) ?? null);
    }
  }
  _resetView() {
    var t, i;
    this._pages = [], this._currentPageNumber = 1, this._currentScale = wp, this._currentScaleValue = null, this._pageLabels = null, E(this, Jr, new rw($v)), this._location = null, this._pagesRotation = 0, this._optionalContentConfigPromise = null, this._firstPageCapability = Promise.withResolvers(), this._onePageRenderedCapability = Promise.withResolvers(), this._pagesCapability = Promise.withResolvers(), this._scrollMode = gt.VERTICAL, this._previousScrollMode = gt.UNKNOWN, this._spreadMode = Pe.NONE, E(this, Yn, {
      previousPageNumber: 1,
      scrollDown: !0,
      pages: []
    }), (t = u(this, tn)) == null || t.abort(), E(this, tn, null), this.viewer.textContent = "", this._updateScrollMode(), this.viewer.removeAttribute("lang"), (i = u(this, rn)) == null || i.remove(), E(this, rn, null), P(this, ot, Jd).call(this);
  }
  _scrollUpdate() {
    this.pagesCount !== 0 && this.update();
  }
  pageLabelToPageNumber(t) {
    if (!this._pageLabels)
      return null;
    const i = this._pageLabels.indexOf(t);
    return i < 0 ? null : i + 1;
  }
  scrollPageIntoView({
    pageNumber: t,
    destArray: i = null,
    allowNegativeOffset: r = !1,
    ignoreDestinationZoom: n = !1
  }) {
    if (!this.pdfDocument)
      return;
    const s = Number.isInteger(t) && this._pages[t - 1];
    if (!s) {
      console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);
      return;
    }
    if (this.isInPresentationMode || !i) {
      this._setCurrentPageNumber(t, !0);
      return;
    }
    let a = 0, l = 0, d = 0, h = 0, w, m;
    const f = s.rotation % 180 !== 0, b = (f ? s.height : s.width) / s.scale / tr.PDF_TO_CSS_UNITS, g = (f ? s.width : s.height) / s.scale / tr.PDF_TO_CSS_UNITS;
    let $ = 0;
    switch (i[1].name) {
      case "XYZ":
        a = i[2], l = i[3], $ = i[4], a = a !== null ? a : 0, l = l !== null ? l : g;
        break;
      case "Fit":
      case "FitB":
        $ = "page-fit";
        break;
      case "FitH":
      case "FitBH":
        l = i[2], $ = "page-width", l === null && this._location ? (a = this._location.left, l = this._location.top) : (typeof l != "number" || l < 0) && (l = g);
        break;
      case "FitV":
      case "FitBV":
        a = i[2], d = b, h = g, $ = "page-height";
        break;
      case "FitR":
        a = i[2], l = i[3], d = i[4] - a, h = i[5] - l;
        let _ = Gm, V = Zm;
        this.removePageBorders && (_ = V = 0), w = (this.container.clientWidth - _) / d / tr.PDF_TO_CSS_UNITS, m = (this.container.clientHeight - V) / h / tr.PDF_TO_CSS_UNITS, $ = Math.min(Math.abs(w), Math.abs(m));
        break;
      default:
        console.error(`scrollPageIntoView: "${i[1].name}" is not a valid destination type.`);
        return;
    }
    if (n || ($ && $ !== this._currentScale ? this.currentScaleValue = $ : this._currentScale === wp && (this.currentScaleValue = p9)), $ === "page-fit" && !i[4]) {
      P(this, ot, Xd).call(this, s);
      return;
    }
    const O = [s.viewport.convertToViewportPoint(a, l), s.viewport.convertToViewportPoint(a + d, l + h)];
    let k = Math.min(O[0][0], O[1][0]), S = Math.min(O[0][1], O[1][1]);
    r || (k = Math.max(k, 0), S = Math.max(S, 0)), P(this, ot, Xd).call(this, s, {
      left: k,
      top: S
    });
  }
  _updateLocation(t) {
    const i = this._currentScale, r = this._currentScaleValue, n = parseFloat(r) === i ? Math.round(i * 1e4) / 100 : r, s = t.id, a = this._pages[s - 1], l = this.container, d = a.getPagePoint(l.scrollLeft - t.x, l.scrollTop - t.y), h = Math.round(d[0]), w = Math.round(d[1]);
    let m = `#page=${s}`;
    this.isInPresentationMode || (m += `&zoom=${n},${h},${w}`), this._location = {
      pageNumber: s,
      scale: n,
      top: w,
      left: h,
      rotation: this._pagesRotation,
      pdfOpenParams: m
    };
  }
  update() {
    const t = this._getVisiblePages(), i = t.views, r = i.length;
    if (r === 0)
      return;
    const n = Math.max($v, 2 * r + 1);
    u(this, Jr).resize(n, t.ids), this.renderingQueue.renderHighestPriority(t);
    const s = this._spreadMode === Pe.NONE && (this._scrollMode === gt.PAGE || this._scrollMode === gt.VERTICAL), a = this._currentPageNumber;
    let l = !1;
    for (const d of i) {
      if (d.percent < 100)
        break;
      if (d.id === a && s) {
        l = !0;
        break;
      }
    }
    this._setCurrentPageNumber(l ? a : i[0].id), this._updateLocation(t.first), this.eventBus.dispatch("updateviewarea", {
      source: this,
      location: this._location
    });
  }
  containsElement(t) {
    return this.container.contains(t);
  }
  focus() {
    this.container.focus();
  }
  get _isContainerRtl() {
    return getComputedStyle(this.container).direction === "rtl";
  }
  get isInPresentationMode() {
    return this.presentationModeState === Yo.FULLSCREEN;
  }
  get isChangingPresentationMode() {
    return this.presentationModeState === Yo.CHANGING;
  }
  get isHorizontalScrollbarEnabled() {
    return this.isInPresentationMode ? !1 : this.container.scrollWidth > this.container.clientWidth;
  }
  get isVerticalScrollbarEnabled() {
    return this.isInPresentationMode ? !1 : this.container.scrollHeight > this.container.clientHeight;
  }
  _getVisiblePages() {
    const t = this._scrollMode === gt.PAGE ? u(this, Yn).pages : this._pages, i = this._scrollMode === gt.HORIZONTAL, r = i && this._isContainerRtl;
    return g9({
      scrollEl: this.container,
      views: t,
      sortByVisibility: !0,
      horizontal: i,
      rtl: r
    });
  }
  cleanup() {
    for (const t of this._pages)
      t.renderingState !== Ht.FINISHED && t.reset();
  }
  _cancelRendering() {
    for (const t of this._pages)
      t.cancelRendering();
  }
  forceRendering(t) {
    const i = t || this._getVisiblePages(), r = P(this, ot, p0).call(this, i), n = this._spreadMode !== Pe.NONE && this._scrollMode !== gt.HORIZONTAL, s = this.renderingQueue.getHighestPriority(i, this._pages, r, n);
    return s ? (P(this, ot, u0).call(this, s).then(() => {
      this.renderingQueue.renderView(s);
    }), !0) : !1;
  }
  get hasEqualPageSizes() {
    const t = this._pages[0];
    for (let i = 1, r = this._pages.length; i < r; ++i) {
      const n = this._pages[i];
      if (n.width !== t.width || n.height !== t.height)
        return !1;
    }
    return !0;
  }
  getPagesOverview() {
    let t;
    return this._pages.map((i) => {
      const r = i.pdfPage.getViewport({
        scale: 1
      }), n = Jm(r);
      if (t === void 0)
        t = n;
      else if (this.enablePrintAutoRotate && n !== t)
        return {
          width: r.height,
          height: r.width,
          rotation: (r.rotation - 90) % 360
        };
      return {
        width: r.width,
        height: r.height,
        rotation: r.rotation
      };
    });
  }
  get optionalContentConfigPromise() {
    return this.pdfDocument ? this._optionalContentConfigPromise ? this._optionalContentConfigPromise : (console.error("optionalContentConfigPromise: Not initialized yet."), this.pdfDocument.getOptionalContentConfig({
      intent: "display"
    })) : Promise.resolve(null);
  }
  set optionalContentConfigPromise(t) {
    if (!(t instanceof Promise))
      throw new Error(`Invalid optionalContentConfigPromise: ${t}`);
    this.pdfDocument && this._optionalContentConfigPromise && (this._optionalContentConfigPromise = t, this.refresh(!1, {
      optionalContentConfigPromise: t
    }), this.eventBus.dispatch("optionalcontentconfigchanged", {
      source: this,
      promise: t
    }));
  }
  get scrollMode() {
    return this._scrollMode;
  }
  set scrollMode(t) {
    if (this._scrollMode !== t) {
      if (!b9(t))
        throw new Error(`Invalid scroll mode: ${t}`);
      this.pagesCount > Bd.FORCE_SCROLL_MODE_PAGE || (this._previousScrollMode = this._scrollMode, this._scrollMode = t, this.eventBus.dispatch("scrollmodechanged", {
        source: this,
        mode: t
      }), this._updateScrollMode(this._currentPageNumber));
    }
  }
  _updateScrollMode(t = null) {
    const i = this._scrollMode, r = this.viewer;
    r.classList.toggle("scrollHorizontal", i === gt.HORIZONTAL), r.classList.toggle("scrollWrapped", i === gt.WRAPPED), !(!this.pdfDocument || !t) && (i === gt.PAGE ? P(this, ot, cl).call(this) : this._previousScrollMode === gt.PAGE && this._updateSpreadMode(), this._currentScaleValue && isNaN(this._currentScaleValue) && P(this, ot, Lr).call(this, this._currentScaleValue, {
      noScroll: !0
    }), this._setCurrentPageNumber(t, !0), this.update());
  }
  get spreadMode() {
    return this._spreadMode;
  }
  set spreadMode(t) {
    if (this._spreadMode !== t) {
      if (!x9(t))
        throw new Error(`Invalid spread mode: ${t}`);
      this._spreadMode = t, this.eventBus.dispatch("spreadmodechanged", {
        source: this,
        mode: t
      }), this._updateSpreadMode(this._currentPageNumber);
    }
  }
  _updateSpreadMode(t = null) {
    if (!this.pdfDocument)
      return;
    const i = this.viewer, r = this._pages;
    if (this._scrollMode === gt.PAGE)
      P(this, ot, cl).call(this);
    else if (i.textContent = "", this._spreadMode === Pe.NONE)
      for (const n of this._pages)
        i.append(n.div);
    else {
      const n = this._spreadMode - 1;
      let s = null;
      for (let a = 0, l = r.length; a < l; ++a)
        s === null ? (s = document.createElement("div"), s.className = "spread", i.append(s)) : a % 2 === n && (s = s.cloneNode(!1), i.append(s)), s.append(r[a].div);
    }
    t && (this._currentScaleValue && isNaN(this._currentScaleValue) && P(this, ot, Lr).call(this, this._currentScaleValue, {
      noScroll: !0
    }), this._setCurrentPageNumber(t, !0), this.update());
  }
  _getPageAdvance(t, i = !1) {
    switch (this._scrollMode) {
      case gt.WRAPPED: {
        const {
          views: r
        } = this._getVisiblePages(), n = /* @__PURE__ */ new Map();
        for (const {
          id: s,
          y: a,
          percent: l,
          widthPercent: d
        } of r) {
          if (l === 0 || d < 100)
            continue;
          let h = n.get(a);
          h || n.set(a, h || (h = [])), h.push(s);
        }
        for (const s of n.values()) {
          const a = s.indexOf(t);
          if (a === -1)
            continue;
          const l = s.length;
          if (l === 1)
            break;
          if (i)
            for (let d = a - 1, h = 0; d >= h; d--) {
              const w = s[d], m = s[d + 1] - 1;
              if (w < m)
                return t - m;
            }
          else
            for (let d = a + 1, h = l; d < h; d++) {
              const w = s[d], m = s[d - 1] + 1;
              if (w > m)
                return m - t;
            }
          if (i) {
            const d = s[0];
            if (d < t)
              return t - d + 1;
          } else {
            const d = s[l - 1];
            if (d > t)
              return d - t + 1;
          }
          break;
        }
        break;
      }
      case gt.HORIZONTAL:
        break;
      case gt.PAGE:
      case gt.VERTICAL: {
        if (this._spreadMode === Pe.NONE)
          break;
        const r = this._spreadMode - 1;
        if (i && t % 2 !== r)
          break;
        if (!i && t % 2 === r)
          break;
        const {
          views: n
        } = this._getVisiblePages(), s = i ? t - 1 : t + 1;
        for (const {
          id: a,
          percent: l,
          widthPercent: d
        } of n)
          if (a === s) {
            if (l > 0 && d === 100)
              return 2;
            break;
          }
        break;
      }
    }
    return 1;
  }
  nextPage() {
    const t = this._currentPageNumber, i = this.pagesCount;
    if (t >= i)
      return !1;
    const r = this._getPageAdvance(t, !1) || 1;
    return this.currentPageNumber = Math.min(t + r, i), !0;
  }
  previousPage() {
    const t = this._currentPageNumber;
    if (t <= 1)
      return !1;
    const i = this._getPageAdvance(t, !0) || 1;
    return this.currentPageNumber = Math.max(t - i, 1), !0;
  }
  updateScale({
    drawingDelay: t,
    scaleFactor: i = null,
    steps: r = null,
    origin: n
  }) {
    if (r === null && i === null)
      throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");
    if (!this.pdfDocument)
      return;
    let s = this._currentScale;
    if (i > 0 && i !== 1)
      s = Math.round(s * i * 100) / 100;
    else if (r) {
      const a = r > 0 ? Km : 1 / Km, l = r > 0 ? Math.ceil : Math.floor;
      r = Math.abs(r);
      do
        s = l((s * a).toFixed(2) * 10) / 10;
      while (--r > 0);
    }
    s = Math.max(y9, Math.min(w9, s)), P(this, ot, Lr).call(this, s, {
      noScroll: !1,
      drawingDelay: t,
      origin: n
    });
  }
  increaseScale(t = {}) {
    this.updateScale({
      ...t,
      steps: t.steps ?? 1
    });
  }
  decreaseScale(t = {}) {
    this.updateScale({
      ...t,
      steps: -(t.steps ?? 1)
    });
  }
  get containerTopLeft() {
    return u(this, pd) || E(this, pd, [this.container.offsetTop, this.container.offsetLeft]);
  }
  get annotationEditorMode() {
    return u(this, _e) ? u(this, Oi) : wi.DISABLE;
  }
  set annotationEditorMode({
    mode: t,
    editId: i = null,
    isFromKeyboard: r = !1
  }) {
    if (!u(this, _e))
      throw new Error("The AnnotationEditor is not enabled.");
    if (u(this, Oi) === t)
      return;
    if (!Ev(t))
      throw new Error(`Invalid AnnotationEditor mode: ${t}`);
    if (!this.pdfDocument)
      return;
    const {
      eventBus: n
    } = this, s = /* @__PURE__ */ c(() => {
      P(this, ot, Jd).call(this), E(this, Oi, t), u(this, _e).updateMode(t, i, r), n.dispatch("annotationeditormodechanged", {
        source: this,
        mode: t
      });
    }, "updater");
    if (t === wi.NONE || u(this, Oi) === wi.NONE) {
      const a = t !== wi.NONE;
      a || this.pdfDocument.annotationStorage.resetModifiedIds();
      for (const d of this._pages)
        d.toggleEditingMode(a);
      const l = P(this, ot, h0).call(this);
      if (a && l) {
        P(this, ot, Jd).call(this), E(this, en, ({
          pageNumber: h
        }) => {
          l.delete(h), l.size === 0 && E(this, Zn, setTimeout(s, 0));
        });
        const {
          signal: d
        } = u(this, tn);
        n._on("pagerendered", u(this, en), {
          signal: d
        });
        return;
      }
    }
    s();
  }
  set annotationEditorParams({
    type: t,
    value: i
  }) {
    if (!u(this, _e))
      throw new Error("The AnnotationEditor is not enabled.");
    u(this, _e).updateParams(t, i);
  }
  refresh(t = !1, i = /* @__PURE__ */ Object.create(null)) {
    if (this.pdfDocument) {
      for (const r of this._pages)
        r.update(i);
      u(this, nn) !== null && (clearTimeout(u(this, nn)), E(this, nn, null)), t || this.update();
    }
  }
};
Jr = new WeakMap(), hd = new WeakMap(), ud = new WeakMap(), Oi = new WeakMap(), _e = new WeakMap(), Gn = new WeakMap(), pd = new WeakMap(), yd = new WeakMap(), wd = new WeakMap(), fd = new WeakMap(), md = new WeakMap(), tn = new WeakMap(), vd = new WeakMap(), en = new WeakMap(), Zn = new WeakMap(), fa = new WeakMap(), rn = new WeakMap(), ma = new WeakMap(), gd = new WeakMap(), va = new WeakMap(), Yn = new WeakMap(), nn = new WeakMap(), ga = new WeakMap(), ot = new WeakSet(), s0 = /* @__PURE__ */ c(function(t) {
  const i = {
    annotationEditorMode: u(this, Oi),
    annotationMode: u(this, Gn),
    textLayerMode: u(this, ga)
  };
  return t && (!t.includes(Vd.COPY) && u(this, ga) === Di.ENABLE && (i.textLayerMode = Di.ENABLE_PERMISSIONS), t.includes(Vd.MODIFY_CONTENTS) || (i.annotationEditorMode = wi.DISABLE), !t.includes(Vd.MODIFY_ANNOTATIONS) && !t.includes(Vd.FILL_INTERACTIVE_FORMS) && u(this, Gn) === ar.ENABLE_FORMS && (i.annotationMode = ar.ENABLE)), i;
}, "#initializePermissions"), a0 = /* @__PURE__ */ c(async function(t) {
  if (document.visibilityState === "hidden" || !this.container.offsetParent || this._getVisiblePages().views.length === 0)
    return;
  const i = Promise.withResolvers();
  function r() {
    document.visibilityState === "hidden" && i.resolve();
  }
  c(r, "onVisibilityChange"), document.addEventListener("visibilitychange", r, {
    signal: t
  }), await Promise.race([this._onePageRenderedCapability.promise, i.promise]), document.removeEventListener("visibilitychange", r);
}, "#onePageRenderedOrForceFetch"), c0 = /* @__PURE__ */ c(function(t, i) {
  const r = document.getSelection(), {
    focusNode: n,
    anchorNode: s
  } = r;
  if (s && n && r.containsNode(u(this, rn))) {
    if (u(this, fa) || t === Di.ENABLE_PERMISSIONS) {
      i.preventDefault(), i.stopPropagation();
      return;
    }
    E(this, fa, !0);
    const {
      classList: a
    } = this.viewer;
    a.add("copyAll");
    const l = new AbortController();
    window.addEventListener("keydown", (d) => E(this, ma, d.key === "Escape"), {
      signal: l.signal
    }), this.getAllText().then(async (d) => {
      d !== null && await navigator.clipboard.writeText(d);
    }).catch((d) => {
      console.warn(`Something goes wrong when extracting the text: ${d.message}`);
    }).finally(() => {
      E(this, fa, !1), E(this, ma, !1), l.abort(), a.remove("copyAll");
    }), i.preventDefault(), i.stopPropagation();
  }
}, "#copyCallback"), cl = /* @__PURE__ */ c(function() {
  if (this._scrollMode !== gt.PAGE)
    throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");
  const t = this._currentPageNumber, i = u(this, Yn), r = this.viewer;
  if (r.textContent = "", i.pages.length = 0, this._spreadMode === Pe.NONE && !this.isInPresentationMode) {
    const n = this._pages[t - 1];
    r.append(n.div), i.pages.push(n);
  } else {
    const n = /* @__PURE__ */ new Set(), s = this._spreadMode - 1;
    s === -1 ? n.add(t - 1) : t % 2 !== s ? (n.add(t - 1), n.add(t)) : (n.add(t - 2), n.add(t - 1));
    const a = document.createElement("div");
    if (a.className = "spread", this.isInPresentationMode) {
      const l = document.createElement("div");
      l.className = "dummyPage", a.append(l);
    }
    for (const l of n) {
      const d = this._pages[l];
      d && (a.append(d.div), i.pages.push(d));
    }
    r.append(a);
  }
  i.scrollDown = t >= i.previousPageNumber, i.previousPageNumber = t;
}, "#ensurePageViewVisible"), Xd = /* @__PURE__ */ c(function(t, i = null) {
  const {
    div: r,
    id: n
  } = t;
  if (this._currentPageNumber !== n && this._setCurrentPageNumber(n), this._scrollMode === gt.PAGE && (P(this, ot, cl).call(this), this.update()), !i && !this.isInPresentationMode) {
    const s = r.offsetLeft + r.clientLeft, a = s + r.clientWidth, {
      scrollLeft: l,
      clientWidth: d
    } = this.container;
    (this._scrollMode === gt.HORIZONTAL || s < l || a > l + d) && (i = {
      left: 0,
      top: 0
    });
  }
  L1(r, i), !this._currentScaleValue && this._location && (this._location = null);
}, "#scrollIntoView"), l0 = /* @__PURE__ */ c(function(t) {
  return t === this._currentScale || Math.abs(t - this._currentScale) < 1e-15;
}, "#isSameScale"), ow = /* @__PURE__ */ c(function(t, i, {
  noScroll: r = !1,
  preset: n = !1,
  drawingDelay: s = -1,
  origin: a = null
}) {
  if (this._currentScaleValue = i.toString(), P(this, ot, l0).call(this, t)) {
    n && this.eventBus.dispatch("scalechanging", {
      source: this,
      scale: t,
      presetValue: i
    });
    return;
  }
  this.viewer.style.setProperty("--scale-factor", t * tr.PDF_TO_CSS_UNITS);
  const l = s >= 0 && s < 1e3;
  this.refresh(!0, {
    scale: t,
    drawingDelay: l ? s : -1
  }), l && E(this, nn, setTimeout(() => {
    E(this, nn, null), this.refresh();
  }, s));
  const d = this._currentScale;
  if (this._currentScale = t, !r) {
    let h = this._currentPageNumber, w;
    if (this._location && !(this.isInPresentationMode || this.isChangingPresentationMode) && (h = this._location.pageNumber, w = [null, {
      name: "XYZ"
    }, this._location.left, this._location.top, null]), this.scrollPageIntoView({
      pageNumber: h,
      destArray: w,
      allowNegativeOffset: !0
    }), Array.isArray(a)) {
      const m = t / d - 1, [f, b] = this.containerTopLeft;
      this.container.scrollLeft += (a[0] - b) * m, this.container.scrollTop += (a[1] - f) * m;
    }
  }
  this.eventBus.dispatch("scalechanging", {
    source: this,
    scale: t,
    presetValue: n ? i : void 0
  }), this.defaultRenderingQueue && this.update();
}, "#setScaleUpdatePages"), d0 = /* @__PURE__ */ c(function() {
  return this._spreadMode !== Pe.NONE && this._scrollMode !== gt.HORIZONTAL ? 2 : 1;
}, "#pageWidthScaleFactor"), Lr = /* @__PURE__ */ c(function(t, i) {
  let r = parseFloat(t);
  if (r > 0)
    i.preset = !1, P(this, ot, ow).call(this, r, t, i);
  else {
    const n = this._pages[this._currentPageNumber - 1];
    if (!n)
      return;
    let s = Gm, a = Zm;
    this.isInPresentationMode ? (s = a = 4, this._spreadMode !== Pe.NONE && (s *= 2)) : this.removePageBorders ? s = a = 0 : this._scrollMode === gt.HORIZONTAL && ([s, a] = [a, s]);
    const l = (this.container.clientWidth - s) / n.width * n.scale / u(this, ot, d0), d = (this.container.clientHeight - a) / n.height * n.scale;
    switch (t) {
      case "page-actual":
        r = 1;
        break;
      case "page-width":
        r = l;
        break;
      case "page-height":
        r = d;
        break;
      case "page-fit":
        r = Math.min(l, d);
        break;
      case "auto":
        const h = Jm(n) ? l : Math.min(d, l);
        r = Math.min(f9, h);
        break;
      default:
        console.error(`#setScale: "${t}" is an unknown zoom value.`);
        return;
    }
    i.preset = !0, P(this, ot, ow).call(this, r, t, i);
  }
}, "#setScale"), sw = /* @__PURE__ */ c(function() {
  const t = this._pages[this._currentPageNumber - 1];
  this.isInPresentationMode && P(this, ot, Lr).call(this, this._currentScaleValue, {
    noScroll: !0
  }), P(this, ot, Xd).call(this, t);
}, "#resetCurrentPageView"), h0 = /* @__PURE__ */ c(function() {
  const t = this._getVisiblePages(), i = [], {
    ids: r,
    views: n
  } = t;
  for (const s of n) {
    const {
      view: a
    } = s;
    if (!a.hasEditableAnnotations()) {
      r.delete(a.id);
      continue;
    }
    i.push(s);
  }
  return i.length === 0 ? null : (this.renderingQueue.renderHighestPriority({
    first: i[0],
    last: i.at(-1),
    views: i,
    ids: r
  }), r);
}, "#switchToEditAnnotationMode"), u0 = /* @__PURE__ */ c(async function(t) {
  if (t.pdfPage)
    return t.pdfPage;
  try {
    const i = await this.pdfDocument.getPage(t.id);
    return t.pdfPage || t.setPdfPage(i), i;
  } catch (i) {
    return console.error("Unable to get page for page view", i), null;
  }
}, "#ensurePdfPageLoaded"), p0 = /* @__PURE__ */ c(function(t) {
  var i, r;
  if (((i = t.first) == null ? void 0 : i.id) === 1)
    return !0;
  if (((r = t.last) == null ? void 0 : r.id) === this.pagesCount)
    return !1;
  switch (this._scrollMode) {
    case gt.PAGE:
      return u(this, Yn).scrollDown;
    case gt.HORIZONTAL:
      return this.scroll.right;
  }
  return this.scroll.down;
}, "#getScrollAhead"), aw = /* @__PURE__ */ c(function(t = this.container.clientHeight) {
  t !== u(this, gd) && (E(this, gd, t), C9.setProperty("--viewer-container-height", `${t}px`));
}, "#updateContainerHeightCss"), y0 = /* @__PURE__ */ c(function(t) {
  for (const i of t)
    if (i.target === this.container) {
      P(this, ot, aw).call(this, Math.floor(i.borderBoxSize[0].blockSize)), E(this, pd, null);
      break;
    }
}, "#resizeObserverCallback"), Jd = /* @__PURE__ */ c(function() {
  u(this, en) && (this.eventBus._off("pagerendered", u(this, en)), E(this, en, null)), u(this, Zn) !== null && (clearTimeout(u(this, Zn)), E(this, Zn, null));
}, "#cleanupSwitchAnnotationEditorMode"), c(Xf, "PDFViewer");
let Dh = Xf;
const Jf = class Jf extends Dh {
  _resetView() {
    super._resetView(), this._scrollMode = gt.PAGE, this._spreadMode = Pe.NONE;
  }
  set scrollMode(t) {
  }
  _updateScrollMode() {
  }
  set spreadMode(t) {
  }
  _updateSpreadMode() {
  }
};
c(Jf, "PDFSinglePageViewer");
let cw = Jf;
Nt.AnnotationLayerBuilder;
Nt.DownloadManager;
var tk = Nt.EventBus;
Nt.FindState;
var ek = Nt.GenericL10n;
Nt.LinkTarget;
Nt.PDFFindController;
var ik = Nt.PDFHistory, rk = Nt.PDFLinkService;
Nt.PDFPageView;
Nt.PDFScriptingManager;
Nt.PDFSinglePageViewer;
var nk = Nt.PDFViewer;
Nt.ProgressBar;
Nt.RenderingStates;
Nt.ScrollMode;
Nt.SimpleLinkService;
Nt.SpreadMode;
Nt.StructTreeLayerBuilder;
Nt.TextLayerBuilder;
Nt.XfaLayerBuilder;
Nt.parseQueryString;
var ok = Object.defineProperty, sk = Object.getOwnPropertyDescriptor, gu = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? sk(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && ok(t, i, n), n;
}, "__decorateClass$O"), ba;
let Ac = (ba = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.MAX_CANVAS_PIXELS = 0, this.TEXT_LAYER_MODE = 0, this.MAX_IMAGE_SIZE = -1, this.CMAP_PACKED = !0, this.DEFAULT_SCALE_DELTA = 1.1, this.MIN_SCALE = 0.25, this.MAX_SCALE = 10, this.DEFAULT_SCALE_VALUE = "auto", this.ENABLE_XFA = !0, this.DEFAULT_WORKER_URL = "/js/pdf.worker.min.mjs", this.pageNumberRef = dt(), this.totalPagesRef = dt(), this.zoomLevelRef = dt(), this.viewerContainerRef = dt();
  }
  ////////
  async open() {
    var i;
    if (!this.pdfViewer || !this.pdfHistory || !this.l10n || !this.pdfLinkService)
      return;
    this.pdfLoadingTask && await this.close();
    const t = wb({
      url: this.src,
      maxImageSize: this.MAX_IMAGE_SIZE,
      enableXfa: this.ENABLE_XFA,
      cMapUrl: ((i = this.CMAP_URL) == null ? void 0 : i.toString()) || "",
      cMapPacked: this.CMAP_PACKED
    });
    this.pdfLoadingTask = t, t.onProgress = (r) => {
    };
    try {
      const r = await t.promise;
      this.pdfDocument = r, this.pdfViewer.setDocument(r), this.pdfLinkService.setDocument(r), this.pdfHistory.initialize({
        fingerprint: r.fingerprints[0]
      });
    } catch (r) {
      let n = "pdfjs-loading-error";
      r instanceof vb ? n = "pdfjs-invalid-file-error" : r instanceof gb ? n = "pdfjs-missing-file-error" : r instanceof bb && (n = "pdfjs-unexpected-response-error"), this.l10n.get(n, void 0, void 0).then((s) => {
        this.pdfViewError(s, { message: r == null ? void 0 : r.message });
      });
    }
  }
  async close() {
    var i, r;
    if (!this.pdfLoadingTask)
      return Promise.resolve();
    const t = this.pdfLoadingTask.destroy();
    return this.pdfLoadingTask = void 0, this.pdfDocument && (this.pdfDocument = void 0, (i = this.pdfViewer) == null || i.setDocument(null), (r = this.pdfLinkService) == null || r.setDocument(null, null), this.pdfHistory && this.pdfHistory.reset()), await t;
  }
  pdfViewError(t, i) {
    const r = [`PDF.js v${xb || "?"} (build: ${Cb || "?"})`];
    i && (r.push(`Message: ${i.message}`), i.stack ? r.push(`Stack: ${i.stack}`) : (i.filename && r.push(`File: ${i.filename}`), i.lineNumber && r.push(`Line: ${i.lineNumber}`))), console.error(`${t}

${r.join(`
`)}`);
  }
  ///////
  setPage(t) {
    this.pdfViewer && (this.pdfViewer.currentPageNumber = t);
  }
  zoomIn(t) {
    if (this.pdfViewer) {
      let i = this.pdfViewer.currentScale;
      do
        i = parseFloat((i * this.DEFAULT_SCALE_DELTA).toFixed(2)), i = Math.ceil(i * 10) / 10, i = Math.min(this.MAX_SCALE, i);
      while (--t && i < this.MAX_SCALE);
      this.pdfViewer.currentScaleValue = i.toFixed(2);
    }
  }
  zoomOut(t) {
    if (this.pdfViewer) {
      let i = this.pdfViewer.currentScale;
      do
        i = parseFloat((i / this.DEFAULT_SCALE_DELTA).toFixed(2)), i = Math.floor(i * 10) / 10, i = Math.max(this.MIN_SCALE, i);
      while (--t && i > this.MIN_SCALE);
      this.pdfViewer.currentScaleValue = i.toFixed(2);
    }
  }
  setScale(t) {
    this.pdfViewer && (this.pdfViewer.currentScaleValue = typeof t == "number" ? t.toFixed(2) : t);
  }
  updatePage() {
    if (this.pdfViewer && this.pageNumberRef.value) {
      const t = parseInt(this.pageNumberRef.value.value);
      isNaN(t) ? this.setPage(this.pdfViewer.currentPageNumber) : t > this.pdfViewer.pagesCount ? this.setPage(this.pdfViewer.pagesCount) : t <= 0 ? this.setPage(1) : this.setPage(t);
    }
  }
  select(t) {
    const i = t.target;
    i && i.setSelectionRange(0, i.value.length);
  }
  fitToPage() {
    this.setScale("page-fit");
  }
  fitToWidth() {
    this.setScale("page-width");
  }
  updateZoom() {
    if (this.pdfViewer && this.zoomLevelRef.value) {
      const t = parseFloat(this.zoomLevelRef.value.value.replace("%", ""));
      isNaN(t) ? this.setScale(this.pdfViewer.currentScale + 1e-4) : this.setScale(t / 100);
    }
  }
  // clearDocument() {
  //   try {
  //     this.loadingTask?.destroy();
  //     //console.debug("loadingTask cleanup", loadingTask)
  //   } catch (e) {
  //     /* No worries */
  //   }
  //   try {
  //     // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  //     // @ts-ignore due to incorrect param type def?
  //     this.pdfViewer?.setDocument(null);
  //   } catch (e) {
  //     /* No worries */
  //   }
  //   try {
  //     this.pdfLinkService.setDocument(null, null);
  //   } catch (e) {
  //     /* No worries */
  //   }
  // }
  willUpdate(t) {
    t.has("weavyContext") && this.weavyContext && (this.WORKER_URL || (this.WORKER_URL = new URL(this.DEFAULT_WORKER_URL, this.weavyContext.url), fb.workerSrc = this.WORKER_URL.toString()), this.CMAP_URL || (this.CMAP_URL = new URL("/cmaps/", this.weavyContext.url)));
  }
  update(t) {
    super.update(t), (t.has("weavyContext") || t.has("src") || t.has("pdfViewer")) && this.weavyContext && this.src && this.pdfViewer && this.open();
  }
  updated() {
    var t;
    this.weavyContext && this.viewerContainerRef.value && !this.pdfViewer && (this.pdfEventBus = new tk(), this.pdfLinkService = new rk({
      eventBus: this.pdfEventBus
    }), this.l10n = new ek((t = this.weavyContext) == null ? void 0 : t.locale), this.pdfViewer = new nk({
      container: this.viewerContainerRef.value,
      eventBus: this.pdfEventBus,
      linkService: this.pdfLinkService,
      //findController: this.pdfFindController,
      annotationEditorMode: mb.DISABLE,
      l10n: this.l10n,
      maxCanvasPixels: this.MAX_CANVAS_PIXELS,
      textLayerMode: this.TEXT_LAYER_MODE
    }), this.pdfLinkService.setViewer(this.pdfViewer), this.pdfHistory = new ik({
      eventBus: this.pdfEventBus,
      linkService: this.pdfLinkService
    }), this.pdfLinkService.setHistory(this.pdfHistory), this.pdfEventBus.on("scalechanging", () => {
      this.zoomLevelRef.value.value = Math.round(this.pdfViewer.currentScale * 100).toFixed(0) + "%";
    }), this.pdfEventBus.on("pagechanging", () => {
      this.pageNumberRef.value.value = this.pdfViewer.currentPageNumber.toFixed(0);
    }), this.pdfEventBus.on("pagesinit", () => {
      this.isConnected && (this.pdfViewer.currentScaleValue = this.DEFAULT_SCALE_VALUE, this.pageNumberRef.value.value = "1", this.totalPagesRef.value.innerText = this.pdfViewer.pagesCount.toFixed(0));
    }));
  }
  render() {
    return y`
      <div class="wy-content-pdf">
        <div class="wy-toolbars-bottom">
          <nav class="wy-toolbar wy-toolbar-center">
            <div class="wy-toolbar-buttons">
              <input
                type="text"
                class="wy-input wy-pdf-page-number"
                ${it(this.pageNumberRef)}
                @keydown=${ph}
                @keyup=${wr}
                @change=${this.updatePage}
                @click=${this.select}
              />
              <span class="wy-toolbar-text">/</span>
              <span class="wy-toolbar-text" ${it(this.totalPagesRef)}>1</span>
            </div>
            <div class="wy-toolbar-buttons">
              <wy-button kind="icon" class="btn-zoom-out" @click=${this.zoomOut} title=${C("Zoom out")}>
                <wy-icon name="minus"></wy-icon>
              </wy-button>
              <input
                type="text"
                class="wy-input wy-pdf-zoom-level"
                ${it(this.zoomLevelRef)}
                @keydown=${ph}
                @keyup=${wr}
                @change=${this.updateZoom}
                @click=${this.select}
                value="100%"
              />
              <wy-button kind="icon" class="btn-zoom-in" @click=${this.zoomIn} title=${C("Zoom in")}>
                <wy-icon name="plus"></wy-icon>
              </wy-button>
            </div>
            <div class="wy-toolbar-buttons">
              <wy-button kind="icon" class="btn-fit-page" @click=${this.fitToWidth} title=${C("Fit to width")}>
                <wy-icon name="fit-width"></wy-icon>
              </wy-button>
              <wy-button kind="icon" @click=${this.fitToPage} title=${C("Fit to screen")}>
                <wy-icon name="fit-screen"></wy-icon>
              </wy-button>
            </div>
          </nav>
        </div>
        <div ${it(this.viewerContainerRef)} class="wy-pdf-container">
          <div class="pdfViewer"></div>
        </div>
      </div>
    `;
  }
  disconnectedCallback() {
    var t;
    try {
      this.close(), (t = this.pdfViewer) == null || t.cleanup();
    } catch {
    }
    this.pdfViewer = void 0, super.disconnectedCallback();
  }
}, c(ba, "WyPdfViewer"), ba);
Ac.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
gu([
  Kt({ context: ne, subscribe: !0 }),
  W()
], Ac.prototype, "weavyContext", 2);
gu([
  v()
], Ac.prototype, "src", 2);
gu([
  W()
], Ac.prototype, "pdfViewer", 2);
Ac = gu([
  Q("wy-pdf-viewer"),
  st()
], Ac);
var ak = Object.defineProperty, ck = Object.getOwnPropertyDescriptor, qi = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? ck(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && ak(t, i, n), n;
}, "__decorateClass$N"), xa;
let di = (xa = class extends K {
  constructor() {
    super(), this.exportParts = new Z(this), this.viewerRef = dt(), import(
      /* webpackIgnore: true */
      /* @vite-ignore */
      new URL("./es/embedded-confluence-bundle.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
    ).then((t) => t.embeddedConfluenceBundle).then((t) => {
      this.PageComponent = t.Page;
    });
  }
  willUpdate(t) {
    if (t.has("weavyContext") && this.weavyContext && (this.productName ?? (this.productName = this.weavyContext.confluenceProductName)), t.has("raw") && this.raw) {
      const i = JSON.parse(this.raw);
      this.contentId = i.contentId, this.hostname = i.hostname, this.spaceKey = i.spaceKey;
    }
  }
  render() {
    return this.productName ? y`
          <div class="wy-confluence-viewer" ${it(this.viewerRef)}>
            ${!this.contentId || !this.PageComponent ? y` <wy-spinner overlay></wy-spinner> ` : L}
          </div>
        ` : y`
          <wy-preview-icon
            src=${wt(this.src)}
            icon=${this.icon}
            provider=${wt(this.src ? "Confluence" : void 0)}
          ></wy-preview-icon>
        `;
  }
  async updated(t) {
    if ((t.has("contentId") || t.has("PageComponent") || t.has("productName")) && this.contentId && this.viewerRef.value && //this.productName &&
    this.PageComponent) {
      let i, r;
      try {
        i = await import(
          /* webpackIgnore: true */
          /* @vite-ignore */
          new URL("./es/react/index.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
        ).then((n) => n.index);
      } catch (n) {
        console.error("React error", n);
      }
      try {
        r = await import(
          /* webpackIgnore: true */
          /* @vite-ignore */
          new URL("./es/react-dom/index.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
        ).then((n) => n.index);
      } catch (n) {
        console.error("ReactDOM error", n);
      }
      if (i && r) {
        const n = i.createElement(
          this.PageComponent,
          {
            contentId: this.contentId,
            locale: "en-US",
            hostname: this.hostname,
            parentProduct: this.productName,
            spaceKey: this.spaceKey,
            themeState: ""
            //"colorMode:dark dark:dark light:light",
          },
          null
        );
        r.render(n, this.viewerRef.value);
      }
    }
  }
}, c(xa, "WyConfluenceViewer"), xa);
di.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }

      .wy-confluence-viewer {
        display: contents;
      }

      .wy-confluence-viewer > * {
        border: none;
        flex: 1;
      }
    `
];
qi([
  Kt({ context: ne, subscribe: !0 }),
  W()
], di.prototype, "weavyContext", 2);
qi([
  v()
], di.prototype, "src", 2);
qi([
  v()
], di.prototype, "icon", 2);
qi([
  v()
], di.prototype, "raw", 2);
qi([
  v()
], di.prototype, "productName", 2);
qi([
  W()
], di.prototype, "contentId", 2);
qi([
  W()
], di.prototype, "hostname", 2);
qi([
  W()
], di.prototype, "spaceKey", 2);
qi([
  W()
], di.prototype, "PageComponent", 2);
di = qi([
  Q("wy-confluence-viewer")
], di);
var lk = Object.defineProperty, dk = Object.getOwnPropertyDescriptor, w0 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? dk(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && lk(t, i, n), n;
}, "__decorateClass$M"), Ca;
let Fh = (Ca = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  render() {
    const t = this.file;
    if (!t) return L;
    const { icon: i } = mn(t.name), r = _i(t.name);
    let n = t.preview_url || t.download_url || "";
    t.preview_format === "image" && (r === ".gif" || r === ".svg") && (n = t.download_url || "");
    const a = n, l = t.external_url, d = t.is_trashed ? "none" : t.preview_format, h = t.name, w = t.width, m = t.height, f = t.media_type, b = t.provider, g = t.raw;
    return d === "image" ? y`<wy-preview-image
        src=${a}
        width=${wt(w)}
        height=${wt(m)}
      ></wy-preview-image>` : d === "pdf" ? y`<wy-pdf-viewer src=${a}></wy-pdf-viewer>` : d === "video" || d === "audio" ? y`<wy-preview-media
        format=${d}
        src=${a}
        name=${h}
        mediaType=${f}
      ></wy-preview-media>` : d === "text" ? y`<wy-preview-text src=${a}></wy-preview-text>` : d === "code" ? y`<wy-preview-text src=${a} ?html=${!/^(?:blob:|data:)/.test(a)} code></wy-preview-text>` : d === "html" ? y`<wy-preview-text src=${a} html></wy-preview-text>` : d === "embed" ? y`<wy-preview-embed
        src=${a}
        name=${h}
        icon=${i}
        provider=${wt(b)}
      ></wy-preview-embed>` : d === "none" ? b === "Confluence" && g ? y`<wy-confluence-viewer src=${wt(l)} icon=${i} raw=${g}></wy-confluence-viewer>` : l ? y`<wy-preview-icon src=${l} icon=${i} provider=${wt(b)}></wy-preview-icon>` : y`<wy-preview-icon src=${a} icon=${i}></wy-preview-icon>` : L;
  }
}, c(Ca, "WyPreviewItem"), Ca);
Fh.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
w0([
  v({ type: Object })
], Fh.prototype, "file", 2);
Fh = w0([
  Q("wy-preview-item")
], Fh);
function pl(o = "", t = "", i = "", r = !1) {
  if (o) {
    const n = document.createElement("a");
    r && (/^(data:|blob:)/.test(o) ? n.download = i || "download" : o = o.includes("?d=1") || o.includes("&d=1") ? o : o.includes("?") ? o + "&d=1" : o + "?d=1"), t && (n.target = t), n.href = o, document.body.appendChild(n);
    try {
      n.click();
    } catch {
      if (console.warn("Could not open link normally, trying fallback"), /^(?:blob:|data:)/.test(o))
        console.error(`Could not ${r ? "download" : "open"} ${i}`);
      else
        try {
          window.open(o, t);
        } catch {
          console.error(`Could not ${r ? "download" : "open"} ${i}`);
        }
    }
    document.body.removeChild(n);
  }
}
c(pl, "openUrl");
var hk = Object.defineProperty, uk = Object.getOwnPropertyDescriptor, Qc = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? uk(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && hk(t, i, n), n;
}, "__decorateClass$L"), ka;
let lo = (ka = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.noWrapper = !1, this.small = !1, this.hasEventListener = {
      "edit-name": !1,
      subscribe: !1,
      trash: !1,
      restore: !1,
      "delete-forever": !1
    };
  }
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  addEventListener(t, i, r) {
    if (this.hasEventListener) {
      const n = t;
      Object.prototype.hasOwnProperty.call(this.hasEventListener, n) && Object.assign(this.hasEventListener, {
        [n]: !0
      });
    }
    super.addEventListener(t, i, r);
  }
  triggerDownload() {
    this.file && pl(this.file.download_url, "_top", this.file.name, !0);
  }
  triggerExternal() {
    this.file && pl(this.file.external_url, "_blank", this.file.name);
  }
  triggerApplication() {
    this.file && pl(this.file.application_url, "_top", this.file.name);
  }
  dispatchEditName() {
    const t = new CustomEvent("edit-name", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  dispatchSubscribe(t) {
    const i = new CustomEvent("subscribe", {
      detail: {
        file: this.file,
        subscribe: t
      }
    });
    return this.dispatchEvent(i);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  dispatchDeleteForever() {
    const t = new CustomEvent("delete-forever", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  render() {
    var s;
    if (!this.file)
      return L;
    const { icon: t } = mn(this.file.name), i = this.file.id >= 1, r = this.file.provider, n = this.file.provider || "app";
    return y`
      <wy-dropdown directionX="left" ?noWrapper=${this.noWrapper} ?small=${this.small}>
        ${i && this.file.is_trashed ? y`
              ${this.hasEventListener.restore ? y`
                    <wy-dropdown-item @click=${() => this.dispatchRestore()}>
                      <wy-icon name="delete-restore"></wy-icon>
                      ${C("Restore")}
                    </wy-dropdown-item>
                  ` : L}
              ${this.hasEventListener.restore && this.hasEventListener["delete-forever"] ? y` <wy-dropdown-divider></wy-dropdown-divider> ` : L}
              ${this.hasEventListener["delete-forever"] ? y`
                    <wy-dropdown-item @click=${() => this.dispatchDeleteForever()}>
                      <wy-icon name="delete-forever"></wy-icon>
                      ${C("Delete")}
                    </wy-dropdown-item>
                  ` : L}
            ` : L}
        ${this.file.is_trashed ? L : y`
              ${this.file.external_url ? y`
                    <wy-dropdown-item @click=${() => this.triggerExternal()}>
                      <wy-icon name=${t}></wy-icon>
                      ${C(bt`Open in ${r}`)}
                    </wy-dropdown-item>
                  ` : y`
                    ${this.file.application_url && ((s = this.hasFeatures) != null && s.webDAV) ? y`
                          <wy-dropdown-item @click=${() => this.triggerApplication()}>
                            <wy-icon name=${this.file.provider ? lg(this.file.provider) : t}></wy-icon>
                            ${C(bt`Open in ${n}`)}
                          </wy-dropdown-item>
                        ` : L}
                    <wy-dropdown-item @click=${() => this.triggerDownload()}>
                      <wy-icon name="download"></wy-icon>
                      ${C("Download")}
                    </wy-dropdown-item>
                  `}
              ${i ? y`
                    ${this.hasEventListener["edit-name"] ? y`
                          <wy-dropdown-item @click=${() => this.dispatchEditName()}>
                            <wy-icon name="textbox"></wy-icon>
                            ${C("Rename")}
                          </wy-dropdown-item>
                        ` : L}
                    ${this.hasEventListener.subscribe ? this.file.is_subscribed ? y`
                            <wy-dropdown-item @click=${() => this.dispatchSubscribe(!1)}>
                              <wy-icon name="bell-off"></wy-icon>
                              ${C("Unsubscribe")}
                            </wy-dropdown-item>
                          ` : y`
                            <wy-dropdown-item @click=${() => this.dispatchSubscribe(!0)}>
                              <wy-icon name="bell"></wy-icon>
                              ${C("Subscribe")}
                            </wy-dropdown-item>
                          ` : L}
                    ${this.hasEventListener.trash ? y`
                          <wy-dropdown-divider></wy-dropdown-divider>
                          <wy-dropdown-item @click=${() => this.dispatchTrash()}>
                            <wy-icon name="delete"></wy-icon>
                            ${C("Trash")}
                          </wy-dropdown-item>
                        ` : L}
                  ` : L}
            `}
        <slot></slot>
      </wy-dropdown>
    `;
  }
}, c(ka, "WyFileMenu"), ka);
Qc([
  Kt({ context: $w, subscribe: !0 }),
  W()
], lo.prototype, "hasFeatures", 2);
Qc([
  v({ type: Object })
], lo.prototype, "file", 2);
Qc([
  v({ type: Boolean })
], lo.prototype, "noWrapper", 2);
Qc([
  v({ type: Boolean })
], lo.prototype, "small", 2);
Qc([
  v({ type: Object })
], lo.prototype, "hasEventListener", 2);
lo = Qc([
  Q("wy-file-menu"),
  st()
], lo);
function pk(o, t, i, r = {}) {
  return {
    ...r,
    initialPageParam: 0,
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["comments", i],
    queryFn: /* @__PURE__ */ c(async (s) => {
      const a = s.pageParam, l = "/api/" + t + "/" + i + "/comments?orderby=id&skip=" + a + "&take=25", h = await (await o.get(l)).json();
      return h.data = h.data || [], h;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((s, a) => {
      if (s.end && (s == null ? void 0 : s.end) < (s == null ? void 0 : s.count))
        return a.length * 25;
    }, "getNextPageParam")
  };
}
c(pk, "getCommentsOptions");
function yk(o, t) {
  return {
    mutationFn: /* @__PURE__ */ c(async (r) => (await o.post(
      "/api/comments/" + r.id,
      "PATCH",
      JSON.stringify({
        text: r.text,
        blobs: r.blobs,
        attachments: r.attachments,
        meeting_id: r.meetingId,
        options: r.pollOptions.filter((s) => s.text.trim() !== "").map((s) => ({ id: s.id, text: s.text })),
        embed_id: r.embedId || null
      })
    )).json(), "mutationFn"),
    mutationKey: t,
    onSuccess: /* @__PURE__ */ c((r, n) => {
      n.id && _t(
        o.queryClient,
        ["comments", n.parentId],
        n.id,
        (s) => {
          s.text = r.text, s.html = r.html, s.attachments = r.attachments, s.meeting = r.meeting, s.updated_at = r.updated_at, s.updated_by = r.updated_by, s.options = r.options, s.embed = r.embed;
        }
      );
    }, "onSuccess")
  };
}
c(yk, "getUpdateCommentMutationOptions");
function wk(o, t) {
  const i = o.queryClient;
  return {
    mutationFn: /* @__PURE__ */ c(async (n) => (await o.post(
      "/api/" + n.type + "/" + n.parentId + "/comments",
      "POST",
      JSON.stringify({
        text: n.text,
        blobs: n.blobs,
        meeting_id: n.meetingId,
        options: n.pollOptions.filter((a) => a.text.trim() !== "").map((a) => ({ text: a.text })),
        embed_id: n.embedId
      })
    )).json(), "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ c(async (n) => {
      await i.cancelQueries({ queryKey: ["comments", n.parentId] });
      const s = Math.random();
      if (n.user) {
        const a = {
          id: s,
          app: { id: -1 },
          is_trashed: !1,
          text: n.text,
          html: n.text,
          plain: n.text,
          temp: !0,
          created_by: n.user,
          created_at: (/* @__PURE__ */ new Date()).toUTCString(),
          attachments: { count: 0 },
          reactions: { count: 0 },
          is_subscribed: !1,
          is_starred: !1
        };
        ur(i, ["comments", n.parentId], a, void 0, { descending: !1 });
      }
      return { tempId: s };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((n, s, a) => {
      ur(i, ["comments", s.parentId], n, a.tempId, { descending: !1 }), _t(i, [s.type, s.appId], s.parentId, (l) => {
        l.comments ? l.comments.count += 1 : l.comments = { count: 1 };
      });
    }, "onSuccess")
  };
}
c(wk, "getAddCommentMutationOptions");
function fk(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["comments", t],
    mutationFn: /* @__PURE__ */ c(async ({ id: s }) => {
      if (!(await o.post("/api/comments/" + s + "/trash", "POST", "")).ok)
        throw new Error();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.id,
      (a) => Object.assign(a, { is_trashed: !0 })
    ), { type: "trash", id: s.id }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.id,
        (l) => Object.assign(l, s)
      ), _t(i, [a.type, a.appId], a.parentId, (l) => {
        l.comments.count -= 1;
      });
    }, "onSuccess")
    /*onError(error: Error, variables: MutateCommentVariables, _context: any) {
      updateCacheItems(queryClient, { queryKey: options.mutationKey, exact: false }, variables.file.id, (existingFile: FileType) => Object.assign(existingFile, { is_trashed: false }))
    },*/
  };
  return n;
}
c(fk, "getTrashCommentMutationOptions");
function mk(o, t) {
  return new kt(o.queryClient, fk(o, t));
}
c(mk, "getTrashCommentMutation");
function vk(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["comments", t],
    mutationFn: /* @__PURE__ */ c(async ({ id: s }) => {
      const a = await o.post("/api/comments/" + s + "/restore", "POST", "");
      if (!a.ok) {
        const l = await a.json();
        throw new Error(l.detail || l.title, { cause: l });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.id,
      (a) => Object.assign(a, { is_trashed: !1 })
    ), { type: "restore", file: s.id }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.id,
        (l) => Object.assign(l, s)
      ), _t(i, [a.type, a.appId], a.parentId, (l) => {
        l.comments.count += 1;
      });
    }, "onSuccess")
    /*onError(error: Error, variables: MutateCommentVariables, _context: any) {
      updateCacheItems(queryClient, { queryKey: options.mutationKey, exact: false }, variables.file.id, (existingFile: FileType) => Object.assign(existingFile, { is_trashed: true }))
    },*/
  };
  return n;
}
c(vk, "getRestoreCommentMutationOptions");
function gk(o, t) {
  return new kt(o.queryClient, vk(o, t));
}
c(gk, "getRestoreCommentMutation");
var bk = Object.defineProperty, xk = Object.getOwnPropertyDescriptor, f0 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? xk(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && bk(t, i, n), n;
}, "__decorateClass$K"), $a;
let Nh = ($a = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  render() {
    return y`
      <div class="wy-item wy-item-lg">
        <div class="wy-item-body">${C("Comment was trashed.")}</div>
        <wy-button @click=${() => this.dispatchRestore()} class="wy-button-variant">${C("Undo")}</wy-button>
      </div>
    `;
  }
}, c($a, "WyCommentTrashed"), $a);
Nh.styles = rt;
f0([
  v({ type: Number })
], Nh.prototype, "commentId", 2);
Nh = f0([
  Q("wy-comment-trashed"),
  st()
], Nh);
const Ck = 1e3 * 60 * 60, kp = Ck * 24;
function Pd(o, t, i, r = 7) {
  i ?? (i = /* @__PURE__ */ new Date());
  const n = new Date(i.getFullYear(), i.getMonth(), i.getDate()), s = t.valueOf() - i.valueOf(), a = t.toDateString() === i.toDateString(), l = t.valueOf() > n.valueOf() - kp * r && t.valueOf() < n.valueOf() + kp * r;
  if (!a && l) {
    const d = Math.round(s / kp);
    return new Intl.RelativeTimeFormat(o, { numeric: "auto" }).format(d, "days");
  } else return a ? new Intl.DateTimeFormat(o, { timeStyle: "short" }).format(t) : new Intl.DateTimeFormat(o, { dateStyle: "short" }).format(t);
}
c(Pd, "relativeTime");
function m0(o) {
  const t = [o];
  for (; o && o.parent; )
    o = o.parent, t.push(o);
  return t;
}
c(m0, "getEntityChain");
function v0(o, t, i) {
  return o.type === t && (!i || o.id === i.id);
}
c(v0, "isEntityMatch");
function bu(o, t, i) {
  return m0(o).some((n) => n && v0(n, t, i));
}
c(bu, "isEntityChainMatch");
function g0(o, t, i) {
  return m0(o).find((n) => n && v0(n, t, i));
}
c(g0, "getEntityChainMatch");
function b0(o, t, i, r) {
  const n = g0(o, r);
  return n && n.parent ? bu(n.parent, t, i) : !1;
}
c(b0, "hasEntityChildType");
function x0(o, t, i) {
  const r = new CustomEvent("wy:link", {
    bubbles: !0,
    composed: !0,
    cancelable: !0,
    detail: { ...i.link }
  });
  return o.dispatchEvent(r);
}
c(x0, "dispatchLinkEvent");
function C0(o) {
  const t = o.args;
  switch (o.template) {
    case "**{0}** added *{1}* to **{2}**": {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} added ${r} to ${n}`),
        titleHtml: C(y`<strong>${i}</strong> added <em>${r}</em> to <strong>${n}</strong>`)
      };
    }
    case "**{0}** edited *{1}*": {
      const [i, r] = t;
      return {
        title: C(bt`${i} edited ${r}`),
        titleHtml: C(y`<strong>${i}</strong> edited <em>${r}</em>`)
      };
    }
    case '**{0}** commented on *{1}*: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} commented on ${r}`),
        titleHtml: C(y`<strong>${i}</strong> commented on <em>${r}</em>`),
        detail: n
      };
    }
    case '**{0}** commented on **{1}**: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} commented on ${r}`),
        titleHtml: C(y`<strong>${i}</strong> commented on <strong>${r}</strong>`),
        detail: n
      };
    }
    case '**{0}** replied to your post: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} replied to your post`),
        titleHtml: C(y`<strong>${i}</strong> replied to your post`),
        detail: r
      };
    }
    case '**{0}** replied to a post: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} replied to a post`),
        titleHtml: C(y`<strong>${i}</strong> replied to a post`),
        detail: r
      };
    }
    case '**{0}** mentioned you in a comment: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} mentioned you in a comment`),
        titleHtml: C(y`<strong>${i}</strong> mentioned you in a comment`),
        detail: r
      };
    }
    case '**{0}** posted in **{1}**: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} posted in ${r}`),
        titleHtml: C(y`<strong>${i}</strong> posted in <strong>${r}</strong>`),
        detail: n
      };
    }
    case '**{0}** mentioned you in a post: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} mentioned you in a post`),
        titleHtml: C(y`<strong>${i}</strong> mentioned you in a post`),
        detail: r
      };
    }
    case 'New message from **{0}**: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`New message from ${i}`),
        titleHtml: C(y`New message from <strong>${i}</strong>`),
        detail: r
      };
    }
    case '**{0}** sent a message in **{1}**: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} sent a message in ${r}`),
        titleHtml: C(y`<strong>${i}</strong> sent a message in <strong>${r}</strong>`),
        detail: n
      };
    }
    case '**{0}** mentioned you in a message: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} mentioned you in a message`),
        titleHtml: C(y`<strong>${i}</strong> mentioned you in a message`),
        detail: r
      };
    }
    case '**{0}** edited a post: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} edited a post`),
        titleHtml: C(y`<strong>${i}</strong> edited a post`),
        detail: r
      };
    }
    case "**{0}** liked *{1}*": {
      const [i, r] = t;
      return {
        title: C(bt`${i} liked ${r}`),
        titleHtml: C(y`<strong>${i}</strong> liked <em>${r}</em>`)
      };
    }
    case "**{0}** reacted {2} to *{1}*": {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} reacted ${r} to ${n}`),
        titleHtml: C(y`<strong>${i}</strong> reacted ${r} to <em>${n}</em>`)
      };
    }
    case '**{0}** liked your comment: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} liked your comment`),
        titleHtml: C(y`<strong>${i}</strong> liked your comment`),
        detail: r
      };
    }
    case '**{0}** reacted {1} to your comment: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} reacted ${r} to your comment`),
        titleHtml: C(y`<strong>${i}</strong> reacted ${r} to your comment`),
        detail: n
      };
    }
    case '**{0}** liked your message: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} liked your message`),
        titleHtml: C(y`<strong>${i}</strong> liked your message`),
        detail: r
      };
    }
    case '**{0}** reacted {1} to your message: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} reacted ${r} to your message`),
        titleHtml: C(y`<strong>${i}</strong> reacted ${r} to your message`),
        detail: n
      };
    }
    case '**{0}** liked your post: "{1}"': {
      const [i, r] = t;
      return {
        title: C(bt`${i} liked your post`),
        titleHtml: C(y`<strong>${i}</strong> liked your post`),
        detail: r
      };
    }
    case '**{0}** reacted {1} to your post: "{2}"': {
      const [i, r, n] = t;
      return {
        title: C(bt`${i} reacted ${r} to your post`),
        titleHtml: C(y`<strong>${i}</strong> reacted ${r} to your post`),
        detail: n
      };
    }
    case "**{0}** voted on your poll": {
      const [i] = t;
      return {
        title: C(bt`${i} voted on your poll`),
        titleHtml: C(y`<strong>${i}</strong> voted on your poll`)
      };
    }
    case "**{0}** and **{1}** voted on your poll": {
      const [i, r] = t;
      return {
        title: C(bt`${i} and ${r} voted on your poll`),
        titleHtml: C(y`<strong>${i}</strong> and <strong>${r}</strong> voted on your poll`)
      };
    }
    case "**{0}**, **{1}** and **{2}** voted on your poll": {
      const [i, r, n] = t;
      return {
        title: C(bt`${i}, ${r} and ${n} voted on your poll`),
        titleHtml: C(
          y`<strong>${i}</strong>, <strong>${r}</strong> and <strong>${n}</strong> voted on your poll`
        )
      };
    }
    case "**{0}** and {1} others voted on your poll": {
      const [i, r] = t;
      return {
        title: C(bt`${i} and ${r} others voted on your poll`),
        titleHtml: C(y`<strong>${i}</strong> and ${r} others voted on your poll`)
      };
    }
    default:
      return console.error(`Notification template not found! '${o.template}'`), { title: "", titleHtml: L };
  }
}
c(C0, "getNotificationText");
var kk = Object.defineProperty, $k = Object.getOwnPropertyDescriptor, xu = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? $k(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && kk(t, i, n), n;
}, "__decorateClass$J"), Ea;
let zc = (Ea = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.showSheet = !1, this.getVotesQuery = new xe(this);
  }
  updated(t) {
    t.has("weavyContext") && this.weavyContext && this.option && this.getVotesQuery.trackQuery(Tx(this.weavyContext, this.option.id));
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t } });
    return this.dispatchEvent(i);
  }
  openSheet(t) {
    var i;
    t.preventDefault(), t.stopPropagation(), (i = this.getVotesQuery.observer) == null || i.refetch(), this.showSheet = !this.showSheet;
  }
  render() {
    var n, s;
    const { data: t, isLoading: i } = this.getVotesQuery.result ?? {}, r = this.totalVotes > 0 ? Math.round((((n = this.option.votes) == null ? void 0 : n.count) || 0) / this.totalVotes * 100) : 0;
    return y`
      <div
        class="wy-item wy-poll-option"
        tabindex="0"
        @click=${() => this.dispatchVote(this.option.id)}
        @keydown=${Ne}
        @keyup=${li}
      >
        <div class="wy-progress" style="width: ${r + "%"}"></div>
        ${this.option.has_voted ? y`<wy-icon name="check-circle"></wy-icon>` : y`<wy-icon name="circle-outline"></wy-icon>`}
        <div class="wy-item-body">${this.option.text}</div>
        ${r > 0 ? y`<span
              class="wy-facepile"
              tabindex="0"
              @click=${(a) => this.openSheet(a)}
              @keydown=${Ne}
              @keyup=${li}
            >
              ${r + "%"}
            </span>` : L}
      </div>

      ${this.weavyContext ? y`
            <wy-sheet
              .show=${this.showSheet}
              @close=${() => this.showSheet = !1}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <span slot="appbar-text">${C(bt`Votes on ${this.option.text}`)}</span>
              <!-- <wy-spinner></wy-spinner> -->
              ${this.showSheet && t && !i ? y`
                    ${(s = t.votes) == null ? void 0 : s.data.map(
      (a) => y`
                        <div class="wy-item">
                          <wy-avatar .size=${32} .src=${a.avatar_url} .name=${a.display_name}></wy-avatar>
                          <div class="wy-item-body">${a.display_name}</div>
                        </div>
                      `
    )}
                  ` : L}
            </wy-sheet>
          ` : L}
    `;
  }
}, c(Ea, "WyPollOption"), Ea);
zc.styles = rt;
xu([
  v({ type: Number, attribute: !1 })
], zc.prototype, "totalVotes", 2);
xu([
  v({ attribute: !1 })
], zc.prototype, "option", 2);
xu([
  W()
], zc.prototype, "showSheet", 2);
zc = xu([
  Q("wy-poll-option"),
  st()
], zc);
var Ek = Object.defineProperty, _k = Object.getOwnPropertyDescriptor, k0 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? _k(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && Ek(t, i, n), n;
}, "__decorateClass$I"), _a;
let Vh = (_a = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.pollOptions = [];
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t } });
    return this.dispatchEvent(i);
  }
  render() {
    const t = this.pollOptions.reduce((i, r) => {
      var n;
      return i + (((n = r.votes) == null ? void 0 : n.count) || 0);
    }, 0);
    return y`
      <div class="wy-poll">
        ${this.pollOptions.map(
      (i) => y`<wy-poll-option
              @vote=${(r) => this.dispatchVote(r.detail.id)}
              .option=${i}
              .totalVotes=${t}></wy-poll-option>`
    )}
      </div>
    `;
  }
}, c(_a, "WyPoll"), _a);
Vh.styles = [
  rt,
  vt`
      :host {
        display: grid;
      }
    `
];
k0([
  v({ type: Array, attribute: !1 })
], Vh.prototype, "pollOptions", 2);
Vh = k0([
  Q("wy-poll")
], Vh);
var Pk = Object.defineProperty, Sk = Object.getOwnPropertyDescriptor, Te = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? Sk(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && Pk(t, i, n), n;
}, "__decorateClass$H"), Pa;
let ye = (Pa = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isTrashed = !1, this.text = "", this.html = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.previewRef = dt(), this.highlightRef = dt(), this.highlight = !1;
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t } });
    return this.dispatchEvent(i);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  dispatchEdit(t) {
    const i = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(i);
  }
  willUpdate(t) {
    t.has("link") && (this.highlight = !!(this.link && bu(this.link, lr.Comment, { id: this.commentId }))), t.has("highlight") && (this.highlight ? this.part.add("wy-highlight") : this.part.remove("wy-highlight"));
  }
  render() {
    var s, a, l, d, h, w;
    const t = (s = this.attachments) == null ? void 0 : s.filter((m) => m.kind === "image" && m.thumbnail_url), i = (a = this.attachments) == null ? void 0 : a.filter((m) => m.kind !== "image" || !m.thumbnail_url), r = new Intl.DateTimeFormat((l = this.weavyContext) == null ? void 0 : l.locale, {
      dateStyle: "full",
      timeStyle: "short"
    }).format(new Date(this.createdAt)), n = Pd((d = this.weavyContext) == null ? void 0 : d.locale, new Date(this.createdAt));
    return this.temp ? y`<div class="wy-item wy-item-sm wy-comment-header">
            <wy-avatar
              .src="${this.createdBy.avatar_url}"
              .size=${32}
              .name=${this.createdBy.display_name}
              .isBot=${this.createdBy.is_bot}
            ></wy-avatar>
            <div class="wy-item-body">
              <div class="wy-item-title"><span class="wy-placeholder">${this.createdBy.display_name}</span></div>
              <div class="wy-item-text">
                <time class="wy-placeholder">${n}</time>
              </div>
            </div>
          </div>
          <div class="wy-comment-body">
            <div class="wy-comment-content">
              ${this.html ? y`<div class="wy-content"><wy-skeleton .text=${this.text}></wy-skeleton></div>` : ""}
            </div>
          </div>` : y`<div class="wy-item wy-item-sm wy-comment-header" ${it(this.highlightRef)}>
            <wy-avatar
              .src=${this.createdBy.avatar_url}
              .size=${32}
              .name=${this.createdBy.display_name}
              .isBot=${this.createdBy.is_bot}
            ></wy-avatar>
            <div class="wy-item-body">
              <div class="wy-item-title">${this.createdBy.display_name}</div>
              <div class="wy-item-text">
                <time datetime=${this.createdAt} title=${r}>${n}</time>
                ${this.modifiedAt ? y`<time datetime=${this.modifiedAt}> · ${C("edited")}</time>` : L}
              </div>
            </div>

            ${this.user && this.user.id === this.createdBy.id ? y`
                  <div class="wy-item-actions wy-item-top">
                    <wy-dropdown>
                      ${this.user.id === this.createdBy.id ? y`<wy-dropdown-item @click=${() => this.dispatchEdit(!0)}>
                            <wy-icon name="pencil"></wy-icon>
                            ${C("Edit")}
                          </wy-dropdown-item>` : L}
                      ${this.user.id === this.createdBy.id ? y`<wy-dropdown-item @click=${() => this.dispatchTrash()}>
                            <wy-icon name="trashcan"></wy-icon>
                            ${C("Trash")}
                          </wy-dropdown-item>` : L}
                    </wy-dropdown>
                  </div>
                ` : L}
          </div>
          <div class="wy-comment-body">
            <div class="wy-comment-content">
              <!-- image grid -->
              ${t && t.length ? y`<wy-image-grid
                    .images=${t}
                    @file-open=${(m) => {
      var f;
      (f = this.previewRef.value) == null || f.open(m.detail.fileId);
    }}
                  ></wy-image-grid>` : ""}

              <!-- embeds -->
              ${this.embed && ((h = this.hasFeatures) != null && h.embeds) ? y` <wy-embed class="wy-embed" .embed=${this.embed}></wy-embed> ` : L}
              ${this.html ? y`<div class="wy-content">${no(this.html)}</div>` : ""}

              <!-- poll -->
              ${this.pollOptions && this.pollOptions.length > 0 ? y`
                    <wy-poll
                      .pollOptions=${this.pollOptions}
                      @vote=${(m) => this.dispatchVote(m.detail.id)}
                    ></wy-poll>
                  ` : L}

              <!-- files -->
              ${i && i.length ? y`<wy-attachments-list
                    .files=${i ?? []}
                    @file-open=${(m) => {
      var f;
      (f = this.previewRef.value) == null || f.open(m.detail.fileId);
    }}
                  ></wy-attachments-list>` : ""}

              <!-- meeting -->
              ${this.meeting ? y`<wy-meeting-card .meeting=${this.meeting}></wy-meeting-card>` : ""}
            </div>
          </div>

          ${(w = this.hasFeatures) != null && w.reactions ? y` <wy-reactions
                lineBottom
                small
                .reactions=${this.reactions}
                parentId=${this.parentId}
                entityId=${this.commentId}
                messageType="comments"
              ></wy-reactions>` : L}

          <wy-preview
            ${it(this.previewRef)}
            .uid=${`comment-${this.parentId}-${this.commentId.toString()}`}
            .files=${this.attachments}
            .isAttachment=${!0}
          ></wy-preview> `;
  }
  updated(t) {
    var i;
    t.has("highlight") && this.highlight && ((i = this.highlightRef.value) == null || i.scrollIntoView({ block: "nearest" }));
  }
}, c(Pa, "WyCommentView"), Pa);
ye.styles = rt;
Te([
  v({ type: Number })
], ye.prototype, "commentId", 2);
Te([
  v({ type: Number })
], ye.prototype, "parentId", 2);
Te([
  v({ type: Boolean })
], ye.prototype, "temp", 2);
Te([
  v({ attribute: !1 })
], ye.prototype, "createdBy", 2);
Te([
  v()
], ye.prototype, "createdAt", 2);
Te([
  v()
], ye.prototype, "modifiedAt", 2);
Te([
  v({ type: Boolean })
], ye.prototype, "isTrashed", 2);
Te([
  v()
], ye.prototype, "text", 2);
Te([
  v()
], ye.prototype, "html", 2);
Te([
  v({ type: Array })
], ye.prototype, "attachments", 2);
Te([
  v({ attribute: !1 })
], ye.prototype, "embed", 2);
Te([
  v({ type: Array })
], ye.prototype, "pollOptions", 2);
Te([
  v({ attribute: !1 })
], ye.prototype, "meeting", 2);
Te([
  v({ type: Array })
], ye.prototype, "reactions", 2);
Te([
  v({ type: Boolean })
], ye.prototype, "highlight", 2);
ye = Te([
  Q("wy-comment-view"),
  st()
], ye);
var $0 = "Expected a function", _v = NaN, Lk = "[object Symbol]", Mk = /^\s+|\s+$/g, Tk = /^[-+]0x[0-9a-f]+$/i, Ak = /^0b[01]+$/i, zk = /^0o[0-7]+$/i, Rk = parseInt, Ik = typeof Id == "object" && Id && Id.Object === Object && Id, Ok = typeof self == "object" && self && self.Object === Object && self, Dk = Ik || Ok || Function("return this")(), Fk = Object.prototype, Nk = Fk.toString, Vk = Math.max, Hk = Math.min, $p = /* @__PURE__ */ c(function() {
  return Dk.Date.now();
}, "now");
function Bk(o, t, i) {
  var r, n, s, a, l, d, h = 0, w = !1, m = !1, f = !0;
  if (typeof o != "function")
    throw new TypeError($0);
  t = Pv(t) || 0, Hh(i) && (w = !!i.leading, m = "maxWait" in i, s = m ? Vk(Pv(i.maxWait) || 0, t) : s, f = "trailing" in i ? !!i.trailing : f);
  function b(D) {
    var z = r, F = n;
    return r = n = void 0, h = D, a = o.apply(F, z), a;
  }
  c(b, "invokeFunc");
  function g(D) {
    return h = D, l = setTimeout(k, t), w ? b(D) : a;
  }
  c(g, "leadingEdge");
  function $(D) {
    var z = D - d, F = D - h, A = t - z;
    return m ? Hk(A, s - F) : A;
  }
  c($, "remainingWait");
  function O(D) {
    var z = D - d, F = D - h;
    return d === void 0 || z >= t || z < 0 || m && F >= s;
  }
  c(O, "shouldInvoke");
  function k() {
    var D = $p();
    if (O(D))
      return S(D);
    l = setTimeout(k, $(D));
  }
  c(k, "timerExpired");
  function S(D) {
    return l = void 0, f && r ? b(D) : (r = n = void 0, a);
  }
  c(S, "trailingEdge");
  function _() {
    l !== void 0 && clearTimeout(l), h = 0, r = d = n = l = void 0;
  }
  c(_, "cancel");
  function V() {
    return l === void 0 ? a : S($p());
  }
  c(V, "flush");
  function I() {
    var D = $p(), z = O(D);
    if (r = arguments, n = this, d = D, z) {
      if (l === void 0)
        return g(d);
      if (m)
        return l = setTimeout(k, t), b(d);
    }
    return l === void 0 && (l = setTimeout(k, t)), a;
  }
  return c(I, "debounced"), I.cancel = _, I.flush = V, I;
}
c(Bk, "debounce");
function Uk(o, t, i) {
  var r = !0, n = !0;
  if (typeof o != "function")
    throw new TypeError($0);
  return Hh(i) && (r = "leading" in i ? !!i.leading : r, n = "trailing" in i ? !!i.trailing : n), Bk(o, t, {
    leading: r,
    maxWait: t,
    trailing: n
  });
}
c(Uk, "throttle");
function Hh(o) {
  var t = typeof o;
  return !!o && (t == "object" || t == "function");
}
c(Hh, "isObject");
function jk(o) {
  return !!o && typeof o == "object";
}
c(jk, "isObjectLike");
function Wk(o) {
  return typeof o == "symbol" || jk(o) && Nk.call(o) == Lk;
}
c(Wk, "isSymbol");
function Pv(o) {
  if (typeof o == "number")
    return o;
  if (Wk(o))
    return _v;
  if (Hh(o)) {
    var t = typeof o.valueOf == "function" ? o.valueOf() : o;
    o = Hh(t) ? t + "" : t;
  }
  if (typeof o != "string")
    return o === 0 ? o : +o;
  o = o.replace(Mk, "");
  var i = Ak.test(o);
  return i || zk.test(o) ? Rk(o.slice(2), i ? 2 : 8) : Tk.test(o) ? _v : +o;
}
c(Pv, "toNumber");
var qk = Uk;
const Bh = /* @__PURE__ */ kb(qk);
function Qk(o, t) {
  return new kt(o.queryClient, {
    mutationFn: /* @__PURE__ */ c(async () => await o.post(`/api/conversations/${t}/typing`, "PUT", JSON.stringify({})), "mutationFn")
  });
}
c(Qk, "typingMutation");
function Sv(o, t) {
  return new kt(o.queryClient, {
    mutationFn: /* @__PURE__ */ c(async () => {
      const i = await o.post(`/x/${t}/meetings`, "POST");
      if (!i.ok)
        throw new Error("Failed to create meeting");
      return await i.json();
    }, "mutationFn")
  });
}
c(Sv, "addMeetingMutation");
function Ut(o, t, i, r) {
  const n = o.getMutationCache(), s = n.find({
    mutationKey: t,
    predicate: /* @__PURE__ */ c((a) => a.state.variables === i, "predicate")
  });
  if (s && s.state.context) {
    const a = { ...s.state.context };
    r(a);
    const l = { ...s.state, context: a };
    s.state = l, n.notify({
      mutation: s,
      type: "updated",
      action: {
        type: "pending",
        context: s.state.context,
        variables: s.state.variables,
        isPaused: !1
      }
    });
  }
}
c(Ut, "updateMutationContext");
function E0(o, t, i) {
  const r = o.getMutationCache().find({ mutationKey: t, exact: !0, predicate: i });
  r && o.getMutationCache().remove(r);
}
c(E0, "removeMutation");
function Kk(o, t) {
  const i = o.getMutationCache();
  i.findAll({ mutationKey: t, exact: !0 }).forEach((n) => {
    i.remove(n);
  });
}
c(Kk, "removeMutations");
const Bw = /* @__PURE__ */ c((o, t, i = 0, r = "application/octet-stream", n, s = Date.now()) => {
  const a = o && (o instanceof URL ? o.toString() : URL.createObjectURL(o));
  return {
    id: s,
    app: { id: -1 },
    refId: s,
    name: t,
    kind: Rw(t),
    size: i,
    media_type: r,
    embed_url: "",
    preview_format: Q4(t),
    thumbnail_url: a,
    preview_url: a,
    download_url: a,
    version: -1,
    created_by: n,
    created_at: (/* @__PURE__ */ new Date()).toUTCString(),
    is_subscribed: !1,
    is_trashed: !1,
    is_starred: !1
  };
}, "getTempFile");
function Gk(o) {
  const t = o ? o.reduce(
    (i, r) => {
      var s, a;
      const n = (s = r.context) == null ? void 0 : s.file;
      return n && ((a = r.context) != null && a.status.progress) && n.size ? {
        loaded: i.loaded + r.context.status.progress * n.size,
        total: i.total + n.size
      } : i;
    },
    { loaded: 0, total: 0 }
  ) : { loaded: 0, total: 0 };
  return {
    loaded: t.loaded,
    total: t.total,
    percent: t.total > 0 ? t.loaded / t.total : null
  };
}
c(Gk, "getFileMutationsTotalProgress");
function Zk(o) {
  return o ? o.some((t) => {
    var i;
    return ((i = t.context) == null ? void 0 : i.status.state) === "conflict";
  }) ? "conflict" : o.some((t) => t.status === "error") ? "error" : o.every((t) => t.status === "success") ? "ok" : "pending" : "ok";
}
c(Zk, "getFileMutationsTotalStatus");
function Yk(o) {
  return (o == null ? void 0 : o.filter(
    (t) => {
      var i;
      return ((i = t.context) == null ? void 0 : i.status.state) === "conflict" || t.status === "error";
    }
  )) || [];
}
c(Yk, "getFileMutationsByConflictOrError");
function Xk(o, t, i) {
  const r = o.queryClient;
  r.getMutationCache().findAll({
    mutationKey: ["apps", t.id, "files"],
    exact: !0,
    predicate: /* @__PURE__ */ c((n) => {
      var s;
      return /error|success/.test(n.state.status) && ((s = n.state.variables.blob) == null ? void 0 : s.name) === i;
    }, "predicate")
  }).forEach((n) => {
    r.getMutationCache().remove(n);
  });
}
c(Xk, "removeSettledFileMutations");
function Jk(o, t, i) {
  const r = o.queryClient, n = ["apps", i.id, "files"];
  return {
    mutationFn: /* @__PURE__ */ c(async ({ blob: a, replace: l = !1 }) => {
      const d = await o.post(
        "/api/apps/" + i.id + "/files",
        "POST",
        JSON.stringify({ blob_id: a.id, replace: l })
      );
      if (!d.ok) {
        const h = await d.json();
        throw new Error(h.detail || h.title, { cause: h });
      }
      return await d.json();
    }, "mutationFn"),
    mutationKey: n,
    onMutate: /* @__PURE__ */ c(async (a) => {
      await r.cancelQueries({ queryKey: n, exact: !0 }), t$(o, i, a.blob.name), Xk(o, i, a.blob.name);
      let l;
      try {
        l = a.blob.thumbnail_url && new URL(a.blob.thumbnail_url) || void 0;
      } catch {
      }
      const d = Bw(l, a.blob.name, a.blob.size, a.blob.media_type, t);
      return {
        type: a.replace ? "replace" : "create",
        file: d,
        status: { state: "pending" }
      };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((a, l, d) => (Ut(r, n, l, (h) => {
      h && (h.status.state = "ok", h.status.progress = void 0, h.status.text = void 0);
    }), r.invalidateQueries({ queryKey: n })), "onSuccess"),
    onError(a, l, d) {
      var h, w, m;
      ((h = a == null ? void 0 : a.cause) == null ? void 0 : h.status) === 409 ? Ut(r, n, l, (f) => {
        f && (f.status.progress = void 0, f.status.state = "conflict", f.status.text = a.message);
      }) : ((w = d.file) != null && w.refId || ((m = d.file) == null || m.id), Ut(r, n, l, (f) => {
        f && (f.status.state = "error", f.status.progress = void 0, f.status.text = a.message);
      }));
    }
  };
}
c(Jk, "getCreateFileMutationOptions");
function t$(o, t, i, r) {
  const n = o.queryClient;
  n.getMutationCache().findAll({
    mutationKey: ["apps", t.id, "blobs", r],
    exact: !0,
    status: "success",
    predicate: /* @__PURE__ */ c((s) => s.state.data.name === i, "predicate")
  }).forEach((s) => {
    n.getMutationCache().remove(s);
  });
}
c(t$, "removeSuccessfulUploadBlobMutations");
async function _0(o, t, i) {
  const r = new FormData();
  r.append("blob", t);
  const n = await o.upload("/api/blobs", "POST", r, ah.Auto, (a) => {
    i && i({ progress: a });
  });
  if (!n.ok) {
    const a = await n.json();
    throw new Error(a.detail || a.title, { cause: a });
  }
  return await n.json();
}
c(_0, "uploadBlob");
function e$(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async (i) => await _0(o, i.file, i.onProgress), "mutationFn")
    // TODO: implement onmutate, onsuccess, onerror...    
  };
}
c(e$, "getSimpleUploadBlobMutationOptions");
function P0(o, t, i, r) {
  const n = o.queryClient, s = ["apps", i.id, "blobs", r];
  return {
    mutationFn: /* @__PURE__ */ c(async (l) => await _0(o, l.file, l.onProgress), "mutationFn"),
    mutationKey: s,
    onMutate: /* @__PURE__ */ c(async (l) => {
      await n.cancelQueries({ queryKey: s, exact: !0 });
      const d = Bw(l.file, l.file.name, l.file.size, l.file.type, t);
      return l.onProgress = ({ progress: h }) => {
        Ut(n, s, l, (w) => {
          w.status.state = "pending", w.status.progress = h;
        });
      }, { type: "upload", file: d, status: { state: "pending" } };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((l, d, h) => {
      Ut(n, s, d, (w) => {
        w.status.state = "ok", w.status.progress = void 0, w.status.text = void 0;
      });
    }, "onSuccess"),
    onError(l, d, h) {
      const w = l.cause;
      w && w.status === 409 ? Ut(n, s, d, (m) => {
        m.status.state = "conflict", m.status.progress = void 0, m.status.text = w.detail || w.title;
      }) : Ut(n, s, d, (m) => {
        m && (m.status.state = "error", m.status.progress = void 0, m.status.text = w.detail || w.title);
      });
    }
  };
}
c(P0, "getUploadBlobMutationOptions");
function Lv(o, t) {
  return o.findAll(t.filters).map(
    (i) => t.select ? t.select(i) : i.state
  );
}
c(Lv, "getResult");
const tm = class tm {
  constructor(t) {
    this.alwaysUpdate = !1, t.addController(this), this.host = t, this.setContext();
  }
  async setContext() {
    this.whenContext = new Promise((t) => this.resolveContext = t), await Fc(this.host), this.context = new cn(this.host, { context: ne, subscribe: !0 });
  }
  hostUpdate() {
    var t, i;
    (t = this.context) != null && t.value && ((i = this.resolveContext) == null || i.call(this));
  }
  async trackMutationState(t, i) {
    var r, n, s;
    if (i || (await this.whenContext, i = (n = (r = this.context) == null ? void 0 : r.value) == null ? void 0 : n.queryClient), !i)
      throw new Error("No QueryClient provided");
    return (s = this.mutationCacheUnsubscribe) == null || s.call(this), this.options = t, this.mutationCache = i.getMutationCache(), this.mutationCacheSubscribe(), this.result;
  }
  mutationCacheSubscribe() {
    this.mutationCache && this.options && (this.result = Lv(this.mutationCache, this.options), this.mutationCacheUnsubscribe = this.mutationCache.subscribe((t) => {
      if (this.mutationCache && this.options && /added|removed|updated/.test(t.type)) {
        const i = Lv(this.mutationCache, this.options);
        (this.result !== i || ll(this.result, i)) && (this.result = i, this.host.requestUpdate());
      }
    }), this.host.requestUpdate());
  }
  untrackMutationState() {
    var t;
    (t = this.mutationCacheUnsubscribe) == null || t.call(this), this.mutationCacheUnsubscribe = void 0, this.result = void 0, this.options = void 0, this.mutationCache = void 0, this.host.requestUpdate();
  }
  hostConnected() {
    this.mutationCacheSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.mutationCacheUnsubscribe) == null || t.call(this);
  }
};
c(tm, "MutationStateController");
let Uh = tm;
async function i$(o, t) {
  const i = await o.post("/api/blobs/external", "POST", JSON.stringify(t));
  if (!i.ok) {
    const n = await i.json();
    throw new Error(n.detail || n.title, { cause: n });
  }
  return await i.json();
}
c(i$, "externalBlob");
function r$(o, t, i, r) {
  const n = o.queryClient, s = ["apps", i.id, "blobs", r];
  return {
    mutationFn: /* @__PURE__ */ c(async (l) => await i$(o, l.externalBlob), "mutationFn"),
    mutationKey: s,
    onMutate: /* @__PURE__ */ c(async (l) => (await n.cancelQueries({ queryKey: s, exact: !0 }), { type: "attach", file: Bw(void 0, l.externalBlob.name, l.externalBlob.size, void 0, t), status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((l, d, h) => {
      Ut(n, s, d, (w) => {
        w.status.state = "ok", w.status.progress = void 0, w.status.text = void 0;
      });
    }, "onSuccess"),
    onError(l, d, h) {
      const w = l.cause;
      w && w.status === 409 ? Ut(n, s, d, (m) => {
        m.status.state = "conflict", m.status.progress = void 0, m.status.text = w.detail || w.title;
      }) : Ut(n, s, d, (m) => {
        m && (m.status.state = "error", m.status.progress = void 0, m.status.text = w.detail || w.title);
      });
    }
  };
}
c(r$, "getExternalBlobMutationOptions");
function S0(o, t, i, r) {
  return new kt(
    o.queryClient,
    r$(o, t, i, r)
  );
}
c(S0, "getExternalBlobMutation");
const n$ = /(((https?|ftp):\/\/|(www|ftp)\.)[\w]+(.[\w]+)([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#]))/gim;
let To = [], Al = [], jh = [], th = [], cr = {};
const o$ = /* @__PURE__ */ c((o, t) => o.length === t.length && o.every((i, r) => i === t[r]), "arrayEquals");
function s$() {
  return !!Object.keys(cr).length;
}
c(s$, "isFetchingEmbeds");
async function a$(o, t) {
  new FormData().append("url", o);
  let r;
  try {
    const n = await t.post("/api/embeds", "POST", JSON.stringify({ url: o }));
    if (!n.ok)
      throw new Error();
    r = await n.json(), delete cr[o], Al = [...Al, o];
  } catch {
    jh = [...jh, o], delete cr[o];
  }
  return r;
}
c(a$, "fetchEmbed");
const c$ = /* @__PURE__ */ c(() => {
  To = [], Al = [], jh = [], th = [], cr = {};
}, "clearEmbeds"), Mv = /* @__PURE__ */ c((o) => {
  Al = o;
}, "initEmbeds"), l$ = /* @__PURE__ */ c(async (o, t, i) => {
  var n;
  let r = ((n = o.match(n$)) == null ? void 0 : n.map((s) => s)) || null;
  if (r !== null && (r = r.map((s) => s.startsWith("//") ? "http:" + s : !s.startsWith("http://") && !s.startsWith("https://") ? "http://" + s : s)), !(r === null || r.length === 0)) {
    if (r.length !== To.length || !o$(r, To)) {
      To = r, r.forEach((s) => {
        !Al.includes(s) && !jh.includes(s) && !th.includes(s) && typeof cr[s] > "u" && (cr[s] = window.setTimeout(async () => {
          const a = await a$(s, i);
          a && t(a);
        }, 500));
      }), th = th.filter((s) => To.includes(s));
      for (const s in cr)
        To.includes(s) || (window.clearTimeout(cr[s]), delete cr[s]);
    }
  }
}, "getEmbeds");
var Sa;
const em = class em {
  constructor(t) {
    T(this, Sa, !1);
    t.addController(this), this.host = t, t.addEventListener("dragstart", () => this.isDragActive = !0), t.addEventListener("dragenter", () => this.isDragActive = !0), t.addEventListener("dragover", (i) => {
      i.preventDefault(), this.isDragActive = !0;
    }), t.addEventListener("dragleave", () => this.isDragActive = !1), t.addEventListener("dragend", () => this.isDragActive = !1), t.addEventListener("drop", (i) => this.handleDrop(i));
  }
  get isDragActive() {
    return u(this, Sa);
  }
  set isDragActive(t) {
    u(this, Sa) !== t && (E(this, Sa, t), this.host.requestUpdate());
  }
  handleDrop(t) {
    var r, n;
    t.preventDefault();
    const i = [];
    (r = t.dataTransfer) != null && r.items ? [...t.dataTransfer.items].forEach((s) => {
      if (s.kind === "file") {
        const a = s.getAsFile();
        i.push(a);
      }
    }) : (n = t.dataTransfer) != null && n.files && [...t.dataTransfer.files].forEach((s) => {
      i.push(s);
    }), i.length && this.dispatchUploadFiles(i), this.isDragActive = !1;
  }
  dispatchUploadFiles(t) {
    const i = new CustomEvent("drop-files", { detail: { files: t } });
    return this.host.dispatchEvent(i);
  }
  hostDisconnected() {
  }
};
Sa = new WeakMap(), c(em, "DropZoneController");
let Wh = em;
var d$ = Object.defineProperty, h$ = Object.getOwnPropertyDescriptor, Kc = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? h$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && d$(t, i, n), n;
}, "__decorateClass$G"), La;
let yn = (La = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.status = {
      state: "ok"
    }, this.hasHover = !0, this.isRenaming = !1;
  }
  dispatchEditName(t) {
    const i = new CustomEvent("edit-name", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchRename(t, i) {
    const r = new CustomEvent("rename", { detail: { file: t, name: i } });
    return this.dispatchEvent(r);
  }
  dispatchTrash(t) {
    const i = new CustomEvent("trash", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchRestore(t) {
    const i = new CustomEvent("restore", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchDeleteForever(t) {
    const i = new CustomEvent("delete-forever", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchSubscribe(t, i) {
    const r = new CustomEvent("subscribe", { detail: { file: t, subscribe: i } });
    return this.dispatchEvent(r);
  }
  render() {
    const t = this.file;
    if (!t) return L;
    const { icon: i } = mn(t.name), r = f4(this.actionType), n = _i(t.name), s = jc(t.provider), a = /* @__PURE__ */ c((d) => {
      d.stopImmediatePropagation();
      const h = d.target;
      h.value && h.value !== t.name ? this.dispatchRename(t, h.value) : this.dispatchEditName({ id: NaN });
    }, "handleRename"), l = /* @__PURE__ */ c((d) => {
      const h = d.target;
      d.key === "Escape" ? (d.preventDefault(), h.value = t.name, h.blur()) : d.key === "Enter" && (d.preventDefault(), h.blur());
    }, "handleRenameKey");
    return y`
      <div
        class="wy-item ${Gt({
      "wy-item-trashed": t.is_trashed,
      "wy-item-hover": this.hasHover && !t.is_trashed && !this.isRenaming
    })}"
        title=${t.name}>
        ${this.status.state === "error" ? y`<wy-icon name="alert-octagon" color="error" title=${wt(this.status.text)}></wy-icon>` : this.status.state === "conflict" ? y`<wy-icon name="alert" color="yellow" title=${wt(this.status.text)}></wy-icon>` : this.status.state === "pending" ? y`<wy-spinner ?nospin=${!!this.status.progress} .progress=${this.status.progress}></wy-spinner>` : y`<wy-icon .name=${i} .overlayName=${s} .overlayPath=${r} .size=${24} .kind=${t.kind} ext=${n}></wy-icon>`}
        <div class="wy-item-body">
          ${this.isRenaming ? y`
                <input
                  type="text"
                  maxlength="256"
                  class="wy-input"
                  .defaultValue=${t.name}
                  @blur=${a}
                  @keyup=${(d) => {
      wr(d), l(d);
    }}
                  @click=${(d) => d.preventDefault()}
                  @focus=${Iw}
                  ${it(gw)} />
              ` : y`
                <span title=${t.name + (this.status.text ? `: ${this.status.text}` : "")}
                  ><slot name="title"
                    >${this.title || t.name}${this.status.text ? y`: <em>${this.status.text}</em>` : L}</slot
                  ></span
                >
              `}
        </div>
        <div class="wy-item-actions">
          <slot name="actions">
            <wy-file-menu
              .file=${t}
              @edit-name=${(d) => this.dispatchEditName(d.detail.file)}
              @trash=${(d) => this.dispatchTrash(d.detail.file)}
              @restore=${(d) => this.dispatchRestore(d.detail.file)}
              @delete-forever=${(d) => this.dispatchDeleteForever(d.detail.file)}
              @subscribe=${(d) => this.dispatchSubscribe(d.detail.file, d.detail.subscribe)}>
            </wy-file-menu>
          </slot>
        </div>
      </div>
    `;
  }
}, c(La, "WyFileItem"), La);
yn.styles = rt;
Kc([
  v({ type: Object })
], yn.prototype, "file", 2);
Kc([
  v({ type: Object })
], yn.prototype, "status", 2);
Kc([
  v({ type: Boolean })
], yn.prototype, "hasHover", 2);
Kc([
  v()
], yn.prototype, "actionType", 2);
Kc([
  W()
], yn.prototype, "isRenaming", 2);
yn = Kc([
  Q("wy-file-item")
], yn);
var u$ = Object.defineProperty, p$ = Object.getOwnPropertyDescriptor, vn = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? p$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && u$(t, i, n), n;
}, "__decorateClass$F"), Ma;
let Hi = (Ma = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.unauthorized = !1, this.confluenceQuery = new xe(this), this.confluenceResourceQuery = new xe(this), this.onMessage = async (t) => {
      var i;
      switch (t.data.name) {
        case "confluence-signed-in":
          this.unauthorized = !1, (i = this.confluenceResourceQuery.result) == null || i.refetch();
          break;
      }
    };
  }
  dispatchSubmit(t, i, r) {
    if (this.cloudHost && this.spaceKey) {
      const n = new CustomEvent("submit", {
        detail: { url: t, id: i, title: r, hostname: this.cloudHost, spaceKey: this.spaceKey }
      });
      this.dispatchEvent(n);
    }
  }
  dispatchUnauthorized() {
    const t = new CustomEvent("unauthorized");
    return this.dispatchEvent(t);
  }
  handleResourceClick(t, i) {
    t.preventDefault();
    const r = new URL(i.url);
    this.cloudId = i.id, this.cloudHost = r.hostname;
  }
  handleSpaceClick(t, i, r) {
    var n;
    t.preventDefault(), this.spaceKey = r, this.spaceId = i, (n = this.confluenceQuery.result) == null || n.refetch();
  }
  handlePageClick(t, i, r, n) {
    t.preventDefault(), this.dispatchSubmit(i, r, n);
  }
  connectedCallback() {
    super.connectedCallback(), window.addEventListener("message", this.onMessage);
  }
  willUpdate(t) {
    t.has("weavyContext") && this.weavyContext && this.confluenceResourceQuery.trackQuery(
      Ge(
        this.weavyContext,
        ["confluence", "resources"],
        "/confluence/resources"
      )
    ), (t.has("weavyContext") || t.has("cloudId") || t.has("spaceId")) && this.weavyContext && this.cloudId && this.confluenceQuery.trackQuery(
      Ge(
        this.weavyContext,
        ["confluence", this.cloudId, "spaces", this.spaceId != null ? this.spaceId + "/pages" : void 0],
        `/confluence/${this.cloudId}/spaces/${this.spaceId != null ? this.spaceId + "/pages" : ""}`
      )
    );
  }
  render() {
    var s, a, l;
    if (!((s = this.weavyContext) != null && s.confluenceAuthenticationUrl))
      return L;
    const { data: t, isPending: i } = ((a = this.confluenceQuery) == null ? void 0 : a.result) || {}, { data: r, isPending: n } = ((l = this.confluenceResourceQuery) == null ? void 0 : l.result) || {};
    return this.unauthorized ? y`<wy-empty><button class="wy-button wy-button-primary" @click=${this.dispatchUnauthorized}>Sign in</button></wy-empty>` : y`
      <div class="wy-scroll-y">
        <div class="wy-pane-group">
          ${this.spaceKey ? y`
                <a
                  href="#"
                  class="wy-item-body"
                  @click=${(d) => this.handleSpaceClick(d, void 0, void 0)}
                >
                  <wy-icon name="back"></wy-icon> ${C("Back")}
                </a>
              ` : L}
          ${n || i ? y` <wy-spinner overlay></wy-spinner> ` : L}
          ${!this.cloudId && !n && r ? y`
                <h5>${C("Select a Confluence site")}</h5>
                <div class="wy-list wy-list-bordered">
                  ${Ve(
      r.resources,
      (d) => d.id,
      (d) => y`
                        <a
                          href="#"
                          class="wy-item wy-item-lg wy-item-hover"
                          title=${d.name}
                          @click=${(h) => this.handleResourceClick(h, d)}
                        >
                          <wy-icon name="earth" size="48"></wy-icon>
                          <div class="wy-item-body ">
                            <div class="wy-item-title">${d.name}</div>
                          </div>
                        </a>
                      `
    )}
                </div>
              ` : L}
          ${this.cloudId && !i && t ? y`
                <div class="wy-list wy-list-bordered">
                  ${Ve(
      t.results,
      (d) => d.id,
      (d) => this.spaceKey ? y`
                            <a
                              href="#"
                              class="wy-item wy-item-lg wy-item-hover"
                              title=${d.title}
                              @click=${(h) => this.handlePageClick(h, d._links.webui, d.id, d.title)}
                            >
                              <wy-icon name="file" size="48"></wy-icon>
                              <div class="wy-item-body ">
                                <div class="wy-item-title">${d.title}</div>
                              </div>
                            </a>
                          ` : y`
                            <a
                              href="#"
                              class="wy-item wy-item-lg wy-item-hover"
                              title=${d.name}
                              @click=${(h) => this.handleSpaceClick(h, d.id, d.key)}
                            >
                              <wy-icon name="confluence" color="native" size="48"></wy-icon>
                              <div class="wy-item-body ">
                                <div class="wy-item-title">${d.name}</div>
                              </div>
                            </a>
                          `
    )}
                </div>
              ` : L}
          
        </div>
      </div>
    `;
  }
  updated(t) {
    var i;
    !this.unauthorized && this.confluenceResourceQuery.result && !this.confluenceResourceQuery.result.isPending && ((i = this.confluenceResourceQuery.result.data) == null ? void 0 : i.resources) == null && (this.unauthorized = !0);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), window.removeEventListener("message", this.onMessage);
  }
}, c(Ma, "WyConfluencePicker"), Ma);
Hi.styles = rt;
vn([
  Kt({ context: ne, subscribe: !0 }),
  W()
], Hi.prototype, "weavyContext", 2);
vn([
  v({
    attribute: !1
  })
], Hi.prototype, "user", 2);
vn([
  W()
], Hi.prototype, "unauthorized", 2);
vn([
  W()
], Hi.prototype, "cloudHost", 2);
vn([
  W()
], Hi.prototype, "cloudId", 2);
vn([
  W()
], Hi.prototype, "spaceKey", 2);
vn([
  W()
], Hi.prototype, "spaceId", 2);
Hi = vn([
  Q("wy-confluence-picker"),
  st()
], Hi);
var y$ = Object.defineProperty, w$ = Object.getOwnPropertyDescriptor, Uw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? w$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && y$(t, i, n), n;
}, "__decorateClass$E"), Ta;
let zl = (Ta = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.dropdown = !1, this.showPicker = !1;
  }
  open() {
    this.showPicker = !0;
  }
  close() {
    this.showPicker = !1;
  }
  dispatchExternalBlobs(t) {
    const i = new CustomEvent("external-blobs", { detail: { externalBlobs: t } });
    return this.dispatchEvent(i);
  }
  handleUnauthorized() {
    var t;
    this.user && window.open(
      `${(t = this.weavyContext) == null ? void 0 : t.confluenceAuthenticationUrl}&state=${this.user.id}`,
      "confluenceAuthWin",
      "height=640,width=480"
    );
  }
  async handleAddPage({ url: t, id: i, title: r, hostname: n, spaceKey: s }) {
    var l;
    const a = {
      provider: "Confluence",
      link: "https://" + n + "/wiki" + t,
      name: r,
      size: 0,
      raw: {
        contentId: i,
        hostname: n,
        parentProduct: (l = this.weavyContext) == null ? void 0 : l.confluenceProductName,
        spaceKey: s
      }
    };
    this.dispatchExternalBlobs([a]), this.close();
  }
  render() {
    var t;
    return (t = this.weavyContext) != null && t.confluenceAuthenticationUrl ? y`
      ${this.dropdown ? y`
            <wy-dropdown-item @click=${() => this.open()} title=${C("Confluence Page Picker")}>
              <wy-icon name="confluence" color="native"></wy-icon> Confluence
            </wy-dropdown-item>
          ` : y`
            <wy-button @click=${() => this.open()} title=${C("Confluence Page Picker")} kind="icon"
              ><wy-icon name="confluence" color="native"></wy-icon
            ></wy-button>
          `}
      ${this.weavyContext ? y`
            <wy-overlay
              .show=${this.showPicker}
              @close=${() => this.close()}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <slot name="header">
                <header class="wy-appbars">
                  <nav class="wy-appbar">
                    <slot name="appbar-buttons" class="wy-appbar-buttons wy-appbar-buttons-first"></slot>
                    <slot name="appbar-text" class="wy-appbar-text">${C("Confluence Page Picker")}</slot>
                    <wy-button kind="icon" @click=${() => this.close()}>
                      <wy-icon name="close"></wy-icon>
                    </wy-button>
                  </nav>
                </header>
              </slot>
              ${this.showPicker ? y`
                    <wy-confluence-picker
                      @submit=${(i) => this.handleAddPage(i.detail)}
                      @close=${() => this.close()}
                      @unauthorized=${() => this.handleUnauthorized()}
                    ></wy-confluence-picker>
                  ` : L}
            </wy-overlay>
          ` : L}
    ` : L;
  }
}, c(Ta, "WyConfluence"), Ta);
zl.styles = rt;
Uw([
  v({ type: Boolean })
], zl.prototype, "dropdown", 2);
Uw([
  W()
], zl.prototype, "showPicker", 2);
zl = Uw([
  Q("wy-confluence"),
  st()
], zl);
var f$ = Object.defineProperty, m$ = Object.getOwnPropertyDescriptor, Qt = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? m$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && f$(t, i, n), n;
}, "__decorateClass$D"), Aa;
let Tt = (Aa = class extends It(K) {
  constructor() {
    super(), this.exportParts = new Z(this), this._placeholder = "", this.text = "", this.options = [], this.attachments = [], this.buttonText = "", this.typing = !0, this.draft = !1, this.editorType = "posts", this.editorClass = "wy-post-editor", this.editorLocation = "apps", this.editorError = !1, this.showPolls = !1, this.pollOptions = [], this.embeds = [], this.draftKey = "", this.uploadBlobMutation = new Ze(
      this
    ), this.mutatingFiles = new Uh(this), this.fileInputRef = dt(), this.cloudFilesRef = dt(), this.dropZone = new Wh(this), this.keyMap = [], this.editorRef = dt(), this.throttledTyping = Bh(
      async () => {
        this.weavyContext && this.app && (this.app.type === Mt.ChatRoom || this.app.type === Mt.PrivateChat) && await (await Qk(this.weavyContext, this.app.id)).mutate();
      },
      2e3,
      { leading: !0, trailing: !1 }
    ), this.throttledDrafting = Bh(
      async () => {
        this.saveDraft();
      },
      500,
      { leading: !0, trailing: !0 }
    ), this.openFileInput = () => {
      var t;
      (t = this.fileInputRef.value) == null || t.click();
    }, this.openCloudFiles = () => {
      var t;
      (t = this.cloudFilesRef.value) == null || t.open();
    }, this.createMeeting = async (t) => {
      if (this.weavyContext && t.source === this.authWindow && this.weavyContext.url.origin === t.origin && t.data && t.data.name && t.data.name.endsWith("-authorized")) {
        const i = t.data.name.slice(0, -11), n = await Sv(this.weavyContext, i).mutate();
        n.auth_url || (this.meeting = n);
      }
    }, this.addEventListener("drop-files", this.handleDropFiles), this.addEventListener("keydown", ph), this.addEventListener("keyup", wr);
  }
  get placeholder() {
    return this._placeholder;
  }
  set placeholder(t) {
    this._placeholder = t;
  }
  willUpdate(t) {
    var i;
    if (super.willUpdate(t), (t.has("weavyContext") || t.has("app") || t.has("user") || t.has("parentId")) && this.weavyContext && this.app && this.user) {
      this.draftKey = `draft-${this.editorType}-${this.parentId || this.app.id}`, this.uploadBlobMutation.trackMutation(
        P0(
          this.weavyContext,
          this.user,
          this.app,
          `${this.editorLocation}-${this.parentId || this.app.id}`
        )
      );
      const r = [
        "apps",
        this.app.id,
        "blobs",
        `${this.editorLocation}-${this.parentId || this.app.id}`
      ];
      if (this.mutatingFiles.trackMutationState(
        { filters: { mutationKey: r, exact: !0 } },
        this.weavyContext.queryClient
      ), this.externalBlobMutation = S0(
        this.weavyContext,
        this.user,
        this.app,
        `${this.editorLocation}-${this.parentId || this.app.id}`
      ), this.draft) {
        const n = localStorage.getItem(this.draftKey);
        if (n) {
          const s = JSON.parse(n);
          this.text = s.text, this.embeds = s.embeds, this.meeting = s.meeting, ((i = s.pollOptions) == null ? void 0 : i.length) > 0 && (this.showPolls = !0, this.pollOptions = s.pollOptions), Mv(this.embeds.map((a) => a.original_url));
        } else
          this.clearEditor();
      }
      this.embed && (this.embeds = [this.embed], Mv(this.embeds.map((n) => n.original_url))), this.options && this.options.length > 0 && (this.pollOptions = [...this.options, { id: null, text: "" }], this.showPolls = !0);
    }
    t.has("text") && this.editor && this.editor.dispatch({ changes: { from: 0, to: this.editor.state.doc.length, insert: this.text } });
  }
  updated(t) {
    if ((t.has("weavyContext") || t.has("app") || t.has("user") || t.has("parentId")) && this.weavyContext && this.app && this.user && this.editorRef.value && this.weavyContext.whenUrl().then(() => {
      import(
        /* webpackIgnore: true */
        /* @vite-ignore */
        new URL("./es/editor.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
      ).then((i) => i.editor).then(
        ({
          defaultHighlightStyle: i,
          syntaxHighlighting: r,
          history: n,
          dropCursor: s,
          mentions: a,
          autocompletion: l,
          placeholder: d,
          keymap: h,
          weavyKeymap: w,
          defaultKeymap: m,
          historyKeymap: f,
          markdown: b,
          languages: g,
          EditorView: $,
          EditorState: O,
          weavyDesktopMessageKeymap: k
        }) => {
          var _, V, I;
          const S = this.editorType === "messages" && Rb && k ? [...k] : [];
          this.editorExtensions = [
            $.contentAttributes.of({
              spellcheck: "true",
              autocorrect: "on",
              autocapitalize: "on"
            }),
            n(),
            s(),
            a,
            l({
              override: (_ = this.hasFeatures) != null && _.mentions ? [(D) => this.autocomplete(D)] : null,
              //showMention
              closeOnBlur: !1,
              aboveCursor: this.editorType !== "posts",
              icons: !1,
              addToOptions: [
                {
                  render: /* @__PURE__ */ c(function(D, z) {
                    var G, et, lt, at;
                    const F = document.createElement("div");
                    F.classList.add("wy-item"), F.classList.add("wy-item-hover"), (!((G = D.item) != null && G.access) || D.item.access === Mr.None) && F.classList.add("wy-disabled");
                    const A = document.createElement("wy-avatar");
                    A.src = ((et = D.item) == null ? void 0 : et.avatar_url) || "", A.name = ((lt = D.item) == null ? void 0 : lt.display_name) || "";
                    const N = document.createElement("div");
                    return N.classList.add("wy-item-body"), N.innerText = ((at = D.item) == null ? void 0 : at.display_name) || "", F.appendChild(A), F.appendChild(N), F;
                  }, "render"),
                  position: 10
                }
              ]
            }),
            d(this.placeholder),
            r(i, { fallback: !0 }),
            $.lineWrapping,
            h.of([...S, ...w, ...m, ...f]),
            b({ codeLanguages: g }),
            $.domEventHandlers({
              paste: /* @__PURE__ */ c((D, z) => {
                var N, G;
                let F = [];
                const A = ((N = D.clipboardData) == null ? void 0 : N.items) || [];
                for (const et in A) {
                  const lt = A[et];
                  if (lt.kind === "file") {
                    const at = lt.getAsFile();
                    at && (F = [...F, at]);
                  }
                }
                if (F.length > 0 && ((G = this.hasFeatures) != null && G.attachments)) {
                  for (let et = 0; et < F.length; et++)
                    this.handleUploadFiles(F);
                  return !0;
                }
              }, "paste"),
              keyup: /* @__PURE__ */ c((D, z) => {
                var F, A;
                this.typing && z.state.doc.toString() !== "" && ((F = this.hasFeatures) != null && F.typing) && this.throttledTyping(), this.draft && this.throttledDrafting(), (A = this.hasFeatures) != null && A.embeds && z.state.doc.toString() !== "" && this.handleEmbeds(z.state.doc.toString());
              }, "keyup")
            }),
            $.updateListener.of((D) => {
            })
          ], this.editor || (this.editor = new $({
            state: O.create({
              doc: this.text,
              extensions: this.editorExtensions
            }),
            parent: this.editorRef.value
          }), (I = (V = this.editorRef.value) == null ? void 0 : V.querySelector(".cm-editor")) == null || I.addEventListener("Weavy-SoftSubmit", this.submit.bind(this)));
        }
      );
    }), t.has("placeholder")) {
      const i = this.renderRoot.querySelector(".cm-placeholder");
      i && (i.setAttribute("aria-label", `placeholder ${this.placeholder}`), i.innerText = this.placeholder);
    }
  }
  connectedCallback() {
    super.connectedCallback(), window.addEventListener("message", this.createMeeting);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), window.removeEventListener("message", this.createMeeting);
  }
  handleRemoveMeeting() {
    this.meeting = void 0;
  }
  async autocomplete(t) {
    if (!this.weavyContext || !this.app)
      return null;
    let i = t.matchBefore(/(?!\]\(@)(^[^@]{0,1}|[^@]{2})@([^@]+)/);
    if (!t.explicit && !i) return null;
    i = t.matchBefore(/@[^@]+/);
    const r = i == null ? void 0 : i.text.substring(1), n = await this.weavyContext.get(`/api/apps/${this.app.id}/members?member=null&q=${r}`), s = await (n == null ? void 0 : n.json());
    let a = [];
    return s.data && (a = s.data.filter((l) => typeof l.display_name < "u").map((l) => ({
      item: l,
      label: l.display_name,
      apply: /* @__PURE__ */ c((d, h, w, m) => {
        const f = "[" + l.display_name + "](@u" + l.id.toString() + ")";
        let b = d.state.update({ changes: { from: w - 1, to: w } });
        d.dispatch(b), b = d.state.update({
          changes: { from: w - 1, to: m - 1, insert: f }
        }), d.dispatch(b);
      }, "apply")
    }))), {
      from: i ? i.from + 1 : t.pos,
      options: a,
      filter: !1
    };
  }
  handleDropFiles(t) {
    const i = t.detail;
    i.files && this.handleUploadFiles(i.files);
  }
  async handleUploadFiles(t, i) {
    if (t) {
      for (let r = 0; r < t.length; r++) {
        const s = { file: t[r] };
        await this.uploadBlobMutation.mutate(s), this.saveDraft();
      }
      i && (i.value = "");
    }
  }
  handleExternalBlobs(t) {
    var i;
    if (t)
      for (let r = 0; r < t.length; r++) {
        const n = t[r];
        (i = this.externalBlobMutation) == null || i.mutate({ externalBlob: n });
      }
  }
  handleRemoveUpload(t) {
    !this.weavyContext || !this.app || E0(
      this.weavyContext.queryClient,
      ["apps", this.app.id, "blobs", `${this.editorLocation}-${this.parentId || this.app.id}`],
      (i) => {
        var r, n;
        return ((r = i.state.data) == null ? void 0 : r.id) === ((n = t.data) == null ? void 0 : n.id);
      }
    );
  }
  saveDraft() {
    var r;
    if (!this.draft) return;
    const t = this.mutatingFiles.result;
    let i = (r = this.editor) == null ? void 0 : r.state.doc.toString();
    i === void 0 && (i = this.text), (!t || !t.length) && !this.meeting && !this.embeds.length && !this.pollOptions.length && i === "" ? localStorage.removeItem(this.draftKey) : localStorage.setItem(
      this.draftKey,
      JSON.stringify({
        meeting: this.meeting,
        text: i,
        pollOptions: this.pollOptions,
        embeds: this.embeds
      })
    );
  }
  handleRemoveAttachment(t) {
    this.attachments = this.attachments.filter((i) => i.id !== t.id);
  }
  async submit() {
    var h, w, m, f;
    const t = this.mutatingFiles.result, i = t == null ? void 0 : t.some((b) => b.status === "pending"), r = (h = this.editor) == null ? void 0 : h.state.doc.toString().trim(), n = (w = this.meeting) == null ? void 0 : w.id, s = t == null ? void 0 : t.map((b) => {
      var g;
      return (g = b.data) == null ? void 0 : g.id;
    }), a = ((m = this.attachments) == null ? void 0 : m.map((b) => b.id)) || [], l = this.pollOptions.filter((b) => b.text.trim() !== "");
    if (s$() || i || !r && !n && (s == null ? void 0 : s.length) == 0 && l.length == 0 && a.length == 0 && this.embeds.length == 0)
      return;
    const d = {
      detail: { text: r, meetingId: n, blobs: s, attachments: a, pollOptions: l, embed: (f = this.embeds[0]) == null ? void 0 : f.id },
      bubbles: !0,
      composed: !0
    };
    this.dispatchEvent(new CustomEvent("submit", d)), this.resetEditor();
  }
  resetEditor() {
    this.clearEditor(), this.weavyContext && this.app && Kk(this.weavyContext.queryClient, [
      "apps",
      this.app.id,
      "blobs",
      `${this.editorLocation}-${this.parentId || this.app.id}`
    ]), localStorage.removeItem(this.draftKey);
  }
  clearEditor() {
    var t;
    (t = this.editor) == null || t.dispatch({ changes: { from: 0, to: this.editor.state.doc.length, insert: "" } }), this.text = "", this.meeting = void 0, this.pollOptions = [], this.showPolls = !1, this.embeds = [], c$();
  }
  async handleMeetingClick(t) {
    if (!this.weavyContext || !this.user)
      return;
    const r = await Sv(this.weavyContext, t).mutate();
    r.auth_url ? this.authWindow = window.open(r.auth_url, "oauthwin", "height=640,width=480") : this.meeting = r;
  }
  setEmbeds(t) {
    this.embeds = [t, ...this.embeds], this.saveDraft();
  }
  async handleEmbeds(t) {
    this.weavyContext && await l$(t, this.setEmbeds.bind(this), this.weavyContext);
  }
  removeEmbed(t) {
    this.embeds = this.embeds.filter((i) => i.id !== t.detail.id), this.saveDraft();
  }
  swapEmbed() {
    const t = this.embeds.shift();
    t && (this.embeds = [...this.embeds, t]), this.saveDraft();
  }
  openPolls() {
    if (this.showPolls)
      this.showPolls = !1;
    else {
      if (this.pollOptions.length === 0) {
        const t = { id: null, text: "" };
        this.pollOptions = [...this.pollOptions, t];
      }
      this.showPolls = !0;
    }
  }
  handlePollOptionChange(t, i) {
    const r = [...this.pollOptions];
    r[i].text = t.target.value, this.pollOptions = r, this.saveDraft();
  }
  handlePollOptionAdd(t, i) {
    if (i === this.pollOptions.length - 1) {
      const r = { id: null, text: "" };
      this.pollOptions = [...this.pollOptions, r], this.saveDraft();
    }
  }
  renderTopSlot() {
    return L;
  }
  renderMiddleSlot() {
    var t, i, r, n, s, a;
    return y`
      <!-- Input -->
      <div
        class=${Gt({ "wy-post-editor-text": !0, "wy-is-invalid": this.editorError })}
        ${it(this.editorRef)}
      ></div>
      <div class="wy-post-editor-inputs">
        <div class="wy-post-editor-buttons">
          ${(t = this.hasFeatures) != null && t.attachments ? y`<wy-button kind="icon" @click=${this.openFileInput} title=${C("From device")}>
                  <wy-icon name="attachment"></wy-icon>
                </wy-button>
                <input
                  type="file"
                  ${it(this.fileInputRef)}
                  @click=${(l) => l.stopPropagation()}
                  @change=${(l) => this.handleUploadFiles(
      Array.from(l.target.files || []),
      l.target
    )}
                  multiple
                  hidden
                  tabindex="-1"
                />` : L}
          ${(i = this.hasFeatures) != null && i.cloudFiles ? y`<wy-button kind="icon" @click=${this.openCloudFiles} title=${C("From cloud")}>
                <wy-icon name="cloud"></wy-icon>
              </wy-button>` : L}
          ${(r = this.hasFeatures) != null && r.confluence && ((n = this.weavyContext) != null && n.confluenceAuthenticationUrl) ? y`<wy-confluence
                @external-blobs=${(l) => this.handleExternalBlobs(l.detail.externalBlobs)}
              ></wy-confluence>` : L}
          ${(s = this.hasFeatures) != null && s.meetings ? y`<wy-button kind="icon" @click=${() => this.handleMeetingClick("zoom")} title=${C("Zoom meeting")}>
                  <wy-icon svg="zoom-meetings"></wy-icon>
                </wy-button>
                <wy-button kind="icon" @click=${() => this.handleMeetingClick("google")} title=${C("Google Meet")}>
                  <wy-icon svg="google-meet"></wy-icon>
                </wy-button>
                <wy-button
                  kind="icon"
                  @click=${() => this.handleMeetingClick("microsoft")}
                  title=${C("Microsoft Teams")}
                >
                  <wy-icon svg="microsoft-teams"></wy-icon>
                </wy-button>` : L}
          ${(a = this.hasFeatures) != null && a.polls ? y`<wy-button kind="icon" @click=${this.openPolls} title=${C("Poll")}>
                <wy-icon name="poll"></wy-icon>
              </wy-button>` : L}
        </div>

        <!-- Button -->
        <wy-button @click="${this.submit}" color="primary" title=${this.buttonText}> ${this.buttonText} </wy-button>
      </div>
    `;
  }
  renderBottomSlot() {
    return this.renderLists();
  }
  renderLists() {
    var i, r, n;
    const t = this.mutatingFiles.result;
    return y`
      <!-- polls -->
      ${(i = this.hasFeatures) != null && i.polls && this.showPolls && this.pollOptions.length > 0 ? y`
            <div class="wy-poll-form">
              ${this.pollOptions.map((s, a) => y`<input
                  value=${s.text}
                  @change=${(l) => this.handlePollOptionChange(l, a)}
                  @keyup=${wr}
                  class="wy-input"
                  type="text"
                  placeholder=${C("+ add an option")}
                  @focus=${(l) => this.handlePollOptionAdd(l, a)}
                />`)}
            </div>
          ` : L}

      <!-- meetings -->
      ${(r = this.hasFeatures) != null && r.meetings && this.meeting ? y`
            <div class="wy-item">
              <wy-icon svg="${ay(this.meeting.provider)}"></wy-icon>
              <div class="wy-item-body">${cy(this.meeting.provider)}</div>
              <wy-button kind="icon" @click=${this.handleRemoveMeeting}>
                <wy-icon name="close-circle"></wy-icon>
              </wy-button>
            </div>
          ` : L}

      <!-- blobs -->
      ${t && t.length ? Ve(
      t,
      (s) => "mutation" + s.submittedAt,
      (s) => {
        var a, l;
        if ((a = s.context) != null && a.file) {
          const d = s.context.file, h = {
            ...s.context.status
          };
          return y`
                  <wy-file-item
                    .file=${(l = s.context) == null ? void 0 : l.file}
                    .status=${h}
                    title="${cg(s.context.type)}: ${d.name + (h.text ? `: ${h.text}` : "")}"
                  >
                    <span slot="title"
                      ><strong></strong> ${d.name}
                      ${h.text ? y`: <em>${h.text}</em>` : L}</span
                    >
                    <wy-button
                      slot="actions"
                      kind="icon"
                      @click=${() => this.handleRemoveUpload(s)}
                      title=${C("Discard", { desc: "Button action to discard" })}
                    >
                      <wy-icon name="close"></wy-icon>
                    </wy-button>
                  </wy-file-item>
                `;
        }
        return L;
      }
    ) : L}

      <!-- attachments -->
      ${this.attachments && this.attachments.map(
      (s) => y`<wy-file-item .file=${s} title="${s.name}">
          <span slot="title">${s.name}</span>
          <wy-button
            slot="actions"
            kind="icon"
            @click=${() => this.handleRemoveAttachment(s)}
            title=${C("Remove", { desc: "Button action to remove" })}
          >
            <wy-icon name="close"></wy-icon>
          </wy-button>
        </wy-file-item>`
    )}

      <!-- embeds -->
      ${(n = this.hasFeatures) != null && n.embeds && this.embeds.length > 0 ? y`<div class="wy-embed-preview">
            ${this.embeds.map(
      (s) => y`
                <wy-embed
                  class="wy-embed"
                  .embed=${s}
                  @embed-remove=${this.removeEmbed}
                  @embed-swap=${this.swapEmbed}
                  .enableSwap=${this.embeds.length > 1}
                ></wy-embed>
              `
    )}
          </div> ` : L}
    `;
  }
  renderCloudFiles() {
    return y`
      <wy-cloud-files
        ${it(this.cloudFilesRef)}
        @external-blobs=${(t) => this.handleExternalBlobs(t.detail.externalBlobs)}
      ></wy-cloud-files>
    `;
  }
  render() {
    const t = this.dropZone.isDragActive;
    return y`
      <div
        class=${Gt({
      [this.editorClass]: !0,
      "wy-dragging": t
    })}
        data-drag-title=${C("Drop files here to upload.")}
      >
        ${this.renderTopSlot()} ${this.renderMiddleSlot()} ${this.renderBottomSlot()}
      </div>
      ${this.renderCloudFiles()}
    `;
  }
}, c(Aa, "WyEditor"), Aa);
Tt.styles = rt;
Qt([
  v({ attribute: !1 })
], Tt.prototype, "parentId", 2);
Qt([
  v()
], Tt.prototype, "placeholder", 1);
Qt([
  v()
], Tt.prototype, "text", 2);
Qt([
  v({ attribute: !1 })
], Tt.prototype, "embed", 2);
Qt([
  v({ attribute: !1 })
], Tt.prototype, "options", 2);
Qt([
  v({ attribute: !1 })
], Tt.prototype, "attachments", 2);
Qt([
  v()
], Tt.prototype, "buttonText", 2);
Qt([
  v({ type: Boolean })
], Tt.prototype, "typing", 2);
Qt([
  v({ type: Boolean })
], Tt.prototype, "draft", 2);
Qt([
  v()
], Tt.prototype, "editorType", 2);
Qt([
  v()
], Tt.prototype, "editorClass", 2);
Qt([
  v()
], Tt.prototype, "editorLocation", 2);
Qt([
  W()
], Tt.prototype, "meeting", 2);
Qt([
  W()
], Tt.prototype, "editorError", 2);
Qt([
  W()
], Tt.prototype, "showPolls", 2);
Qt([
  W()
], Tt.prototype, "pollOptions", 2);
Qt([
  W()
], Tt.prototype, "embeds", 2);
Qt([
  W()
], Tt.prototype, "draftKey", 2);
Qt([
  W()
], Tt.prototype, "keyMap", 2);
Qt([
  W()
], Tt.prototype, "editorExtensions", 2);
Qt([
  W()
], Tt.prototype, "editor", 2);
Tt = Qt([
  Q("wy-editor"),
  st()
], Tt);
var v$ = Object.defineProperty, g$ = Object.getOwnPropertyDescriptor, $e = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? g$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && v$(t, i, n), n;
}, "__decorateClass$C"), za;
let ce = (za = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.text = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.seenBy = [], this.updateCommentMutation = new Ze(this);
  }
  dispatchEdit(t) {
    const i = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(i);
  }
  handleSubmit(t) {
    this.updateCommentMutation.mutate({
      id: this.commentId,
      type: "apps",
      parentId: this.parentId,
      text: t.detail.text,
      meetingId: t.detail.meetingId,
      blobs: t.detail.blobs,
      attachments: t.detail.attachments,
      pollOptions: t.detail.pollOptions,
      embedId: t.detail.embed
    }), this.dispatchEdit(!1);
  }
  async willUpdate(t) {
    (t.has("parentId") || t.has("weavyContext")) && this.parentId && this.weavyContext && this.updateCommentMutation.trackMutation(
      yk(this.weavyContext, ["comments", this.parentId])
    );
  }
  render() {
    return y`
      <nav class="wy-item">
        <div class="wy-item-body">
          <div class="wy-item-title">${C("Edit comment")}</div>
        </div>

        <wy-button @click=${() => this.dispatchEdit(!1)} kind="icon">
          <wy-icon name="close"></wy-icon>
        </wy-button>
      </nav>
      <wy-editor
        editorLocation="posts"
        .text=${this.text}
        .embed=${this.embed}
        .options=${this.pollOptions}
        .attachments=${this.attachments ?? []}
        .parentId=${this.commentId}
        .typing=${!1}
        .draft=${!1}
        placeholder=${C("Edit comment...")}
        buttonText=${C("Update", { desc: "Button action to update" })}
        @submit=${(t) => this.handleSubmit(t)}></wy-editor>
    `;
  }
}, c(za, "WyCommentEdit"), za);
ce.styles = rt;
$e([
  Kt({ context: ne, subscribe: !0 }),
  W()
], ce.prototype, "weavyContext", 2);
$e([
  v({ type: Number })
], ce.prototype, "parentId", 2);
$e([
  v({ type: Number })
], ce.prototype, "commentId", 2);
$e([
  v({ type: Boolean })
], ce.prototype, "temp", 2);
$e([
  v({ attribute: !1 })
], ce.prototype, "createdBy", 2);
$e([
  v()
], ce.prototype, "createdAt", 2);
$e([
  v()
], ce.prototype, "modifiedAt", 2);
$e([
  v({ type: Boolean })
], ce.prototype, "isSubscribed", 2);
$e([
  v({ type: Boolean })
], ce.prototype, "isTrashed", 2);
$e([
  v()
], ce.prototype, "text", 2);
$e([
  v({ type: Array })
], ce.prototype, "attachments", 2);
$e([
  v({ type: Array })
], ce.prototype, "pollOptions", 2);
$e([
  v({ attribute: !1 })
], ce.prototype, "meeting", 2);
$e([
  v({ attribute: !1 })
], ce.prototype, "embed", 2);
$e([
  v({ type: Array })
], ce.prototype, "reactions", 2);
$e([
  v({ type: Array })
], ce.prototype, "seenBy", 2);
ce = $e([
  Q("wy-comment-edit"),
  st()
], ce);
var b$ = Object.defineProperty, x$ = Object.getOwnPropertyDescriptor, fe = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? x$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && b$(t, i, n), n;
}, "__decorateClass$B"), Ra;
let ie = (Ra = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isTrashed = !1, this.html = "", this.text = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.commentCount = 0, this.seenBy = [], this.editing = !1;
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t, parentId: this.commentId, parentType: "comments" } });
    return this.dispatchEvent(i);
  }
  dispatchSubscribe(t) {
    const i = new CustomEvent("subscribe", { detail: { id: this.commentId, subscribe: t } });
    return this.dispatchEvent(i);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  render() {
    return y`
      ${this.isTrashed ? y`<wy-comment-trashed
            class="wy-comment"
            commentId=${this.commentId}
            @restore=${() => {
      this.dispatchRestore();
    }}></wy-comment-trashed> ` : L}
      ${!this.isTrashed && this.editing ? y`<wy-comment-edit
            class="wy-comment"
            .commentId=${this.commentId}
            .parentId=${this.parentId}
            .text=${this.text}
            .pollOptions=${this.pollOptions}
            .attachments=${this.attachments}
            .embed=${this.embed}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}></wy-comment-edit> ` : L}
      ${!this.isTrashed && !this.editing ? y`<wy-comment-view
            class="wy-comment"
            id="comment-view-${this.commentId}"
            .commentId=${this.commentId}
            .parentId=${this.parentId}
            .temp=${this.temp}
            .createdBy=${this.createdBy}
            .createdAt=${this.createdAt}
            .modifiedAt=${this.modifiedAt}
            .isTrashed=${this.isTrashed}
            .text=${this.text}
            .html=${this.html}            
            .attachments=${this.attachments}
            .embed=${this.embed}
            .meeting=${this.meeting}
            .pollOptions=${this.pollOptions}
            .reactions=${this.reactions}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}
            @subscribe=${(t) => {
      this.dispatchSubscribe(t.detail.subscribe);
    }}
            @trash=${() => {
      this.dispatchTrash();
    }}
            @vote=${(t) => {
      this.dispatchVote(t.detail.id);
    }}></wy-comment-view> ` : L}
    `;
  }
}, c(Ra, "WyComment"), Ra);
ie.styles = [rt, vt`:host { display: contents; }`];
fe([
  v({ type: Number })
], ie.prototype, "commentId", 2);
fe([
  v({ type: Number })
], ie.prototype, "parentId", 2);
fe([
  v({ type: Boolean })
], ie.prototype, "temp", 2);
fe([
  v({ attribute: !1 })
], ie.prototype, "createdBy", 2);
fe([
  v()
], ie.prototype, "createdAt", 2);
fe([
  v()
], ie.prototype, "modifiedAt", 2);
fe([
  v({ type: Boolean })
], ie.prototype, "isTrashed", 2);
fe([
  v()
], ie.prototype, "html", 2);
fe([
  v()
], ie.prototype, "text", 2);
fe([
  v({ attribute: !1 })
], ie.prototype, "attachments", 2);
fe([
  v({ type: Array })
], ie.prototype, "pollOptions", 2);
fe([
  v({ attribute: !1 })
], ie.prototype, "meeting", 2);
fe([
  v({ attribute: !1 })
], ie.prototype, "embed", 2);
fe([
  v({ type: Array })
], ie.prototype, "reactions", 2);
fe([
  v({ attribute: !1 })
], ie.prototype, "commentCount", 2);
fe([
  v({ type: Array })
], ie.prototype, "seenBy", 2);
fe([
  W()
], ie.prototype, "editing", 2);
ie = fe([
  Q("wy-comment")
], ie);
var C$ = Object.defineProperty, k$ = Object.getOwnPropertyDescriptor, $$ = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? k$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && C$(t, i, n), n;
}, "__decorateClass$A"), Ia;
let Tv = (Ia = class extends Tt {
  constructor() {
    super(), this.editorType = "comments", this.editorClass = "wy-comment-editor";
  }
  renderTopSlot() {
    return L;
  }
  renderMiddleSlot() {
    var t, i, r, n, s, a, l, d, h;
    return y`<div class="wy-comment-editor-inputs">
      <!-- Add -->
      ${(t = this.hasFeatures) != null && t.attachments || (i = this.hasFeatures) != null && i.cloudFiles || (r = this.hasFeatures) != null && r.meetings ? y`<wy-dropdown icon="plus" directionY="up">
            ${(n = this.hasFeatures) != null && n.attachments ? y`<wy-dropdown-item @click=${this.openFileInput} title=${C("From device")}>
                    <wy-icon name="attachment"></wy-icon>
                    <span>${C("From device")}</span>
                  </wy-dropdown-item>
                  <input
                    type="file"
                    ${it(this.fileInputRef)}
                    @click=${(w) => w.stopPropagation()}
                    @change=${(w) => this.handleUploadFiles(
      Array.from(w.target.files || []),
      w.target
    )}
                    multiple
                    hidden
                    tabindex="-1"
                  />` : L}
            ${(s = this.hasFeatures) != null && s.cloudFiles ? y`<wy-dropdown-item @click=${this.openCloudFiles} title=${C("From cloud")}>
                  <wy-icon name="cloud"></wy-icon>
                  <span>${C("From cloud")}</span>
                </wy-dropdown-item>` : L}
            ${(a = this.hasFeatures) != null && a.confluence && ((l = this.weavyContext) != null && l.confluenceAuthenticationUrl) ? y`<wy-confluence
                  dropdown
                  @external-blobs=${(w) => this.handleExternalBlobs(w.detail.externalBlobs)}
                ></wy-confluence>` : L}
            ${(d = this.hasFeatures) != null && d.meetings ? y`
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("zoom")} title=${C("Zoom meeting")}>
                    <wy-icon svg="zoom-meetings"></wy-icon>
                    <span>${C("Zoom meeting")}</span>
                  </wy-dropdown-item>
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("google")} title=${C("Google Meet")}>
                    <wy-icon svg="google-meet"></wy-icon>
                    <span>${C("Google Meet")}</span>
                  </wy-dropdown-item>
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("microsoft")} title=${C("Microsoft Teams")}>
                    <wy-icon svg="microsoft-teams"></wy-icon>
                    <span>${C("Microsoft Teams")}</span>
                  </wy-dropdown-item>
                ` : L}
            ${(h = this.hasFeatures) != null && h.polls ? y`<wy-dropdown-item @click=${this.openPolls} title=${C("Poll")}>
                  <wy-icon name="poll"></wy-icon>
                  <span>${C("Poll")}</span>
                </wy-dropdown-item>` : L}
          </wy-dropdown>` : L}

      <!-- Input -->
      <div
        class=${Gt({ "wy-comment-editor-text": !0, "wy-is-invalid": this.editorError })}
        ${it(this.editorRef)}
      ></div>

      <!-- Button -->
      <wy-button kind="icon" @click="${this.submit}" title=${this.buttonText}>
        <wy-icon name="send"></wy-icon>
      </wy-button>
    </div>`;
  }
  renderBottomSlot() {
    return this.renderLists();
  }
}, c(Ia, "WyCommentEditor"), Ia);
Tv = $$([
  Q("wy-comment-editor"),
  st()
], Tv);
var E$ = Object.defineProperty, _$ = Object.getOwnPropertyDescriptor, L0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$b"), jw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? _$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && E$(t, i, n), n;
}, "__decorateClass$z"), M0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || L0("Cannot " + i), "__accessCheck$b"), Av = /* @__PURE__ */ c((o, t, i) => (M0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$b"), P$ = /* @__PURE__ */ c((o, t, i) => t.has(o) ? L0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$b"), zv = /* @__PURE__ */ c((o, t, i, r) => (M0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$b"), Ao, Oa;
let Rl = (Oa = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.location = "apps", this.commentsQuery = new pr(this), this.addCommentMutation = new Ze(this), this.infiniteScroll = new yr(this), this.pagerRef = dt(), P$(this, Ao), this.handleRealtimeCommentCreated = (t) => {
      var i;
      !this.weavyContext || t.actor.id === this.user.id || t.comment.parent && ((i = t.comment.parent) == null ? void 0 : i.id) !== this.parentId || this.app && t.comment.app.id !== this.app.id || (t.comment.created_by = t.actor, ur(this.weavyContext.queryClient, ["comments", this.parentId], t.comment, void 0, {
        descending: !1
      }));
    }, this.handleRealtimeReactionAdded = (t) => {
      !this.weavyContext || t.actor.id === this.user.id || t.entity.type !== "comment" || _t(
        this.weavyContext.queryClient,
        ["comments", this.parentId],
        t.entity.id,
        (i) => {
          var r;
          (r = i.reactions) != null && r.data || (i.reactions = { count: 0 }), i.reactions.data = [
            ...i.reactions.data || [],
            { content: t.reaction, created_by: t.actor }
          ];
        }
      );
    }, this.handleRealtimeReactionDeleted = (t) => {
      !this.weavyContext || t.actor.id === this.user.id || t.entity.type !== "comment" || _t(
        this.weavyContext.queryClient,
        ["comments", this.parentId],
        t.entity.id,
        (i) => {
          var r;
          (r = i.reactions) != null && r.data && (i.reactions.data = i.reactions.data.filter((n) => {
            var s;
            return ((s = n.created_by) == null ? void 0 : s.id) !== t.actor.id;
          }));
        }
      );
    };
  }
  async willUpdate(t) {
    var i;
    if (super.willUpdate(t), (t.has("parentId") || t.has("weavyContext")) && this.parentId && this.weavyContext && (this.commentsQuery.trackInfiniteQuery(pk(this.weavyContext, this.location, this.parentId)), this.addCommentMutation.trackMutation(
      wk(this.weavyContext, ["comments", this.parentId])
    ), this.removeCommentMutation = mk(this.weavyContext, this.parentId), this.restoreCommentMutation = gk(this.weavyContext, this.parentId), this.pollMutation = Ew(this.weavyContext, ["comments", this.parentId])), (t.has("weavyContext") || t.has("app")) && this.weavyContext && this.app) {
      (i = Av(this, Ao)) == null || i.call(this);
      const r = `a${this.app.id}`;
      this.weavyContext.subscribe(r, "comment_created", this.handleRealtimeCommentCreated), this.weavyContext.subscribe(r, "reaction_added", this.handleRealtimeReactionAdded), this.weavyContext.subscribe(r, "reaction_removed", this.handleRealtimeReactionDeleted), zv(this, Ao, () => {
        var n, s, a;
        (n = this.weavyContext) == null || n.unsubscribe(r, "comment_created", this.handleRealtimeCommentCreated), (s = this.weavyContext) == null || s.unsubscribe(r, "reaction_added", this.handleRealtimeReactionAdded), (a = this.weavyContext) == null || a.unsubscribe(r, "reaction_removed", this.handleRealtimeReactionDeleted), zv(this, Ao, void 0);
      });
    }
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.commentsQuery.result, this.pagerRef.value);
  }
  async handleSubmit(t) {
    this.app && this.user && await this.addCommentMutation.mutate({
      appId: this.app.id,
      parentId: this.parentId,
      type: this.location,
      text: t.detail.text,
      meetingId: t.detail.meetingId,
      blobs: t.detail.blobs,
      pollOptions: t.detail.pollOptions,
      embedId: t.detail.embed,
      user: this.user
    });
  }
  renderComments(t) {
    if (t) {
      const i = t.pages.flatMap((r) => r.data || []);
      return Ve(
        i,
        (r) => r.id,
        (r) => {
          var n, s, a;
          return [
            y`<wy-comment
              id="comment-${r.id}"
              .commentId=${r.id}
              .parentId=${this.parentId}
              .temp=${(r == null ? void 0 : r.temp) || !1}
              .createdBy=${r.created_by}
              .createdAt=${r.created_at}
              .modifiedAt=${r.updated_at}
              .isTrashed=${r.is_trashed}
              .html=${r.html}
              .text=${r.text}
              .attachments=${(n = r.attachments) == null ? void 0 : n.data}
              .embed=${r.embed}
              .meeting=${r.meeting}
              .pollOptions=${(s = r.options) == null ? void 0 : s.data}
              .reactions=${(a = r.reactions) == null ? void 0 : a.data}
              @trash=${async (l) => {
              var h;
              const d = await this.whenApp();
              (h = this.removeCommentMutation) == null || h.mutate({
                id: l.detail.id,
                appId: d.id,
                parentId: this.parentId,
                type: this.location
              });
            }}
              @restore=${async (l) => {
              var h;
              const d = await this.whenApp();
              (h = this.restoreCommentMutation) == null || h.mutate({
                id: l.detail.id,
                appId: d.id,
                parentId: this.parentId,
                type: this.location
              });
            }}
              @vote=${(l) => {
              var d;
              (d = this.pollMutation) == null || d.mutate({
                optionId: l.detail.id,
                parentType: l.detail.parentType,
                parentId: l.detail.parentId
              });
            }}
            ></wy-comment>`
          ];
        }
      );
    }
    return L;
  }
  render() {
    var r;
    const { data: t, isPending: i } = this.commentsQuery.result ?? {};
    return y`
      <div class="wy-comments">
        ${!i && this.app && t ? this.renderComments(t) : y`<wy-spinner padded></wy-spinner>`}
        <div ${it(this.pagerRef)} part="wy-pager"></div>
      </div>
      ${ro(an.Create, (r = this.app) == null ? void 0 : r.permissions) ? y`
            <wy-comment-editor
              editorLocation=${this.location}
              .parentId=${this.parentId}
              .typing=${!1}
              .draft=${!0}
              placeholder=${C("Create a comment...")}
              buttonText=${C("Comment", { desc: "Button action to comment" })}
              @submit=${(n) => this.handleSubmit(n)}
            ></wy-comment-editor>
          ` : L}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Av(this, Ao)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(Oa, "WyCommentList"), Oa);
Ao = /* @__PURE__ */ new WeakMap();
Rl.styles = rt;
jw([
  v({ type: Number })
], Rl.prototype, "parentId", 2);
jw([
  v({ attribute: !1 })
], Rl.prototype, "location", 2);
Rl = jw([
  Q("wy-comment-list"),
  st()
], Rl);
function Ww(o, t) {
  return ["apps", o.id, "file", t.id, "versions"];
}
c(Ww, "getFileVersionsKey");
function S$(o, t, i) {
  const r = o.queryClient, n = ["apps", t.id, "files"], s = Ww(t, i), a = {
    mutationKey: n,
    mutationFn: /* @__PURE__ */ c(async ({ versionFile: l }) => {
      if (l.id >= 1 && l.version)
        return (await o.post(
          `/api/files/${l.id}/versions/${l.version}/restore`,
          "POST",
          ""
        )).json();
      throw new Error(`Could not restore ${l.name} to version ${l.version}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (l) => (ut(
      r,
      { queryKey: a.mutationKey, exact: !1 },
      l.versionFile.id,
      (d) => Object.assign(d, l.versionFile, { status: "pending" })
    ), { type: "version", file: i, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((l, d) => {
      ut(
        r,
        { queryKey: a.mutationKey, exact: !1 },
        d.versionFile.id,
        (h) => Object.assign(h, l, { status: "ok" })
      ), Ut(r, a.mutationKey, d, (h) => {
        h.status.state = "ok";
      });
    }, "onSuccess"),
    onError(l, d, h) {
      h != null && h.file && ut(
        r,
        { queryKey: a.mutationKey, exact: !1 },
        d.versionFile.id,
        (w) => Object.assign(w, h.file, { status: "error" })
      ), Ut(r, a.mutationKey, d, (w) => {
        w.status.state = "error", w.status.text = l.message;
      });
    },
    onSettled() {
      r.invalidateQueries({ queryKey: s });
    }
  };
  return a;
}
c(S$, "getFileVersionRestoreMutationOptions");
function L$(o, t, i) {
  return new kt(o.queryClient, S$(o, t, i));
}
c(L$, "getFileVersionRestoreMutation");
function M$(o, t, i) {
  const r = o.queryClient, n = Ww(t, i);
  return {
    mutationKey: n,
    mutationFn: /* @__PURE__ */ c(async ({ versionFile: a }) => {
      if (a.id >= 1 && a.version) {
        const l = await o.post(
          `/api/files/${a.id}/versions/${a.version}`,
          "DELETE",
          ""
        );
        if (!l.ok) {
          const d = await l.json();
          throw new Error(d.detail || d.title, { cause: d });
        }
      } else {
        const l = {
          status: 400,
          title: `Could not remove ${a.name} version ${a.version}.`
        };
        throw new Error(l.detail || l.title, { cause: l });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (a) => {
      _t(
        r,
        n,
        /* @__PURE__ */ c((d) => d.id === a.versionFile.id && d.version === a.versionFile.version, "versionPredicate"),
        (d) => Object.assign(d, { status: "pending" })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((a, l) => {
      au(r, n, /* @__PURE__ */ c((h) => h.id === l.versionFile.id && h.version === l.versionFile.version, "versionPredicate"));
    }, "onSuccess"),
    onError(a, l) {
      _t(
        r,
        n,
        /* @__PURE__ */ c((h) => h.id === l.versionFile.id && h.version === l.versionFile.version, "versionPredicate"),
        (h) => Object.assign(h, { status: void 0 })
      );
    }
  };
}
c(M$, "getFileVersionDeleteMutationOptions");
function T$(o, t, i) {
  return new kt(o.queryClient, M$(o, t, i));
}
c(T$, "getFileVersionDeleteMutation");
var A$ = Object.defineProperty, z$ = Object.getOwnPropertyDescriptor, qw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? z$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && A$(t, i, n), n;
}, "__decorateClass$y"), Da;
let Il = (Da = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.fileVersionsQuery = new xe(this);
  }
  selectVersion(t) {
    this.activeVersion = t, this.dispatchFileVersionSelect(t);
  }
  dispatchFileVersionSelect(t) {
    const i = new CustomEvent("file-version-select", { detail: { versionFile: t } });
    return this.dispatchEvent(i);
  }
  handleRevert(t) {
    var i;
    (i = this.fileVersionRestoreMutation) == null || i.mutate({ versionFile: t }), this.selectVersion(t);
  }
  handleRemove(t) {
    var i;
    (i = this.fileVersionDeleteMutation) == null || i.mutate({ versionFile: t }), this.activeVersion === t && (this.activeVersion = this.file);
  }
  triggerDownload(t) {
    pl(t.download_url, "_top", t.name, !0);
  }
  willUpdate(t) {
    super.willUpdate(t), (t.has("weavyContext") || t.has("file") || t.has("app")) && this.weavyContext && this.file && this.app && (this.fileVersionsQuery.trackQuery(
      Ge(
        this.weavyContext,
        Ww(this.app, this.file),
        `/api/files/${this.file.id}/versions`
      )
    ), this.fileVersionRestoreMutation = L$(this.weavyContext, this.app, this.file), this.fileVersionDeleteMutation = T$(this.weavyContext, this.app, this.file));
  }
  render() {
    const { data: t, isPending: i } = this.fileVersionsQuery.result ?? { isPending: !0 };
    return i ? y`<wy-spinner overlay></wy-spinner>` : t != null && t.data ? y`
          <div class="wy-list wy-versions">
            ${Ve(
      t.data,
      (r) => r.id,
      (r, n) => {
        var f, b, g, $;
        const s = mn(r.name || "").icon, a = t.data.length - n, l = _i(r.name), d = new Date(r.updated_at || r.created_at), h = !!this.file.external_url, w = new Intl.DateTimeFormat((f = this.weavyContext) == null ? void 0 : f.locale, {
          dateStyle: "full",
          timeStyle: "short"
        }).format(d), m = Pd((b = this.weavyContext) == null ? void 0 : b.locale, new Date(d));
        return h ? y`
                      <wy-empty noNetwork>
                        <span slot="title">${C("Versions are not available for external cloud files.")}</span>
                      </wy-empty>
                    ` : y`
                      <div
                        class="wy-item wy-item-hover wy-item-lg ${Gt({
          "wy-active": r.version == ((g = this.activeVersion) == null ? void 0 : g.version)
        })}"
                        tabindex="0"
                        @click=${() => this.selectVersion(r)}
                        @keydown=${Ne}
                        @keyup=${li}
                      >
                        <wy-icon name=${s} size="48" kind=${r.kind} ext=${l}></wy-icon>
                        <div class="wy-item-body">
                          <div class="wy-item-title">${a}. ${r.name}</div>
                          <div class="wy-item-text">
                            <time datetime=${r.updated_at || r.created_at} title=${w}
                              >${m}</time
                            >
                            · ${($ = r.updated_by) == null ? void 0 : $.display_name}</div
                          >
                        </div>

                        <wy-dropdown directionX="left">
                          <wy-dropdown-item @click=${() => this.triggerDownload(r)}>
                            <wy-icon name="download"></wy-icon>
                            ${C("Download")}
                          </wy-dropdown-item>

                          ${r.version !== this.file.version ? y`
                                <wy-dropdown-divider></wy-dropdown-divider>
                                <wy-dropdown-item @click=${() => this.handleRevert(r)}>
                                  <wy-icon name="restore"></wy-icon>
                                  ${"Revert"}
                                </wy-dropdown-item>
                                <wy-dropdown-item @click=${() => this.handleRemove(r)}>
                                  <wy-icon name="delete"></wy-icon>
                                  ${C("Remove", { desc: "Button action to remove" })}
                                </wy-dropdown-item>
                              ` : L}
                        </wy-dropdown>
                      </div>
                    `;
      }
    )}
          </div>
        ` : L;
  }
}, c(Da, "WyFileVersions"), Da);
Il.styles = rt;
qw([
  v({ attribute: !1 })
], Il.prototype, "file", 2);
qw([
  v({ attribute: !1 })
], Il.prototype, "activeVersion", 2);
Il = qw([
  Q("wy-file-versions"),
  st()
], Il);
var R$ = Object.defineProperty, I$ = Object.getOwnPropertyDescriptor, me = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? I$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && R$(t, i, n), n;
}, "__decorateClass$x"), Fa;
let re = (Fa = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.uid = "preview", this.currentId = NaN, this.isAttachment = !1, this.showOverlay = !1, this.commentsOpen = !1, this.versionsOpen = !1, this.sidePanelMaximized = !1, this.persistState = new _l(this), this.previewFileRef = dt(), this.swipeScrollRef = dt(), this.prevRef = dt(), this.nextRef = dt(), this.swipeScroller = new ly(this), this.disableSwipeScroll = !1, this.handleKeys = (t) => {
      this.showOverlay && (t.key === "ArrowLeft" ? (t.stopPropagation(), this.setPrev()) : t.key === "ArrowRight" && (t.stopPropagation(), this.setNext()));
    };
  }
  async open(t, i) {
    await this.whenApp(), await this.updateComplete, t && (this.currentId = t), i && this.toggleSidebarTab(i, !0), this.showOverlay = !0;
  }
  close() {
    this.showOverlay = !1;
  }
  toggleSidebarTab(t, i) {
    t === "comments" ? (this.versionsOpen = !1, this.commentsOpen = i !== void 0 ? i : !this.commentsOpen) : t === "versions" ? (this.commentsOpen = !1, this.versionsOpen = i !== void 0 ? i : !this.versionsOpen) : (this.commentsOpen = !1, this.versionsOpen = !1);
  }
  handleVersionFile(t) {
    this.versionFile = t.detail.versionFile;
  }
  scrollToPrev() {
    var t;
    this.prevRef.value && (this.unblockSwipeScroll(), this.prevRef.value.scrollIntoView({ behavior: (t = this.weavyContext) == null ? void 0 : t.scrollBehavior }));
  }
  scrollToNext() {
    var t;
    this.nextRef.value && (this.unblockSwipeScroll(), this.nextRef.value.scrollIntoView({ behavior: (t = this.weavyContext) == null ? void 0 : t.scrollBehavior }));
  }
  blockSwipeScroll(t = 20) {
    window.clearTimeout(this.disableSwipeScrollTimeout), this.disableSwipeScroll = !0, this.disableSwipeScrollTimeout = window.setTimeout(() => this.disableSwipeScroll = !1, t);
  }
  unblockSwipeScroll() {
    window.clearTimeout(this.disableSwipeScrollTimeout), this.disableSwipeScroll = !1;
  }
  setPrev() {
    this.previousFile && (this.currentId = this.previousFile.id, this.blockSwipeScroll());
  }
  setNext() {
    this.nextFile && (this.currentId = this.nextFile.id, this.blockSwipeScroll());
  }
  currentPreviewFileCallback(t) {
    t == null || t.scrollIntoView(), requestAnimationFrame(() => t == null ? void 0 : t.scrollIntoView());
  }
  willUpdate(t) {
    if (super.willUpdate(t), t.has("app") && this.app && (this.persistState.observe(
      ["commentsOpen", "versionsOpen"],
      `${this.app.type}-${this.app.id.toString()}-${this.uid}`
    ), this.commentsOpen && this.versionsOpen && (this.versionsOpen = !1)), t.has("queryResult") && this.queryResult) {
      const { data: i } = this.queryResult ?? {};
      this.files = i == null ? void 0 : i.filter((r) => r && !r.is_trashed);
    }
    if (t.has("infiniteQueryResult") && this.infiniteQueryResult) {
      const { data: i } = this.infiniteQueryResult ?? {};
      this.files = i == null ? void 0 : i.pages.flatMap((r) => r.data).filter((r) => r && !r.is_trashed).filter((r) => r);
    }
    t.has("currentFile") && this.currentFile && this.currentFile.id !== this.currentId && (this.currentId = this.currentFile.id), (t.has("files") || t.has("currentId") || t.has("showOverlay")) && this.files && this.showOverlay && (this.currentFile = void 0, this.previousFile = void 0, this.nextFile = void 0, this.versionFile = void 0, this.currentFile = this.files.find((i, r) => this.files && i.id === this.currentId ? (r >= 1 && (this.previousFile = this.files[r - 1]), r < this.files.length - 1 && (this.nextFile = this.files[r + 1]), this.infiniteQueryResult && r >= this.files.length - 2 && this.infiniteQueryResult.hasNextPage && !this.infiniteQueryResult.isFetchingNextPage && this.infiniteQueryResult.fetchNextPage(), this.infiniteQueryResult && r <= 1 && this.infiniteQueryResult.hasPreviousPage && !this.infiniteQueryResult.isFetchingPreviousPage && this.infiniteQueryResult.fetchPreviousPage(), !0) : !1)), t.has("currentFile") && this.currentFile && !this.files && (this.files = [this.currentFile]);
  }
  renderHeader(t) {
    var r, n, s, a;
    const i = {
      "wy-appbar-text-trashed": !!(t != null && t.is_trashed)
    };
    return y` <header class="wy-appbars">
      <nav class="wy-appbar">
        <wy-button kind="icon" @click=${() => this.close()}><wy-icon name="close"></wy-icon></wy-button>
        <div class="wy-appbar-text ${Gt(i)}">
          ${t ? y` <span>${t.name}</span> ` : L}
        </div>
        <div class="wy-appbar-buttons wy-appbar-buttons-last">
          ${t ? y`
                ${t.id >= 1 && !this.isAttachment && ((r = this.hasFeatures) != null && r.comments) ? y`
                      <wy-button
                        kind="icon"
                        ?active=${this.commentsOpen}
                        @click=${() => this.toggleSidebarTab("comments")}
                        title=${C("Comments")}
                      >
                        <wy-icon-stack>
                          ${(n = t.comments) != null && n.count && ((s = t.comments) == null ? void 0 : s.count) > 0 ? y`<wy-icon name="comment" state ?active=${!this.commentsOpen}></wy-icon>
                                <wy-icon name="comment" layer state ?active=${this.commentsOpen}></wy-icon>` : y`<wy-icon name="comment-outline" state ?active=${!this.commentsOpen}></wy-icon>
                                <wy-icon name="comment" layer state ?active=${this.commentsOpen}></wy-icon>`}
                        </wy-icon-stack>
                      </wy-button>
                    ` : L}
                <wy-file-menu .file=${t}>
                  ${t.id >= 1 && !this.isAttachment && ((a = this.hasFeatures) != null && a.versions) ? y`
                        <wy-dropdown-item
                          ?active=${this.versionsOpen}
                          @click=${() => this.toggleSidebarTab("versions")}
                        >
                          <wy-icon name="backup-restore"></wy-icon>
                          ${C("Versions")}
                        </wy-dropdown-item>
                      ` : L}
                </wy-file-menu>
              ` : L}
        </div>
      </nav>
    </header>`;
  }
  render() {
    let t = this.files === void 0;
    this.queryResult ? t = this.queryResult.isPending : this.infiniteQueryResult && (t = this.infiniteQueryResult.isPending);
    const i = this.versionFile || this.currentFile, r = [this.previousFile, i, this.nextFile].filter((s) => s);
    this.commentsOpen && this.versionsOpen && (this.versionsOpen = !1);
    const n = {
      "wy-preview-swiper-disabled": this.disableSwipeScroll
    };
    return this.weavyContext ? y`
      <wy-overlay
        class="wy-dark"
        maximized
        .show=${this.showOverlay}
        @close=${() => {
      this.showOverlay = !1;
    }}
        @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
      >
        ${this.showOverlay ? y`
              ${this.renderHeader(this.currentFile)}

              <div class="wy-main">
                <aside
                  id="tab-comments"
                  class="wy-sidebar ${Gt({
      "wy-active": this.commentsOpen,
      "wy-maximized": this.sidePanelMaximized
    })}"
                  ?hidden=${!this.commentsOpen}
                >
                  <nav class="wy-item">
                    <div class="wy-item-body">
                      <div class="wy-item-title">${C("Comments")}</div>
                    </div>
                    <wy-button kind="icon" @click=${() => this.toggleSidebarTab("comments", !1)}>
                      <wy-icon name="close"></wy-icon>
                    </wy-button>
                    <button
                      @click=${() => this.sidePanelMaximized = !this.sidePanelMaximized}
                      class="wy-sidebar-handle"
                      title=${this.sidePanelMaximized ? C("Restore side panel") : C("Maximize side panel")}
                    ></button>
                  </nav>
                  <div class="wy-pane wy-scroll-y">
                    ${this.commentsOpen && this.currentFile && this.currentFile.id >= 1 && this.app && this.user ? y`
                          <wy-comment-list .parentId=${this.currentFile.id} .location=${"files"}></wy-comment-list>
                        ` : L}
                  </div>
                </aside>
                <aside
                  id="tab-versions"
                  class="wy-sidebar ${Gt({
      "wy-active": this.versionsOpen,
      "wy-maximized": this.sidePanelMaximized
    })}"
                  ?hidden=${!this.versionsOpen}
                >
                  <nav class="wy-item">
                    <div class="wy-item-body">
                      <div class="wy-item-title">${C("Versions")}</div>
                    </div>
                    <wy-button kind="icon" @click=${() => this.toggleSidebarTab("versions", !1)}>
                      <wy-icon name="close"></wy-icon>
                    </wy-button>
                    <button
                      @click=${() => this.sidePanelMaximized = !this.sidePanelMaximized}
                      class="wy-sidebar-handle"
                      title=${this.sidePanelMaximized ? C("Restore side panel") : C("Maximize side panel")}
                    ></button>
                  </nav>
                  <div class="wy-pane wy-scroll-y">
                    <div class="wy-pane-body">
                      ${this.versionsOpen && this.currentFile && this.app ? y`
                            <wy-file-versions
                              .file=${this.currentFile}
                              .activeVersion=${this.versionFile || this.currentFile}
                              @file-version-select=${(s) => this.handleVersionFile(s)}
                            ></wy-file-versions>
                          ` : L}
                    </div>
                  </div>
                </aside>

                <div class="wy-preview">
                  <div ${it(this.swipeScrollRef)} class="wy-preview-swiper ${Gt(n)}">
                    ${Ve(
      r,
      (s) => "preview-area-" + (s == null ? void 0 : s.id),
      (s) => {
        const a = s === i ? this.currentPreviewFileCallback : s === this.nextFile ? this.nextRef : s === this.previousFile ? this.prevRef : void 0;
        return s ? y`
                              <div
                                id="preview-${s.id}"
                                ${it(a)}
                                class="wy-preview-area wy-scroll-y wy-scroll-x"
                              >
                                ${t ? y` <wy-spinner overlay></wy-spinner> ` : y` <wy-preview-item .file=${s}></wy-preview-item> `}
                              </div>
                            ` : L;
      }
    )}
                  </div>
                  ${this.currentFile ? y`
                        ${this.previousFile ? y`
                              <nav class="wy-nav-prev">
                                <wy-button kind="icon" @click=${() => this.scrollToPrev()}>
                                  <wy-icon name="previous"></wy-icon>
                                </wy-button>
                              </nav>
                            ` : L}
                        ${this.nextFile ? y`
                              <nav class="wy-nav-next">
                                <wy-button kind="icon" @click=${() => this.scrollToNext()}>
                                  <wy-icon name="next"></wy-icon>
                                </wy-button>
                              </nav>
                            ` : L}
                      ` : L}
                </div>
              </div>
            ` : L}
      </wy-overlay>
    ` : L;
  }
  updated() {
    requestAnimationFrame(
      () => requestAnimationFrame(() => {
        var t, i;
        this.swipeScrollRef.value ? ((t = this.swipeScroller).whenPrev ?? (t.whenPrev = async () => this.setPrev()), (i = this.swipeScroller).whenNext ?? (i.whenNext = async () => this.setNext()), this.swipeScroller.createObserver(this.swipeScrollRef.value), this.swipeScroller.observe(this.prevRef.value, this.nextRef.value)) : this.swipeScroller.clearObserver();
      })
    );
  }
}, c(Fa, "WyPreview"), Fa);
re.styles = [rt];
me([
  v()
], re.prototype, "uid", 2);
me([
  v({ attribute: !1 })
], re.prototype, "files", 2);
me([
  v({ attribute: !1 })
], re.prototype, "queryResult", 2);
me([
  v({ attribute: !1 })
], re.prototype, "infiniteQueryResult", 2);
me([
  v({ type: Object })
], re.prototype, "app", 2);
me([
  v({ type: Object })
], re.prototype, "user", 2);
me([
  v({ type: Number })
], re.prototype, "currentId", 2);
me([
  v({ type: Boolean })
], re.prototype, "isAttachment", 2);
me([
  W()
], re.prototype, "currentFile", 2);
me([
  W()
], re.prototype, "previousFile", 2);
me([
  W()
], re.prototype, "nextFile", 2);
me([
  W()
], re.prototype, "showOverlay", 2);
me([
  W()
], re.prototype, "commentsOpen", 2);
me([
  W()
], re.prototype, "versionsOpen", 2);
me([
  W()
], re.prototype, "versionFile", 2);
me([
  W()
], re.prototype, "sidePanelMaximized", 2);
me([
  W()
], re.prototype, "disableSwipeScroll", 2);
re = me([
  Q("wy-preview"),
  st()
], re);
var O$ = Object.defineProperty, D$ = Object.getOwnPropertyDescriptor, Jt = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? D$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && O$(t, i, n), n;
}, "__decorateClass$w"), Na;
let Dt = (Na = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.me = !1, this.isBot = !1, this.isPrivateChat = !1, this.temp = !1, this.sent = null, this.delivered = null, this.displayName = "", this.avatar = "", this.createdAt = "", this.html = "", this.text = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.seenBy = [], this.highlight = !1, this.previewRef = dt(), this.highlightRef = dt();
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t, parentId: this.messageId } });
    return this.dispatchEvent(i);
  }
  willUpdate(t) {
    t.has("link") && (this.highlight = !!(this.link && bu(this.link, lr.Message, { id: this.messageId })));
  }
  render() {
    var s, a, l, d, h, w, m;
    const t = ((s = this.attachments) == null ? void 0 : s.filter((f) => f.kind === "image" && f.thumbnail_url)) || [], i = ((a = this.attachments) == null ? void 0 : a.filter((f) => f.kind !== "image" || !f.thumbnail_url)) || [], r = this.createdAt ? new Intl.DateTimeFormat((l = this.weavyContext) == null ? void 0 : l.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.createdAt)
    ) : "", n = this.createdAt ? new Intl.DateTimeFormat((d = this.weavyContext) == null ? void 0 : d.locale, { timeStyle: "short" }).format(new Date(this.createdAt)) : "";
    return y`
      <div
        class=${Gt({ "wy-message": !0, "wy-message-me": this.me, "wy-message-bot": this.isBot })}
        part=${ue({ "wy-highlight": this.highlight })}
        ${it(this.highlightRef)}
      >
        ${this.me ? "" : y`
              <div class="wy-message-author">
                <wy-avatar
                  .src="${this.avatar}"
                  .size=${32}
                  .name="${this.displayName}"
                  .isBot=${this.isBot}
                ></wy-avatar>
              </div>
            `}

        <div class="wy-message-content">
          <div class="wy-message-meta">
            ${!this.isPrivateChat && !this.me ? y` <span>${this.displayName} · </span> ` : ""}
            <time datetime=${this.createdAt} title=${r}>${n}</time>
          </div>

          <div class="wy-message-bubble">
            ${this.temp ? y`<wy-skeleton .text=${this.text}></wy-skeleton>` : y`
                  <!-- image grid -->
                  ${t && t.length ? y`<wy-image-grid
                        .images=${t}
                        @file-open=${(f) => {
      var b;
      (b = this.previewRef.value) == null || b.open(f.detail.fileId);
    }}
                      ></wy-image-grid>` : ""}

                  <!-- embeds -->
                  ${this.embed && ((h = this.hasFeatures) != null && h.embeds) ? y` <wy-embed class="wy-embed" .embed=${this.embed}></wy-embed> ` : L}

                  <!-- text -->
                  ${this.html ? y`<div class="wy-content">${no(this.html)}</div>` : ""}

                  <!-- poll -->
                  ${this.pollOptions && this.pollOptions.length > 0 ? y`
                        <wy-poll
                          .pollOptions=${this.pollOptions}
                          @vote=${(f) => this.dispatchVote(f.detail.id)}
                        ></wy-poll>
                      ` : L}

                  <!-- meeting -->
                  ${this.meeting ? y`<wy-meeting-card .meeting=${this.meeting}></wy-meeting-card>` : ""}

                  <!-- files -->
                  ${i && i.length ? y`<wy-attachments-list
                        .files=${i}
                        @file-open=${(f) => {
      var b;
      (b = this.previewRef.value) == null || b.open(f.detail.fileId);
    }}
                      ></wy-attachments-list>` : ""}

                  <!-- reactions -->
                  ${(w = this.hasFeatures) != null && w.reactions && this.conversation ? y`
                        ${ry(
      `reactions-${this.conversation.id}-${this.messageId}`,
      y`
                            <wy-reactions
                              lineBelow
                              ?lineReverse=${!this.me}
                              small
                              directionX=${this.me ? "right" : "left"}
                              .reactions=${this.reactions}
                              parentId=${this.conversation.id}
                              entityId=${this.messageId}
                              messageType="messages"
                            ></wy-reactions>
                          `
    )}
                      ` : L}
                `}
          </div>
        </div>
      </div>
      ${(m = this.hasFeatures) != null && m.receipts ? y`<div class="wy-readby-status">
            ${this.seenBy && this.seenBy.length ? y`
                  ${this.seenBy.map((f) => {
      var g;
      const b = f.marked_at ? new Intl.DateTimeFormat((g = this.weavyContext) == null ? void 0 : g.locale, {
        dateStyle: "full",
        timeStyle: "short"
      }).format(new Date(f.marked_at)) : "";
      return y`<wy-avatar
                      title=${C(bt`Seen by ${f.display_name} at ${b}`)}
                      .name=${f.display_name}
                      .src=${f.avatar_url}
                      size=${18}
                    ></wy-avatar>`;
    })}
                ` : this.delivered === !0 ? y`<wy-icon title="Delivered" class="wy-status-delivered" name="check-circle" size="18"></wy-icon>` : this.sent === !0 ? y`<wy-icon title="Sent" class="wy-status-sent" name="check-circle-outline" size="18"></wy-icon>` : this.sent === !1 ? y`<wy-icon title="Pending" class="wy-status-pending" name="circle-outline" size="18"></wy-icon>` : L}
          </div>` : L}
      ${this.attachments ? ry(
      `preview-message-${this.messageId}`,
      y`
              <wy-preview
                ${it(this.previewRef)}
                .uid=${`message-${this.messageId}`}
                .files=${[...t, ...i]}
                .isAttachment=${!0}
              ></wy-preview>
            `
    ) : L}
    `;
  }
  updated(t) {
    var i;
    t.has("highlight") && this.highlight && ((i = this.highlightRef.value) == null || i.scrollIntoView({ block: "nearest" }));
  }
}, c(Na, "WyMessage"), Na);
Dt.styles = rt;
Jt([
  v({ attribute: !1 })
], Dt.prototype, "conversation", 2);
Jt([
  v({ type: Number })
], Dt.prototype, "messageId", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "me", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "isBot", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "isPrivateChat", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "temp", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "sent", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "delivered", 2);
Jt([
  v()
], Dt.prototype, "displayName", 2);
Jt([
  v()
], Dt.prototype, "avatar", 2);
Jt([
  v()
], Dt.prototype, "createdAt", 2);
Jt([
  v()
], Dt.prototype, "html", 2);
Jt([
  v()
], Dt.prototype, "text", 2);
Jt([
  v({ type: Array })
], Dt.prototype, "attachments", 2);
Jt([
  v({ attribute: !1 })
], Dt.prototype, "meeting", 2);
Jt([
  v({ type: Array })
], Dt.prototype, "pollOptions", 2);
Jt([
  v({ attribute: !1 })
], Dt.prototype, "embed", 2);
Jt([
  v({ type: Array })
], Dt.prototype, "reactions", 2);
Jt([
  v({ type: Array })
], Dt.prototype, "seenBy", 2);
Jt([
  v({ type: Boolean })
], Dt.prototype, "highlight", 2);
Dt = Jt([
  Q("wy-message"),
  st()
], Dt);
var F$ = Object.defineProperty, N$ = Object.getOwnPropertyDescriptor, gn = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? N$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && F$(t, i, n), n;
}, "__decorateClass$v"), Va;
let Bi = (Va = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.dataUpdatedAt = NaN, this.unreadMarkerShow = !0;
  }
  dispatchVote(t, i) {
    const r = new CustomEvent("vote", { detail: { id: t, parentId: i, parentType: "messages" } });
    return this.dispatchEvent(r);
  }
  render() {
    var r;
    const t = (r = this.infiniteMessages) == null ? void 0 : r.pages.flatMap((n) => n.data).filter((n) => n);
    let i;
    return y`
      <div class="wy-messages">
        <slot name="start"></slot>
        <!-- this.user ?? -->
        ${t && this.conversation && this.user ? Ve(
      t,
      (n) => n.id,
      (n, s) => {
        var h, w, m, f, b, g, $, O;
        const a = new Date(n.created_at);
        let l = y``;
        if ((i == null ? void 0 : i.toDateString()) !== a.toDateString()) {
          const k = new Intl.DateTimeFormat((h = this.weavyContext) == null ? void 0 : h.locale, {
            dateStyle: "short"
          }).format(a);
          i = a, l = y`<div class="wy-date-separator"><time>${k}</time></div>`;
        }
        let d = y``;
        return this.unreadMarkerId && this.unreadMarkerId === n.id && (d = y`<div
                    id="unread-marker"
                    class="wy-toast wy-toast-action wy-fade ${this.unreadMarkerShow ? "wy-show" : ""}"
                    tabindex=${this.unreadMarkerShow ? 0 : -1}
                    @click=${() => {
          var S;
          let k = `#message-${this.unreadMarkerId}`;
          this.unreadMarkerPosition === "below" && (k += "~ wy-message"), (S = this.renderRoot.querySelector(k)) == null || S.scrollIntoView({
            block: "start",
            inline: "nearest",
            behavior: "smooth"
          });
        }}
                    @keydown=${Ne}
                    @keyup=${li}
                  >
                    ${C("New messages")}
                  </div>`), y`${[
          y`${l}`,
          y`${this.unreadMarkerPosition === "above" ? d : L}`,
          ry(
            `message-${n.id}`,
            y`<wy-message
                      id="message-${n.id}"
                      .conversation=${this.conversation}
                      .messageId=${n.id}
                      .me=${n.created_by.id === ((w = this.user) == null ? void 0 : w.id)}
                      .isBot=${n.created_by.is_bot || !1}
                      .isPrivateChat=${((m = this.conversation) == null ? void 0 : m.type) === Mt.PrivateChat || ((f = this.conversation) == null ? void 0 : f.type) === Mt.BotChat}
                      .temp=${n.temp}
                      .displayName=${n.created_by.display_name}
                      .avatar=${n.created_by.avatar_url}
                      .createdAt=${n.created_at}
                      .text=${n.plain}
                      .html=${n.html}
                      .attachments=${(b = n.attachments) == null ? void 0 : b.data}
                      .meeting=${n.meeting}
                      .pollOptions=${(g = n.options) == null ? void 0 : g.data}
                      .embed=${n.embed}
                      .reactions=${($ = n.reactions) == null ? void 0 : $.data}
                      .sent=${this.members && s === t.length - 1 && n.created_by.id === ((O = this.user) == null ? void 0 : O.id) ? !n.temp : null}
                      .delivered=${this.members && s === t.length - 1 && (this.members.data ?? []).filter(
              (k) => {
                var S;
                return k.id !== ((S = this.user) == null ? void 0 : S.id) && k.delivered_at > n.created_at;
              }
            ).length > 0}
                      .seenBy=${this.members && this.members.data && this.members.data.length > 0 ? this.members.data.filter((k) => {
              var S;
              return k.marked_id === n.id && k.id !== ((S = this.user) == null ? void 0 : S.id);
            }) : []}
                      @vote=${(k) => {
              this.dispatchVote(k.detail.id, k.detail.parentId);
            }}
                    ></wy-message>`
          ),
          y`${this.unreadMarkerPosition === "below" ? d : L}`
        ]}`;
      }
    ) : L}

        <slot name="end"></slot>
      </div>
    `;
  }
}, c(Va, "WyMessages"), Va);
Bi.styles = [
  rt,
  vt`
      :host(wy-messages) {
        display: contents;
      }
      wy-message {
        scroll-margin-block: 6rem;
      }
    `
];
gn([
  v({ attribute: !1 })
], Bi.prototype, "conversation", 2);
gn([
  v({ attribute: !1 })
], Bi.prototype, "infiniteMessages", 2);
gn([
  v({ type: Number })
], Bi.prototype, "dataUpdatedAt", 2);
gn([
  v({ attribute: !1 })
], Bi.prototype, "members", 2);
gn([
  v({ attribute: !1 })
], Bi.prototype, "unreadMarkerId", 2);
gn([
  v({ attribute: !1 })
], Bi.prototype, "unreadMarkerPosition", 2);
gn([
  v({ attribute: !1 })
], Bi.prototype, "unreadMarkerShow", 2);
Bi = gn([
  Q("wy-messages"),
  st()
], Bi);
var V$ = Object.defineProperty, H$ = Object.getOwnPropertyDescriptor, B$ = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? H$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && V$(t, i, n), n;
}, "__decorateClass$u"), Ha;
let Rv = (Ha = class extends Tt {
  constructor() {
    super(), this.editorType = "messages", this.editorClass = "wy-message-editor";
  }
  renderTopSlot() {
    return this.renderLists();
  }
  renderMiddleSlot() {
    var t, i, r, n, s, a, l, d, h, w;
    return y` <div class="wy-message-editor-inputs">
      <!-- Add -->
      ${(t = this.hasFeatures) != null && t.attachments || (i = this.hasFeatures) != null && i.cloudFiles || (r = this.hasFeatures) != null && r.polls || (n = this.hasFeatures) != null && n.meetings ? y`<wy-dropdown icon="plus" directionY="up">
            ${(s = this.hasFeatures) != null && s.attachments ? y`
                  <wy-dropdown-item @click=${this.openFileInput} title=${C("From device")}>
                    <wy-icon name="attachment"></wy-icon>
                    <span>${C("From device")}</span>
                  </wy-dropdown-item>
                  <input
                    type="file"
                    ${it(this.fileInputRef)}
                    @click=${(m) => m.stopPropagation()}
                    @change=${(m) => this.handleUploadFiles(
      Array.from(m.target.files || []),
      m.target
    )}
                    multiple
                    hidden
                    tabindex="-1"
                  />
                ` : L}
            ${(a = this.hasFeatures) != null && a.cloudFiles ? y`
                  <wy-dropdown-item @click=${this.openCloudFiles} title=${C("From cloud")}>
                    <wy-icon name="cloud"></wy-icon>
                    <span>${C("From cloud")}</span>
                  </wy-dropdown-item>
                ` : L}
            ${(l = this.hasFeatures) != null && l.confluence && ((d = this.weavyContext) != null && d.confluenceAuthenticationUrl) ? y`<wy-confluence
                  dropdown
                  @external-blobs=${(m) => this.handleExternalBlobs(m.detail.externalBlobs)}
                ></wy-confluence>` : L}
            ${(h = this.hasFeatures) != null && h.polls ? y`
                  <wy-dropdown-item @click=${this.openPolls} title=${C("Poll")}>
                    <wy-icon name="poll"></wy-icon>
                    <span>${C("Poll")}</span>
                  </wy-dropdown-item>
                ` : L}
            ${(w = this.hasFeatures) != null && w.meetings ? y`
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("zoom")} title=${C("Zoom meeting")}>
                    <wy-icon svg="zoom-meetings" ></wy-icon>
                    <span>${C("Zoom meeting")}</span>
                  </wy-dropdown-item>
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("google")} title=${C("Google Meet")}>
                    <wy-icon svg="google-meet"></wy-icon>
                    <span>${C("Google Meet")}</span>
                  </wy-dropdown-item>
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("microsoft")} title=${C("Microsoft Teams")}>
                    <wy-icon svg="microsoft-teams"></wy-icon>
                    <span>${C("Microsoft Teams")}</span>
                  </wy-dropdown-item>
                ` : L}
          </wy-dropdown>` : L}

      <!-- Input -->
      <div class="wy-message-editor-text" ${it(this.editorRef)}></div>

      <!-- Button -->
      <wy-button
        kind="icon"
        color="primary-text"
        title=${C("Send", { desc: "Button action to send" })}
        @click="${this.submit}"
      >
        <wy-icon name="send"></wy-icon>
      </wy-button>
    </div>`;
  }
  renderBottomSlot() {
    return L;
  }
}, c(Ha, "WyMessageEditor"), Ha);
Rv = B$([
  Q("wy-message-editor"),
  st()
], Rv);
const im = class im {
  constructor(t) {
    this.typingTimeout = null, this.discardTime = 5 * 1e3, this.typingMembers = [], this.names = [], this.ellipsis = "", this.handleRealtimeTyping = (i) => {
      i.entity.id === this.appId && i.actor.id !== this.userId && (this.setTypers(i.actor), this.updateTyping());
    }, this.handleRealtimeStopTyping = (i) => {
      this.typingMembers.forEach((r, n) => {
        r.id === i.actor.id && this.typingMembers.splice(n, 1);
      }), this.updateTyping();
    }, t.addController(this), this.host = t, this.setContext();
  }
  get weavyContext() {
    var t;
    return (t = this.context) == null ? void 0 : t.value;
  }
  get appId() {
    return this._appId;
  }
  set appId(t) {
    t !== this._appId && (this.typingMembers = [], this.unregisterRealtime(), this._appId = t, this.registerRealtime());
  }
  get userId() {
    return this._userId;
  }
  set userId(t) {
    t !== this._userId && (this.typingMembers = [], this.unregisterRealtime(), this._userId = t, this.registerRealtime());
  }
  async setContext() {
    this.whenContext = new Promise((t) => this.resolveContext = t), await Fc(this.host), this.context = new cn(this.host, { context: ne, subscribe: !0 });
  }
  hostUpdate() {
    var t, i, r;
    (t = this.context) != null && t.value && ((r = this.resolveContext) == null || r.call(this, (i = this.context) == null ? void 0 : i.value));
  }
  async registerRealtime() {
    var t, i;
    this.appId && this._userId && (await this.whenContext, (t = this.weavyContext) == null || t.subscribe(`a${this.appId}`, "typing", this.handleRealtimeTyping), (i = this.weavyContext) == null || i.subscribe(`a${this.appId}`, "message_created", this.handleRealtimeStopTyping));
  }
  async unregisterRealtime() {
    var t, i;
    this.appId && this.userId && (await this.whenContext, (t = this.weavyContext) == null || t.unsubscribe(`a${this.appId}`, "typing", this.handleRealtimeTyping), (i = this.weavyContext) == null || i.unsubscribe(`a${this.appId}`, "message_created", this.handleRealtimeStopTyping));
  }
  updateTyping() {
    this.typingTimeout && (clearTimeout(this.typingTimeout), this.typingTimeout = null);
    const t = Date.now();
    if (this.typingMembers.forEach((i, r) => {
      t - i.time > this.discardTime && this.typingMembers.splice(r, 1);
    }), this.typingMembers.length) {
      const i = Date.now(), r = Math.round(
        (i - Math.max.apply(
          null,
          this.typingMembers.map((n) => n.time)
        )) / 1e3
      ) % 3 + 1;
      this.ellipsis = ".".repeat(r), this.names = this.typingMembers.map((n) => n.display_name).sort(), this.typingTimeout = window.setTimeout(() => this.updateTyping(), 1e3);
    } else
      this.names = [];
    this.host.requestUpdate(), this.host.dispatchEvent(new CustomEvent("typing", { bubbles: !0, composed: !1, detail: { count: this.typingMembers.length } }));
  }
  setTypers(t) {
    this.typingMembers.forEach((r, n) => {
      r.id === t.id && this.typingMembers.splice(n, 1);
    });
    const i = { ...t, time: Date.now() };
    this.typingMembers.push(i);
  }
};
c(im, "TypingController");
let qh = im;
const U$ = "@keyframes wy-highlight{0%{--wy-component-background-color: var(--wy-highlight, var(--wy-primary-95, #e8f2ff));--wy-component-color: var(--wy-on-highlight, var(--wy-primary-10, #001d32))}}.wy-messages{padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));flex:1 1 100%}.wy-message-placeholder{opacity:.5}.wy-date-separator{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));pointer-events:none;margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-align:center;position:sticky;top:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));z-index:10}.wy-date-separator time{background:var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:inline-block}.wy-message{display:flex;flex-direction:row;align-items:flex-start;margin-bottom:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));scroll-margin-block:6rem;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-message .wy-image-grid,.wy-message .wy-attachments{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-message-meta{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));margin:0 0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message-bubble{background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));display:flex;flex-direction:column;padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));max-width:min(32 * var(--wy-size, 1rem),100% - 2 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))))}.wy-message-bubble>div{flex:1 1 100%}.wy-message-author{margin:calc(1.375 * var(--wy-size, 1rem)) calc(.5 * var(--wy-size, 1rem)) 0 0}.wy-message-content{display:flex;flex-direction:column;width:100%;align-items:flex-start;flex-wrap:wrap;min-width:0;position:relative}.wy-message-content-row{display:flex;flex-direction:row;align-items:center;max-width:100%}.wy-message-bot{--wy-component-background-color: var(--wy-tertiary-container, var(--wy-tertiary-90, #bbf294));--wy-component-color: var(--wy-on-tertiary-container, var(--wy-tertiary-10, #0a2100))}.wy-message-me{margin-right:0;margin-left:calc(2.5 * var(--wy-size, 1rem));align-items:flex-end;--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32))}.wy-message-me .wy-message-meta{margin:0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) 0}.wy-message-me .wy-message-content{align-items:flex-end}.wy-message-me .wy-message-content-row{flex-direction:row-reverse}.wy-message-emoji .wy-message-bubble{background:none;padding:0 0 var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-message-emoji .wy-content .wy-emoji{width:calc(3 * var(--wy-size, 1rem));height:calc(3 * var(--wy-size, 1rem));margin:0}.wy-message-emoji.wy-message-me .wy-content{text-align:end}.wy-readby-status{display:flex;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));height:calc(1.125 * var(--wy-size, 1rem));justify-content:flex-end;margin-top:calc(-.125 * var(--wy-size, 1rem))}.wy-status-pending,.wy-status-sent,.wy-status-delivered{--wy-component-background-color: var(--wy-inverse-primary, var(--wy-primary-80, #95ccff));color:var(--wy-component-background-color)}.wy-message-readmore{justify-self:center;text-align:center}", j$ = Pt(U$), W$ = "@keyframes wy-bouncing{to{transform:translate3d(0,calc(-.25 * var(--wy-size, 1rem)),0)}}@keyframes wy-bouncing-fade{to{opacity:.2}}[part~=wy-bouncer]{width:calc(1.5 * var(--wy-size, 1rem));height:calc(.75 * var(--wy-size, 1rem))}[part~=wy-bouncer-dot]{position:relative;animation:wy-bouncing .6s infinite alternate,wy-bouncing-fade .6s infinite alternate;fill:currentColor}[part~=wy-bouncer-dot-start]{animation-delay:0s,.6s}[part~=wy-bouncer-dot-middle]{animation-delay:.3s,.3s}[part~=wy-bouncer-dot-end]{animation-delay:.6s,0s}", q$ = Pt(W$);
var Q$ = Object.defineProperty, K$ = Object.getOwnPropertyDescriptor, Qi = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? K$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && Q$(t, i, n), n;
}, "__decorateClass$t"), Ba;
let hi = (Ba = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.typing = new qh(this), this.isBot = !1, this.isPrivateChat = !1, this.typingMembers = [], this.names = [];
  }
  willUpdate(t) {
    t.has("conversationId") && (this.typing.appId = this.conversationId), t.has("userId") && (this.typing.userId = this.userId);
    const { typingMembers: i, names: r } = this.typing;
    this.typingMembers = i, this.names = r, i.length ? this.typingTime || (this.typingTime = /* @__PURE__ */ new Date()) : this.typingTime = void 0;
  }
  render() {
    var a, l, d, h, w;
    const t = this.typingMembers.map(
      (m) => {
        var f;
        return (f = this.members) == null ? void 0 : f.find((b) => b.id === m.id);
      }
    ), i = new Intl.ListFormat((a = this.weavyContext) == null ? void 0 : a.locale, { style: "long", type: "conjunction" }).format(
      this.names
    ), r = this.typingTime ? new Intl.DateTimeFormat((l = this.weavyContext) == null ? void 0 : l.locale, { dateStyle: "full", timeStyle: "short" }).format(
      this.typingTime
    ) : "", n = this.typingTime ? new Intl.DateTimeFormat((d = this.weavyContext) == null ? void 0 : d.locale, { timeStyle: "short" }).format(this.typingTime) : "", s = y`
      <svg part="wy-bouncer" viewBox="0 0 32 16" xmlns="http://www.w3.org/2000/svg">
        <circle part="wy-bouncer-dot wy-bouncer-dot-start" cx="4" cy="10" r="4" />
        <circle part="wy-bouncer-dot wy-bouncer-dot-middle" cx="16" cy="10" r="4" />
        <circle part="wy-bouncer-dot wy-bouncer-dot-end" cx="28" cy="10" r="4" />
      </svg>
    `;
    return t.length ? y`
          <div class=${Gt({ "wy-message": !0, "wy-message-bot": this.isBot })}>
            <div class="wy-message-author">
              ${t.length > 1 ? y`
                    <wy-avatar-group
                      .size=${32}
                      .members=${t}
                      title=${i}
                    ></wy-avatar-group>
                  ` : y`
                    <wy-avatar
                      .size=${32}
                      .src=${(h = t[0]) == null ? void 0 : h.avatar_url}
                      .name=${i}
                      .isBot=${this.isBot}
                    ></wy-avatar>
                  `}
            </div>

            <div class="wy-message-content">
              <div class="wy-message-meta">
                ${this.isPrivateChat ? y`
                      <time datetime=${wt((w = this.typingTime) == null ? void 0 : w.toISOString())} title=${r}>${n}</time>
                    ` : i}
              </div>
              <div class="wy-message-bubble"> ${s} </div>
            </div>
          </div>
        ` : L;
  }
}, c(Ba, "WyMessageTyping"), Ba);
hi.styles = [we, q$, j$];
Qi([
  Kt({ context: ne, subscribe: !0 }),
  W()
], hi.prototype, "weavyContext", 2);
Qi([
  v({ attribute: !0, type: Number })
], hi.prototype, "conversationId", 2);
Qi([
  v({ attribute: !0, type: Number })
], hi.prototype, "userId", 2);
Qi([
  v({ type: Boolean })
], hi.prototype, "isBot", 2);
Qi([
  v({ type: Boolean })
], hi.prototype, "isPrivateChat", 2);
Qi([
  v({ attribute: !1 })
], hi.prototype, "members", 2);
Qi([
  W()
], hi.prototype, "typingMembers", 2);
Qi([
  W()
], hi.prototype, "names", 2);
Qi([
  W()
], hi.prototype, "typingTime", 2);
hi = Qi([
  Q("wy-message-typing")
], hi);
var G$ = Object.defineProperty, Z$ = Object.getOwnPropertyDescriptor, T0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$a"), vo = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? Z$(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && G$(t, i, n), n;
}, "__decorateClass$s"), A0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || T0("Cannot " + i), "__accessCheck$a"), Iv = /* @__PURE__ */ c((o, t, i) => (A0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$a"), Y$ = /* @__PURE__ */ c((o, t, i) => t.has(o) ? T0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$a"), Ov = /* @__PURE__ */ c((o, t, i, r) => (A0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$a"), zo, Ua;
let Ui = (Ua = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.lastReadMessagePosition = "below", this.lastReadMessageShow = !1, this.releaseFocusEvent = () => new CustomEvent("release-focus", { bubbles: !0, composed: !0 }), this.messagesQuery = new pr(this), this.addMessageMutation = new Ze(this), this.infiniteScroll = new Gp(this), this.pagerRef = dt(), this.shouldBeAtBottom = !0, this.handleRealtimeMessage = (t) => {
      var r, n;
      if (!this.weavyContext || !this.conversation || !this.conversationId || !this.user)
        return;
      t.message.created_by = t.actor;
      const i = (r = t.message.metadata) != null && r.temp_id ? parseFloat((n = t.message.metadata) == null ? void 0 : n.temp_id) : void 0;
      ur(
        this.weavyContext.queryClient,
        ["messages", t.message.app.id],
        t.message,
        i
      ), _t(
        this.weavyContext.queryClient,
        ["conversations"],
        this.conversationId,
        (s) => s.last_message = t.message
      ), t.message.app.id === this.conversation.id && (!this.conversation.display_name && t.message.plain && this.setEmptyConversationTitle(t.message.plain), t.actor.id !== this.user.id && ((!this.isAtBottom || document.hidden) && (console.log("realtime showUnread", t.message.id), this.showUnread("above", t.message.id)), this.isAtBottom && (this.markAsRead(t.message.id), requestAnimationFrame(() => {
        this.scrollToBottom();
      }))));
    }, this.handleRealtimeReactionAdded = (t) => {
      !this.weavyContext || !this.user || !this.conversation || ut(
        this.weavyContext.queryClient,
        { queryKey: ["messages"], exact: !1 },
        t.entity.id,
        (i) => {
          i.reactions || (i.reactions = { count: 0 }), i.reactions.data = [
            ...(i.reactions.data || []).filter((r) => {
              var n;
              return ((n = r.created_by) == null ? void 0 : n.id) !== t.actor.id;
            }),
            { content: t.reaction, created_by: t.actor }
          ];
        }
      );
    }, this.handleRealtimeReactionDeleted = (t) => {
      !this.weavyContext || !this.conversation || !this.user || ut(
        this.weavyContext.queryClient,
        { queryKey: ["messages"], exact: !1 },
        t.entity.id,
        (i) => {
          i.reactions && i.reactions.data && (i.reactions.data = i.reactions.data.filter((r) => {
            var n;
            return ((n = r.created_by) == null ? void 0 : n.id) !== t.actor.id;
          }));
        }
      );
    }, this.markAsReadWhenVisible = () => {
      document.hidden || this.markAsRead();
    }, Y$(this, zo);
  }
  isPrivateChat(t) {
    var i;
    return ((i = t ?? this.conversation) == null ? void 0 : i.type) === Mt.PrivateChat;
  }
  isChatRoom(t) {
    var i;
    return ((i = t ?? this.conversation) == null ? void 0 : i.type) === Mt.ChatRoom;
  }
  async handleTyping(t) {
    t.detail.count && this.isAtBottom && requestAnimationFrame(() => {
      this.scrollToBottom(!0);
    });
  }
  async handleSubmit(t) {
    if (!this.conversation || !this.user)
      throw new Error("Error submitting message. Missing user or conversation.");
    const i = await this.addMessageMutation.mutate({
      app_id: this.conversation.id,
      text: t.detail.text,
      meeting_id: t.detail.meetingId,
      poll_options: t.detail.pollOptions,
      embed_id: t.detail.embed,
      blobs: t.detail.blobs,
      user_id: this.user.id,
      temp_id: Math.random()
    });
    return this.hideUnread(), this.markAsRead(i.id), requestAnimationFrame(() => {
      this.scrollToBottom();
    }), i;
  }
  async setEmptyConversationTitle(t) {
    var i;
    !this.conversation || this.conversation.display_name || await ((i = this.updateConversationMutation) == null ? void 0 : i.mutate({ id: this.conversation.id, name: t }));
  }
  get isAtBottom() {
    return this.pagerRef.value ? mx(this.pagerRef.value) : !0;
  }
  scrollToBottom(t = !1) {
    fx(this.pagerRef.value) && this.conversationId && (this.weavyContext && ux(this.weavyContext.queryClient, ["messages", this.conversationId]), vx(this.pagerRef.value, t));
  }
  showUnread(t, i) {
    i && !this.lastReadMessageShow && (this.lastReadMessagePosition = t, this.lastReadMessageId = i, this.lastReadMessageShow = !0);
  }
  hideUnread() {
    this.lastReadMessageShow = !1;
  }
  async markAsRead(t, i = !1) {
    var r, n;
    if (!i) {
      if (await m2(), !this.isConnected)
        return;
      if (document.hidden) {
        await this.markAsRead(t);
        return;
      }
    }
    this.conversation && this.conversation.last_message && ((n = this.markConversationMutation) == null || n.mutate({
      id: this.conversation.id,
      markAsRead: !0,
      messageId: t ?? ((r = this.conversation.last_message) == null ? void 0 : r.id)
    }));
  }
  willUpdate(t) {
    var r, n, s, a;
    var i;
    if (super.willUpdate(t), t.has("weavyContext") && this.weavyContext && (this.updateConversationMutation = Ug(this.weavyContext), this.markConversationMutation = Hg(this.weavyContext)), (t.has("weavyContext") || t.has("conversationId")) && this.weavyContext)
      if ((i = Iv(this, zo)) == null || i.call(this), this.conversationId) {
        this.messagesQuery.trackInfiniteQuery(px(this.weavyContext, this.conversationId)), this.addMessageMutation.trackMutation(
          yx(this.weavyContext, ["messages", this.conversationId])
        ), this.pollMutation = Ew(this.weavyContext, ["messages", this.conversationId]), this.lastReadMessageId = void 0, this.lastReadMessageShow = !1;
        const l = `a${this.conversationId}`;
        this.weavyContext.subscribe(l, "message_created", this.handleRealtimeMessage), this.weavyContext.subscribe(l, "reaction_added", this.handleRealtimeReactionAdded), this.weavyContext.subscribe(l, "reaction_removed", this.handleRealtimeReactionDeleted), Ov(this, zo, () => {
          var d, h, w;
          (d = this.weavyContext) == null || d.unsubscribe(l, "message_created", this.handleRealtimeMessage), (h = this.weavyContext) == null || h.unsubscribe(l, "reaction_added", this.handleRealtimeReactionAdded), (w = this.weavyContext) == null || w.unsubscribe(l, "reaction_removed", this.handleRealtimeReactionDeleted), Ov(this, zo, void 0);
        });
      } else
        this.messagesQuery.untrackInfiniteQuery(), this.addMessageMutation.untrackMutation();
    if (t.has("lastReadMessageShow") && this.lastReadMessageShow && (this.shouldBeAtBottom = this.isAtBottom), t.has("conversationId") && t.get("conversationId") !== this.conversationId ? this.shouldBeAtBottom = !!this.conversationId : this.shouldBeAtBottom = this.isAtBottom, t.has("conversation") && this.conversation && this.conversation && this.conversation.is_unread && this.conversation.last_message) {
      const l = (n = (r = this.conversation.members.data) == null ? void 0 : r.find((d) => {
        var h;
        return d.id === ((h = this.user) == null ? void 0 : h.id);
      })) == null ? void 0 : n.marked_id;
      l && l < this.conversation.last_message.id && this.showUnread(
        "below",
        (a = (s = this.conversation.members.data) == null ? void 0 : s.find((d) => {
          var h;
          return d.id === ((h = this.user) == null ? void 0 : h.id);
        })) == null ? void 0 : a.marked_id
      ), this.markAsRead();
    }
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.messagesQuery.result, this.pagerRef.value);
  }
  render() {
    var s, a, l;
    const { isPending: t } = ((s = this.weavyContext) == null ? void 0 : s.network) ?? { isPending: !0 }, { data: i, isPending: r, hasNextPage: n } = this.messagesQuery.result ?? { isPending: t };
    return y`
      ${this.conversation && i ? y`
            ${!n && !r ? y` <!-- Top of the conversation --> ` : L}
            <wy-messages
              .conversation=${this.conversation}
              .infiniteMessages=${i}
              .unreadMarkerId=${this.lastReadMessageId}
              .unreadMarkerPosition=${this.lastReadMessagePosition}
              .unreadMarkerShow=${this.lastReadMessageShow}
              @vote=${(d) => {
      var h;
      (h = this.pollMutation) == null || h.mutate({
        optionId: d.detail.id,
        parentType: d.detail.parentType,
        parentId: d.detail.parentId
      });
    }}
            >
              <div slot="start" ${it(this.pagerRef)} part="wy-pager"></div>
              <wy-message-typing
                slot="end"
                .conversationId=${this.conversation.id}
                .userId=${(a = this.user) == null ? void 0 : a.id}
                .isPrivateChat=${this.isPrivateChat()}
                .members=${this.conversation.members.data}
                @typing=${(d) => this.handleTyping(d)}
              ></wy-message-typing>
            </wy-messages>
          ` : y`
            <div class="wy-messages">
              <wy-empty class="wy-pane">
                ${r || !this.conversation ? y`<wy-spinner overlay></wy-spinner>` : C("Start the conversation!")}
              </wy-empty>
            </div>
          `}
      ${this.conversation && ro(an.Create, (l = this.conversation) == null ? void 0 : l.permissions) ? y`
            <div class="wy-footerbar wy-footerbar-sticky">
              <wy-message-editor
                .draft=${!0}
                placeholder=${C("Type a message...")}
                @submit=${(d) => this.handleSubmit(d)}
              ></wy-message-editor>
            </div>
          ` : L}
    `;
  }
  updated() {
    this.shouldBeAtBottom && requestAnimationFrame(() => {
      this.scrollToBottom();
    });
  }
  connectedCallback() {
    super.connectedCallback(), document.addEventListener("visibilitychange", this.markAsReadWhenVisible);
  }
  disconnectedCallback() {
    var t;
    (t = Iv(this, zo)) == null || t.call(this), document.removeEventListener("visibilitychange", this.markAsReadWhenVisible), super.disconnectedCallback();
  }
}, c(Ua, "WyConversation"), Ua);
zo = /* @__PURE__ */ new WeakMap();
Ui.styles = [
  rt,
  vt`
      :host {
        display: contents;
        position: relative;
      }

      wy-messages {
        display: contents;
      }

      wy-message {
        scroll-margin-block: 6rem;
      }
    `
];
vo([
  kn({ context: kw }),
  v({ attribute: !1 })
], Ui.prototype, "conversation", 2);
vo([
  v({ type: Number })
], Ui.prototype, "conversationId", 2);
vo([
  v()
], Ui.prototype, "cssClass", 2);
vo([
  W()
], Ui.prototype, "lastReadMessagePosition", 2);
vo([
  W()
], Ui.prototype, "lastReadMessageId", 2);
vo([
  W()
], Ui.prototype, "lastReadMessageShow", 2);
Ui = vo([
  Q("wy-conversation"),
  st()
], Ui);
var ge = /* @__PURE__ */ ((o) => (o.All = "", o.Activity = "activity", o.Mention = "mention", o.Reaction = "reaction", o))(ge || {});
function X$(o, t = ge.All, i, r = {}) {
  return {
    ...r,
    initialPageParam: 0,
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["notifications", "list", i, t],
    queryFn: /* @__PURE__ */ c(async (s) => {
      var w;
      const a = new URLSearchParams({
        skip: ((w = s.pageParam) == null ? void 0 : w.toString()) || "0",
        top: "25",
        type: t
      }), l = `/api/${i ? `apps/${i.toString()}/` : ""}notifications?${a.toString()}`, h = await (await o.get(l)).json();
      return h.data = h.data || [], h;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((s, a) => {
      if (s.end && (s == null ? void 0 : s.end) < (s == null ? void 0 : s.count))
        return a.length * 25;
    }, "getNextPageParam")
  };
}
c(X$, "getNotificationsOptions");
function J$(o, t = ge.All, i) {
  var s;
  const r = (s = o.queryClient.getQueryData(["notifications", "list", i, t])) == null ? void 0 : s.pages.flatMap((a) => a.data);
  let n;
  return r == null || r.forEach((a) => {
    n = n && a && n.id > a.id ? n : a;
  }), n;
}
c(J$, "getLastNotification");
function t8(o, t) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ notificationId: r }) => {
      const n = new URL(`/api/${t ? `apps/${t.toString()}/` : ""}notifications/mark`, o.url);
      r && n.searchParams.append("id", r.toString()), await o.post(n, "PUT", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (r) => {
      const n = [];
      return ut(
        o.queryClient,
        { queryKey: t ? ["notifications", "list", t] : ["notifications", "list"], exact: !1 },
        void 0,
        (s) => {
          n.push({ id: s.id, is_unread: s.is_unread }), s.is_unread = !1;
        }
      ), t && n.length && ut(
        o.queryClient,
        { queryKey: ["notifications", "list"], exact: !1 },
        (s) => !!n.find((a) => a.id === s.id && s.is_unread),
        (s) => {
          s.is_unread = !1;
        }
      ), t || dh(
        o.queryClient,
        { queryKey: ["notifications", "badge"], exact: !1 },
        () => 0
      ), dh(
        o.queryClient,
        { queryKey: t ? ["apps", "notifications", "badge", t] : ["apps", "notifications", "badge"], exact: !1 },
        () => 0
      ), { changedNotifications: n };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c(() => {
      t && o.queryClient.invalidateQueries({ queryKey: ["notifications", "badge"], exact: !1 });
    }, "onSuccess"),
    onSettled: /* @__PURE__ */ c(() => {
      o.queryClient.invalidateQueries({ queryKey: ["notifications", "list"], exact: !1 }), o.queryClient.invalidateQueries({ queryKey: ["notifications", "badge"], exact: !1 }), o.queryClient.invalidateQueries({ queryKey: ["apps", "notifications", "badge"], exact: !1 });
    }, "onSettled"),
    onError: /* @__PURE__ */ c((r, n, s) => {
      console.error(r.message);
    }, "onError")
  };
}
c(t8, "getMarkNotificationsMutationOptions");
function e8(o, t) {
  return new kt(o.queryClient, t8(o, t));
}
c(e8, "getMarkNotificationsMutation");
function i8(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ markAsRead: i, notificationId: r }) => {
      const n = `/api/notifications/${r}/mark`;
      await o.post(n, i ? "PUT" : "DELETE", "");
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => {
      const r = /* @__PURE__ */ new Map();
      ut(
        o.queryClient,
        { queryKey: ["notifications", "list"], exact: !1 },
        i.notificationId,
        (n) => {
          !!n.is_unread === i.markAsRead && r.set(n.id, n), n.is_unread = !i.markAsRead;
        }
      ), r.size && (dh(
        o.queryClient,
        { queryKey: ["notifications", "badge"], exact: !1 },
        (n) => Math.max(0, n + (i.markAsRead ? -1 : 1))
      ), r.forEach((n) => {
        n.link.app && dh(
          o.queryClient,
          {
            queryKey: ["apps", "notifications", "badge"],
            predicate: /* @__PURE__ */ c((s) => {
              var a, l;
              return s.queryKey[3] === ((a = n.link.app) == null ? void 0 : a.id) || s.queryKey[3] === ((l = n.link.app) == null ? void 0 : l.uid);
            }, "predicate"),
            exact: !1
          },
          (s) => Math.max(0, s + (i.markAsRead ? -1 : 1))
        );
      }));
    }, "onMutate"),
    onError: /* @__PURE__ */ c((i, r) => {
      ut(
        o.queryClient,
        { queryKey: ["notifications", "list"], exact: !1 },
        r.notificationId,
        (n) => {
          n.is_unread = r.markAsRead;
        }
      ), o.queryClient.invalidateQueries({ queryKey: ["notifications", "badge"], exact: !1 }), o.queryClient.invalidateQueries({ queryKey: ["apps", "notifications", "badge"], exact: !1 });
    }, "onError")
  };
}
c(i8, "getMarkNotificationMutationOptions");
function z0(o) {
  return new kt(o.queryClient, i8(o));
}
c(z0, "getMarkNotificationMutation");
function r8(o, t = ge.All, i, r = {}) {
  const n = new URLSearchParams({
    type: t,
    countOnly: "true",
    unread: "true"
  }), s = `/api/${i ? `apps/${i.toString()}/` : ""}notifications?${n.toString()}`;
  return Ge(o, i ? ["apps", "notifications", "badge", i, t] : ["notifications", "badge", t], s, r);
}
c(r8, "getBadgeOptions");
var n8 = Object.defineProperty, o8 = Object.getOwnPropertyDescriptor, R0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$9"), I0 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? o8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && n8(t, i, n), n;
}, "__decorateClass$r"), O0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || R0("Cannot " + i), "__accessCheck$9"), Dv = /* @__PURE__ */ c((o, t, i) => (O0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$9"), s8 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? R0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$9"), Fv = /* @__PURE__ */ c((o, t, i, r) => (O0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$9"), Ro, ja;
let Qh = (ja = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.typeFilter = ge.All, this.badgeQuery = new xe(this), this.handleRefresh = () => {
      this.badgeQuery.result.refetch();
    }, s8(this, Ro);
  }
  async willUpdate(t) {
    var r;
    var i;
    super.willUpdate(t), (t.has("weavyContext") || t.has("typeFilter") || t.has("app")) && this.weavyContext && this.badgeQuery.trackQuery(r8(this.weavyContext, this.typeFilter, (r = this.app) == null ? void 0 : r.id), !0), t.has("weavyContext") && this.weavyContext && ((i = Dv(this, Ro)) == null || i.call(this), this.weavyContext.subscribe(null, "notification_created", this.handleRefresh), this.weavyContext.subscribe(null, "notification_updated", this.handleRefresh), this.weavyContext.subscribe(null, "notifications_marked", this.handleRefresh), Fv(this, Ro, () => {
      var n, s, a;
      (n = this.weavyContext) == null || n.unsubscribe(null, "notification_created", this.handleRefresh), (s = this.weavyContext) == null || s.unsubscribe(null, "notification_updated", this.handleRefresh), (a = this.weavyContext) == null || a.unsubscribe(null, "notifications_marked", this.handleRefresh), Fv(this, Ro, void 0);
    }));
  }
  render() {
    var n;
    const { data: t, isPending: i } = this.badgeQuery.result ?? {}, r = t != null && t.count ? t.count >= 100 ? "99+" : t.count : "";
    return y`
      ${this.user && !i && (t != null && t.count) ? y`
          <span class="wy-badge ${((n = this.settings) == null ? void 0 : n.notificationsBadge) === "count" ? "wy-button-badge" : "wy-button-dot"}" title=${t == null ? void 0 : t.count}>${r}</span> 
        ` : L}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Dv(this, Ro)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(ja, "WyNotificationBadge"), ja);
Ro = /* @__PURE__ */ new WeakMap();
Qh.styles = [
  rt,
  Dg
];
I0([
  v()
], Qh.prototype, "typeFilter", 2);
Qh = I0([
  Q("wy-notification-badge"),
  st()
], Qh);
var a8 = Object.defineProperty, c8 = Object.getOwnPropertyDescriptor, D0 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? c8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && a8(t, i, n), n;
}, "__decorateClass$q"), Wa;
let lw = (Wa = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.showNotifications = !1, this.notificationsRef = dt(), this.appSubscribeMutation = new Ze(this);
  }
  handleSubscribe(t) {
    var i;
    (i = this.app) != null && i.id && this.appSubscribeMutation.mutate({ subscribe: t });
  }
  willUpdate(t) {
    (t.has("weavyContext") || t.has("app")) && this.weavyContext && this.app && this.appSubscribeMutation.trackMutation(Ig(this.weavyContext, this.app));
  }
  render() {
    var t, i, r, n;
    return ((t = this.settings) == null ? void 0 : t.notifications) === "none" ? L : y`
      <wy-button
        kind="icon"
        ?active=${this.showNotifications}
        @click=${() => this.showNotifications = !this.showNotifications}
      >
        <wy-icon name="bell"></wy-icon>
        ${((i = this.settings) == null ? void 0 : i.notificationsBadge) !== "none" ? y` <wy-notification-badge></wy-notification-badge> ` : L}
      </wy-button>

      <wy-sheet
        noPadding
        .show=${this.showNotifications}
        @close=${() => this.showNotifications = !1}
        @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
      >
        <wy-button
          kind="icon"
          slot="appbar-buttons"
          @click=${() => {
      var s;
      (s = this.notificationsRef.value) == null || s.markAllRead();
    }}
          title=${C("Mark all as read")}
        >
          <wy-icon name="check-all"></wy-icon>
        </wy-button>

        <wy-dropdown slot="appbar-buttons" ?disabled=${!this.app}>
          ${(r = this.app) != null && r.is_subscribed ? y`<wy-dropdown-item @click=${() => this.handleSubscribe(!1)}>
                <wy-icon name="bell-off"></wy-icon>
                ${C("Unsubscribe")}
              </wy-dropdown-item>` : y`<wy-dropdown-item @click=${() => this.handleSubscribe(!0)}>
                <wy-icon name="bell"></wy-icon>
                ${C("Subscribe")}
              </wy-dropdown-item>`}
        </wy-dropdown>
        <span slot="appbar-text">${C("Notifications")}</span>
        ${this.showNotifications ? y`
              <wy-notification-list ${it(this.notificationsRef)}>
                ${(n = this.app) != null && n.is_subscribed ? L : y`
                      <wy-empty slot="empty">
                          <div>${C("You are not subscribed to updates yet.")}</div>
                          <wy-button color="primary" @click=${() => this.handleSubscribe(!0)}>${C("Subscribe")}</wy-button>
                      </wy-empty>
                    `}
              </wy-notification-list>
            ` : L}
      </wy-sheet>
    `;
  }
}, c(Wa, "WyNotificationButtonList"), Wa);
D0([
  W()
], lw.prototype, "showNotifications", 2);
lw = D0([
  Q("wy-notification-button-list"),
  st()
], lw);
var l8 = Object.defineProperty, d8 = Object.getOwnPropertyDescriptor, h8 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? d8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && l8(t, i, n), n;
}, "__decorateClass$p"), qa;
let Kh = (qa = class extends wo(K) {
  constructor() {
    super(), this.productType = Vc.Chat, this.contextualType = gi.Chat, new hr(this, Kh.styles);
  }
  // Override app type
  get app() {
    return super.app;
  }
  set app(t) {
    super.app = t;
  }
  render() {
    return y`
      <wy-buttons floating reverse>
        <wy-notification-button-list></wy-notification-button-list>
      </wy-buttons>

      ${this.app ? y` <wy-conversation .conversation=${this.app} .conversationId=${this.app.id}></wy-conversation> ` : y` <wy-empty><wy-spinner></wy-spinner></wy-empty> `}
    `;
  }
}, c(qa, "WyChat"), qa);
Kh.styles = [rt, Hc, kd, ki, fo];
Kh = h8([
  Q("wy-chat"),
  st()
], Kh);
var u8 = Object.defineProperty, p8 = Object.getOwnPropertyDescriptor, y8 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? p8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && u8(t, i, n), n;
}, "__decorateClass$o"), Qa;
let Gh = (Qa = class extends wo(K) {
  constructor() {
    super(), this.productType = Vc.Comments, this.contextualType = gi.Comments, new hr(this, Gh.styles);
  }
  render() {
    var t;
    return y`
      <wy-buttons floating reverse>
        <wy-notification-button-list></wy-notification-button-list>
      </wy-buttons>

      ${this.app && this.user ? y` <wy-comment-list parentId=${(t = this.app) == null ? void 0 : t.id} .location=${"apps"}></wy-comment-list> ` : y`
            <wy-empty>
              <wy-spinner padded></wy-spinner>
            </wy-empty>
          `}
    `;
  }
}, c(Qa, "WyComments"), Qa);
Gh.styles = [rt, Hc, kd, ki, fo];
Gh = y8([
  Q("wy-comments"),
  st()
], Gh);
function w8(o, t, i = {}, r = {}) {
  if (!o)
    throw new Error("useFileList must be used within a WeavyContext");
  return {
    ...r,
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["apps", t, "files", i],
    initialPageParam: 0,
    queryFn: /* @__PURE__ */ c(async (a) => {
      const l = a.pageParam, d = !!(i != null && i.trashed), h = i.order ? i.order.by + (i.order.descending ? "+desc" : "") : "";
      let w = "/api/apps/" + t + "/files?skip=" + l + "&take=25&orderby=" + h;
      return d && (w += "&trashed=null"), await (await o.get(w)).json();
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((a, l) => a != null && a.end && (a == null ? void 0 : a.end) < (a == null ? void 0 : a.count) ? l.length * 25 : null, "getNextPageParam")
    /*select: (data: any) => {
            // UPDATE DATA WITH MUTATIONS
            // TODO: REMOVE?
    
            const mutatingFiles = queryClient.getMutationCache()
            .findAll({mutationKey: filesKey, predicate: (mutation: Mutation) => !!(<unknown>mutation as FileMutationType).state.context?.file})
            .map((mutation: Mutation) => (<unknown>mutation as FileMutationType).state.context!.file);
            
            const meta = queryClient.getQueryCache().find<FilesResultType>({ queryKey: filesKey })?.meta;
            const order = meta?.order as FileOrderType;
            
            mutatingFiles.forEach((file) => {
                //if (meta?.trashed === file.is_trashed) {
                    if (file.id < 1 && file.status !== "ok" && file.status !== "error") {
                        let existingFile = findAnyExistingItem<FileType>(data, "name", file.name, true);
                        if (existingFile) {
                            file.id = existingFile.id;
                        }
                        data = addToQueryData(data, file, order);
                    } else {
                        data = updateQueryData(data, file.id, (cacheFile: FileType) => { Object.assign(cacheFile, file)});
                    }
                //}
            });
            return data;
        }*/
  };
}
c(w8, "getInfiniteFileListOptions");
function f8(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ c(async ({ file: s, name: a }) => {
      if (s.id >= 1) {
        const l = await o.post(
          "/api/files/" + s.id,
          "PATCH",
          JSON.stringify({
            name: a
          })
        );
        if (!l.ok) {
          const d = await l.json();
          throw new Error(d.detail || d.title, { cause: d });
        }
        return l.json();
      } else
        throw new Error(`Could not rename ${s.name}`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c((s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.file.id,
      (a) => Object.assign(a, { name: s.name })
    ), { type: "rename", file: s.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, s)
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "ok";
      });
    }, "onSuccess"),
    onError(s, a) {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { name: a.file.name })
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "error", l.status.text = s.message;
      });
    }
  };
  return n;
}
c(f8, "getRenameFileMutationOptions");
function m8(o, t) {
  return new kt(o.queryClient, f8(o, t));
}
c(m8, "getRenameFileMutation");
function v8(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ c(async ({ file: s }) => {
      if (s.id >= 1) {
        if (!(await o.post("/api/files/" + s.id + "/trash", "POST", "")).ok)
          throw new Error();
      } else
        throw new Error(`Could not trash ${s.name}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.file.id,
      (a) => Object.assign(a, { is_trashed: !0 })
    ), { type: "trash", file: s.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, s)
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "ok";
      });
    }, "onSuccess"),
    onError(s, a) {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { is_trashed: !1 })
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "error", l.status.text = s.message;
      });
    }
  };
  return n;
}
c(v8, "getTrashFileMutationOptions");
function g8(o, t) {
  return new kt(o.queryClient, v8(o, t));
}
c(g8, "getTrashFileMutation");
function b8(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ c(async ({ file: s }) => {
      if (s.id >= 1) {
        const a = await o.post("/api/files/" + s.id + "/restore", "POST", "");
        if (!a.ok) {
          const l = await a.json();
          throw new Error(l.detail || l.title, { cause: l });
        }
      } else {
        const a = { status: 400, title: `Could not restore ${s.name}.` };
        throw new Error(a.detail || a.title, { cause: a });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.file.id,
      (a) => Object.assign(a, { status: "pending" })
    ), { type: "restore", file: s.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { is_trashed: !1, status: "ok" })
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "ok";
      });
    }, "onSuccess"),
    onError(s, a) {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { is_trashed: !0 })
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "error", l.status.text = s.message;
      });
    }
  };
  return n;
}
c(b8, "getRestoreFileMutationOptions");
function x8(o, t) {
  return new kt(o.queryClient, b8(o, t));
}
c(x8, "getRestoreFileMutation");
function C8(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ c(async ({ file: s }) => {
      if (s.id >= 1 && s.is_trashed) {
        const a = await o.post("/api/files/" + s.id, "DELETE", "");
        if (!a.ok) {
          const l = await a.json();
          throw new Error(l.detail || l.title, { cause: l });
        }
      } else {
        const a = { status: 400, title: `Could not delete ${s.name} forever.` };
        throw new Error(a.detail || a.title, { cause: a });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.file.id,
      (a) => Object.assign(a, { status: "pending" })
    ), { type: "delete-forever", file: s.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      hx(i, { queryKey: n.mutationKey, exact: !1 }, a.file.id), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "ok";
      });
    }, "onSuccess"),
    onError(s, a) {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { status: void 0 })
      ), Ut(i, n.mutationKey, a, (l) => {
        l.status.state = "error", l.status.text = s.message;
      });
    }
  };
  return n;
}
c(C8, "getDeleteForeverFileMutationOptions");
function k8(o, t) {
  return new kt(o.queryClient, C8(o, t));
}
c(k8, "getDeleteForeverFileMutation");
function $8(o, t) {
  const i = o.queryClient, r = ["apps", t.id, "files"];
  return {
    mutationKey: r,
    mutationFn: /* @__PURE__ */ c(async ({ file: s, subscribe: a }) => {
      if (s.id >= 1) {
        const l = await o.post(
          `/api/files/${s.id}/${a ? "subscribe" : "unsubscribe"}`,
          "POST",
          ""
        );
        if (!l.ok) {
          const d = await l.json();
          throw new Error(d.detail || d.title, { cause: d });
        }
      } else
        throw new Error(`Could not ${a ? "subscribe" : "unsubscribe"} to ${s.name}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: r, exact: !1 },
      s.file.id,
      (a) => Object.assign(a, { is_subscribed: s.subscribe, status: "pending" })
    ), {
      type: s.subscribe ? "subscribe" : "unsubscribe",
      file: s.file,
      status: { state: "pending" }
    }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: r, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { status: "ok" })
      ), Ut(i, r, a, (l) => {
        l.status.state = "ok";
      });
    }, "onSuccess"),
    onError(s, a) {
      ut(
        i,
        { queryKey: r, exact: !1 },
        a.file.id,
        (l) => Object.assign(l, { is_subscribed: a.file.is_subscribed, status: "error" })
      ), Ut(i, r, a, (l) => {
        l.status.state = "error", l.status.text = s.message;
      });
    }
  };
}
c($8, "getSubscribeFileMutationOptions");
function E8(o, t) {
  return new kt(o.queryClient, $8(o, t));
}
c(E8, "getSubscribeFileMutation");
const _8 = /* @__PURE__ */ c((o) => {
  var t, i, r, n, dw, F0, hw, Io, uw, w;
  return w = class extends o {
    /**
     * @constructor
     * @hideconstructor
     */
    constructor(...b) {
      super(...b);
      T(this, n);
      T(this, t, []);
      T(this, i);
      T(this, r, /* @__PURE__ */ new Set());
    }
    get eventParent() {
      return u(this, i);
    }
    set eventParent(b) {
      b != null && b.eventChildren && b.eventChildren.add(this), E(this, i, b);
    }
    get eventChildren() {
      return u(this, r);
    }
    /**
     * Registers one or several event listeners. All event listeners are managed and automatically unregistered on destroy.
     *
     * When listening to weavy events, you may also listen to `before:` and `after:` events by simply adding the prefix to a weavy event.
     * Event handlers listening to weavy events may return modified data that is returned to the trigger. The data is passed on to the next event in the trigger event chain. If an event handler calls `event.stopPropagation()` or `return false`, the event chain will be stopped and the value is returned.
     *
     * @example <caption>Instance event</caption>
     * myInstance.on("before:options", function(options) { ... })
     * myInstance.on("options", function(options) { ... })
     * myInstance.on("after:options", function(options) { ... })
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#on
     * @param {string} events - One or several event names separated by spaces. You may provide any namespaces in the names or use the general namespace parameter instead.
     * @param {string|Object} [selector] - Only applicable if the context supports selectors, for instance jQuery.on().
     * @param {function} handler - The listener. The first argument is always the event, followed by any data arguments provided by the trigger.
     */
    on(...b) {
      const g = P(this, n, uw).call(this, b);
      if (b[3]) {
        const O = /* @__PURE__ */ c((...k) => {
          try {
            g.handler.apply(this, k);
          } catch {
            try {
              g.handler();
            } catch (S) {
              console.warn("Could not invoke one handler:", S);
            }
          }
          P(this, n, hw).call(this, g.events, g.selector, null, g.handler);
        }, "attachedHandler");
        P(this, n, dw).call(this, g.events, g.selector, O, g.handler);
      } else
        P(this, n, dw).call(this, g.events, g.selector, g.handler, g.handler);
    }
    /**
     * Registers one or several event listeners that are executed once. All event listeners are managed and automatically unregistered on destroy.
     *
     * Similar to {@link WeavyEvents#on}.
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#one
     * @param {string} events - One or several event names separated by spaces. You may provide any namespaces in the names or use the general namespace parameter instead.
     * @param {string|Object} [selector] - Only applicable if the context supports selectors, for instance jQuery.on().
     * @param {Function} handler - The listener. The first argument is always the event, followed by any data arguments provided by the trigger.
     */
    one(b, g, $) {
      this.on(b, g, $, !0);
    }
    /**
     * Unregisters event listeners. The arguments must match the arguments provided on registration using .on() or .one().
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#off
     * @param {string} events - One or several event names separated by spaces. You may provide any namespaces in the names or use the general namespace parameter instead.
     * @param {string} [selector] - Only applicable if the context supports selectors, for instance jQuery.on().
     * @param {function} handler - The listener. The first argument is always the event, followed by any data arguments provided by the trigger.
     * @returns {boolean} Was the handler removed?
     */
    off(...b) {
      const g = P(this, n, uw).call(this, b), $ = P(this, n, F0).call(this, g.events, g.selector, g.handler);
      return P(this, n, hw).call(this, g.events, g.selector, $, g.handler);
    }
    /**
     * Clears all registered eventhandlers
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#clear
     */
    clearEventHandlers() {
      u(this, t).length = 0;
    }
    /**
     * Trigger a custom event. Events are per default triggered on the weavy instance using the weavy namespace.
     *
     * The trigger has an event chain that adds `before:` and `after:` events automatically for all events except when any custom `prefix:` is specified. This way you may customize the eventchain by specifying `before:`, `on:` and `after:` in your event name to fire them one at the time. The `on:` prefix will then be removed from the name when the event is fired.
     *
     * Eventhandlers listening to the event may return modified data that is returned by the trigger event. The data is passed on to the next event in the trigger event chain. If an event handler calls `event.stopPropagation()` or `return false`, the event chain will be stopped and the value is returned.
     *
     * @example
     * // Normal triggering
     * weavyEvents.triggerEvent("myevent");
     *
     * // Will trigger the following events on the root instance
     * // 1. before:myevent.event.weavy
     * // 2. myevent.event.weavy
     * // 3. after:myevent.event.weavy
     *
     * @example
     * // Custom triggering, one at the time
     * weavyEvents.triggerEvent("before:myevent");
     * weavyEvents.triggerEvent("on:myevent");
     * weavyEvents.triggerEvent("after:myevent");
     *
     * @example
     * // Advanced triggering with data handling
     *
     * function doSomething() {
     *     // Will trigger the events sequentially and check the response data in between
     *
     *     var myTriggerData = { counter: 123, label: "my label" };
     *
     *     // Custom triggering, one at the time
     *
     *     // 1. Trigger before: and save the response data back to myTriggerData
     *     myTriggerData = weavyEvents.triggerEvent("before:myevent", myTriggerData);
     *
     *     if (myTriggerData === false) {
     *         console.warn("before:myevent was cancelled by event.stopPropagation() or return false");
     *         return;
     *     }
     *
     *     // ...
     *
     *     // 2. Continue with on: and save the response data back to myTriggerData
     *     myTriggerData = weavyEvents.triggerEvent("on:myevent", myTriggerData);
     *
     *     if (myTriggerData === false) {
     *         console.warn("on:myevent was cancelled by event.stopPropagation() or return false");
     *         return;
     *     }
     *
     *     // ...
     *
     *     // 3. At last trigger after: and save the response data back to myTriggerData
     *     myTriggerData = weavyEvents.triggerEvent("after:myevent", myTriggerData);
     *
     *     if (myTriggerData === false) {
     *         console.warn("after:myevent was cancelled by event.stopPropagation() or return false");
     *         return;
     *     }
     *
     *     console.log("myevent was fully executed", myTriggerData);
     *     return myTriggerData;
     * }
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#triggerEvent
     * @param {string} name - The name of the event.
     * @param {(Array/Object/JSON)} [data] - Data may be an array or plain object with data or a JSON encoded string.
     * @param {any} ...additionalData - Any raw extra data
     * @returns {data} The data passed to the event trigger including any modifications by event handlers. Returns false if the event is cancelled.
     */
    triggerEvent(b, g, ...$) {
      const O = /^(before|on|after):/.test(b), k = O ? b.split(":")[0] : "";
      b = b.replace(/^(before|on|after):/, "");
      const S = "before:" + b, _ = b, V = "after:" + b;
      if (g && typeof g == "string")
        try {
          g = JSON.parse(g);
        } catch {
          console.warn("Could not parse event data", b, g);
        }
      let I;
      if (O) {
        if (k === "before" || k === "after") {
          if (u(this, i) && (I = u(this, i).triggerEvent(
            k === "before" ? S : V,
            g,
            ...$
          ), g = I || I === !1 ? I : g, g === !1) || (I = P(this, n, Io).call(this, k === "before" ? S : V, g, ...$), g = I || I === !1 ? I : g, g === !1))
            return g;
        } else if (k === "on" && (I = P(this, n, Io).call(this, _, g, ...$), g = I || I === !1 ? I : g, g === !1 || u(this, i) && (I = u(this, i).triggerEvent("on:" + _, g, ...$), g = I || I === !1 ? I : g, g === !1)))
          return g;
      } else {
        if (u(this, i) && (I = u(this, i).triggerEvent(S, g, ...$), g = I || I === !1 ? I : g, g === !1) || (I = P(this, n, Io).call(this, S, g, ...$), g = I || I === !1 ? I : g, g === !1) || (I = P(this, n, Io).call(this, _, g, ...$), g = I || I === !1 ? I : g, g === !1) || u(this, i) && (I = u(this, i).triggerEvent("on:" + _, g, ...$), g = I || I === !1 ? I : g, g === !1) || u(this, i) && (I = u(this, i).triggerEvent(V, g, ...$), g = I || I === !1 ? I : g, g === !1))
          return g;
        I = P(this, n, Io).call(this, V, g, ...$), g = I || I === !1 ? I : g;
      }
      return g;
    }
  }, t = new WeakMap(), i = new WeakMap(), r = new WeakMap(), n = new WeakSet(), /**
   * Saves a single event handler.
   *
   * @internal
   * @function
   * @param {string} event - One or more events. Multiple events are currently not registered individually.
   * @param {string|Object} [selector] - Optional refinement selector
   * @param {function} handler - The handler function. may be wrapped for once-handlers
   * @param {function} originalHandler - The original non-wrapped event handler.
   */
  dw = /* @__PURE__ */ c(function(b, g, $, O) {
    u(this, t).push({
      events: b,
      selector: g,
      handler: $,
      originalHandler: O
    });
  }, "#registerEventHandler"), /**
   * Returns the event handler or wrapped event handler. The arguments must match the registered event handler.
   *
   * @internal
   * @function
   * @param {string} events - The events registered
   * @param {string|Object} [selector] - The optional selector for the handler.
   * @param {function} handler - The registered handler
   * @param {function} [originalHandler] - The original registered handler
   */
  F0 = /* @__PURE__ */ c(function(b, g, $, O) {
    const k = {
      events: b,
      selector: g,
      handler: $,
      originalHandler: O || $
    }, S = u(this, t).filter((_) => ll(k, _, !0)).pop();
    return S && S.handler;
  }, "#getEventHandler"), /**
   * Unregister an event handler. Arguments must match the registered event handler.
   *
   * @internal
   * @function
   * @param {string} event - The events registered
   * @param {function} handler - The registered handler
   * @param {string|Object} [selector] - The optional selector for the handler.
   * @returns {boolean} - True if any handler was removed
   */
  hw = /* @__PURE__ */ c(function(b, g, $, O) {
    const k = {
      events: b,
      selector: g,
      handler: $,
      originalHandler: O
    };
    let S = !1;
    return u(this, t).forEach((_, V) => {
      ll(k, _, !0) && (S = !0, u(this, t).splice(V, 1));
    }), S;
  }, "#unregisterEventHandler"), /**
   * Triggers any local event handlers registered. Each handler may modify the data and return it or return false to cancel the event chain. .stopPropagation() and .preventDefault() may also be used.
   *
   * @example
   * weavyEvents.on("myevent", function(e, data) { ... })
   *
   * triggerHandler(this, "myevent", { key: 1 })
   *
   * @internal
   * @function
   * @param {any} eventName - The name of the event. Event names without prefix will also trigger handlers with the "on:" prefix.
   * @param {any} data - Any data to pass to the handler
   * @param {any} ...additionalData - Any extra data
   */
  Io = /* @__PURE__ */ c(function(b, g, ...$) {
    let O = !1;
    return u(this, t).forEach((k) => {
      k.events.split(" ").forEach((S) => {
        if (S = S.indexOf("on:") === 0 ? S.split("on:")[1] : S, b === S && (!k.selector || ll(k.selector, g, !0))) {
          const _ = k.handler(g, ...$);
          _ ? g = _ : _ === !1 && (O = !0);
        }
      });
    }), O ? !1 : g;
  }, "#triggerHandler"), /**
   * Extracts and normalizes all parts of the events arguments.
   *
   * @internal
   * @function
   * @param {Array.<Object>} eventArguments - The function argument list: `[context], events, [selector], handler`
   * @returns {Object}
   * @property {string} events - Event names with added namespace for local events.
   * @property {string|Object} selector - The optional selector.
   * @property {function} handler - The handler function
   * @
   */
  uw = /* @__PURE__ */ c(function(b) {
    const g = typeof b[1] == "function" ? b[1] : b[2], $ = typeof b[1] == "function" ? null : b[1];
    return { events: b[0], selector: $, handler: g };
  }, "#getEventArguments"), c(w, "WeavyEvents"), w;
}, "MixinWeavyEvents"), P8 = _8(class {
});
function Nv(o) {
  var i;
  let t = "";
  try {
    t = ((i = /^((?:https?:\/\/[^/]+)|(?:file:\/\/))\/?/.exec(o)) == null ? void 0 : i[1]) || "";
  } catch {
    console.error(
      "Unable to resolve location origin. Make sure you are using http, https or file protocol and have a valid location URL."
    );
  }
  return t;
}
c(Nv, "extractOrigin");
const rm = class rm extends P8 {
  constructor(t = {}) {
    super(), this.contentWindows = /* @__PURE__ */ new Set(), this.contentWindowsMapByWeavyId = /* @__PURE__ */ new Map(), this.contentWindowOrigins = /* @__PURE__ */ new WeakMap(), this.contentWindowNames = /* @__PURE__ */ new WeakMap(), this.contentWindowWeavyIds = /* @__PURE__ */ new WeakMap(), this.contentWindowDomain = /* @__PURE__ */ new WeakMap(), this.origin = Nv(window.location.href), this.timeout = 2e3, t != null && t.timeout && (this.timeout = t.timeout), window.addEventListener("message", (i) => {
      var r, n;
      if (i.data.name && i.data.weavyId !== void 0) {
        if (i.data.weavyMessageId && i.data.name !== "message-receipt" && i.data.name !== "unready")
          try {
            (r = i.source) == null || r.postMessage(
              { name: "message-receipt", weavyId: i.data.weavyId, weavyMessageId: i.data.weavyMessageId },
              { targetOrigin: i.origin }
            );
          } catch {
            console.error("could not post back message-receipt to source");
          }
        switch (i.data.name) {
          case "register-child": {
            if ((!i.source || !this.contentWindowWeavyIds.has(i.source)) && console.warn("register-child: contentWindow not pre-registered", i.source), i.source && this.contentWindowOrigins.get(i.source) !== i.origin) {
              console.error(
                "register-child: " + this.contentWindowNames.get(i.source) + " has invalid origin",
                i.origin
              );
              return;
            }
            try {
              const s = this.contentWindowWeavyIds.get(i.source), a = this.contentWindowNames.get(i.source);
              a && i.source && i.source.postMessage(
                {
                  name: "register-window",
                  windowName: a,
                  weavyId: s || !0
                },
                { targetOrigin: i.origin }
              );
            } catch (s) {
              console.error("could not register frame window", s);
            }
            break;
          }
          case "ready": {
            i.source && this.contentWindowsMapByWeavyId.has(i.data.weavyId) && this.contentWindowNames.has(i.source) && ((n = this.contentWindowsMapByWeavyId.get(i.data.weavyId)) != null && n.get(this.contentWindowNames.get(i.source))) && (this.contentWindowDomain.set(i.source, i.origin), this.distributeMessage(i));
            break;
          }
          case "unready": {
            this.contentWindowsMapByWeavyId.has(i.data.weavyId) && this.distributeMessage(i, !0);
            break;
          }
          default: {
            (i.source === window || this.contentWindowsMapByWeavyId.size) && this.distributeMessage(i);
            break;
          }
        }
      }
    });
  }
  /**
   * The weavy console logging.
   */
  get console() {
    return console;
  }
  distributeMessage(t, i = !1) {
    const r = t.source === window && t.origin === this.origin;
    if (i || (i = t.source && this.contentWindowOrigins.has(t.source) && t.origin === this.contentWindowOrigins.get(t.source) || !1), r || i) {
      i && !t.data.windowName && t.source && (t.data.windowName = this.contentWindowNames.get(t.source));
      const n = t.data.name;
      this.triggerEvent(n, t.data, t), this.triggerEvent("message", t.data, t);
    }
  }
  /**
   * Sends the id of a frame to the frame content scripts, so that the frame gets aware of which id it has.
   * The frame needs to have a unique name attribute.
   *
   * @category panels
   * @param {string} weavyId - The id of the group or entity which the contentWindow belongs to.
   * @param {Window} contentWindow - The frame window to send the data to.
   */
  registerContentWindow(t, i, r, n) {
    var s;
    try {
      if (!i) {
        console.error("registerContentWindow() No valid contentWindow to register, must be a window and have a name.");
        return;
      }
    } catch {
      console.error("registerContentWindow() cannot access contentWindowName");
    }
    t.self && (t = t.self), this.console.log("registerContentWindow", t), (!r || r === "true") && (r = !0), this.contentWindowsMapByWeavyId.has(r) || this.contentWindowsMapByWeavyId.set(r, /* @__PURE__ */ new Map()), (s = this.contentWindowsMapByWeavyId.get(r)) == null || s.set(i, t), this.contentWindows.add(t), this.contentWindowNames.set(t, i), this.contentWindowWeavyIds.set(t, r), this.contentWindowOrigins.set(t, n);
  }
  unregisterAll(t) {
    var i;
    this.contentWindowsMapByWeavyId.has(t) && ((i = this.contentWindowsMapByWeavyId.get(t)) == null || i.forEach((r, n) => {
      this.unregisterContentWindow(n, t);
    }), this.contentWindowsMapByWeavyId.get(t), this.contentWindowsMapByWeavyId.delete(t));
  }
  unregisterContentWindow(t, i) {
    var r, n, s, a;
    if (this.contentWindowsMapByWeavyId.has(i)) {
      if ((r = this.contentWindowsMapByWeavyId.get(i)) != null && r.has(t)) {
        const l = (n = this.contentWindowsMapByWeavyId.get(i)) == null ? void 0 : n.get(t);
        if (l)
          try {
            this.contentWindows.delete(l), this.contentWindowNames.delete(l), this.contentWindowWeavyIds.delete(l), this.contentWindowOrigins.delete(l);
          } catch {
          }
      }
      if ((s = this.contentWindowsMapByWeavyId.get(i)) == null || s.delete(t), ((a = this.contentWindowsMapByWeavyId.get(i)) == null ? void 0 : a.size) === 0)
        try {
          this.contentWindowsMapByWeavyId.delete(i);
        } catch {
        }
    }
  }
  async whenPostMessage(t, i, r) {
    r === null && (r = void 0);
    const n = t === window.self, s = n ? Nv(window.location.href) : this.contentWindowOrigins.get(t);
    if (n || t && s === this.contentWindowDomain.get(t)) {
      i.weavyMessageId || (i.weavyMessageId = rh() + rh());
      let l;
      await Promise.race([
        new Promise((d, h) => {
          l = window.setTimeout(() => {
            h(new Error("postMessage() receipt timed out: " + i.weavyMessageId + ", " + i.name));
          }, this.timeout || 2e3);
        }),
        new Promise((d) => {
          this.on("message-receipt", { weavyId: i.weavyId, weavyMessageId: i.weavyMessageId }, () => {
            console.debug("message-receipt received", i.weavyMessageId, i.name), clearTimeout(l), d(void 0);
          }), t.postMessage(i, { targetOrigin: s, transfer: r });
        })
      ]);
    } else
      throw new Error("postMessage() Invalid window origin: " + s + ", " + i.name);
  }
  postToChildren(t, i) {
    if (typeof t != "object" || !t.name) {
      console.error("postToChildren() Invalid message format", t);
      return;
    }
    i === null && (i = void 0), t.distributeName = t.name, t.name = "distribute", t.weavyId = t.weavyId || !0, this.contentWindows.forEach((r) => {
      const n = this.contentWindowOrigins.get(r);
      if (n === this.contentWindowDomain.get(r))
        try {
          r.postMessage(t, { targetOrigin: n, transfer: i });
        } catch {
          console.warn(
            "postToChildren() could not distribute message to " + this.contentWindowNames.get(r)
          );
        }
    });
  }
  async postToFrame(t, i, r, n) {
    var a;
    if (typeof r != "object" || !r.name) {
      console.error("postToFrame() Invalid message format", r);
      return;
    }
    const s = (a = this.contentWindowsMapByWeavyId.get(i)) == null ? void 0 : a.get(t);
    if (!s)
      throw new Error(`postToFrame() Window not registered: ${i}, ${t}`);
    return r.weavyId = i, await this.whenPostMessage(s, r, n);
  }
  async postToSelf(t, i) {
    if (typeof t != "object" || !t.name) {
      console.error("postToSelf() Invalid message format", t);
      return;
    }
    return t.weavyId = t.weavyId || !0, await this.whenPostMessage(window.self, t, i);
  }
  postToSource(t, i, r) {
    if (t.source && t.data.weavyId !== void 0) {
      const n = t.source === window.self && t.origin === this.origin, s = this.contentWindowOrigins.has(t.source) && t.origin === this.contentWindowOrigins.get(t.source);
      if (r === null && (r = void 0), n || s) {
        i.weavyId = t.data.weavyId;
        try {
          t.source.postMessage(i, { targetOrigin: t.origin, transfer: r });
        } catch (a) {
          console.error("postToSource() Could not post message back to source", a);
        }
      }
    }
  }
};
c(rm, "WeavyPostalParent");
let pw = rm;
const _r = new pw();
var S8 = Object.defineProperty, L8 = Object.getOwnPropertyDescriptor, Cu = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? L8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && S8(t, i, n), n;
}, "__decorateClass$n"), Ka;
let Rc = (Ka = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.iframeVisible = !1, this.showOverlay = !1, this.isRegistered = !1, this.iframeElementRef = dt(), this.overlayRef = dt();
  }
  open() {
    this.showOverlay = !0;
  }
  close() {
    this.showOverlay = !1, this.iframeVisible = !1;
  }
  get origin() {
    let t = "";
    try {
      window.location.ancestorOrigins && 0 < window.location.ancestorOrigins.length ? t = window.location.ancestorOrigins[window.location.ancestorOrigins.length - 1] : window.top && (t = window.top.document.location.origin);
    } catch {
    }
    if (!t)
      try {
        t = window.self.document.location.origin;
      } catch {
        console.error("Filebrowser: Could not read current origin.");
      }
    return t;
  }
  dispatchExternalBlobs(t) {
    const i = new CustomEvent("external-blobs", { detail: { externalBlobs: t } });
    return this.dispatchEvent(i);
  }
  connectedCallback() {
    super.connectedCallback(), this.handleFiles = (t, i) => {
      var r, n;
      i.source === ((n = (r = this.iframeElementRef.value) == null ? void 0 : r.contentWindow) == null ? void 0 : n.self) && (this.dispatchExternalBlobs(t.blobs), this.close());
    }, this.handleClose = (t, i) => {
      var r, n;
      i.source === ((n = (r = this.iframeElementRef.value) == null ? void 0 : r.contentWindow) == null ? void 0 : n.self) && this.close();
    }, this.handleGoogleSelected = (t, i) => {
      var r, n;
      i.source === ((n = (r = this.iframeElementRef.value) == null ? void 0 : r.contentWindow) == null ? void 0 : n.self) && (this.overlayRef.value.maximized = !0);
    }, _r.on("add-external-blobs", this.handleFiles), _r.on("request:file-browser-close", this.handleClose), _r.on("google-selected", this.handleGoogleSelected);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), _r.off("add-external-blobs", this.handleFiles), _r.off("request:file-browser-close", this.handleClose), _r.off("google-selected", this.handleGoogleSelected);
  }
  updated() {
    var t, i;
    this.weavyContext && (this.showOverlay && !this.src && (this.src = new URL(
      "?origin=" + this.origin + "&v=X&t=" + Date.now().toString() + "&weavyId=wy-filebrowser",
      this.weavyContext.cloudFilePickerUrl
    )), !this.isRegistered && this.showOverlay && this.src ? (t = this.iframeElementRef.value) != null && t.contentWindow && (_r.registerContentWindow(
      (i = this.iframeElementRef.value) == null ? void 0 : i.contentWindow.self,
      "weavy-filebrowser",
      "wy-filebrowser",
      this.src.origin
    ), this.isRegistered = !0) : this.isRegistered && !this.showOverlay && this.src && (_r.unregisterContentWindow("weavy-filebrowser", "wy-filebrowser"), this.isRegistered = !1, this.src = void 0));
  }
  render() {
    var t;
    return this.weavyContext ? y`
      <wy-overlay
        .show=${this.showOverlay}
        ${it(this.overlayRef)}
        @close=${() => this.close()}
        @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
      >
        ${this.showOverlay ? y`
              <wy-spinner overlay ?hidden=${this.iframeVisible}></wy-spinner>
              <iframe
                ${it(this.iframeElementRef)}
                @load=${() => this.iframeVisible = !0}
                src=${wt((t = this.src) == null ? void 0 : t.toString())}
                style="flex: 1 1 100%; border: 0;"
                id="weavy-filebrowser"
                name="weavy-filebrowser"
                title=${C("Cloud File Browser")}
              ></iframe>
            ` : L}
      </wy-overlay>
    ` : L;
  }
}, c(Ka, "WyCloudFiles"), Ka);
Rc.styles = rt;
Cu([
  W()
], Rc.prototype, "src", 2);
Cu([
  W()
], Rc.prototype, "iframeVisible", 2);
Cu([
  W()
], Rc.prototype, "showOverlay", 2);
Rc = Cu([
  Q("wy-cloud-files"),
  st()
], Rc);
var M8 = Object.defineProperty, T8 = Object.getOwnPropertyDescriptor, Sd = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? T8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && M8(t, i, n), n;
}, "__decorateClass$m"), Ga;
let ho = (Ga = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.order = { by: "name", descending: !1 }, this.view = "list", this.showTrashed = !1, this.showUploadSheet = !1, this.mutatingFiles = new Uh(
      this
    ), this.fileInputRef = dt(), this.cloudFilesRef = dt(), this.openFileInput = () => {
      var t;
      (t = this.fileInputRef.value) == null || t.click();
    }, this.openCloudFiles = () => {
      var t;
      (t = this.cloudFilesRef.value) == null || t.open();
    };
  }
  // remove file attachment
  handleRemoveMutation(t) {
    this.weavyContext && E0(
      this.weavyContext.queryClient,
      ["apps", this.app.id, "files"],
      (i) => i.state.submittedAt === t.submittedAt
    );
  }
  handleOverwriteUpload(t) {
    var r;
    const i = (r = t.variables) == null ? void 0 : r.blob;
    i && this.dispatchCreateFiles([i], !0);
  }
  dispatchUploadFiles(t, i) {
    const r = new CustomEvent("upload-files", { detail: { files: t, input: i } });
    return this.dispatchEvent(r);
  }
  dispatchExternalBlobs(t) {
    const i = new CustomEvent("external-blobs", { detail: { externalBlobs: t } });
    return this.dispatchEvent(i);
  }
  dispatchCreateFiles(t, i = !1) {
    const r = new CustomEvent("create-files", { detail: { blobs: t, replace: i } });
    return this.dispatchEvent(r);
  }
  dispatchOrder(t) {
    const i = new CustomEvent("order", { detail: { order: t } });
    return this.dispatchEvent(i);
  }
  dispatchView(t) {
    const i = new CustomEvent("view", { detail: { view: t } });
    return this.dispatchEvent(i);
  }
  dispatchShowTrashed(t) {
    const i = new CustomEvent("show-trashed", { detail: { showTrashed: t } });
    return this.dispatchEvent(i);
  }
  dispatchSubscribe(t) {
    const i = new CustomEvent("subscribe", { detail: { subscribe: t } });
    return this.dispatchEvent(i);
  }
  willUpdate(t) {
    super.willUpdate(t), (t.has("weavyContext") || t.has("app")) && this.weavyContext && this.app && this.mutatingFiles.trackMutationState(
      { filters: { mutationKey: ["apps", this.app.id], exact: !1 } },
      this.weavyContext.queryClient
    );
  }
  renderFileMutation(t) {
    var i, r, n;
    if ((i = t.context) != null && i.file) {
      const s = t.context.file, a = {
        ...t.context.status
      };
      return t.context.status.state === "conflict" && (a.text = C("Replace existing file?")), y`
        <wy-file-item
          .file=${(r = t.context) == null ? void 0 : r.file}
          .status=${a}
          .actionType=${t.context.type}
          title="${cg(t.context.type)}: ${s.name}"
        >
          <span slot="title">${s.name}</span>
          ${a.text ? y`: <span slot="actions" title=${a.text}><em>${a.text}</em></span>` : L}
          ${a.state === "conflict" && ((n = t.variables) != null && n.blob) ? y`
                <wy-button
                  slot="actions"
                  kind="icon"
                  @click=${() => this.handleOverwriteUpload(
        t
      )}
                  title=${C("Replace")}
                >
                  <wy-icon name="check"></wy-icon>
                </wy-button>
              ` : L}
          <wy-button
            slot="actions"
            kind="icon"
            @click=${() => this.handleRemoveMutation(t)}
            title=${C("Discard", { desc: "Button action to discard" })}
          >
            <wy-icon name="close"></wy-icon>
          </wy-button>
        </wy-file-item>
      `;
    }
    return L;
  }
  render() {
    var a, l, d, h, w, m;
    const t = this.mutatingFiles.result, i = Yk(t), r = t != null && t.length ? t.filter((f) => {
      var b;
      return ((b = f.context) == null ? void 0 : b.file) && !i.includes(f);
    }) : [], n = Gk(t), s = Zk(t);
    return y`
      <nav class="wy-toolbar">
        <div class="wy-toolbar-buttons">
          ${ro(an.Create, (a = this.app) == null ? void 0 : a.permissions) ? y`
                <wy-dropdown title=${C("Add files")}>
                  <span slot="button">${C("Add files")}</span>
                  <wy-icon slot="button" name="plus" last></wy-icon>
                  <wy-dropdown-item @click=${this.openFileInput} title=${C("From device")}>
                    <wy-icon name="attachment"></wy-icon>
                    <span>${C("From device")}</span>
                  </wy-dropdown-item>
                  <input
                    type="file"
                    data-testid="uploadFile"
                    ${it(this.fileInputRef)}
                    @click=${(f) => f.stopPropagation()}
                    @change=${(f) => this.dispatchUploadFiles(f.target.files, f.target)}
                    multiple
                    hidden
                    tabindex="-1"
                  />
                  ${(l = this.hasFeatures) != null && l.cloudFiles ? y`
                        <wy-dropdown-item @click=${this.openCloudFiles} title=${C("From cloud")}>
                          <wy-icon name="cloud"></wy-icon>
                          <span>${C("From cloud")}</span>
                        </wy-dropdown-item>
                      ` : L}
                  ${(d = this.hasFeatures) != null && d.confluence && ((h = this.weavyContext) != null && h.confluenceAuthenticationUrl) ? y`<wy-confluence
                        dropdown
                        @external-blobs=${(f) => this.dispatchExternalBlobs(f.detail.externalBlobs)}
                      ></wy-confluence>` : L}
                </wy-dropdown>
              ` : L}
        </div>
        <div class="wy-toolbar-buttons wy-toolbar-buttons-last">
          ${t != null && t.length ? y`
                <wy-button
                  kind="icon"
                  @click=${() => {
      this.showUploadSheet = !this.showUploadSheet;
    }}
                  title=${s === "conflict" ? C("File conflict") : s === "error" ? C("Upload error") : s === "pending" ? C("Pending") : C("All uploads finished")}
                >
                  ${s === "conflict" ? y`<wy-icon name="alert" color="yellow" title=${C("File conflict")}></wy-icon>` : s === "error" ? y`<wy-icon name="alert-octagon" color="error" title=${C("Upload error")}></wy-icon>` : s === "pending" ? y`<wy-spinner
                        ?nospin=${n !== void 0 && n.percent !== null}
                        progress=${wt(n.percent !== null ? n.percent : void 0)}
                        title=${C("Pending")}
                      ></wy-spinner>` : y`<wy-icon name="check" title=${C("All uploads finished")}></wy-icon>`}
                </wy-button>
              ` : L}

          <wy-dropdown icon="sort" title="Sort items by" directionX="left">
            <wy-dropdown-option
              ?selected=${this.order.by === "name"}
              @click=${() => this.dispatchOrder({ ...this.order, by: "name" })}
            >
              ${C("Name")}
            </wy-dropdown-option>
            <wy-dropdown-option
              ?selected=${this.order.by === "updated_at"}
              @click=${() => this.dispatchOrder({ ...this.order, by: "updated_at" })}
            >
              ${C("Modified")}
            </wy-dropdown-option>
            <wy-dropdown-option
              ?selected=${this.order.by === "size"}
              @click=${() => this.dispatchOrder({ ...this.order, by: "size" })}
            >
              ${C("Size")}
            </wy-dropdown-option>
            <wy-dropdown-divider></wy-dropdown-divider>
            <wy-dropdown-option
              ?selected=${!this.order.descending}
              @click=${() => this.dispatchOrder({ ...this.order, descending: !1 })}
            >
              ${C("Ascending")}
            </wy-dropdown-option>
            <wy-dropdown-option
              ?selected=${this.order.descending}
              @click=${() => this.dispatchOrder({ ...this.order, descending: !0 })}
            >
              ${C("Descending")}
            </wy-dropdown-option>
          </wy-dropdown>

          <wy-dropdown
            icon=${this.view === "grid" ? "view-module-outline" : "view-list-outline"}
            title="View options"
            directionX="left"
          >
            <wy-dropdown-option ?selected=${this.view === "list"} @click=${() => this.dispatchView("list")}>
              ${C("List view")}
            </wy-dropdown-option>
            <wy-dropdown-option ?selected=${this.view === "grid"} @click=${() => this.dispatchView("grid")}>
              ${C("Grid view")}
            </wy-dropdown-option>
            <wy-dropdown-divider></wy-dropdown-divider>
            <wy-dropdown-option ?selected=${!this.showTrashed} @click=${() => this.dispatchShowTrashed(!1)}>
              ${C("Hide trashed")}
            </wy-dropdown-option>
            <wy-dropdown-option ?selected=${this.showTrashed} @click=${() => this.dispatchShowTrashed(!0)}>
              ${C("Show trashed")}
            </wy-dropdown-option>
          </wy-dropdown>

          <wy-notification-button-list></wy-notification-button-list>

          <wy-dropdown directionX="left" ?disabled=${!this.app}>
            ${(w = this.app) != null && w.is_subscribed ? y`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!1)}>
                  <wy-icon name="bell-off"></wy-icon>
                  ${C("Unsubscribe")}
                </wy-dropdown-item>` : y`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!0)}>
                  <wy-icon name="bell"></wy-icon>
                  ${C("Subscribe")}
                </wy-dropdown-item>`}
            ${(m = this.app) != null && m.archive_url ? y`<wy-dropdown-item
                  @click=${() => {
      var f, b;
      return pl((f = this.app) == null ? void 0 : f.archive_url, "_top", `${(b = this.app) == null ? void 0 : b.uid}.zip`, !0);
    }}
                >
                  <wy-icon name="download"></wy-icon>
                  ${C("Download files")}
                </wy-dropdown-item>` : L}
          </wy-dropdown>
        </div>
      </nav>

      ${this.weavyContext ? y`
            <wy-sheet
              .show=${this.showUploadSheet}
              @close=${() => this.showUploadSheet = !1}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <wy-button
                kind="icon"
                slot="appbar-buttons"
                @click=${() => {
      t == null || t.forEach((f) => this.handleRemoveMutation(f));
    }}
                title=${C("Remove all", { desc: "Button action to remove all" })}
              >
                <wy-icon name="trashcan"></wy-icon>
              </wy-button>
              <span slot="appbar-text">${C("File actions")}</span>
              ${i.length ? y`
                    ${Ve(
      i,
      (f) => "mutation" + f.submittedAt,
      (f) => this.renderFileMutation(f)
    )}
                    ${r.length ? y`<hr />` : L}
                  ` : L}
              ${r.length ? y`
                    ${Ve(
      r,
      (f) => "mutation" + f.submittedAt,
      (f) => this.renderFileMutation(f)
    )}
                  ` : L}
            </wy-sheet>
          ` : L}

      <wy-cloud-files
        ${it(this.cloudFilesRef)}
        @external-blobs=${(f) => this.dispatchExternalBlobs(f.detail.externalBlobs)}
      ></wy-cloud-files>
    `;
  }
}, c(Ga, "WyFilesAppbar"), Ga);
ho.styles = [rt];
Sd([
  v({ type: Object })
], ho.prototype, "order", 2);
Sd([
  v()
], ho.prototype, "view", 2);
Sd([
  v({ type: Boolean })
], ho.prototype, "showTrashed", 2);
Sd([
  W()
], ho.prototype, "showUploadSheet", 2);
ho = Sd([
  Q("wy-files-appbar"),
  st()
], ho);
function A8(o, t, i, r) {
  var $, O;
  const n = o.size && o.size > 0 ? lu(o.size) : L, s = o.updated_at || o.created_at, a = new Intl.DateTimeFormat(($ = this.weavyContext) == null ? void 0 : $.locale, { dateStyle: "full", timeStyle: "short" }).format(
    new Date(s)
  ), l = !!(t && t === o.id), { icon: d } = mn(o.name), h = _i(o.name), w = jc(o.provider), m = /* @__PURE__ */ c((k) => {
    k.stopImmediatePropagation();
    const S = k.target;
    S.value && S.value !== o.name ? this.dispatchRename(o, S.value) : this.dispatchEditName({ id: NaN });
  }, "handleRename"), f = /* @__PURE__ */ c((k) => {
    const S = k.target;
    k.key === "Escape" ? (k.preventDefault(), S.value = o.name, S.blur()) : k.key === "Enter" && (k.preventDefault(), S.blur());
  }, "handleRenameKey"), b = {
    "wy-trashed": o.is_trashed
  }, g = !!(i && i === o.id);
  return y`
    <div
      part=${ue({
    "wy-card": !0,
    "wy-card-trashed": o.is_trashed,
    "wy-card-hover": !o.is_trashed && !l,
    "wy-highlight": g
  })}
      title="${o.name} • ${n} • ${a}"
      tabindex="0"
      @click=${(k) => {
    !k.defaultPrevented && !o.is_trashed && this.dispatchFileOpen(o.id);
  }}
      @keydown=${Ne}
      @keyup=${li}
      ${g && r ? it(r) : L}
    >
      <div part="wy-card-actions">
        <wy-file-menu
          small
          .file=${o}
          @edit-name=${(k) => this.dispatchEditName(k.detail.file)}
          @trash=${(k) => this.dispatchTrash(k.detail.file)}
          @restore=${(k) => this.dispatchRestore(k.detail.file)}
          @delete-forever=${(k) => this.dispatchDeleteForever(k.detail.file)}
          @subscribe=${(k) => this.dispatchSubscribe(k.detail.file, k.detail.subscribe)}
        ></wy-file-menu>
      </div>
      ${!o.is_trashed && o.thumbnail_url ? y`
            <img
              part="wy-card-top wy-card-content wy-card-image ${ue({
    "wy-card-top-image": o.kind === "image",
    ...b
  })}"
              width=${wt(o.width)}
              height=${wt(o.height)}
              src=${o.thumbnail_url}
              alt=${o.name}
              ${it(wh)}
              @load=${fh}
              loading="lazy"
              decoding="async"
            />
          ` : y`
            <div part="wy-card-top wy-card-content wy-card-icon ${ue(b)}">
              <wy-icon name=${d} .overlayName=${w} size="96" kind=${o.kind} ext=${h}></wy-icon>
            </div>
          `}
      <div part="wy-card-content wy-filename ${ue(b)}">
        ${l ? y`
              <input
                type="text"
                maxlength="256"
                class="wy-input"
                .defaultValue=${o.name}
                @blur=${m}
                @keyup=${(k) => {
    wr(k), f(k);
  }}
                @click=${(k) => k.preventDefault()}
                @focus=${Iw}
                ${it(gw)}
              />
            ` : y`<div class="wy-truncated-text-and-icon"
              ><div>${o.name}</div> ${(O = o.comments) != null && O.count ? y`<wy-icon size="16" name="comment" color="secondary"></wy-icon>` : L}</div
            >`}
      </div>
    </div>
  `;
}
c(A8, "renderFileCard");
function z8(o, t, i, r, n) {
  return o && o.length ? y`
        <table class="wy-table wy-table-hover wy-table-files">
          <thead>${R8.call(this, t)}</thead>
          <tbody>
            ${Ve(
    o,
    (s) => s.id,
    (s) => I8.call(this, this.weavyContext, { file: s }, i, r, n)
  )}
          </tbody>
        </table>
      ` : L;
}
c(z8, "renderFileTable");
function R8(o) {
  const t = [
    { by: "name", title: C("Name") },
    { by: "updated_at", title: C("Modified") },
    { by: void 0, title: C("Kind") },
    { by: "size", title: C("Size") }
  ];
  return y`
    <tr>
      <th class="wy-table-cell-icon"></th>
      ${t.map((i) => {
    const r = i.by === (o == null ? void 0 : o.by), n = /* @__PURE__ */ c((s) => {
      s.preventDefault(), i.by && this.dispatchOrder({ by: i.by, descending: r && !(o != null && o.descending) });
    }, "onHeaderClick");
    return y` <th>
          ${i.by ? y`<div
                class="wy-table-sort-link"
                tabindex="0"
                @click=${n}
                @keydown=${Ne}
                @keyup=${li}
                >${i.title}
                ${r && y`<wy-icon name=${o != null && o.descending ? "menu-down" : "menu-up"}></wy-icon>` || L}</div
              >` : i.title}
        </th>`;
  })}
      <th class="wy-table-cell-icon"></th>
    </tr>
  `;
}
c(R8, "renderFileTableHeaders");
function I8(o, { file: t }, i, r, n) {
  var O;
  const s = t.size && t.size > 0 ? lu(t.size) : L, a = t.updated_at || t.created_at, l = new Intl.DateTimeFormat(o == null ? void 0 : o.locale, { dateStyle: "full", timeStyle: "short" }).format(
    new Date(a)
  ), d = new Intl.DateTimeFormat(o == null ? void 0 : o.locale, { dateStyle: "short" }).format(
    new Date(a)
  ), h = !!(i && i === t.id), { icon: w } = mn(t.name), m = _i(t.name), f = jc(t.provider), b = /* @__PURE__ */ c((k) => {
    k.stopImmediatePropagation();
    const S = k.target;
    S.value && S.value !== t.name ? this.dispatchRename(t, S.value) : this.dispatchEditName({ id: NaN });
  }, "handleRename"), g = /* @__PURE__ */ c((k) => {
    const S = k.target;
    k.key === "Escape" ? (k.preventDefault(), S.value = t.name, S.blur()) : k.key === "Enter" && (k.preventDefault(), S.blur());
  }, "handleRenameKey"), $ = !!(r && r === t.id);
  return y`
    <tr
      class=${Gt({ "wy-table-row-trashed": t.is_trashed })}
      part=${ue({ "wy-highlight": $ })}
      @click=${(k) => {
    !k.defaultPrevented && !t.is_trashed && this.dispatchFileOpen(t.id);
  }}
      ${$ && n ? it(n) : L}
    >
      <td class="wy-table-cell-icon"><wy-icon name=${w} .overlayName=${f} size="24" kind=${t.kind} ext=${m}></wy-icon></td>
      <td>
        ${h ? y`
              <input
                type="text"
                maxlength="256"
                class="wy-input"
                .defaultValue=${t.name}
                @blur=${b}
                @keyup=${(k) => {
    wr(k), g(k);
  }}
                @click=${(k) => k.preventDefault()}
                @focus=${Iw}
                ${it(gw)}
              />
            ` : y`<div class="wy-truncated-text-and-icon"><div>${t.name}</div> ${(O = t.comments) != null && O.count ? y`<wy-icon size="16" name="comment" color="secondary"></wy-icon>` : L}</div>`}
      </td>
      <td><time datetime="${a}" title=${l}>${d}</time></td
      >
      <td>${t.kind}</td>
      <td>${s}</td>
      <td class="wy-table-cell-icon">
        <wy-file-menu
          .file=${t}
          @edit-name=${(k) => this.dispatchEditName(k.detail.file)}
          @trash=${(k) => this.dispatchTrash(k.detail.file)}
          @restore=${(k) => this.dispatchRestore(k.detail.file)}
          @delete-forever=${(k) => this.dispatchDeleteForever(k.detail.file)}
          @subscribe=${(k) => this.dispatchSubscribe(k.detail.file, k.detail.subscribe)}
        >
        </wy-file-menu>
      </td>
    </tr>
  `;
}
c(I8, "renderFileTableRow");
const O8 = "[part~=wy-grid]{display:grid;grid-auto-flow:dense;grid-template-columns:repeat(auto-fill,minmax(calc(10 * var(--wy-size, 1rem)),1fr));grid-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}", D8 = Pt(O8), F8 = '@keyframes wy-highlight{0%{--wy-component-background-color: var(--wy-highlight, var(--wy-primary-95, #e8f2ff));--wy-component-color: var(--wy-on-highlight, var(--wy-primary-10, #001d32))}}[part~=wy-card]{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-border-radius: var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-component-border-radius);position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-clip:border-box}[part~=wy-card][part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}[part~=wy-card-primary]{--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32))}[part~=wy-card-hover]{cursor:pointer;-webkit-user-select:none;user-select:none}[part~=wy-card-hover]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-card-hover]:hover:before{opacity:var(--wy-opacity-state-hover, 8%)}[part~=wy-card-hover]:focus:before{opacity:var(--wy-opacity-state-focus, 12%)}[part~=wy-card-hover]:active:before,[part~=wy-card-hover][part~=wy-active]:before{opacity:var(--wy-opacity-state-active, 12%)}[part~=wy-card-actions]{position:absolute;top:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));right:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));align-items:center;display:flex}[part~=wy-card-content]{flex:1 0 auto;padding-block-end:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));padding-inline-start:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));padding-inline-end:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-card-content][part~=wy-card-top]{padding-block-start:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-card-top]{border-radius:var(--wy-component-border-radius);object-fit:cover;object-position:top center;flex:1 1 100%;max-height:calc(10 * var(--wy-size, 1rem))}[part~=wy-card-icon]{--wy-component-icon-width: calc(6 * var(--wy-size, 1rem));--wy-component-icon-height: calc(6 * var(--wy-size, 1rem));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));margin:auto}[part~=wy-card-image]{width:auto;height:auto}[part~=wy-card-image][part~=wy-loading]{transition:opacity .15s ease-out;opacity:0}[part~=wy-card-image][part~=wy-loading][part~=wy-loaded]{opacity:1;transition:opacity .15s ease-out}[part~=wy-card-top-image]{object-position:50% 38%}[part~=wy-trashed]{opacity:var(--wy-opacity-disabled, 38%);text-decoration:line-through}', N8 = Pt(F8);
var V8 = Object.defineProperty, H8 = Object.getOwnPropertyDescriptor, bn = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? H8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && V8(t, i, n), n;
}, "__decorateClass$l"), Za;
let ji = (Za = class extends It(K) {
  constructor() {
    super(), this.exportParts = new Z(this), this.order = { by: "name", descending: !1 }, this.view = "list", this.isRenamingId = NaN, this.highlightId = NaN, this.highlightComment = !1, this.highlightRef = dt(), this.addEventListener("edit-name", (t) => {
      this.isRenamingId = t.detail.file.id;
    }), this.addEventListener("rename", () => {
      this.isRenamingId = NaN;
    });
  }
  dispatchFileOpen(t, i) {
    const r = new CustomEvent("file-open", { detail: { fileId: t, tab: i } });
    return this.dispatchEvent(r);
  }
  dispatchOrder(t) {
    const i = new CustomEvent("order", { detail: { order: t } });
    return this.dispatchEvent(i);
  }
  dispatchEditName(t) {
    const i = new CustomEvent("edit-name", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchRename(t, i) {
    const r = new CustomEvent("rename", { detail: { file: t, name: i } });
    return this.dispatchEvent(r);
  }
  dispatchTrash(t) {
    const i = new CustomEvent("trash", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchRestore(t) {
    const i = new CustomEvent("restore", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchDeleteForever(t) {
    const i = new CustomEvent("delete-forever", { detail: { file: t } });
    return this.dispatchEvent(i);
  }
  dispatchSubscribe(t, i) {
    const r = new CustomEvent("subscribe", { detail: { file: t, subscribe: i } });
    return this.dispatchEvent(r);
  }
  willUpdate(t) {
    var i;
    t.has("link") && (this.highlightId = this.link && ((i = g0(this.link, lr.File)) == null ? void 0 : i.id), this.highlightComment = this.link && this.highlightId ? b0(this.link, lr.File, { id: this.highlightId }, lr.Comment) : !1), t.has("highlightComment") && this.highlightComment && this.highlightId && this.dispatchFileOpen(this.highlightId, "comments");
  }
  render() {
    return this.files && this.files.length ? this.view === "grid" ? y`
          <div part="wy-grid">
            ${Ve(
      this.files,
      (t) => t.id,
      (t) => A8.call(this, t, this.isRenamingId, this.highlightId, this.highlightRef)
    )}
          </div>
        ` : z8.call(this, this.files, this.order, this.isRenamingId, this.highlightId, this.highlightRef) : L;
  }
  updated(t) {
    var i;
    t.has("highlightId") && this.highlightId && ((i = this.highlightRef.value) == null || i.scrollIntoView({ block: "nearest" }));
  }
}, c(Za, "WyFilesList"), Za);
ji.styles = [rt, kd, D8, N8];
bn([
  v({ attribute: !1 })
], ji.prototype, "files", 2);
bn([
  v({ type: Number })
], ji.prototype, "dataUpdatedAt", 2);
bn([
  v({ attribute: !1 })
], ji.prototype, "order", 2);
bn([
  v()
], ji.prototype, "view", 2);
bn([
  W()
], ji.prototype, "isRenamingId", 2);
bn([
  W()
], ji.prototype, "highlightId", 2);
bn([
  W()
], ji.prototype, "highlightComment", 2);
ji = bn([
  Q("wy-files-list"),
  st()
], ji);
var B8 = Object.defineProperty, U8 = Object.getOwnPropertyDescriptor, N0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$8"), ku = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? U8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && B8(t, i, n), n;
}, "__decorateClass$k"), V0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || N0("Cannot " + i), "__accessCheck$8"), Vv = /* @__PURE__ */ c((o, t, i) => (V0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$8"), j8 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? N0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$8"), Hv = /* @__PURE__ */ c((o, t, i, r) => (V0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$8"), Oo, Ya;
let uo = (Ya = class extends wo(K) {
  constructor() {
    super(), this.productType = Vc.Files, this.contextualType = gi.Files, this.view = "list", this.order = { by: "name", descending: !1 }, this.showTrashed = !1, this.filesQuery = new pr(this), this.persistState = new _l(this), this.infiniteScroll = new yr(this), this.pagerRef = dt(), this.previewRef = dt(), this.dropZone = new Wh(this), this.appSubscribeMutation = new Ze(this), this.uploadBlobMutation = new Ze(this), this.createFileMutation = new Ze(this), this.handleRealtimeFileCreated = (t) => {
      !this.weavyContext || !this.app || (t.file.created_by = t.actor, this.weavyContext.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) }));
    }, this.handleRealtimeFileUpdated = (t) => {
      !this.weavyContext || !this.app || this.weavyContext.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeFileTrashed = (t) => {
      !this.weavyContext || !this.app || this.weavyContext.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeFileRestored = (t) => {
      !this.weavyContext || !this.app || this.weavyContext.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeFileDeleted = (t) => {
      !this.weavyContext || !this.app || this.weavyContext.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, j8(this, Oo), this.addEventListener("drop-files", this.handleBlobUpload), new hr(this, uo.styles);
  }
  // upload files
  handleBlobUpload(t) {
    const i = t.detail;
    if (i.files) {
      for (let r = 0; r < i.files.length; r++) {
        const s = { file: i.files[r] };
        this.uploadBlobMutation.mutate(s).then((a) => this.handleCreateFile(a));
      }
      i.input && (i.input.value = "");
    }
  }
  // upload files
  handleExternalBlobs(t) {
    var i;
    if (t.detail.externalBlobs)
      for (let r = 0; r < t.detail.externalBlobs.length; r++) {
        const n = t.detail.externalBlobs[r];
        (i = this.externalBlobMutation) == null || i.mutate({ externalBlob: n }).then((s) => this.handleCreateFile(s));
      }
  }
  // add uploaded files
  async handleCreateFile(t, i) {
    return await this.createFileMutation.mutate({ blob: t, replace: i });
  }
  handleSubscribe(t) {
    var i;
    (i = this.app) != null && i.id && this.appSubscribeMutation.mutate({ subscribe: t });
  }
  getFilesQueryKey(t) {
    return ["apps", t.id, "files"];
  }
  willUpdate(t) {
    var i;
    if (super.willUpdate(t), (t.has("uid") || t.has("weavyContext")) && this.uid && this.weavyContext && this.persistState.observe(["view", "order", "showTrashed"], this.uid), (t.has("weavyContext") || t.has("app") || t.has("order") || t.has("showTrashed")) && this.weavyContext && this.app && this.filesQuery.trackInfiniteQuery(
      w8(this.weavyContext, this.app.id, {
        order: this.order,
        trashed: this.showTrashed
      })
    ), (t.has("weavyContext") || t.has("app") || t.has("user")) && this.weavyContext && this.app && this.user) {
      this.appSubscribeMutation.trackMutation(Ig(this.weavyContext, this.app)), this.uploadBlobMutation.trackMutation(P0(this.weavyContext, this.user, this.app)), this.createFileMutation.trackMutation(Jk(this.weavyContext, this.user, this.app)), this.externalBlobMutation = S0(this.weavyContext, this.user, this.app), this.renameFileMutation = m8(this.weavyContext, this.app), this.subscribeFileMutation = E8(this.weavyContext, this.app), this.trashFileMutation = g8(this.weavyContext, this.app), this.restoreFileMutation = x8(this.weavyContext, this.app), this.deleteForeverFileMutation = k8(this.weavyContext, this.app), (i = Vv(this, Oo)) == null || i.call(this);
      const r = `a${this.app.id}`;
      this.weavyContext.subscribe(r, "file_created", this.handleRealtimeFileCreated), this.weavyContext.subscribe(r, "file_updated", this.handleRealtimeFileUpdated), this.weavyContext.subscribe(r, "file_trashed", this.handleRealtimeFileTrashed), this.weavyContext.subscribe(r, "file_restored", this.handleRealtimeFileRestored), this.weavyContext.subscribe(r, "file_deleted", this.handleRealtimeFileDeleted), Hv(this, Oo, () => {
        var n, s, a, l, d;
        (n = this.weavyContext) == null || n.unsubscribe(r, "file_created", this.handleRealtimeFileCreated), (s = this.weavyContext) == null || s.unsubscribe(r, "file_updated", this.handleRealtimeFileUpdated), (a = this.weavyContext) == null || a.unsubscribe(r, "file_trashed", this.handleRealtimeFileTrashed), (l = this.weavyContext) == null || l.unsubscribe(r, "file_restored", this.handleRealtimeFileRestored), (d = this.weavyContext) == null || d.unsubscribe(r, "file_deleted", this.handleRealtimeFileDeleted), Hv(this, Oo, void 0);
      });
    }
  }
  updated() {
    this.infiniteScroll.observe(this.filesQuery.result, this.pagerRef.value);
  }
  render() {
    var l;
    const { isPending: t } = ((l = this.weavyContext) == null ? void 0 : l.network) ?? { isPending: !0 }, { data: i, isPending: r, dataUpdatedAt: n } = this.filesQuery.result ?? { isPending: t }, s = this.dropZone.isDragActive, a = ((i == null ? void 0 : i.pages.flatMap((d) => d.data)) || []).filter((d) => d);
    return y`
      <wy-files-appbar
        .order=${this.order}
        .showTrashed=${this.showTrashed}
        .view=${this.view}
        @upload-files=${this.handleBlobUpload}
        @external-blobs=${this.handleExternalBlobs}
        @create-files=${(d) => d.detail.blobs.forEach((h) => this.handleCreateFile(h, d.detail.replace))}
        @order=${(d) => {
      this.order = d.detail.order;
    }}
        @show-trashed=${(d) => {
      this.showTrashed = d.detail.showTrashed;
    }}
        @view=${(d) => {
      this.view = d.detail.view;
    }}
        @subscribe=${(d) => this.handleSubscribe(d.detail.subscribe)}
      >
      </wy-files-appbar>

      <div
        class="wy-files ${Gt({ "wy-dragging": s })}"
        data-drag-title=${C("Drop files here to upload.")}
      >
        ${r ? y`<wy-empty><wy-spinner overlay></wy-spinner></wy-empty>` : a.length ? y`
                <wy-files-list
                  .view=${this.view}
                  .files=${a}
                  .dataUpdatedAt=${n}
                  .order=${this.order}
                  @file-open=${(d) => {
      var h;
      (h = this.previewRef.value) == null || h.open(d.detail.fileId, d.detail.tab);
    }}
                  @order=${(d) => {
      this.order = d.detail.order;
    }}
                  @rename=${(d) => {
      var h;
      (h = this.renameFileMutation) == null || h.mutate({ file: d.detail.file, name: d.detail.name });
    }}
                  @subscribe=${(d) => {
      var h;
      (h = this.subscribeFileMutation) == null || h.mutate({
        file: d.detail.file,
        subscribe: d.detail.subscribe
      });
    }}
                  @trash=${(d) => {
      var h;
      (h = this.trashFileMutation) == null || h.mutate({ file: d.detail.file });
    }}
                  @restore=${(d) => {
      var h;
      (h = this.restoreFileMutation) == null || h.mutate({ file: d.detail.file });
    }}
                  @delete-forever=${(d) => {
      var h;
      (h = this.deleteForeverFileMutation) == null || h.mutate({ file: d.detail.file });
    }}
                >
                </wy-files-list>
              ` : y`
                <wy-empty>
                  <wy-icon-display>
                    <wy-icon name="file-upload"></wy-icon>
                    <span slot="text">${C("Add some files to get started!")}</span>
                  </wy-icon-display>
                </wy-empty>
              `}
        <div ${it(this.pagerRef)} part="wy-pager"></div>
      </div>
      ${r ? L : y` <wy-preview ${it(this.previewRef)} .infiniteQueryResult=${this.filesQuery.result}></wy-preview> `}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Vv(this, Oo)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(Ya, "WyFiles"), Ya);
Oo = /* @__PURE__ */ new WeakMap();
uo.styles = [ki, rt, Hc, fo];
ku([
  v()
], uo.prototype, "view", 2);
ku([
  v({ type: Object })
], uo.prototype, "order", 2);
ku([
  v({ type: Boolean })
], uo.prototype, "showTrashed", 2);
uo = ku([
  Q("wy-files"),
  st()
], uo);
const Bv = /* @__PURE__ */ c((o) => kx(o) ? o._$litType$.h : o.strings, "Pt"), W8 = Cr(class extends Ni {
  constructor(o) {
    super(o), this.et = /* @__PURE__ */ new WeakMap();
  }
  render(o) {
    return [o];
  }
  update(o, [t]) {
    const i = _m(this.it) ? Bv(this.it) : null, r = _m(t) ? Bv(t) : null;
    if (i !== null && (r === null || i !== r)) {
      const n = Zp(o).pop();
      let s = this.et.get(i);
      if (s === void 0) {
        const a = document.createDocumentFragment();
        s = yb(L, a), s.setConnected(!1), this.et.set(i, s);
      }
      hh(s, [n]), _n(s, void 0, n);
    }
    if (r !== null) {
      if (i === null || i !== r) {
        const n = this.et.get(r);
        if (n !== void 0) {
          const s = Zp(n).pop();
          _x(o), _n(o, void 0, s), hh(o, [s]);
        }
      }
      this.it = t;
    } else this.it = void 0;
    return this.render(t);
  }
}), q8 = '.wy-messenger-layout{display:flex;flex:1;align-items:stretch;position:relative;container-type:inline-size;align-self:stretch;min-height:0;min-width:0}wy-conversation-list{flex:0 1 50%;min-width:0;max-width:24rem;border-right:1px solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c1c7ce))}.wy-messenger-conversation{display:flex;flex-direction:column;overflow-anchor:none;height:100%;width:100%;flex:0 1 100%;min-width:max(50%,16rem);min-height:min-content}.wy-close-conversation{display:none}@container (max-width: 768px){wy-conversation-list{flex:0 1 100%;min-width:0;max-width:none;border-right:none}wy-conversation-list[conversationid]{display:none}.wy-messenger-conversation[data-conversation-id=""]{display:none}.wy-close-conversation{display:contents}wy-empty{display:none}}', Q8 = Pt(q8);
function H0(o, t, i) {
  return {
    queryKey: ["members", t],
    queryFn: /* @__PURE__ */ c(async () => await (await o.get("/api/apps/" + t + "/members")).json(), "queryFn"),
    ...i
  };
}
c(H0, "getMemberOptions");
function K8(o, t, i, r) {
  return {
    queryKey: ["searchmembers"],
    initialPageParam: 0,
    enabled: !0,
    queryFn: /* @__PURE__ */ c(async (s) => {
      const a = t(), l = s.pageParam;
      let d;
      i ? d = await o.get(`/api/apps/${i}/members?member=false&q=${a}&skip=${l}&take=25&count=true${r() !== void 0 ? `&bot=${!!r()}` : ""}`) : d = await o.get(`/api/users?q=${a}&skip=${l}&take=25&count=true${r() !== void 0 ? `&bot=${!!r()}` : ""}`);
      const h = await d.json();
      return h.data = h.data || [], h;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((s, a) => {
      if (s != null && s.end && (s == null ? void 0 : s.end) < (s == null ? void 0 : s.count))
        return a.length * 25;
    }, "getNextPageParam")
  };
}
c(K8, "getInfiniteSearchMemberOptions");
var G8 = Object.defineProperty, Z8 = Object.getOwnPropertyDescriptor, xn = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? Z8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && G8(t, i, n), n;
}, "__decorateClass$j"), Xa;
let Wi = (Xa = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.botFilter = void 0, this.selected = [], this.select = [], this.text = "", this.peopleQuery = new pr(this), this.inputRef = dt(), this.infiniteScroll = new yr(this), this.pagerRef = dt(), this.throttledSearch = Bh(
      async () => {
        var t;
        this.text = ((t = this.inputRef.value) == null ? void 0 : t.value) || "";
      },
      250,
      { leading: !1, trailing: !0 }
    );
  }
  dispatchSubmit() {
    this.selected = [...this.selected, ...this.select];
    const t = new CustomEvent("submit", { detail: { members: this.selected } });
    return this.dispatchEvent(t);
  }
  isChecked(t) {
    return this.select.find((i) => i.id === t) != null;
  }
  handleSelected(t, i) {
    i ? this.select = [...this.select, t] : (this.select = this.select.filter((r) => r.id !== t.id), this.selected = this.selected.filter((r) => r.id !== t.id));
  }
  async clear() {
    this.text = "";
  }
  getSelected() {
    return this.selected.length > 0 ? y`${this.selected.map((t) => y`
            <div class="wy-item wy-item-hover" @click=${() => this.handleSelected(t, !1)} @keydown=${Ne} @keyup=${Ne}>
              <wy-avatar
                id=${t.id}
                .src=${t.avatar_url}
                .name=${t.display_name}
                .presence=${t.presence}
                .isBot=${t.is_bot}
                size=${32}
              ></wy-avatar>
              <div class="wy-item-body"> ${t.display_name} </div>
              <wy-icon name="checkbox-marked"></wy-icon>
            </div>
          `)}` : L;
  }
  getSearchResult() {
    var a;
    const { data: t, isPending: i } = this.peopleQuery.result ?? { data: [], isPending: !0 }, r = ((a = t == null ? void 0 : t.pages) == null ? void 0 : a.flatMap((l) => l.data).filter((l) => l)) ?? [], n = !!r.length, s = [];
    return i ? s.push(y`<wy-spinner overlay></wy-spinner>`) : n || s.push(y`<div class="wy-pane-group">
        <div class="wy-table-no-result">
          ${this.text ? C("Your search did not match any people.") : C("No more users found.")}
        </div>
      </div>`), n && s.push(y`
        ${r.filter(
      (l) => this.selected.find((d) => d.id === l.id) === void 0
    ).map((l) => y`<div class="wy-item wy-item-hover" @click=${() => this.handleSelected(l, !this.isChecked(l.id))} @keydown=${Ne} @keyup=${Ne}>
              <wy-avatar
                id=${l.id}
                .src=${l.avatar_url}
                .name=${l.display_name}
                .presence=${l.presence}
                .isBot=${l.is_bot}
                size=${32}
              ></wy-avatar>
              <div class="wy-item-body"> ${l.display_name} </div>
              <wy-icon name="${this.isChecked(l.id) ? "checkbox-marked" : "checkbox-blank"}"></wy-icon>
          </div>`) ?? L}`), s.push(y`<div ${it(this.pagerRef)} part="wy-pager"></div>`), s;
  }
  render() {
    return y`<div class="wy-pane wy-scroll-y">
      <div class="wy-pane-body">
      <div class="wy-pane-group">
        <div class="wy-input-group">
          <input
            class="wy-input wy-input-group-input wy-input-filled"
            name="search"
            .value=${this.text || ""}
            ${it(this.inputRef)}
            @input=${() => this.throttledSearch()}
            @keydown=${Yg}
            @keyup=${wr}
            placeholder=${C("Search...")}
          />
          <wy-button
            type="reset"
            @click=${this.clear}
            kind="icon"
            class="wy-input-group-button-icon"
          >
            <wy-icon name="close-circle"></wy-icon>
          </wy-button>
          <wy-button kind="icon" class="wy-input-group-button-icon">
            <wy-icon name="magnify"></wy-icon>
          </wy-button>
        </div>
      </div>
      <wy-buttons tabs>
        <wy-button
          ?active=${this.botFilter === void 0}
          @click=${() => this.botFilter = void 0}
          kind="tab"
          small
          >${C("All")}</wy-button
        >
        <wy-button
          ?active=${this.botFilter === !1}
          @click=${() => this.botFilter = !1}
          kind="tab"
          small
          >${C("People")}</wy-button
        >
        <wy-button
          ?active=${this.botFilter === !0}
          @click=${() => this.botFilter = !0}
          kind="tab"
          small
          >${C("Bots")}</wy-button
        >
      </wy-buttons>
      <div class="wy-pane-group">
        ${this.getSelected()} ${this.getSearchResult()}
      </div>      
      </div>
      <div class="wy-footerbar wy-footerbar-sticky">
        <div class="wy-pane-group">
          <wy-buttons reverse>
            <wy-button
              color="primary"
              @click=${this.dispatchSubmit}
              ?disabled=${this.selected.length === 0 && this.select.length === 0 ? !0 : void 0}
              >${this.buttonTitle ?? C("Create")}</wy-button
            >
          </wy-buttons>
        </div>
      </div>
    </div>`;
  }
  async updated(t) {
    var i, r;
    this.infiniteScroll.observe(this.peopleQuery.result, this.pagerRef.value), t.has("weavyContext") && this.weavyContext && this.peopleQuery.trackInfiniteQuery(
      K8(
        this.weavyContext,
        () => this.text,
        this.appId,
        () => this.botFilter
      )
    ), (t.has("text") || t.has("botFilter")) && (this.select.length > 0 && (this.selected = [...this.selected, ...this.select], this.select = []), await ((i = this.peopleQuery.result) == null ? void 0 : i.refetch()), (r = this.inputRef.value) == null || r.focus());
  }
}, c(Xa, "WyUsersSearch"), Xa);
Wi.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
xn([
  Kt({ context: ne, subscribe: !0 }),
  W()
], Wi.prototype, "weavyContext", 2);
xn([
  v({ attribute: !1 })
], Wi.prototype, "appId", 2);
xn([
  v({ attribute: !1 })
], Wi.prototype, "buttonTitle", 2);
xn([
  W()
], Wi.prototype, "botFilter", 2);
xn([
  W()
], Wi.prototype, "selected", 2);
xn([
  W()
], Wi.prototype, "select", 2);
xn([
  W()
], Wi.prototype, "text", 2);
Wi = xn([
  Q("wy-users-search"),
  st()
], Wi);
var Y8 = Object.defineProperty, X8 = Object.getOwnPropertyDescriptor, Qw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? X8(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && Y8(t, i, n), n;
}, "__decorateClass$i"), Ja;
let Ol = (Ja = class extends It(K) {
  constructor() {
    super(...arguments), this.uploadBlobMutation = new Ze(this), this.fileInputRef = dt(), this.openFileInput = () => {
      var t;
      (t = this.fileInputRef.value) == null || t.click();
    };
  }
  async handleBlobChange(t, i) {
    if (t) {
      const n = { file: t[0] };
      this.uploadBlobMutation.trackMutation(e$(this.weavyContext));
      const s = await this.uploadBlobMutation.mutate(n);
      i && (i.value = "");
      const a = new CustomEvent("blob-uploaded", { detail: { blob: s } });
      this.dispatchEvent(a);
    }
  }
  render() {
    return y` <slot
        name="placeholder"
        @click=${this.openFileInput}
        @keydown=${Ne}
        @keyup=${li}
      ></slot>
      <input
        accept=${wt(this.accept)}
        type="file"
        ${it(this.fileInputRef)}
        @click=${(t) => t.stopPropagation()}
        @change=${(t) => this.handleBlobChange(t.target.files, t.target)}
        hidden
      />
      <slot name="label">
        ${this.label ? y`<wy-button @click=${this.openFileInput}>${this.label}</wy-button>` : L}
      </slot>`;
  }
}, c(Ja, "WyBlobUpload"), Ja);
Ol.styles = [
  vt`
      :host {
        text-align: center;
      }
      slot[name="placeholder"] {
        cursor: pointer;
      }
    `
];
Qw([
  v({ attribute: !1 })
], Ol.prototype, "label", 2);
Qw([
  v({ attribute: !1 })
], Ol.prototype, "accept", 2);
Ol = Qw([
  Q("wy-blob-upload"),
  st()
], Ol);
var J8 = Object.defineProperty, t7 = Object.getOwnPropertyDescriptor, B0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$7"), go = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? t7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && J8(t, i, n), n;
}, "__decorateClass$h"), U0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || B0("Cannot " + i), "__accessCheck$7"), Uv = /* @__PURE__ */ c((o, t, i) => (U0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$7"), e7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? B0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$7"), jv = /* @__PURE__ */ c((o, t, i, r) => (U0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$7"), Do, tc;
let vr = (tc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.showDetails = !1, this.showAddMembers = !1, this.conversationTitle = "", this.conversationTitleInput = "", this.releaseFocusEvent = () => new CustomEvent("release-focus", { bubbles: !0, composed: !0 }), this.membersQuery = new xe(this), this.handleRealtimeAppUpdated = (t) => {
      !this.conversationId || t.app.id !== this.conversationId || (this.conversationTitle = this.conversationTitleInput = t.app.display_name);
    }, e7(this, Do);
  }
  isBotChat(t) {
    var i;
    return ((i = t ?? this.conversation) == null ? void 0 : i.type) === Mt.BotChat;
  }
  isChatRoom(t) {
    var i;
    return ((i = t ?? this.conversation) == null ? void 0 : i.type) === Mt.ChatRoom;
  }
  isPrivateChat(t) {
    var i;
    return ((i = t ?? this.conversation) == null ? void 0 : i.type) === Mt.PrivateChat;
  }
  async addMembers(t) {
    var i;
    this.showAddMembers = !1, this.showDetails = !0, !(!this.weavyContext || !this.conversationId) && (await ((i = this.addMembersMutation) == null ? void 0 : i.mutate({ id: this.conversationId, members: t.map((r) => r.id) })), await this.membersQuery.result.refetch(), await this.weavyContext.queryClient.invalidateQueries({ queryKey: ["conversations"] }));
  }
  async handleSaveConversationName() {
    var i;
    if (!this.weavyContext || !this.conversationId)
      return;
    const t = this.conversationTitleInput.trim() === "" ? null : this.conversationTitleInput.trim();
    await ((i = this.updateConversationMutation) == null ? void 0 : i.mutate({ id: this.conversationId, name: t }));
  }
  async handleAvatarUploaded(t) {
    var i;
    !this.weavyContext || !this.conversationId || await ((i = this.updateConversationMutation) == null ? void 0 : i.mutate({
      id: this.conversationId,
      blobId: t.id,
      thumbnailUrl: t.thumbnail_url
    }));
  }
  async clearAvatar() {
    var t;
    !this.weavyContext || !this.conversationId || await ((t = this.updateConversationMutation) == null ? void 0 : t.mutate({ id: this.conversationId, blobId: null, thumbnailUrl: null }));
  }
  async updateMember(t, i) {
    var r;
    !this.weavyContext || !this.conversationId || (await ((r = this.updateMemberMutation) == null ? void 0 : r.mutate({
      id: this.conversationId,
      userId: t,
      access: i
    })), await this.membersQuery.result.refetch());
  }
  async leaveConversation(t) {
    var i;
    !this.weavyContext || !this.conversationId || !this.user || (await ((i = this.leaveConversationMutation) == null ? void 0 : i.mutate({
      id: this.conversationId,
      members: [t]
    })), t ? await this.membersQuery.result.refetch() : (this.showDetails = !1, this.conversation = void 0, this.conversationId = void 0), await this.weavyContext.queryClient.invalidateQueries({ queryKey: ["conversations"] }));
  }
  willUpdate(t) {
    var i;
    if (super.willUpdate(t), t.has("weavyContext") && this.weavyContext && (this.leaveConversationMutation = Bg(this.weavyContext), this.addMembersMutation = Wx(this.weavyContext), this.updateConversationMutation = Ug(this.weavyContext), this.updateMemberMutation = jx(this.weavyContext)), t.has("conversationId") && (this.showDetails = !1), (t.has("weavyContext") || t.has("conversationId")) && this.weavyContext)
      if ((i = Uv(this, Do)) == null || i.call(this), this.conversationId) {
        this.membersQuery.trackQuery(
          H0(this.weavyContext, this.conversationId, {
            initialData: /* @__PURE__ */ c(() => {
              var n, s;
              if (this.conversationId)
                return (s = (n = this.weavyContext) == null ? void 0 : n.queryClient.getQueryData([
                  "conversations",
                  this.conversationId
                ])) == null ? void 0 : s.members;
            }, "initialData")
          })
        );
        const r = `a${this.conversationId}`;
        this.weavyContext.subscribe(r, "app_updated", this.handleRealtimeAppUpdated), jv(this, Do, () => {
          var n;
          (n = this.weavyContext) == null || n.unsubscribe(r, "app_updated", this.handleRealtimeAppUpdated), jv(this, Do, void 0);
        });
      } else
        this.membersQuery.untrackQuery();
    t.has("conversation") && this.conversation && (this.conversationTitleInput = this.conversationTitle = this.conversation.display_name);
  }
  render() {
    var n, s, a, l;
    const { data: t } = this.membersQuery.result ?? {}, i = ((t == null ? void 0 : t.data) || []).filter((d) => d.access === Mr.Admin).length, r = this.user && this.isPrivateChat() ? ((a = (((s = (n = this.conversation) == null ? void 0 : n.members) == null ? void 0 : s.data) || []).filter((d) => {
      var h;
      return d.id !== ((h = this.user) == null ? void 0 : h.id);
    })) == null ? void 0 : a[0]) ?? this.user : null;
    return y`
      <header class="wy-appbars">
        <nav class="wy-appbar">
          <slot class="wy-appbar-buttons wy-appbar-buttons-first" name="action"></slot>
          ${this.conversation && this.user ? y`
                <div class="wy-appbar-section">
                  ${this.conversation.type === Mt.PrivateChat ? y`<wy-presence
                        placement="text"
                        .status=${r == null ? void 0 : r.presence}
                        id=${wt(r == null ? void 0 : r.id)}
                      ></wy-presence>` : L}
                  <span class="wy-appbar-text">${this.conversationTitle}</span>
                </div>
              ` : y`<span></span>`}
          ${this.isChatRoom() ? y`<wy-button kind="icon" @click=${() => this.showDetails = !0} title="${C("Details")}">
                <wy-icon name="information"></wy-icon>
              </wy-button>` : L}
        </nav>
      </header>

      <!-- details modal -->
      ${this.weavyContext ? y`
            <wy-overlay
              .show=${this.showDetails}
              @close=${() => {
      this.showDetails = !1;
    }}
              @release-focus=${() => this.dispatchEvent(this.releaseFocusEvent())}
            >
              <header class="wy-appbars">
                <nav class="wy-appbar">
                  <wy-button
                    kind="icon"
                    @click=${() => {
      this.showDetails = !1;
    }}
                  >
                    <wy-icon name="close"></wy-icon>
                  </wy-button>
                  <div class="wy-appbar-text">${this.conversationTitle}</div>
                </nav>
              </header>
              <div class="wy-scroll-y">
                ${this.showDetails && this.conversation && this.user ? y`
                      <wy-avatar-header>
                        ${this.isChatRoom() ? y`
                              <wy-blob-upload
                                @blob-uploaded=${(d) => this.handleAvatarUploaded(d.detail.blob)}
                                .accept=${"image/*"}
                                .label=${C("Select picture")}
                              >
                                <div slot="placeholder">
                                  ${this.conversation.avatar_url ? y`<wy-avatar .size=${96} src=${this.conversation.avatar_url}></wy-avatar>` : y`<wy-avatar-group
                                        .members=${t == null ? void 0 : t.data}
                                        title=${this.conversation.display_name}
                                        .size=${96}
                                      ></wy-avatar-group>`}
                                </div>
                                ${this.conversation.avatar_url ? y`<div slot="label"
                                      ><wy-button @click=${() => this.clearAvatar()}
                                        >${C("Remove picture")}</wy-button
                                      ></div
                                    >` : L}
                              </wy-blob-upload>
                            ` : y`
                              <wy-avatar
                                src=${wt(r == null ? void 0 : r.avatar_url)}
                                name=${wt(r == null ? void 0 : r.display_name)}
                                presence=${(r == null ? void 0 : r.presence) || "away"}
                                ?isBot=${r == null ? void 0 : r.is_bot}
                                id=${wt(r == null ? void 0 : r.id)}
                                size=${96}
                              ></wy-avatar>
                            `}
                      </wy-avatar-header>
                      ${this.isChatRoom() ? y`
                            <div class="wy-pane-group">
                              <label class="wy-label" for="roomName">${C("Room name")}</label>

                              <input
                                id="roomName"
                                class="wy-input"
                                .value=${this.conversationTitleInput}
                                @input=${(d) => {
      this.conversationTitleInput = d.target.value;
    }}
                                @keyup=${M4}
                                @blur=${() => this.handleSaveConversationName()}
                              />

                              <div class="wy-description">
                                ${C("Changing the name of a group chat changes it for everyone.")}
                              </div>
                              <br />
                              <label class="wy-label">${C("Members")}</label>
                              ${t ? y`
                                    <div class="wy-list">
                                      ${((l = t.data) == null ? void 0 : l.map(
      (d) => {
        var h, w;
        return y`
                                          <div class="wy-item">
                                            <wy-avatar
                                              .src=${d.avatar_url}
                                              .name=${d.display_name}
                                              .isBot=${d.is_bot}
                                              size=${32}
                                            ></wy-avatar>
                                            <div class="wy-item-body">
                                              ${d.display_name}
                                              ${d.access === Mr.Admin ? y` <wy-icon
                                                    size="20"
                                                    inline
                                                    name="shield-star"
                                                    title=${C("Admin")}
                                                  ></wy-icon>` : L}
                                            </div>
                                            ${d.id === this.user.id && !ro(an.Admin, (h = this.conversation) == null ? void 0 : h.permissions) ? y` <wy-button
                                                  @click=${() => this.leaveConversation(d.id)}
                                                  title=${C("Leave conversation")}
                                                  kind="icon"
                                                >
                                                  <wy-icon name="close"></wy-icon>
                                                </wy-button>` : ro(an.Admin, (w = this.conversation) == null ? void 0 : w.permissions) ? y`<wy-dropdown>
                                                  <wy-dropdown-item @click=${() => this.leaveConversation(d.id)}>
                                                    <wy-icon name="account-minus"></wy-icon>
                                                    ${d.id === this.user.id ? C("Leave conversation") : C("Remove member")}
                                                  </wy-dropdown-item>
                                                  ${i > 1 && d.access === Mr.Admin ? y`<wy-dropdown-item
                                                        @click=${() => this.updateMember(d.id, Mr.Write)}
                                                      >
                                                        <wy-icon name="shield-star-outline"></wy-icon>
                                                        ${C("Remove as admin")}
                                                      </wy-dropdown-item>` : d.access !== Mr.Admin ? y`<wy-dropdown-item
                                                        @click=${() => this.updateMember(d.id, Mr.Admin)}
                                                      >
                                                        <wy-icon name="shield-star"></wy-icon>
                                                        ${C("Make admin")}
                                                      </wy-dropdown-item>` : L}
                                                </wy-dropdown>` : L}
                                          </div>
                                        `;
      }
    )) ?? L}
                                    </div>
                                  ` : L}
                              <wy-button
                                kind="filled"
                                color="primary"
                                @click=${() => {
      this.showDetails = !1, this.showAddMembers = !0;
    }}
                                title=${C("Add members")}
                              >
                                ${C("Add members")}
                              </wy-button>
                            </div>
                          ` : L}
                    ` : L}
              </div>
            </wy-overlay>
          ` : L}

      <!-- add members modal -->
      ${this.weavyContext ? y`
            <wy-overlay
              .show=${this.showAddMembers}
              @close=${() => {
      this.showAddMembers = !1;
    }}
              @release-focus=${() => this.dispatchEvent(this.releaseFocusEvent())}
            >
              <header class="wy-appbars">
                <nav class="wy-appbar">
                  <wy-button
                    kind="icon"
                    @click=${() => {
      this.showAddMembers = !1;
    }}
                  >
                    <wy-icon name="close"></wy-icon>
                  </wy-button>
                  <div class="wy-appbar-text">${C("Add members")}</div>
                </nav>
              </header>
              ${this.showAddMembers ? y`
                    <wy-users-search
                      .buttonTitle=${C("Add members")}
                      .appId=${this.conversationId}
                      @submit=${(d) => this.addMembers(d.detail.members)}
                    ></wy-users-search>
                  ` : L}
            </wy-overlay>
          ` : L}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Uv(this, Do)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(tc, "WyConversationAppbar"), tc);
Do = /* @__PURE__ */ new WeakMap();
vr.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
go([
  v({ attribute: !1 })
], vr.prototype, "conversationId", 2);
go([
  v({ attribute: !1 })
], vr.prototype, "conversation", 2);
go([
  v({ type: Boolean })
], vr.prototype, "showDetails", 2);
go([
  v({ type: Boolean })
], vr.prototype, "showAddMembers", 2);
go([
  v({ type: String })
], vr.prototype, "conversationTitle", 2);
go([
  W()
], vr.prototype, "conversationTitleInput", 2);
vr = go([
  Q("wy-conversation-appbar"),
  st()
], vr);
function i7(o, t = {}, i, r = [Mt.ChatRoom, Mt.PrivateChat], n) {
  return {
    ...t,
    initialPageParam: 0,
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["conversations", "list", r, n],
    queryFn: /* @__PURE__ */ c(async (a) => {
      var m;
      const l = new URLSearchParams({
        q: (i == null ? void 0 : i()) || "",
        skip: ((m = a.pageParam) == null ? void 0 : m.toString()) || "0",
        top: "25",
        member: n || ""
      });
      r == null || r.forEach((f) => l.append("type", f));
      const d = `/api/conversations?${l.toString()}`, w = await (await o.get(d)).json();
      return w.data = w.data || [], w;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((a, l) => {
      if (a.end && (a == null ? void 0 : a.end) < (a == null ? void 0 : a.count))
        return l.length * 25;
    }, "getNextPageParam")
  };
}
c(i7, "getConversationsOptions");
function r7(o) {
  return {
    mutationFn: /* @__PURE__ */ c(async ({ members: i, type: r }) => await (await o.post(
      "/api/conversations",
      "POST",
      JSON.stringify({
        members: i,
        type: r
      })
    )).json(), "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (i) => ({}), "onMutate")
  };
}
c(r7, "getAddConversationMutationOptions");
function n7(o) {
  return new kt(o.queryClient, r7(o));
}
c(n7, "getAddConversationMutation");
var o7 = Object.defineProperty, s7 = Object.getOwnPropertyDescriptor, $u = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? s7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && o7(t, i, n), n;
}, "__decorateClass$g"), ec;
let Dl = (ec = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.typing = new qh(this);
  }
  willUpdate(t) {
    t.has("appId") && (this.typing.appId = this.appId), t.has("userId") && (this.typing.userId = this.userId);
  }
  render() {
    var n;
    const { names: t, ellipsis: i } = this.typing;
    let r;
    if (t.length === 1) {
      const s = t[0];
      r = C(bt`${s} is typing${i}`, { desc: "A is typing..." });
    } else if (t.length > 1) {
      const s = new Intl.ListFormat((n = this.weavyContext) == null ? void 0 : n.locale, { style: "long", type: "conjunction" }).format(
        t
      );
      r = C(bt`${s} are typing${i}`, {
        desc: "A, B and C are typing..."
      });
    }
    return r ? y`<span>${r}</span>` : y`<slot></slot>`;
  }
}, c(ec, "WyTyping"), ec);
$u([
  Kt({ context: ne, subscribe: !0 }),
  W()
], Dl.prototype, "weavyContext", 2);
$u([
  v({ attribute: !0, type: Number })
], Dl.prototype, "appId", 2);
$u([
  v({ attribute: !0, type: Number })
], Dl.prototype, "userId", 2);
Dl = $u([
  Q("wy-typing"),
  st()
], Dl);
var a7 = Object.defineProperty, c7 = Object.getOwnPropertyDescriptor, j0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$6"), qe = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? c7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && a7(t, i, n), n;
}, "__decorateClass$f"), W0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || j0("Cannot " + i), "__accessCheck$6"), Wv = /* @__PURE__ */ c((o, t, i) => (W0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$6"), l7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? j0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$6"), qv = /* @__PURE__ */ c((o, t, i, r) => (W0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$6"), Fo, ic;
let Me = (ic = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.unread = !1, this.avatarUrl = "", this.hideAvatar = !1, this.displayName = "", this.type = Mt.PrivateChat, this.selected = !1, this.starred = !1, this.pinned = !1, this.handleMessageCreated = (t) => {
      var i;
      this.user && (t.message.app.id === this.conversationId && t.actor.id !== this.user.id && ((i = this.deliveredConversationMutation) == null || i.mutate({
        id: this.conversationId
      })), this.dispatchRefetch());
    }, this.handleConversationUpdated = () => {
      this.dispatchRefetch();
    }, this.handleConversationMarked = (t) => {
      this.user && t.actor.id === this.user.id && this.dispatchRefetch();
    }, l7(this, Fo);
  }
  dispatchRefetch() {
    const t = new CustomEvent("refetch", {});
    return this.dispatchEvent(t);
  }
  dispatchSelected(t, i) {
    t.preventDefault();
    const r = new CustomEvent("selected", { detail: { id: i } });
    return this.dispatchEvent(r);
  }
  handleStar(t, i) {
    t.preventDefault(), t.stopPropagation();
    const r = new CustomEvent("star", {
      detail: { id: this.conversationId, star: i }
    });
    return this.dispatchEvent(r);
  }
  handlePin(t, i) {
    t.preventDefault(), t.stopPropagation();
    const r = new CustomEvent("pin", {
      detail: { id: this.conversationId, pin: i }
    });
    return this.dispatchEvent(r);
  }
  dispatchMarked(t) {
    var r;
    const i = new CustomEvent("mark", {
      detail: { id: this.conversationId, markAsRead: t, messageId: (r = this.lastMessage) == null ? void 0 : r.id }
    });
    return this.dispatchEvent(i);
  }
  handleLeaveConversation() {
    const t = new CustomEvent("leave", {
      detail: { id: this.conversationId }
    });
    return this.dispatchEvent(t);
  }
  handleTrashConversation() {
    const t = new CustomEvent("trash", {
      detail: { id: this.conversationId }
    });
    return this.dispatchEvent(t);
  }
  willUpdate(t) {
    var r;
    var i;
    if (t.has("weavyContext") && this.weavyContext) {
      this.deliveredConversationMutation = Hx(this.weavyContext), (i = Wv(this, Fo)) == null || i.call(this);
      const n = `a${this.conversationId}`;
      this.weavyContext.subscribe(n, "app_updated", this.handleConversationUpdated), this.weavyContext.subscribe(n, "member_added", this.handleConversationUpdated), this.weavyContext.subscribe(n, "message_created", this.handleMessageCreated), this.weavyContext.subscribe(n, "conversation_marked", this.handleConversationMarked), qv(this, Fo, () => {
        var s, a, l, d;
        (s = this.weavyContext) == null || s.unsubscribe(n, "app_updated", this.handleConversationUpdated), (a = this.weavyContext) == null || a.unsubscribe(n, "member_added", this.handleConversationUpdated), (l = this.weavyContext) == null || l.unsubscribe(n, "message_created", this.handleMessageCreated), (d = this.weavyContext) == null || d.unsubscribe(n, "conversation_marked", this.handleConversationMarked), qv(this, Fo, void 0);
      }), this.unread && ((r = this.deliveredConversationMutation) == null || r.mutate({
        id: this.conversationId
      }));
    }
  }
  render() {
    var n, s, a, l, d, h, w, m, f, b, g, $, O, k, S, _, V;
    const t = (n = this.lastMessage) != null && n.created_at ? new Intl.DateTimeFormat((s = this.weavyContext) == null ? void 0 : s.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.lastMessage.created_at)
    ) : "", i = (a = this.lastMessage) != null && a.created_at ? Pd((l = this.weavyContext) == null ? void 0 : l.locale, new Date(this.lastMessage.created_at)) : "", r = this.type === Mt.PrivateChat && this.user ? ((h = (((d = this.members) == null ? void 0 : d.data) || []).filter((I) => {
      var D;
      return I.id !== ((D = this.user) == null ? void 0 : D.id);
    })) == null ? void 0 : h[0]) ?? this.user : null;
    return y`
      <div
        class=${Gt({
      "wy-item wy-item-lg wy-item-hover wy-conversation": !0,
      "wy-unread": this.unread,
      "wy-active": this.selected
    })}
        tabindex="0"
        @click=${(I) => this.dispatchSelected(I, this.conversationId)}
        @keydown=${Ne}
        @keyup=${li}
      >
        ${this.type !== Mt.BotChat ? this.avatarUrl ? y`<wy-avatar .size=${48} src=${this.avatarUrl}></wy-avatar>` : this.type == Mt.ChatRoom ? y` <wy-avatar-group
                .members=${(w = this.members) == null ? void 0 : w.data}
                title=${this.displayName}
                .size=${48}
              ></wy-avatar-group>` : y`
                <wy-avatar
                  src=${wt(r == null ? void 0 : r.avatar_url)}
                  name=${wt(r == null ? void 0 : r.display_name)}
                  presence=${(r == null ? void 0 : r.presence) || "away"}
                  ?isBot=${r == null ? void 0 : r.is_bot}
                  id=${wt(r == null ? void 0 : r.id)}
                  size=${48}
                ></wy-avatar>
              ` : L}

        <div class="wy-item-rows">
          <div class="wy-item-row">
            <div class="wy-item-title"
              >${this.displayName || ((m = this.lastMessage) == null ? void 0 : m.plain) || C("Untitled conversation")}</div
            >
            ${this.lastMessage ? y`<time class="wy-meta" datetime=${this.lastMessage.created_at.toString()} title=${t}
                  >${i}</time
                >` : L}
          </div>
          <div class="wy-item-row">
            <div class="wy-item-text">
              ${this.user ? y`
                    <wy-typing appId=${this.conversationId} userId=${this.user.id}>
                      ${this.lastMessage ? y`
                            ${this.user.id === this.lastMessage.created_by.id ? y`${C("You")}: ` : L}
                            ${this.members.count > 2 && this.user.id !== ((f = this.lastMessage) == null ? void 0 : f.created_by.id) ? y`${(b = this.lastMessage) == null ? void 0 : b.created_by.display_name}: ` : L}
                          ` : L}
                      ${(g = this.lastMessage) != null && g.text ? y`<span>${this.lastMessage.plain}</span>` : L}
                      ${!(($ = this.lastMessage) != null && $.text) && (((k = (O = this.lastMessage) == null ? void 0 : O.attachments) == null ? void 0 : k.count) || 0) > 0 ? y`<wy-icon kind="text-icon" name="attachment"></wy-icon>` : L}
                      ${!((S = this.lastMessage) != null && S.text) && ((V = (_ = this.lastMessage) == null ? void 0 : _.meeting) != null && V.id) ? y`<wy-icon kind="text-icon" name="video"></wy-icon>` : L}
                      ${this.lastMessage ? L : y`&nbsp;`}
                    </wy-typing>
                  ` : L}
            </div>

            <div class="wy-item-actions wy-item-actions-bottom">
              ${this.starred ? y`<wy-button kind="icon" @click=${(I) => this.handleStar(I, !1)}>
                    <wy-icon name="star" size=${24} color="yellow"></wy-icon>
                  </wy-button>` : L}
              ${this.pinned ? y`<wy-button kind="icon" @click=${(I) => this.handlePin(I, !1)}
                    ><wy-icon name="pin" size=${24} color=""></wy-icon
                  ></wy-button>` : L}

              <wy-dropdown directionX="left">
                ${this.selected ? L : y`<wy-dropdown-item @click=${() => this.dispatchMarked(this.unread)}>
                      <wy-icon name=${this.unread ? "read" : "unread"}></wy-icon>
                      ${this.unread ? C("Mark as read") : C("Mark as unread")}
                    </wy-dropdown-item>`}
                <wy-dropdown-item @click=${(I) => this.handlePin(I, !this.pinned)}>
                  <wy-icon name=${this.pinned ? "unpin" : "pin"}></wy-icon>
                  ${this.pinned ? C("Unpin") : C("Pin")}
                </wy-dropdown-item>
                <wy-dropdown-item @click=${(I) => this.handleStar(I, !this.starred)}>
                  <wy-icon name=${this.starred ? "unstar" : "star"}></wy-icon>
                  ${this.starred ? C("Unstar") : C("Star")}
                </wy-dropdown-item>
                ${this.type === Mt.ChatRoom ? y`<wy-dropdown-item @click=${() => this.handleLeaveConversation()}>
                      <wy-icon name="account-minus"></wy-icon>
                      ${C("Leave conversation")}
                    </wy-dropdown-item>` : L}
                ${this.type === Mt.BotChat ? y`
                      <wy-dropdown-item @click=${() => this.handleTrashConversation()}>
                        <wy-icon name="trashcan"></wy-icon>
                        ${C("Trash")}
                      </wy-dropdown-item>
                    ` : L}
              </wy-dropdown>
            </div>
          </div>
        </div>
      </div>
    `;
  }
  connectedCallback() {
    super.connectedCallback(), this.weavyContext && this.requestUpdate("weavyContext");
  }
  disconnectedCallback() {
    var t;
    (t = Wv(this, Fo)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(ic, "WyConversationListItem"), ic);
Fo = /* @__PURE__ */ new WeakMap();
Me.styles = rt;
qe([
  Kt({ context: ne, subscribe: !0 }),
  W()
], Me.prototype, "weavyContext", 2);
qe([
  v({ attribute: !0, type: Number })
], Me.prototype, "conversationId", 2);
qe([
  v({ attribute: !0, type: Boolean })
], Me.prototype, "unread", 2);
qe([
  v({ attribute: !0 })
], Me.prototype, "avatarUrl", 2);
qe([
  v({ attribute: !0, type: Boolean })
], Me.prototype, "hideAvatar", 2);
qe([
  v({ attribute: !0 })
], Me.prototype, "displayName", 2);
qe([
  v({ attribute: !0, type: String, reflect: !0 })
], Me.prototype, "type", 2);
qe([
  v({ attribute: !0, type: Boolean, reflect: !0 })
], Me.prototype, "selected", 2);
qe([
  v({ attribute: !0, type: Boolean, reflect: !0 })
], Me.prototype, "starred", 2);
qe([
  v({ attribute: !0, type: Boolean, reflect: !0 })
], Me.prototype, "pinned", 2);
qe([
  v({ attribute: !1 })
], Me.prototype, "members", 2);
qe([
  v({ attribute: !1 })
], Me.prototype, "lastMessage", 2);
qe([
  Kt({ context: su, subscribe: !0 }),
  W()
], Me.prototype, "user", 2);
Me = qe([
  Q("wy-conversation-list-item"),
  st()
], Me);
var d7 = Object.defineProperty, h7 = Object.getOwnPropertyDescriptor, Kw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? h7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && d7(t, i, n), n;
}, "__decorateClass$e"), rc;
let Fl = (rc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.show = !1;
  }
  open() {
    this.show = !0;
  }
  close() {
    this.show = !1;
  }
  async submit(t = []) {
    var a;
    const i = this.bot ? { members: [this.bot], type: og.BotChat } : { members: t == null ? void 0 : t.map((l) => l.id) }, r = await ((a = this.addConversationMutation) == null ? void 0 : a.mutate(i));
    this.close();
    const n = new CustomEvent("refetch", {});
    this.dispatchEvent(n);
    const s = new CustomEvent("selected", { detail: { id: r == null ? void 0 : r.id } });
    return this.dispatchEvent(s);
  }
  updated(t) {
    t.has("weavyContext") && this.weavyContext && (this.addConversationMutation = n7(this.weavyContext));
  }
  render() {
    return y`
      <wy-button kind="icon" @click=${() => this.bot ? this.submit() : this.open()}>
        <wy-icon name="plus"></wy-icon>
      </wy-button>

      ${!this.bot && this.weavyContext ? y`<wy-overlay
            .show=${this.show}
            @close=${() => {
      this.show = !1;
    }}
            @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
          >
            <header class="wy-appbars">
              <nav class="wy-appbar">
                <wy-button kind="icon" @click=${() => this.close()}>
                  <wy-icon name="close"></wy-icon>
                </wy-button>
                <div class="wy-appbar-text">${C("New conversation")}</div>
              </nav>
            </header>
            ${this.show ? y` <wy-users-search @submit=${(t) => this.submit(t.detail.members)}></wy-users-search> ` : L}
          </wy-overlay>` : L}
    `;
  }
}, c(rc, "WyConversationNew"), rc);
Fl.styles = [rt];
Kw([
  v()
], Fl.prototype, "bot", 2);
Kw([
  W()
], Fl.prototype, "show", 2);
Fl = Kw([
  Q("wy-conversation-new"),
  st()
], Fl);
var u7 = Object.defineProperty, p7 = Object.getOwnPropertyDescriptor, q0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$5"), bo = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? p7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && u7(t, i, n), n;
}, "__decorateClass$d"), Q0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || q0("Cannot " + i), "__accessCheck$5"), Qv = /* @__PURE__ */ c((o, t, i) => (Q0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$5"), y7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? q0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$5"), Kv = /* @__PURE__ */ c((o, t, i, r) => (Q0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$5"), No, nc;
let gr = (nc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.conversationTypes = [Mt.ChatRoom, Mt.PrivateChat], this.searchText = "", this.inputRef = dt(), this.conversationsQuery = new pr(this), this.infiniteScroll = new yr(this), this.pagerRef = dt(), this.handleRefresh = () => {
      this.conversationsQuery.result.refetch();
    }, this.handlePresenceChange = (t) => {
      this.weavyContext && (Array.isArray(t) || (t = [parseInt(t)]), _t(
        this.weavyContext.queryClient,
        ["conversations"],
        () => !0,
        (i) => {
          const r = i.members.data ?? [];
          r.forEach((n) => {
            n.presence = t.indexOf(n.id) != -1 ? "active" : "away";
          }), i.members.data = r;
        }
      ));
    }, this.throttledSearch = Bh(
      async () => {
        var t;
        this.searchText = ((t = this.inputRef.value) == null ? void 0 : t.value) || "";
      },
      250,
      { leading: !1, trailing: !0 }
    ), y7(this, No);
  }
  dispatchSelected(t) {
    this.conversationId = t;
    const i = new CustomEvent("conversation-selected", { detail: { id: t } });
    return this.dispatchEvent(i);
  }
  async handleMark(t, i, r) {
    var s;
    const n = i ? r : null;
    await ((s = this.markConversationMutation) == null ? void 0 : s.mutate({ id: t, markAsRead: i, messageId: n }));
  }
  async handleStar(t, i) {
    var r;
    await ((r = this.starConversationMutation) == null ? void 0 : r.mutate({ id: t, star: i }));
  }
  async handlePin(t, i) {
    var r;
    await ((r = this.pinConversationMutation) == null ? void 0 : r.mutate({ id: t, pin: i }));
  }
  async handleLeaveConversation(t) {
    var i;
    await ((i = this.leaveConversationMutation) == null ? void 0 : i.mutate({ id: t, members: [this.user.id] })), this.dispatchSelected(void 0), this.conversationsQuery.result.refetch();
  }
  async handleTrashConversation(t) {
    var i;
    await ((i = this.trashConversationMutation) == null ? void 0 : i.mutate({ id: t })), this.dispatchSelected(void 0), this.conversationsQuery.result.refetch();
  }
  async clear() {
    this.searchText = "";
  }
  async willUpdate(t) {
    var i;
    super.willUpdate(t), (t.has("weavyContext") || t.has("conversationTypes")) && this.weavyContext && (this.conversationsQuery.trackInfiniteQuery(
      i7(this.weavyContext, {}, () => this.searchText, this.conversationTypes, this.bot)
    ), this.markConversationMutation = Hg(this.weavyContext), this.starConversationMutation = Bx(this.weavyContext), this.pinConversationMutation = Ux(this.weavyContext), this.leaveConversationMutation = Bg(this.weavyContext), this.trashConversationMutation = qx(this.weavyContext), (i = Qv(this, No)) == null || i.call(this), this.weavyContext.subscribe(null, "app_created", this.handleRefresh), this.weavyContext.subscribe(null, "member_added", this.handleRefresh), this.weavyContext.subscribe(null, "online", this.handlePresenceChange), Kv(this, No, () => {
      var r, n, s;
      (r = this.weavyContext) == null || r.unsubscribe(null, "app_created", this.handleRefresh), (n = this.weavyContext) == null || n.unsubscribe(null, "member_added", this.handleRefresh), (s = this.weavyContext) == null || s.unsubscribe(null, "online", this.handlePresenceChange), Kv(this, No, void 0);
    })), t.has("user") && this.user && (this.bot || (this.avatarUser ?? (this.avatarUser = this.user)));
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.conversationsQuery.result, this.pagerRef.value);
  }
  async updated(t) {
    t.has("searchText") && this.conversationsQuery.result && await this.conversationsQuery.result.refetch();
  }
  renderConversations(t, i) {
    if (i) {
      const r = i.pages.flatMap((n) => n.data);
      return Ve(
        r,
        (n) => n == null ? void 0 : n.id,
        (n) => [
          y`<wy-conversation-list-item
              .conversationId=${n == null ? void 0 : n.id}
              .avatarUrl=${n == null ? void 0 : n.avatar_url}
              .hideAvatar=${!!this.bot}
              .displayName=${n.display_name}
              .lastMessage=${n.last_message}
              .members=${n.members}
              .unread=${n.is_unread}
              .starred=${n.is_starred}
              .pinned=${n.is_pinned}
              .type=${n.type}
              .selected=${this.conversationId == n.id}
              @selected=${(s) => this.dispatchSelected(s.detail.id)}
              @mark=${(s) => this.handleMark(s.detail.id, s.detail.markAsRead, s.detail.messageId)}
              @star=${(s) => this.handleStar(s.detail.id, s.detail.star)}
              @pin=${(s) => this.handlePin(s.detail.id, s.detail.pin)}
              @leave=${(s) => this.handleLeaveConversation(s.detail.id)}
              @trash=${(s) => this.handleTrashConversation(s.detail.id)}
              @refetch=${() => this.conversationsQuery.result.refetch()}
            ></wy-conversation-list-item>`
        ]
      );
    }
    return L;
  }
  render() {
    var n, s, a, l;
    const { data: t, isPending: i } = this.conversationsQuery.result ?? {}, r = !this.avatarUser;
    return y`
      ${this.user ? y`
            <header class="wy-appbars">
              <nav class="wy-appbar">
                ${r ? y` <wy-spinner></wy-spinner> ` : y`
                      <wy-avatar
                        .src=${(n = this.avatarUser) == null ? void 0 : n.avatar_url}
                        .name=${(s = this.avatarUser) == null ? void 0 : s.display_name}
                        .size=${24}
                      ></wy-avatar>
                    `}
                <div class="wy-appbar-text"
                  >${this.name ?? (this.bot ? (a = this.avatarUser) == null ? void 0 : a.display_name : C("Messenger"))}</div
                >
                <wy-conversation-new
                  .bot=${this.bot}
                  @refetch=${() => this.conversationsQuery.result.refetch()}
                  @selected=${(d) => this.dispatchSelected(d.detail.id)}
                ></wy-conversation-new>
              </nav>
            </header>
            ${this.bot ? L : y`
                  <div class="wy-pane-body">
                    <div class="wy-pane-group">
                      <div class="wy-input-group">
                        <input
                          class="wy-input wy-input-group-input wy-input-filled"
                          name="text"
                          .value=${this.searchText || ""}
                          ${it(this.inputRef)}
                          @input=${() => this.throttledSearch()}
                          @keydown=${Yg}
                          @keyup=${wr}
                          placeholder=${C("Search for conversations...")}
                        />
                        <wy-button type="reset" @click=${this.clear} kind="icon" class="wy-input-group-button-icon">
                          <wy-icon name="close-circle"></wy-icon>
                        </wy-button>
                        <wy-button kind="icon" class="wy-input-group-button-icon">
                          <wy-icon name="magnify"></wy-icon>
                        </wy-button>
                      </div>
                    </div>
                  </div>
                `}
            <div class="wy-conversations">
              ${!i && this.user && t ? (l = t.pages[0]) != null && l.count || this.searchText ? this.renderConversations(this.user, t) : y`
                      <div class="wy-pane-body">
                        <div class="wy-pane-group">
                          <wy-empty noNetwork>${C("Create a conversation to get started.")}</wy-empty>
                        </div>
                      </div>
                    ` : y`<wy-empty><wy-spinner padded></wy-spinner></wy-empty>`}
              <div ${it(this.pagerRef)} part="wy-pager"></div>
            </div>
          ` : y`<wy-empty class="wy-pane"><wy-spinner overlay></wy-spinner></wy-empty>`}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Qv(this, No)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(nc, "WeavyConversationList"), nc);
No = /* @__PURE__ */ new WeakMap();
gr.styles = [
  rt,
  vt`
      :host {
        position: relative;
      }
    `
];
bo([
  v({ type: Object })
], gr.prototype, "avatarUser", 2);
bo([
  v({ type: String })
], gr.prototype, "name", 2);
bo([
  v({ type: Number })
], gr.prototype, "conversationId", 2);
bo([
  v({ type: Array })
], gr.prototype, "conversationTypes", 2);
bo([
  v()
], gr.prototype, "bot", 2);
bo([
  W()
], gr.prototype, "searchText", 2);
gr = bo([
  Q("wy-conversation-list"),
  st()
], gr);
var w7 = Object.defineProperty, f7 = Object.getOwnPropertyDescriptor, K0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$4"), G0 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? f7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && w7(t, i, n), n;
}, "__decorateClass$c"), Z0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || K0("Cannot " + i), "__accessCheck$4"), Gv = /* @__PURE__ */ c((o, t, i) => (Z0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$4"), m7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? K0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$4"), Zv = /* @__PURE__ */ c((o, t, i, r) => (Z0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$4"), Vo, oc;
let yw = (oc = class extends Ui {
  constructor() {
    super(...arguments), this.conversationTitle = "", this.membersQuery = new xe(this), this.handleRealtimeAppUpdated = (t) => {
      !this.conversation || t.app.id !== this.conversation.id || (this.conversationTitle = t.app.display_name);
    }, this.handleRealtimeSeenBy = (t) => {
      !this.weavyContext || !this.conversation || t.conversation.id !== this.conversation.id || _t(
        this.weavyContext.queryClient,
        ["members", this.conversation.id],
        t.actor.id,
        (i) => {
          i.marked_id = t.marked_id, i.marked_at = t.marked_at;
        }
      );
    }, this.handleRealtimeDelivered = (t) => {
      !this.weavyContext || !this.conversation || t.actor.id === this.user.id || t.conversation.id !== this.conversation.id || _t(
        this.weavyContext.queryClient,
        ["members", this.conversation.id],
        t.actor.id,
        (i) => {
          i.delivered_at = t.delivered_at;
        }
      );
    }, m7(this, Vo);
  }
  willUpdate(t) {
    var r;
    var i;
    if (super.willUpdate(t), (t.has("weavyContext") || t.has("conversation")) && this.weavyContext && (t.has("conversation") && this.conversation && (this.conversationTitle = this.conversation.display_name), this.conversation || this.membersQuery.untrackQuery()), (t.has("weavyContext") || t.has("conversationId")) && this.weavyContext && this.conversationId !== t.get("conversationId") && (this.conversationId && ((r = this.hasFeatures) != null && r.receipts) ? this.membersQuery.trackQuery(
      H0(this.weavyContext, this.conversationId, {
        initialData: /* @__PURE__ */ c(() => {
          var n, s, a;
          if ((n = this.conversation) != null && n.id)
            return (a = (s = this.weavyContext) == null ? void 0 : s.queryClient.getQueryData([
              "conversations",
              this.conversation.id
            ])) == null ? void 0 : a.members;
        }, "initialData")
      })
    ) : this.membersQuery.untrackQuery(), (i = Gv(this, Vo)) == null || i.call(this), this.conversationId)) {
      const n = `a${this.conversationId}`;
      this.weavyContext.subscribe(n, "app_updated", this.handleRealtimeAppUpdated), this.weavyContext.subscribe(n, "conversation_marked", this.handleRealtimeSeenBy), this.weavyContext.subscribe(n, "conversation_delivered", this.handleRealtimeDelivered), Zv(this, Vo, () => {
        var s, a, l;
        (s = this.weavyContext) == null || s.unsubscribe(n, "conversation_marked", this.handleRealtimeSeenBy), (a = this.weavyContext) == null || a.unsubscribe(n, "app_updated", this.handleRealtimeAppUpdated), (l = this.weavyContext) == null || l.unsubscribe(n, "conversation_delivered", this.handleRealtimeDelivered), Zv(this, Vo, void 0);
      });
    }
  }
  render() {
    var d, h, w, m, f, b;
    const { isPending: t } = ((d = this.weavyContext) == null ? void 0 : d.network) ?? { isPending: !0 }, { data: i, isPending: r, hasNextPage: n } = this.messagesQuery.result ?? { isPending: t }, { data: s, isPending: a } = this.membersQuery.result ?? {}, l = this.user && this.isPrivateChat() ? ((m = (((w = (h = this.conversation) == null ? void 0 : h.members) == null ? void 0 : w.data) || []).filter((g) => {
      var $;
      return g.id !== (($ = this.user) == null ? void 0 : $.id);
    })) == null ? void 0 : m[0]) ?? this.user : null;
    return y`
      ${this.conversation && i ? y`
            ${!n && !r ? y`
                  <wy-avatar-header>
                    ${this.conversation.avatar_url ? y`<wy-avatar .size=${96} src=${this.conversation.avatar_url}></wy-avatar>` : this.isChatRoom() ? y` <wy-avatar-group
                          .members=${s == null ? void 0 : s.data}
                          title=${this.conversation.display_name}
                          .size=${96}
                        ></wy-avatar-group>` : l != null && l.avatar_url ? y`
                          <wy-avatar
                            src=${wt(l == null ? void 0 : l.avatar_url)}
                            name=${this.conversation.display_name}
                            ?isBot=${l == null ? void 0 : l.is_bot}
                            size=${96}
                          ></wy-avatar>
                        ` : L}
                  </wy-avatar-header>
                ` : L}
            <wy-messages
              .conversation=${this.conversation}
              .infiniteMessages=${i}
              .members=${s}
              .unreadMarkerId=${this.lastReadMessageId}
              .unreadMarkerPosition=${this.lastReadMessagePosition}
              .unreadMarkerShow=${this.lastReadMessageShow}
              @vote=${(g) => {
      var $;
      ($ = this.pollMutation) == null || $.mutate({
        optionId: g.detail.id,
        parentType: g.detail.parentType,
        parentId: g.detail.parentId
      });
    }}
            >
              <div slot="start" ${it(this.pagerRef)} part="wy-pager"></div>
              <wy-message-typing
                slot="end"
                .conversationId=${this.conversation.id}
                .userId=${(f = this.user) == null ? void 0 : f.id}
                .isPrivateChat=${this.isPrivateChat()}
                .members=${this.conversation.members.data}
                @typing=${(g) => this.handleTyping(g)}
              ></wy-message-typing>
            </wy-messages>
          ` : y`
            <div class="wy-messages">
              <wy-empty class="wy-pane">
                ${r || a || !this.conversation ? y`<wy-spinner overlay></wy-spinner>` : C("Start the conversation!")}
              </wy-empty>
            </div>
          `}
      ${this.conversation && ro(an.Create, (b = this.conversation) == null ? void 0 : b.permissions) ? y`
            <div class="wy-footerbar wy-footerbar-sticky">
              <wy-message-editor
                .app=${this.conversation}
                .draft=${!0}
                placeholder=${C("Type a message...")}
                @submit=${(g) => this.handleSubmit(g)}
              ></wy-message-editor>
            </div>
          ` : L}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Gv(this, Vo)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(oc, "WyConversationExtended"), oc);
Vo = /* @__PURE__ */ new WeakMap();
G0([
  W()
], yw.prototype, "conversationTitle", 2);
yw = G0([
  Q("wy-conversation-extended"),
  st()
], yw);
var v7 = Object.defineProperty, g7 = Object.getOwnPropertyDescriptor, Y0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$3"), Ld = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? g7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && v7(t, i, n), n;
}, "__decorateClass$b"), X0 = /* @__PURE__ */ c((o, t, i) => t.has(o) || Y0("Cannot " + i), "__accessCheck$3"), Yv = /* @__PURE__ */ c((o, t, i) => (X0(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$3"), b7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? Y0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$3"), Xv = /* @__PURE__ */ c((o, t, i, r) => (X0(o, t, "write to private field"), t.set(o, i), i), "__privateSet$3"), Ho, sc;
let po = (sc = class extends K {
  constructor() {
    super(...arguments), this.private = !0, this.rooms = !0, this.badgeQuery = new xe(this), this.handleBadgeRefresh = () => {
      this.badgeQuery.result.isRefetching || this.badgeQuery.result.refetch();
    }, this.handleRealtimeMessage = (t) => {
      this.handleBadgeRefresh();
    }, this.handleRealtimeSeenBy = (t) => {
      this.handleBadgeRefresh();
    }, b7(this, Ho);
  }
  async updated(t) {
    var i;
    t.has("weavyContext") && this.weavyContext && (this.badgeQuery.trackQuery(Ge(this.weavyContext, ["conversations", "badge"])), (i = Yv(this, Ho)) == null || i.call(this), this.weavyContext.subscribe(null, "message_created", this.handleRealtimeMessage), this.weavyContext.subscribe(null, "conversation_marked", this.handleBadgeRefresh), Xv(this, Ho, () => {
      var r, n;
      (r = this.weavyContext) == null || r.unsubscribe(null, "message_created", this.handleRealtimeMessage), (n = this.weavyContext) == null || n.unsubscribe(null, "conversation_marked", this.handleBadgeRefresh), Xv(this, Ho, void 0);
    }));
  }
  render() {
    const { data: t, isPending: i } = this.badgeQuery.result ?? {}, r = t ? (this.private ? t.private : 0) + (this.rooms ? t.rooms : 0) : 0, n = this.bot ? t ? t.bots : 0 : r;
    return y`
      ${!i && n > 0 ? y` <span class="wy-badge wy-badge-danger">${n}</span> ` : L}
    `;
  }
  connectedCallback() {
    super.connectedCallback(), this.weavyContext && this.requestUpdate("weavyContext");
  }
  disconnectedCallback() {
    var t;
    (t = Yv(this, Ho)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(sc, "WyBadge"), sc);
Ho = /* @__PURE__ */ new WeakMap();
po.styles = rt;
Ld([
  Kt({ context: ne, subscribe: !0 }),
  W()
], po.prototype, "weavyContext", 2);
Ld([
  v({ attribute: !1, type: Boolean })
], po.prototype, "private", 2);
Ld([
  v({ attribute: !1, type: Boolean })
], po.prototype, "rooms", 2);
Ld([
  v()
], po.prototype, "bot", 2);
po = Ld([
  Q("wy-badge")
], po);
var x7 = Object.defineProperty, C7 = Object.getOwnPropertyDescriptor, Gc = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? C7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && x7(t, i, n), n;
}, "__decorateClass$a"), ac;
let br = (ac = class extends wo(K) {
  constructor() {
    super(), this.productType = Vc.Messenger, this.conversationTypes = [
      Mt.ChatRoom,
      Mt.PrivateChat
    ], this.conversationId = null, this.conversationQuery = new xe(this), this.botQuery = new xe(this), this.persistState = new _l(this, this.bot || "messenger", ["conversationId"]), this.releaseFocusEvent = () => new CustomEvent("release-focus", { bubbles: !0, composed: !0 }), new hr(this, br.styles);
  }
  /**
   * Checks if a conversation belongs to Messenger.
   *
   * @param conversation {AppRef | AppType | number} - The conversation or id to check if it belongs to Messenger.
   * @returns Promise<Boolean>
   */
  async conversationBelongsToMessenger(t) {
    return this.weavyContext ? !!await Kx(this.weavyContext, t, this.conversationTypes) : !1;
  }
  /**
   * Set the active conversation.
   *
   * @param id {number} - The id of the conversation to select.
   */
  async selectConversation(t) {
    if (await this.conversationBelongsToMessenger(t))
      this.conversationId = t;
    else
      throw new Error(`The conversation ${t} is invalid.`);
  }
  /**
   * Deselects any active conversation.
   */
  clearConversation() {
    this.conversationId = null;
  }
  async willUpdate(t) {
    var i, r, n;
    super.willUpdate(t), (t.has("weavyContext") || t.has("bot")) && this.weavyContext && this.bot && (this.persistState.prefixKey = this.bot || "messenger", this.conversationTypes = [Mt.BotChat], this.botQuery.trackQuery(Ge(this.weavyContext, ["users", this.bot])), this.conversationId = null), (i = this.botQuery.result) != null && i.isPending || (this.botUser = (r = this.botQuery.result) == null ? void 0 : r.data), t.has("link") && (n = this.link) != null && n.app && this.conversationId !== this.link.app.id && this.selectConversation(this.link.app.id);
  }
  update(t) {
    super.update(t), (t.has("conversationId") || t.has("weavyContext")) && this.weavyContext && (this.conversationId ? this.conversationQuery.trackQuery(Qx(this.weavyContext, this.conversationId)) : this.conversationQuery.untrackQuery());
  }
  render() {
    var n;
    const { isPending: t } = ((n = this.weavyContext) == null ? void 0 : n.network) ?? { isPending: !0 }, { data: i, isPending: r } = this.conversationQuery.result ?? { isPending: t };
    return y`
      <div class="wy-messenger-layout">
        <wy-conversation-list
          class="wy-scroll-y"
          .conversationTypes=${this.conversationTypes}
          .bot=${this.bot}
          .avatarUser=${this.botUser}
          .name=${this.name}
          conversationId=${wt(this.conversationId !== null ? this.conversationId : void 0)}
          @conversation-selected=${(s) => this.selectConversation(s.detail.id)}
        ></wy-conversation-list>

        <div
          class="wy-messenger-conversation wy-scroll-y"
          data-conversation-id=${this.conversationId !== null ? this.conversationId : ""}
        >
          <wy-conversation-appbar
            .conversationId=${this.conversationId || void 0}
            .conversation=${i}
            @release-focus=${() => this.dispatchEvent(this.releaseFocusEvent())}
          >
            <span slot="action" class="wy-close-conversation">
              <wy-button kind="icon" @click=${() => this.clearConversation()}>
                <wy-icon name="back"></wy-icon>
              </wy-button>
              <wy-badge slot="badge" .bot=${this.bot}></wy-badge>
            </span>
          </wy-conversation-appbar>

          ${W8(
      this.conversationId ? r ? y` <wy-empty><wy-spinner></wy-spinner></wy-empty> ` : this.bot ? y` <wy-conversation
                      .conversationId=${this.conversationId}
                      .conversation=${i}
                    ></wy-conversation>` : y` <wy-conversation-extended
                      .conversationId=${this.conversationId}
                      .conversation=${i}
                    ></wy-conversation-extended>` : y` <wy-empty noNetwork>${C("Select a conversation")}</wy-empty> `
    )}
        </div>
      </div>
    `;
  }
}, c(ac, "WyMessenger"), ac);
br.styles = [ki, rt, Q8, Hc, fo];
Gc([
  W()
], br.prototype, "conversationTypes", 2);
Gc([
  v()
], br.prototype, "bot", 2);
Gc([
  W()
], br.prototype, "botUser", 2);
Gc([
  W()
], br.prototype, "conversationId", 2);
Gc([
  W()
], br.prototype, "conversation", 2);
br = Gc([
  Q("wy-messenger"),
  st()
], br);
const k7 = ".wy-meta{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-meta-sm{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)))}", $7 = Pt(k7), E7 = ".wy-notification.wy-read{opacity:var(--wy-opacity-muted, 60%);--wy-component-color: var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}", _7 = Pt(E7);
var P7 = Object.defineProperty, S7 = Object.getOwnPropertyDescriptor, Md = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? S7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && P7(t, i, n), n;
}, "__decorateClass$9"), cc;
let yo = (cc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.selected = !1, this.standalone = !1;
  }
  dispatchSelect(t) {
    const i = new CustomEvent("select", {
      detail: { notificationId: this.notificationId }
    });
    return this.dispatchEvent(i);
  }
  async dispatchLink(t) {
    const i = await this.whenWeavyContext();
    return x0(this, i, this.notification);
  }
  dispatchMark(t, i) {
    t.stopPropagation();
    const r = new CustomEvent("mark", {
      detail: { notificationId: this.notificationId, markAsRead: i }
    });
    return this.dispatchEvent(r);
  }
  dispatchClose() {
    if (this.standalone) {
      const t = new CustomEvent("close", {
        bubbles: !0
      });
      return this.dispatchEvent(t);
    }
    return !0;
  }
  render() {
    var h, w;
    const t = this.notification.created_at ? new Intl.DateTimeFormat((h = this.weavyContext) == null ? void 0 : h.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.notification.created_at)
    ) : "", i = this.notification.created_at ? Pd((w = this.weavyContext) == null ? void 0 : w.locale, new Date(this.notification.created_at)) : "", r = this.notification.actor, { title: n, titleHtml: s, detail: a } = C0(this.notification), l = this.standalone ? L : y`
          <div class="wy-item-actions wy-item-right">
            <wy-button
              kind="icon-inline"
              @click=${(m) => this.dispatchMark(m, !!this.notification.is_unread) && this.dispatchClose()}
              title=${this.notification.is_unread ? C("Mark as read") : C("Mark as unread")}
            >
              <wy-icon
                name=${this.notification.is_unread ? "read" : "unread"}
                color=${this.notification.is_unread ? "" : "secondary"}
              ></wy-icon>
            </wy-button>
          </div>
        `, d = this.standalone ? L : y`
          <time class="wy-meta" datetime=${this.notification.created_at.toString()} title=${t}>
            ${i}
          </time>
        `;
    return y`
      <div
        class=${Gt({
      "wy-item wy-item-lg wy-item-hover wy-notification": !0,
      "wy-unread": !this.standalone && !!this.notification.is_unread,
      "wy-read": !this.standalone && !this.notification.is_unread,
      "wy-active": !this.standalone && this.selected
    })}
        tabindex="0"
        @click=${(m) => this.dispatchSelect(m) && this.dispatchMark(m, !0) && this.dispatchClose() && this.dispatchLink(m)}
        @keydown=${Ne}
        @keyup=${li}
      >
        <wy-avatar
          class="wy-item-top"
          src=${wt(r == null ? void 0 : r.avatar_url)}
          name=${wt(r == null ? void 0 : r.display_name)}
          presence=${(r == null ? void 0 : r.presence) || "away"}
          ?isBot=${r == null ? void 0 : r.is_bot}
          id=${wt(r == null ? void 0 : r.id)}
          size=${48}
        ></wy-avatar>

        <div class="wy-item-rows wy-item-rows-compact">
          <div class="wy-item-row">
            <div class="wy-item-title-lg" title=${n + (a ? `: "${a}"` : "")}>
              ${s}${a ? y`: <q class="wy-item-quote">${a}</q> ` : L}
            </div>
          </div>
          <div class="wy-item-row"> 
          ${d} 
          ${l}
          </div>
        </div>

        ${this.standalone ? y`
              <wy-button
                kind="icon"
                @click=${(m) => this.dispatchMark(m, !!this.notification.is_unread) && this.dispatchClose()}
              >
                <wy-icon name="close"></wy-icon>
              </wy-button>
            ` : L}
      </div>
    `;
  }
}, c(cc, "WyNotificationListItem"), cc);
yo.styles = [we, k1, $7, _7];
Md([
  v({ type: Number })
], yo.prototype, "notificationId", 2);
Md([
  v({ type: Boolean, reflect: !0 })
], yo.prototype, "selected", 2);
Md([
  v({ type: Boolean })
], yo.prototype, "standalone", 2);
Md([
  v({ attribute: !1 })
], yo.prototype, "notification", 2);
yo = Md([
  Q("wy-notification-list-item"),
  st()
], yo);
var L7 = Object.defineProperty, M7 = Object.getOwnPropertyDescriptor, J0 = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$2"), Gw = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? M7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && L7(t, i, n), n;
}, "__decorateClass$8"), tb = /* @__PURE__ */ c((o, t, i) => t.has(o) || J0("Cannot " + i), "__accessCheck$2"), Jv = /* @__PURE__ */ c((o, t, i) => (tb(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$2"), T7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? J0("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$2"), tg = /* @__PURE__ */ c((o, t, i, r) => (tb(o, t, "write to private field"), t.set(o, i), i), "__privateSet$2"), Bo, lc;
let Nl = (lc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.typeFilter = ge.All, this.notificationsQuery = new pr(this), this.infiniteScroll = new yr(this), this.pagerRef = dt(), this.handleRefresh = (t) => {
      this.notificationsQuery.result.refetch();
    }, this.handlePresenceChange = (t) => {
      this.weavyContext && (Array.isArray(t) || (t = [parseInt(t)]), _t(this.weavyContext.queryClient, ["notifications", "list"], void 0, (i) => {
        const r = i.actor;
        r.presence = t.indexOf(r.id) != -1 ? "active" : "away", i.actor = r;
      }));
    }, T7(this, Bo);
  }
  async markAllRead() {
    var r, n, s;
    const t = await this.whenWeavyContext(), i = (n = J$(t, ge.All, (r = this.app) == null ? void 0 : r.id)) == null ? void 0 : n.id;
    await ((s = this.markNotificationsMutation) == null ? void 0 : s.mutate({ notificationId: i }));
  }
  async handleMark(t, i) {
    var r;
    await ((r = this.markNotificationMutation) == null ? void 0 : r.mutate({ markAsRead: t, notificationId: i }));
  }
  handleSelect(t) {
    this.notificationId = t.id;
  }
  async willUpdate(t) {
    var r, n;
    var i;
    super.willUpdate(t), (t.has("weavyContext") || t.has("typeFilter") || t.has("app")) && this.weavyContext && this.notificationsQuery.trackInfiniteQuery(X$(this.weavyContext, this.typeFilter, (r = this.app) == null ? void 0 : r.id)), (t.has("weavyContext") || t.has("app")) && this.weavyContext && (this.markNotificationsMutation = e8(this.weavyContext, (n = this.app) == null ? void 0 : n.id)), t.has("weavyContext") && this.weavyContext && (this.markNotificationMutation = z0(this.weavyContext), (i = Jv(this, Bo)) == null || i.call(this), this.weavyContext.subscribe(null, "online", this.handlePresenceChange), this.weavyContext.subscribe(null, "notification_created", this.handleRefresh), this.weavyContext.subscribe(null, "notification_updated", this.handleRefresh), this.weavyContext.subscribe(null, "notifications_marked", this.handleRefresh), tg(this, Bo, () => {
      var s, a, l, d;
      (s = this.weavyContext) == null || s.unsubscribe(null, "online", this.handlePresenceChange), (a = this.weavyContext) == null || a.unsubscribe(null, "notification_created", this.handleRefresh), (l = this.weavyContext) == null || l.unsubscribe(null, "notification_updated", this.handleRefresh), (d = this.weavyContext) == null || d.unsubscribe(null, "notifications_marked", this.handleRefresh), tg(this, Bo, void 0);
    }));
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.notificationsQuery.result, this.pagerRef.value);
  }
  renderNotifications(t, i) {
    if (i) {
      const r = i.pages.flatMap((n) => n.data);
      return Ve(
        r,
        (n) => n == null ? void 0 : n.id,
        (n) => [
          y`<wy-notification-list-item
              notificationId=${n.id}
              .notification=${n}
              .selected=${this.notificationId == n.id}
              @select=${(s) => this.handleSelect(n)}
              @mark=${(s) => this.handleMark(s.detail.markAsRead, s.detail.notificationId)}
            ></wy-notification-list-item>`
        ]
      );
    }
    return L;
  }
  render() {
    var r;
    const { data: t, isPending: i } = this.notificationsQuery.result ?? {};
    return y`
      ${this.user ? y`
            <div class="wy-pane-body">
                <wy-buttons tabs>
                  <wy-button
                    ?active=${this.typeFilter === ge.All}
                    @click=${() => this.typeFilter = ge.All}
                    kind="tab"
                    small
                  >
                    ${C("All")}
                  </wy-button>
                  <wy-button
                    ?active=${this.typeFilter === ge.Activity}
                    @click=${() => this.typeFilter = ge.Activity}
                    kind="tab"
                    small
                  >
                    ${C("Activities")}
                  </wy-button>
                  <wy-button
                    ?active=${this.typeFilter === ge.Mention}
                    @click=${() => this.typeFilter = ge.Mention}
                    kind="tab"
                    small
                  >
                    ${C("Mentions")}
                  </wy-button>
                  <wy-button
                    ?active=${this.typeFilter === ge.Reaction}
                    @click=${() => this.typeFilter = ge.Reaction}
                    kind="tab"
                    small
                  >
                    ${C("Reactions")}
                  </wy-button>
                </wy-buttons>
            </div>

            <div class="wy-notifications">
              ${!i && this.user && t ? (r = t.pages[0]) != null && r.count ? this.renderNotifications(this.user, t) : y`
                      <div class="wy-pane-body">
                        <div class="wy-pane-group">
                          <slot name="empty">
                            <wy-empty>${C("No updates yet.")}</wy-empty>
                          </slot>
                        </div>
                      </div>
                    ` : y`<wy-empty><wy-spinner padded></wy-spinner></wy-empty>`}
              <div ${it(this.pagerRef)} part="wy-pager"></div>
            </div>
          ` : y`<wy-empty class="wy-pane"><wy-spinner overlay></wy-spinner></wy-empty>`}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Jv(this, Bo)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(lc, "WyNotificationList"), lc);
Bo = /* @__PURE__ */ new WeakMap();
Nl.styles = [
  rt,
  vt`
      :host {
        position: relative;
      }
    `
];
Gw([
  v({ type: Number })
], Nl.prototype, "notificationId", 2);
Gw([
  v()
], Nl.prototype, "typeFilter", 2);
Nl = Gw([
  Q("wy-notification-list"),
  st()
], Nl);
var A7 = Object.defineProperty, z7 = Object.getOwnPropertyDescriptor, R7 = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? z7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && A7(t, i, n), n;
}, "__decorateClass$7"), dc;
let Zh = (dc = class extends wo(K) {
  constructor() {
    super(), this.contextualType = gi.Unknown, this.notificationsRef = dt(), new hr(this, Zh.styles);
  }
  /**
   * Mark all events as read.
   */
  markAllAsRead() {
    var t;
    (t = this.notificationsRef.value) == null || t.markAllRead();
  }
  render() {
    var t, i;
    return y`
      <header class="wy-appbars">
        <nav class="wy-appbar">
          <wy-avatar .src=${(t = this.user) == null ? void 0 : t.avatar_url} .name=${(i = this.user) == null ? void 0 : i.display_name} .size=${24}></wy-avatar>
          <div class="wy-appbar-text">${C("Notifications")}</div>
          <wy-button kind="icon" @click=${() => this.markAllAsRead()}>
            <wy-icon name="check-all"></wy-icon>
          </wy-button>
        </nav>
      </header>

      ${this.user ? y` <wy-notification-list ${it(this.notificationsRef)}></wy-notification-list> ` : y`
            <wy-empty>
              <wy-spinner padded></wy-spinner>
            </wy-empty>
          `}
    `;
  }
}, c(dc, "WyNotifications"), dc);
Zh.styles = [ki, rt, Hc, kd, fo];
Zh = R7([
  Q("wy-notifications"),
  st()
], Zh);
var I7 = Object.defineProperty, O7 = Object.getOwnPropertyDescriptor, Td = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? O7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && I7(t, i, n), n;
}, "__decorateClass$6"), hc;
let Yh = (hc = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.show = !1, this.viewportRef = dt();
  }
  close() {
    var t;
    this.show = !1, (t = this.viewportRef.value) == null || t.hidePopover();
  }
  handleClose(t) {
    t.newState === "closed" && (this.show = !1, this.dispatchEvent(new CustomEvent("hide")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  render() {
    return y`
      <div class="wy-toasts" tabindex="0" ${it(this.viewportRef)} ?hidden=${!this.show} popover>
        <slot></slot>
      </div>
    `;
  }
  willUpdate(t) {
    var i, r, n;
    t.has("show") && (this.show ? (i = this.viewportRef.value) == null || i.showPopover() : (r = this.viewportRef.value) == null || r.hidePopover()), t.has("show") && this.show && ((n = this.viewportRef.value) == null || n.focus());
  }
  firstUpdated(t) {
    var i, r;
    (i = this.viewportRef.value) == null || i.addEventListener("toggle", (n) => {
      this.handleClose(n);
    }), this.show && ((r = this.viewportRef.value) == null || r.showPopover());
  }
  disconnectedCallback() {
    super.disconnectedCallback();
  }
}, c(hc, "WyToasts"), hc);
Yh.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
Td([
  v({ type: Boolean })
], Yh.prototype, "show", 2);
Yh = Td([
  Q("wy-toasts")
], Yh);
var uc;
let wn = (uc = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.toastRef = dt(), this.show = !1, this.duration = wn.defaultDuration;
  }
  async close(t = !1) {
    this.show = !1, await new Promise((i) => requestAnimationFrame(i)), this.toastRef.value && await v2(this.toastRef.value, !1), this.dispatchEvent(new CustomEvent("closed", { detail: { silent: t } })), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }));
  }
  async willUpdate(t) {
    t.has("show") && (this.timeout && (window.clearTimeout(this.timeout), this.timeout = void 0), this.show && this.duration > 0 && this.duration < 1 / 0 && (this.timeout = window.setTimeout(() => this.close(!0), this.duration)));
  }
  render() {
    return y`
      <div
        ${it(this.toastRef)}
        class="wy-toast wy-fade ${this.show ? "wy-show" : ""}"
        @close=${() => this.close()}
        @keyup=${Sw}
      >
        <slot></slot>
      </div>
    `;
  }
  firstUpdated() {
    requestAnimationFrame(() => {
      this.show = !0;
    });
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.timeout && (window.clearTimeout(this.timeout), this.timeout = void 0);
  }
}, c(uc, "WyToast"), uc);
wn.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
wn.defaultDuration = 5e3;
Td([
  W()
], wn.prototype, "show", 2);
Td([
  v({ type: Number })
], wn.prototype, "duration", 2);
wn = Td([
  Q("wy-toast")
], wn);
var D7 = Object.defineProperty, F7 = Object.getOwnPropertyDescriptor, eb = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError$1"), Zc = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? F7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && D7(t, i, n), n;
}, "__decorateClass$5"), ib = /* @__PURE__ */ c((o, t, i) => t.has(o) || eb("Cannot " + i), "__accessCheck$1"), eg = /* @__PURE__ */ c((o, t, i) => (ib(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet$1"), N7 = /* @__PURE__ */ c((o, t, i) => t.has(o) ? eb("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd$1"), ig = /* @__PURE__ */ c((o, t, i, r) => (ib(o, t, "write to private field"), t.set(o, i), i), "__privateSet$1"), Uo, pc;
let xr = (pc = class extends wo(K) {
  constructor() {
    super(), this.contextualType = gi.Unknown, this.typeFilter = ge.All, this.appearance = "internal", this.requestUserPermission = !1, this.duration = wn.defaultDuration, this._notifications = [], this._nativeNotifications = [], this.handleEvent = (t) => {
      (this.typeFilter === ge.All || this.typeFilter === t.notification.type) && (t.action === "notification_deleted" ? (this.removeNotification(t.notification.id), this.closeNativeNotification(t.notification.id)) : (t.action === "notification_created" && t.notification.is_unread ? this.addOrUpdateNotification(t.notification) : this.updateNotification(t.notification), this.addOrUpdateNativeNotification(t.notification)));
    }, N7(this, Uo), new hr(this, xr.styles);
  }
  async addOrUpdateNotification(t) {
    if (!this.requestUserPermission || await this.hasUserPermission()) {
      const i = [...this._notifications], r = i.findIndex((n) => n.id === t.id);
      r !== -1 ? (i.splice(r, 1, t), this._notifications = i) : (i.push(t), this._notifications = i);
    }
  }
  async updateNotification(t) {
    if (!this.requestUserPermission || await this.hasUserPermission()) {
      const i = [...this._notifications], r = i.findIndex((n) => n.id === t.id);
      r !== -1 && (i.splice(r, 1, t), this._notifications = i);
    }
  }
  removeNotification(t) {
    const i = [...this._notifications], r = i.findIndex((n) => n.id === t);
    r !== -1 && (i.splice(r, 1), this._notifications = i);
  }
  async addOrUpdateNativeNotification(t) {
    var i;
    if (this.appearance !== "internal" && await this.hasUserPermission()) {
      const r = this.removeNativeNotification(t.id), n = t.actor, { title: s, detail: a } = C0(t), l = new Notification(s, {
        tag: `wy-${t.id}`,
        lang: (i = this.weavyContext) == null ? void 0 : i.locale,
        body: a,
        icon: n.avatar_url,
        // @ts-expect-error Property `renotify` not available in ts types yet
        renotify: r && e.notification.is_unread
      });
      l.onclick = async () => {
        const d = await this.whenWeavyContext();
        this.handleMark(!0, t.id), x0(this, d, t);
      }, l.onclose = () => {
        this.removeNativeNotification(t.id);
      }, this._nativeNotifications = [...this._nativeNotifications, l];
    }
  }
  removeNativeNotification(t) {
    const i = [...this._nativeNotifications], r = i.findIndex(
      (n) => n.tag === `wy-${t}`
    );
    return r ? (i.splice(r, 1), this._nativeNotifications = i, !0) : !1;
  }
  closeNativeNotification(t) {
    const i = this._nativeNotifications.findIndex(
      (r) => r.tag === `wy-${t}`
    );
    return i ? (this._nativeNotifications[i].close(), !0) : !1;
  }
  async hasUserPermission() {
    if (!("Notification" in window))
      console.error("This browser does not support desktop notifications");
    else if (!window.isSecureContext)
      console.error(
        `Desktop notifications can only be used in secure contexts. 
        See https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`
      );
    else {
      if (Notification.permission === "granted")
        return !0;
      if (Notification.permission !== "denied")
        return await Notification.requestPermission() === "granted";
    }
    return !1;
  }
  clearNotifications() {
    this._notifications = [];
  }
  async handleMark(t, i) {
    var r;
    await ((r = this.markNotificationMutation) == null ? void 0 : r.mutate({ markAsRead: t, notificationId: i }));
  }
  async willUpdate(t) {
    var i;
    super.willUpdate(t), t.has("weavyContext") && this.weavyContext && (this.markNotificationMutation = z0(this.weavyContext), (i = eg(this, Uo)) == null || i.call(this), this.weavyContext.subscribe(null, "notification_created", this.handleEvent), this.weavyContext.subscribe(null, "notification_updated", this.handleEvent), ig(this, Uo, () => {
      var r, n;
      (r = this.weavyContext) == null || r.unsubscribe(null, "notification_created", this.handleEvent), (n = this.weavyContext) == null || n.unsubscribe(null, "notification_updated", this.handleEvent), ig(this, Uo, void 0);
    })), (t.has("requestUserPermission") && this.requestUserPermission || t.has("appearance") && this.appearance !== "internal") && this.hasUserPermission();
  }
  render() {
    return y`
      ${this.user && this.appearance !== "native" ? y`
            <wy-toasts ?show=${!!this._notifications.length} @hide=${this.clearNotifications}>
              ${Ve(
      this._notifications,
      (t) => t.id,
      (t) => y`
                    <wy-toast
                      duration=${this.duration}
                      @closed=${(i) => {
        i.detail.silent || this.handleMark(!0, t.id), this.removeNotification(t.id);
      }}
                    >
                      <wy-notification-list-item standalone .notification=${t}></wy-notification-list-item>
                    </wy-toast>
                  `
    )}
            </wy-toasts>
          ` : L}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = eg(this, Uo)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(pc, "WyNotificationToasts"), pc);
Uo = /* @__PURE__ */ new WeakMap();
xr.styles = [ki, Dg, fo];
Zc([
  v()
], xr.prototype, "typeFilter", 2);
Zc([
  v()
], xr.prototype, "appearance", 2);
Zc([
  v({ type: Boolean })
], xr.prototype, "requestUserPermission", 2);
Zc([
  v({ type: Number })
], xr.prototype, "duration", 2);
Zc([
  W()
], xr.prototype, "_notifications", 2);
xr = Zc([
  Q("wy-notification-toasts"),
  st()
], xr);
function V7(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["posts", t.id],
    mutationFn: /* @__PURE__ */ c(async ({ id: s }) => {
      if (!(await o.post("/api/posts/" + s + "/trash", "POST", "")).ok)
        throw new Error();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.id,
      (a) => Object.assign(a, { is_trashed: !0 })
    ), { type: "trash", id: s.id }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.id,
        (l) => Object.assign(l, s)
      );
    }, "onSuccess")
    /*onError(error: Error, variables: MutatePostVariables, _context: PostMutationContextType) {
      //updateCacheItems(queryClient, { queryKey: options.mutationKey, exact: false }, variables.file.id, (existingFile: FileType) => Object.assign(existingFile, { is_trashed: false }))
    },*/
  };
  return n;
}
c(V7, "getTrashPostMutationOptions");
function H7(o, t) {
  return new kt(o.queryClient, V7(o, t));
}
c(H7, "getTrashPostMutation");
function B7(o, t) {
  const i = o.queryClient, n = {
    mutationKey: ["posts", t.id],
    mutationFn: /* @__PURE__ */ c(async ({ id: s }) => {
      const a = await o.post("/api/posts/" + s + "/restore", "POST", "");
      if (!a.ok) {
        const l = await a.json();
        throw new Error(l.detail || l.title, { cause: l });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: n.mutationKey, exact: !1 },
      s.id,
      (a) => Object.assign(a, { is_trashed: !1 })
    ), { type: "restore", file: s.id }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.id,
        (l) => Object.assign(l, { is_trashed: !1 })
      );
    }, "onSuccess")
    /*onError(error: Error, variables: MutatePostVariables, _context: any) {
      //updateCacheItems(queryClient, { queryKey: options.mutationKey, exact: false }, variables.file.id, (existingFile: FileType) => Object.assign(existingFile, { is_trashed: true }))
    },*/
  };
  return n;
}
c(B7, "getRestorePostMutationOptions");
function U7(o, t) {
  return new kt(o.queryClient, B7(o, t));
}
c(U7, "getRestorePostMutation");
function j7(o, t) {
  const i = o.queryClient, r = ["posts", t.id];
  return {
    mutationKey: r,
    mutationFn: /* @__PURE__ */ c(async ({ id: s, subscribe: a }) => {
      const l = await o.post(
        `/api/posts/${s}/${a ? "subscribe" : "unsubscribe"}`,
        "POST",
        ""
      );
      if (!l.ok) {
        const d = await l.json();
        throw new Error(d.detail || d.title, { cause: d });
      }
      return l.json();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ c(async (s) => (ut(
      i,
      { queryKey: r, exact: !1 },
      s.id,
      (a) => Object.assign(a, { is_subscribed: s.subscribe })
    ), { type: s.subscribe ? "subscribe" : "unsubscribe", id: s.id }), "onMutate"),
    onSuccess: /* @__PURE__ */ c((s, a) => {
      ut(
        i,
        { queryKey: r, exact: !1 },
        a.id,
        (l) => Object.assign(l, s)
      );
    }, "onSuccess"),
    onError() {
    }
  };
}
c(j7, "getSubscribePostMutationOptions");
function W7(o, t) {
  return new kt(o.queryClient, j7(o, t));
}
c(W7, "getSubscribePostMutation");
function q7(o, t) {
  return {
    initialPageParam: 0,
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["posts", t],
    queryFn: /* @__PURE__ */ c(async (r) => {
      const n = r.pageParam, s = "/api/apps/" + t + "/posts?orderby=id+desc&skip=" + n + "&take=25", l = await (await o.get(s)).json();
      return l.data = l.data || [], l;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ c((r, n) => {
      if ((r == null ? void 0 : r.end) < (r == null ? void 0 : r.count))
        return n.length * 25;
    }, "getNextPageParam")
  };
}
c(q7, "getPostsOptions");
function Q7(o, t) {
  return {
    mutationFn: /* @__PURE__ */ c(async (r) => (await o.post(
      "/api/posts/" + r.id,
      "PATCH",
      JSON.stringify({
        text: r.text,
        blobs: r.blobs,
        attachments: r.attachments,
        meeting_id: r.meetingId,
        options: r.pollOptions.filter((s) => s.text.trim() !== "").map((s) => ({ id: s.id, text: s.text })),
        embed_id: r.embed || null
      })
    )).json(), "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ c(async (r) => {
      _t(o.queryClient, ["posts", r.appId], r.id, (n) => {
        n.text = r.text, n.html = r.text;
      });
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((r, n) => {
      n.id && _t(o.queryClient, ["posts", n.appId], n.id, (s) => {
        s.text = r.text, s.html = r.html, s.attachments = r.attachments, s.embed = r.embed, s.meeting = r.meeting, s.updated_at = r.updated_at, s.updated_by = r.updated_by, s.options = r.options;
      });
    }, "onSuccess")
  };
}
c(Q7, "getUpdatePostMutationOptions");
function K7(o, t) {
  const i = o.queryClient;
  return {
    mutationFn: /* @__PURE__ */ c(async (n) => (await o.post(
      "/api/apps/" + n.appId + "/posts",
      "POST",
      JSON.stringify({
        text: n.text,
        blobs: n.blobs,
        meeting_id: n.meetingId,
        options: n.pollOptions.filter((a) => a.text.trim() !== "").map((a) => ({ text: a.text })),
        embed_id: n.embed
      })
    )).json(), "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ c(async (n) => {
      await i.cancelQueries({ queryKey: ["posts", n.appId] });
      const s = Math.random();
      if (n.user) {
        const a = {
          id: s,
          app: { id: -1 },
          is_subscribed: !0,
          is_trashed: !1,
          text: n.text,
          html: n.text,
          plain: n.text,
          temp: !0,
          created_by: n.user,
          created_at: (/* @__PURE__ */ new Date()).toUTCString(),
          attachments: { count: 0 },
          reactions: { count: 0 },
          is_starred: !1,
          comments: { count: 0 }
        };
        ur(i, ["posts", n.appId], a, void 0, { descending: !0 });
      }
      return { tempId: s };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ c((n, s, a) => {
      ur(i, ["posts", s.appId], n, a == null ? void 0 : a.tempId, { descending: !0 });
    }, "onSuccess")
  };
}
c(K7, "getAddPostMutationOptions");
var G7 = Object.defineProperty, Z7 = Object.getOwnPropertyDescriptor, rb = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? Z7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && G7(t, i, n), n;
}, "__decorateClass$4"), yc;
let Xh = (yc = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: {} });
    return this.dispatchEvent(t);
  }
  render() {
    return y`
      <div class="wy-item wy-item-lg">
        <div class="wy-item-body">${C("Post was trashed.")}</div>
        <wy-button @click=${() => this.dispatchRestore()} class="wy-button-variant">${C("Undo")}</wy-button>
      </div>
    `;
  }
}, c(yc, "WyPostTrashed"), yc);
Xh.styles = rt;
rb([
  v({ type: Number })
], Xh.prototype, "postId", 2);
Xh = rb([
  Q("wy-post-trashed"),
  st()
], Xh);
var Y7 = Object.defineProperty, X7 = Object.getOwnPropertyDescriptor, te = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? X7(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && Y7(t, i, n), n;
}, "__decorateClass$3"), wc;
let Ft = (wc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.html = "", this.text = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.commentCount = 0, this.seenBy = [], this.showComments = !1, this.loadComments = !1, this.highlight = !1, this.isCommentLinked = !1, this.previewRef = dt(), this.highlightRef = dt();
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t } });
    return this.dispatchEvent(i);
  }
  dispatchSubscribe(t) {
    const i = new CustomEvent("subscribe", { detail: { id: this.postId, subscribe: t } });
    return this.dispatchEvent(i);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.postId } });
    return this.dispatchEvent(t);
  }
  dispatchEdit(t) {
    const i = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(i);
  }
  handleCommentsClick(t) {
    t.preventDefault(), this.showComments = !this.showComments, this.loadComments = !0;
  }
  willUpdate(t) {
    t.has("link") && (this.highlight = !!(this.link && bu(this.link, lr.Post, { id: this.postId })), this.isCommentLinked = !!(this.link && b0(this.link, lr.Post, { id: this.postId }, lr.Comment))), t.has("isCommentLinked") && this.isCommentLinked && (this.loadComments = !0, this.showComments = !0);
  }
  render() {
    var a, l, d, h, w, m, f;
    const t = (a = this.attachments) == null ? void 0 : a.filter((b) => b.kind === "image" && b.thumbnail_url), i = (l = this.attachments) == null ? void 0 : l.filter((b) => b.kind !== "image" || !b.thumbnail_url), r = new Intl.DateTimeFormat((d = this.weavyContext) == null ? void 0 : d.locale, {
      dateStyle: "full",
      timeStyle: "short"
    }).format(new Date(this.createdAt)), n = Pd((h = this.weavyContext) == null ? void 0 : h.locale, new Date(this.createdAt)), s = this.modifiedAt && this.weavyContext ? new Intl.DateTimeFormat(this.weavyContext.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.modifiedAt)
    ) : "";
    return this.temp ? y`<div class="wy-post">
          <div class="wy-item wy-item-lg">
            <wy-avatar
              .src="${this.createdBy.avatar_url}"
              .isBot=${this.createdBy.is_bot}
              .size=${48}
              .name=${this.createdBy.display_name}
            ></wy-avatar>
            <div class="wy-item-rows">
              <div class="wy-item-row">
                <div class="wy-item-title"><span class="wy-placeholder">${this.createdBy.display_name}</span></div>
              </div>
              <div class="wy-item-row">
                <div class="wy-item-text">
                  <time class="wy-placeholder">${n}</time>
                </div>
              </div>
            </div>
          </div>
          <div class="wy-post-body">
            <div class="wy-content"><wy-skeleton .text=${this.text}></wy-skeleton></div>
          </div>
        </div>` : y`
          <div class="wy-post" part=${ue({ "wy-highlight": this.highlight && !this.isCommentLinked })} ${it(this.highlightRef)}>
            <div class="wy-item wy-item-lg">
              <wy-avatar .src="${this.createdBy.avatar_url}" .isBot=${this.createdBy.is_bot} .size=${48} .name=${this.createdBy.display_name}></wy-avatar>
              <div class="wy-item-rows">
                <div class="wy-item-row">
                  <div class="wy-item-title">${this.createdBy.display_name}</div>
                </div>
                <div class="wy-item-row">
                  <div class="wy-item-text">
                    <time datetime=${this.createdAt} title=${r}>${n}</time>
                    ${this.modifiedAt ? y`<time datetime="${this.modifiedAt}" title=${s}> · ${C("edited")}</time>` : L}
                  </div>
                  </div>
                </div>

                <div class="wy-item-actions wy-item-top">
                  <wy-dropdown>
                    ${this.isSubscribed ? y`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!1)}>
                            <wy-icon name="bell-off"></wy-icon>
                            ${C("Unsubscribe")}
                          </wy-dropdown-item>` : y`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!0)}>
                            <wy-icon name="bell"></wy-icon>
                            ${C("Subscribe")}
                          </wy-dropdown-item>`}
                    ${this.user && this.user.id === this.createdBy.id ? y`<wy-dropdown-item @click=${() => this.dispatchEdit(!0)}>
                            <wy-icon name="pencil"></wy-icon>
                            ${C("Edit")}
                          </wy-dropdown-item>` : L}
                    ${this.user && this.user.id === this.createdBy.id ? y`<wy-dropdown-item @click=${() => this.dispatchTrash()}>
                            <wy-icon name="trashcan"></wy-icon>
                            ${C("Trash")}
                          </wy-dropdown-item>` : L}
                  </wy-dropdown>
                </div>
              </div>
              <!-- image grid -->
              ${t && t.length ? y`<wy-image-grid
                      .images=${t}
                      @file-open=${(b) => {
      var g;
      (g = this.previewRef.value) == null || g.open(b.detail.fileId);
    }}
                    ></wy-image-grid>` : ""}

              <!-- embeds -->
              ${this.embed && ((w = this.hasFeatures) != null && w.embeds) ? y` <wy-embed class="wy-embed" .embed=${this.embed}></wy-embed> ` : L}

              <div class="wy-post-body">
                ${this.html ? y`<div class="wy-content">${no(this.html)}</div>` : ""}

                <!-- poll -->
                ${this.pollOptions && this.pollOptions.length > 0 ? y`
                        <wy-poll
                          .pollOptions=${this.pollOptions}
                          @vote=${(b) => this.dispatchVote(b.detail.id)}
                        ></wy-poll>
                      ` : L}

                <!-- files -->
                ${i && i.length ? y`<wy-attachments-list
                        .files=${i ?? []}
                        @file-open=${(b) => {
      var g;
      (g = this.previewRef.value) == null || g.open(b.detail.fileId);
    }}
                      ></wy-attachments-list>` : ""}

                <!-- meeting -->
                ${this.meeting ? y`<wy-meeting-card .meeting=${this.meeting}></wy-meeting-card>` : ""}
              </div>

              <div class="wy-post-footer">
                <div>
                  <!-- comment count -->
                  ${(m = this.hasFeatures) != null && m.comments ? y` <wy-button
                          kind="inline"
                          ?active=${this.showComments}
                          class="wy-meta"
                          color="inherit"
                          @click=${(b) => this.handleCommentsClick(b)}
                        >
                          ${this.commentCount !== 1 ? C(bt`${this.commentCount} comments`) : C("1 comment")}
                        </wy-button>` : L}
                </div>
                ${(f = this.hasFeatures) != null && f.reactions && this.app ? y`
                        <wy-reactions
                          line
                          .reactions=${this.reactions}
                          parentId=${this.app.id}
                          entityId=${this.postId}
                          messageType="posts"
                        ></wy-reactions>
                      ` : L}
              </div>

              <!-- comments -->
              ${this.loadComments ? y`
                      <div class="wy-post-comments" ?hidden=${!this.showComments}>
                        <wy-comment-list .parentId=${this.postId} .location=${"posts"}></wy-comment-list>
                      </div>
                    ` : L}
            </div>
            <wy-preview
              ${it(this.previewRef)}
              .files=${this.attachments}
              .isAttachment=${!0}
              ></wy-preview>
          </div>
        `;
  }
  updated(t) {
    var i;
    t.has("highlight") && this.highlight && ((i = this.highlightRef.value) == null || i.scrollIntoView({ block: "nearest" }));
  }
}, c(wc, "WyPostView"), wc);
Ft.styles = [
  rt,
  vt`
      :host {
        display: contents;
      }
    `
];
te([
  v({ type: Number })
], Ft.prototype, "postId", 2);
te([
  v({ type: Boolean })
], Ft.prototype, "temp", 2);
te([
  v({ attribute: !1 })
], Ft.prototype, "createdBy", 2);
te([
  v()
], Ft.prototype, "createdAt", 2);
te([
  v()
], Ft.prototype, "modifiedAt", 2);
te([
  v({ type: Boolean })
], Ft.prototype, "isSubscribed", 2);
te([
  v({ type: Boolean })
], Ft.prototype, "isTrashed", 2);
te([
  v()
], Ft.prototype, "html", 2);
te([
  v()
], Ft.prototype, "text", 2);
te([
  v({ type: Array })
], Ft.prototype, "attachments", 2);
te([
  v({ type: Array })
], Ft.prototype, "pollOptions", 2);
te([
  v({ attribute: !1 })
], Ft.prototype, "meeting", 2);
te([
  v({ attribute: !1 })
], Ft.prototype, "embed", 2);
te([
  v({ type: Array })
], Ft.prototype, "reactions", 2);
te([
  v({ attribute: !1 })
], Ft.prototype, "commentCount", 2);
te([
  v({ type: Array })
], Ft.prototype, "seenBy", 2);
te([
  W()
], Ft.prototype, "showComments", 2);
te([
  W()
], Ft.prototype, "loadComments", 2);
te([
  v({ type: Boolean })
], Ft.prototype, "highlight", 2);
te([
  W()
], Ft.prototype, "isCommentLinked", 2);
Ft = te([
  Q("wy-post-view"),
  st()
], Ft);
var J7 = Object.defineProperty, tE = Object.getOwnPropertyDescriptor, He = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? tE(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && J7(t, i, n), n;
}, "__decorateClass$2"), fc;
let Ce = (fc = class extends It(K) {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.text = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.seenBy = [], this.updatePostMutation = new Ze(this);
  }
  dispatchEdit(t) {
    const i = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(i);
  }
  async handleSubmit(t) {
    const i = await this.whenApp();
    this.updatePostMutation.mutate({
      id: this.postId,
      appId: i.id,
      text: t.detail.text,
      meetingId: t.detail.meetingId,
      blobs: t.detail.blobs,
      attachments: t.detail.attachments,
      pollOptions: t.detail.pollOptions,
      embed: t.detail.embed
    }), this.dispatchEdit(!1);
  }
  async willUpdate(t) {
    super.willUpdate(t), (t.has("weavyContext") || t.has("app")) && this.weavyContext && this.app && this.updatePostMutation.trackMutation(Q7(this.weavyContext, ["posts", this.app.id]));
  }
  render() {
    return y`
      <nav class="wy-item">
        <div class="wy-item-body">
          <div class="wy-item-title">${C("Edit post")}</div>
        </div>

        <wy-button kind="icon" @click=${() => this.dispatchEdit(!1)}>
          <wy-icon name="close"></wy-icon>
        </wy-button>
      </nav>
      <wy-editor
        editorLocation="apps"
        .text=${this.text}
        .embed=${this.embed}
        .options=${this.pollOptions}
        .attachments=${this.attachments ?? []}
        .parentId=${this.postId}
        .typing=${!1}
        .draft=${!1}
        placeholder=${C("Edit post...")}
        buttonText=${C("Update", { desc: "Button action to update" })}
        @submit=${(t) => this.handleSubmit(t)}></wy-editor>
    `;
  }
}, c(fc, "WyPostEdit"), fc);
Ce.styles = rt;
He([
  v({ type: Number })
], Ce.prototype, "postId", 2);
He([
  v({ type: Boolean })
], Ce.prototype, "temp", 2);
He([
  v({ attribute: !1 })
], Ce.prototype, "createdBy", 2);
He([
  v()
], Ce.prototype, "createdAt", 2);
He([
  v()
], Ce.prototype, "modifiedAt", 2);
He([
  v({ type: Boolean })
], Ce.prototype, "isSubscribed", 2);
He([
  v({ type: Boolean })
], Ce.prototype, "isTrashed", 2);
He([
  v()
], Ce.prototype, "text", 2);
He([
  v({ type: Array })
], Ce.prototype, "attachments", 2);
He([
  v({ type: Array })
], Ce.prototype, "pollOptions", 2);
He([
  v({ attribute: !1 })
], Ce.prototype, "meeting", 2);
He([
  v({ attribute: !1 })
], Ce.prototype, "embed", 2);
He([
  v({ type: Array })
], Ce.prototype, "reactions", 2);
He([
  v({ type: Array })
], Ce.prototype, "seenBy", 2);
Ce = He([
  Q("wy-post-edit"),
  st()
], Ce);
var eE = Object.defineProperty, iE = Object.getOwnPropertyDescriptor, de = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? iE(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && eE(t, i, n), n;
}, "__decorateClass$1"), mc;
let Zt = (mc = class extends K {
  constructor() {
    super(...arguments), this.exportParts = new Z(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.html = "", this.text = "", this.plain = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.commentCount = 0, this.seenBy = [], this.editing = !1;
  }
  dispatchVote(t) {
    const i = new CustomEvent("vote", { detail: { id: t, parentId: this.postId, parentType: "posts" } });
    return this.dispatchEvent(i);
  }
  dispatchSubscribe(t) {
    const i = new CustomEvent("subscribe", { detail: { id: this.postId, subscribe: t } });
    return this.dispatchEvent(i);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.postId } });
    return this.dispatchEvent(t);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: { id: this.postId } });
    return this.dispatchEvent(t);
  }
  render() {
    return y`
      ${this.isTrashed ? y`<wy-post-trashed
            class="wy-post"
            postId=${this.postId}
            @restore=${() => {
      this.dispatchRestore();
    }}></wy-post-trashed> ` : L}
      ${!this.isTrashed && this.editing ? y`<wy-post-edit
            class="wy-post"
            .postId=${this.postId}
            .text=${this.text}
            .embed=${this.embed}
            .pollOptions=${this.pollOptions}
            .attachments=${this.attachments}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}></wy-post-edit> ` : L}
      ${!this.isTrashed && !this.editing ? y`<wy-post-view
            id="${this.id}"
            .postId=${this.postId}
            .temp=${this.temp}
            .createdBy=${this.createdBy}
            .createdAt=${this.createdAt}
            .modifiedAt=${this.modifiedAt}
            .isSubscribed=${this.isSubscribed}
            .isTrashed=${this.isTrashed}
            .html=${this.html}
            .text=${this.plain}
            .attachments=${this.attachments ?? []}
            .meeting=${this.meeting}
            .pollOptions=${this.pollOptions}
            .embed=${this.embed}
            .reactions=${this.reactions}
            .commentCount=${this.commentCount}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}
            @subscribe=${(t) => {
      this.dispatchSubscribe(t.detail.subscribe);
    }}
            @trash=${() => {
      this.dispatchTrash();
    }}
            @vote=${(t) => {
      this.dispatchVote(t.detail.id);
    }}></wy-post-view> ` : L}
    `;
  }
}, c(mc, "WyPost"), mc);
Zt.styles = rt;
de([
  v({ type: Number })
], Zt.prototype, "postId", 2);
de([
  v({ type: Boolean })
], Zt.prototype, "temp", 2);
de([
  v({ attribute: !1 })
], Zt.prototype, "createdBy", 2);
de([
  v()
], Zt.prototype, "createdAt", 2);
de([
  v()
], Zt.prototype, "modifiedAt", 2);
de([
  v({ type: Boolean })
], Zt.prototype, "isSubscribed", 2);
de([
  v({ type: Boolean })
], Zt.prototype, "isTrashed", 2);
de([
  v()
], Zt.prototype, "html", 2);
de([
  v()
], Zt.prototype, "text", 2);
de([
  v()
], Zt.prototype, "plain", 2);
de([
  v({ attribute: !1 })
], Zt.prototype, "attachments", 2);
de([
  v({ type: Array })
], Zt.prototype, "pollOptions", 2);
de([
  v({ attribute: !1 })
], Zt.prototype, "meeting", 2);
de([
  v({ attribute: !1 })
], Zt.prototype, "embed", 2);
de([
  v({ type: Array })
], Zt.prototype, "reactions", 2);
de([
  v({ attribute: !1 })
], Zt.prototype, "commentCount", 2);
de([
  v({ type: Array })
], Zt.prototype, "seenBy", 2);
de([
  W()
], Zt.prototype, "editing", 2);
Zt = de([
  Q("wy-post")
], Zt);
var rE = Object.defineProperty, nE = Object.getOwnPropertyDescriptor, nb = /* @__PURE__ */ c((o) => {
  throw TypeError(o);
}, "__typeError"), oE = /* @__PURE__ */ c((o, t, i, r) => {
  for (var n = r > 1 ? void 0 : r ? nE(t, i) : t, s = o.length - 1, a; s >= 0; s--)
    (a = o[s]) && (n = (r ? a(t, i, n) : a(n)) || n);
  return r && n && rE(t, i, n), n;
}, "__decorateClass"), ob = /* @__PURE__ */ c((o, t, i) => t.has(o) || nb("Cannot " + i), "__accessCheck"), rg = /* @__PURE__ */ c((o, t, i) => (ob(o, t, "read from private field"), i ? i.call(o) : t.get(o)), "__privateGet"), sE = /* @__PURE__ */ c((o, t, i) => t.has(o) ? nb("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(o) : t.set(o, i), "__privateAdd"), ng = /* @__PURE__ */ c((o, t, i, r) => (ob(o, t, "write to private field"), t.set(o, i), i), "__privateSet"), jo, vc;
let Jh = (vc = class extends wo(K) {
  constructor() {
    super(), this.productType = Vc.Feeds, this.contextualType = gi.Posts, this.postsQuery = new pr(this), this.infiniteScroll = new yr(this), this.pagerRef = dt(), this.addPostMutation = new Ze(this), this.handleRealtimePostCreated = (t) => {
      var i;
      !this.weavyContext || t.post.app.id !== this.app.id || ((i = t.post.created_by) == null ? void 0 : i.id) === this.user.id || (t.post.created_by = t.actor, ur(this.weavyContext.queryClient, ["posts", this.app.id], t.post, void 0, {
        descending: !0
      }));
    }, this.handleRealtimeCommentCreated = (t) => {
      !this.weavyContext || t.actor.id === this.user.id || _t(
        this.weavyContext.queryClient,
        ["posts", this.app.id],
        t.comment.parent.id,
        (i) => {
          i.comments ? i.comments.count += 1 : i.comments = { count: 1 };
        }
      );
    }, this.handleRealtimeReactionAdded = (t) => {
      !this.weavyContext || t.actor.id === this.user.id || t.entity.type !== "post" || _t(
        this.weavyContext.queryClient,
        ["posts", this.app.id],
        t.entity.id,
        (i) => {
          i.reactions.data = [
            ...i.reactions.data || [],
            { content: t.reaction, created_by: t.actor }
          ];
        }
      );
    }, this.handleRealtimeReactionDeleted = (t) => {
      !this.weavyContext || t.actor.id === this.user.id || t.entity.type !== "post" || _t(
        this.weavyContext.queryClient,
        ["posts", this.app.id],
        t.entity.id,
        (i) => {
          i.reactions.data && (i.reactions.data = i.reactions.data.filter((r) => {
            var n;
            return ((n = r.created_by) == null ? void 0 : n.id) !== t.actor.id;
          }));
        }
      );
    }, sE(this, jo), new hr(this, Jh.styles);
  }
  handleSubmit(t) {
    this.app && this.addPostMutation.mutate({
      appId: this.app.id,
      text: t.detail.text,
      meetingId: t.detail.meetingId,
      blobs: t.detail.blobs,
      pollOptions: t.detail.pollOptions,
      embed: t.detail.embed,
      user: this.user
    });
  }
  willUpdate(t) {
    var i;
    if (super.willUpdate(t), (t.has("weavyContext") || t.has("app")) && this.weavyContext && this.app && this.postsQuery.trackInfiniteQuery(q7(this.weavyContext, this.app.id)), (t.has("weavyContext") || t.has("app")) && this.weavyContext && this.app) {
      this.addPostMutation.trackMutation(K7(this.weavyContext, ["posts", this.app.id])), this.subscribePostMutation = W7(this.weavyContext, this.app), this.removePostMutation = H7(this.weavyContext, this.app), this.restorePostMutation = U7(this.weavyContext, this.app), this.pollMutation = Ew(this.weavyContext, ["posts", this.app.id]), (i = rg(this, jo)) == null || i.call(this);
      const r = `a${this.app.id}`;
      this.weavyContext.subscribe(r, "post_created", this.handleRealtimePostCreated), this.weavyContext.subscribe(r, "comment_created", this.handleRealtimeCommentCreated), this.weavyContext.subscribe(r, "reaction_added", this.handleRealtimeReactionAdded), this.weavyContext.subscribe(r, "reaction_removed", this.handleRealtimeReactionDeleted), ng(this, jo, () => {
        var n, s, a, l;
        (n = this.weavyContext) == null || n.unsubscribe(r, "post_created", this.handleRealtimePostCreated), (s = this.weavyContext) == null || s.unsubscribe(r, "comment_created", this.handleRealtimeCommentCreated), (a = this.weavyContext) == null || a.unsubscribe(r, "reaction_added", this.handleRealtimeReactionAdded), (l = this.weavyContext) == null || l.unsubscribe(r, "reaction_removed", this.handleRealtimeReactionDeleted), ng(this, jo, void 0);
      });
    }
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.postsQuery.result, this.pagerRef.value);
  }
  render() {
    const { data: t, isPending: i } = this.postsQuery.result ?? {}, r = t == null ? void 0 : t.pages.flatMap((n) => n.data);
    return y`
      <wy-buttons floating reverse>
        <wy-notification-button-list></wy-notification-button-list>
      </wy-buttons>

      <div class="wy-posts">
        ${this.app && this.user && ro(an.Create, this.app.permissions) ? y`
              <div class="wy-post">
                <wy-editor
                  editorLocation="apps"
                  .typing=${!1}
                  .draft=${!0}
                  placeholder=${C("Create a post...")}
                  buttonText=${C("Post")}
                  @submit=${(n) => this.handleSubmit(n)}
                ></wy-editor>
              </div>
            ` : L}
        <!-- this.user ?? -->
        ${i ? y` <wy-empty><wy-spinner overlay></wy-spinner></wy-empty> ` : y`
              ${this.app && this.user && r ? Ve(
      r,
      (n) => n.id,
      (n) => {
        var s, a, l, d;
        return this.app && this.user ? y`<wy-post
                            id="post-${n.id}"
                            .postId=${n.id}
                            .temp=${n.temp || !1}
                            .createdBy=${n.created_by}
                            .createdAt=${n.created_at}
                            .modifiedAt=${n.updated_at}
                            .isSubscribed=${n.is_subscribed}
                            .isTrashed=${n.is_trashed}
                            .html=${n.html}
                            .text=${n.text}
                            .plain=${n.plain}
                            .attachments=${(s = n.attachments) == null ? void 0 : s.data}
                            .meeting=${n.meeting}
                            .pollOptions=${(a = n.options) == null ? void 0 : a.data}
                            .embed=${n.embed}
                            .reactions=${(l = n.reactions) == null ? void 0 : l.data}
                            .commentCount=${((d = n.comments) == null ? void 0 : d.count) || 0}
                            @subscribe=${(h) => {
          var w;
          (w = this.subscribePostMutation) == null || w.mutate({ id: h.detail.id, subscribe: h.detail.subscribe });
        }}
                            @trash=${(h) => {
          var w;
          (w = this.removePostMutation) == null || w.mutate({ id: h.detail.id });
        }}
                            @restore=${(h) => {
          var w;
          (w = this.restorePostMutation) == null || w.mutate({ id: h.detail.id });
        }}
                            @vote=${(h) => {
          var w;
          (w = this.pollMutation) == null || w.mutate({
            optionId: h.detail.id,
            parentType: h.detail.parentType,
            parentId: h.detail.parentId
          });
        }}
                          ></wy-post>` : L;
      }
    ) : y`<wy-empty><wy-spinner padded></wy-spinner></wy-empty>`}
              <div ${it(this.pagerRef)} class="wy-pager"></div>
            `}
      </div>
    `;
  }
  disconnectedCallback() {
    var t;
    (t = rg(this, jo)) == null || t.call(this), super.disconnectedCallback();
  }
}, c(vc, "WyPosts"), vc);
jo = /* @__PURE__ */ new WeakMap();
Jh.styles = [ki, rt, Hc, kd, fo];
Jh = oE([
  Q("wy-posts"),
  st()
], Jh);
const RE = new Map(Object.entries(ag(Mt))), IE = new Map(Object.entries(ag(sg)));
export {
  IE as AppTypes,
  RE as ConversationTypes,
  km as Weavy,
  Go as WeavyContext,
  ci as WeavyContextBase,
  hn as WyAttachment,
  kl as WyAttachmentsList,
  dn as WyAvatar,
  xc as WyAvatarGroup,
  po as WyBadge,
  Ol as WyBlobUpload,
  fr as WyButton,
  Cc as WyButtons,
  Kh as WyChat,
  Rc as WyCloudFiles,
  ie as WyComment,
  ce as WyCommentEdit,
  Tv as WyCommentEditor,
  Rl as WyCommentList,
  Nh as WyCommentTrashed,
  ye as WyCommentView,
  Gh as WyComments,
  Rt as WyContext,
  Ui as WyConversation,
  vr as WyConversationAppbar,
  yw as WyConversationExtended,
  gr as WyConversationList,
  Me as WyConversationListItem,
  Fl as WyConversationNew,
  Xe as WyDropdown,
  dy as WyDropdownDivider,
  $h as WyDropdownItem,
  Pl as WyDropdownOption,
  Tt as WyEditor,
  xl as WyEmbed,
  gl as WyEmpty,
  yn as WyFileItem,
  lo as WyFileMenu,
  Il as WyFileVersions,
  uo as WyFiles,
  ho as WyFilesAppbar,
  ji as WyFilesList,
  Wt as WyIcon,
  Cl as WyImageGrid,
  Ch as WyMeetingCard,
  Dt as WyMessage,
  Rv as WyMessageEditor,
  hi as WyMessageTyping,
  Bi as WyMessages,
  br as WyMessenger,
  Qh as WyNotificationBadge,
  lw as WyNotificationButtonList,
  Nl as WyNotificationList,
  yo as WyNotificationListItem,
  xr as WyNotificationToasts,
  Zh as WyNotifications,
  _c as WyOverlay,
  Ac as WyPdfViewer,
  Vh as WyPoll,
  zc as WyPollOption,
  Zt as WyPost,
  Ce as WyPostEdit,
  Xh as WyPostTrashed,
  Ft as WyPostView,
  Jh as WyPosts,
  bl as WyPresence,
  re as WyPreview,
  co as WyPreviewEmbed,
  Pc as WyPreviewIcon,
  Sc as WyPreviewImage,
  Fh as WyPreviewItem,
  ao as WyPreviewMedia,
  mr as WyPreviewText,
  xh as WyReactionItem,
  ae as WyReactions,
  El as WySheet,
  kh as WySkeleton,
  ln as WySpinner,
  wn as WyToast,
  Yh as WyToasts,
  Dl as WyTyping,
  Wi as WyUsersSearch
};
